<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lock & Scroll</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#00d4ff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Lock & Scroll">
    <meta name="application-name" content="Lock & Scroll">
    <meta name="description" content="Professional locksmith key database and inventory management">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Icons for iOS -->
    <link rel="apple-touch-icon" href="icons/icon-152.png">
    <link rel="apple-touch-icon" sizes="72x72" href="icons/icon-72.png">
    <link rel="apple-touch-icon" sizes="96x96" href="icons/icon-96.png">
    <link rel="apple-touch-icon" sizes="128x128" href="icons/icon-128.png">
    <link rel="apple-touch-icon" sizes="144x144" href="icons/icon-144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152.png">
    <link rel="apple-touch-icon" sizes="192x192" href="icons/icon-192.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-96.png">
    
    <style>
        :root {
            --bg: #0d0d1a;
            --card: #1a1a2e;
            --accent: #00d4ff;
            --accent2: #ff6b35;
            --text: #e8e8f0;
            --dim: #6b6b8d;
            --border: #2a2a4a;
            --success: #00c853;
            --warning: #ffc107;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            padding-bottom: 80px;
        }
        
        .header {
            background: linear-gradient(135deg, var(--card) 0%, #252545 100%);
            padding: 20px 16px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header h1 {
            font-size: 24px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .search-row {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 12px;
        }
        
        .sel {
            flex: 1;
            min-width: 100px;
        }
        
        .sel label {
            display: block;
            font-size: 10px;
            color: var(--dim);
            text-transform: uppercase;
            margin-bottom: 4px;
        }
        
        .sel select {
            width: 100%;
            padding: 10px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 14px;
        }
        
        .search-box {
            width: 100%;
            padding: 12px 16px;
            background: var(--bg);
            border: 2px solid var(--border);
            border-radius: 10px;
            color: var(--text);
            font-size: 16px;
        }
        
        .search-box:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        .stats {
            display: flex;
            gap: 16px;
            font-size: 12px;
            color: var(--dim);
            margin-top: 8px;
        }
        
        .stats span {
            color: var(--accent);
            font-weight: 600;
        }
        
        /* Key Cards */
        .list { padding: 16px; }
        
        .key-card {
            background: var(--card);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            border: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .key-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
        }
        
        .key-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }
        
        .key-pn {
            font-size: 20px;
            font-weight: 700;
            color: var(--accent);
            font-family: 'JetBrains Mono', 'Courier New', monospace;
        }
        
        .key-type {
            font-size: 11px;
            padding: 4px 8px;
            background: var(--accent2);
            color: white;
            border-radius: 4px;
            font-weight: 600;
        }
        
        .key-info {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            font-size: 13px;
            color: var(--dim);
            margin-bottom: 8px;
        }
        
        .key-info strong { color: var(--text); }
        
        .key-vehicles {
            font-size: 12px;
            color: var(--text);
            line-height: 1.5;
        }
        
        .stock-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }
        
        .stock-in { background: var(--success); color: white; }
        .stock-out { background: #ff4444; color: white; }
        .stock-low { background: var(--warning); color: #333; }
        
        /* Detail Panel */
        .detail-panel {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 220;
            overflow-y: auto;
        }
        
        .detail-panel.on { display: block; }
        
        .detail-header {
            background: var(--card);
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .back-btn {
            background: none;
            border: none;
            color: var(--accent);
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
        }
        
        .detail-content { padding: 16px; }
        
        .detail-section {
            background: var(--card);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--border);
        }
        
        .detail-section h3 {
            font-size: 12px;
            color: var(--accent);
            text-transform: uppercase;
            margin-bottom: 12px;
            letter-spacing: 1px;
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 6px;
            border-bottom: 1px solid var(--border);
            border-radius: 4px;
            margin: 2px 0;
        }

        .detail-row:nth-child(odd) {
            background: rgba(255, 255, 255, 0.03);
        }

        .detail-row:nth-child(even) {
            background: rgba(0, 0, 0, 0.15);
        }

        .detail-row:last-child { border-bottom: none; }
        
        .detail-label {
            color: var(--dim);
            font-size: 13px;
        }
        
        .detail-value {
            color: var(--text);
            font-size: 13px;
            font-weight: 500;
            text-align: right;
        }
        
        .detail-value.mono {
            font-family: 'JetBrains Mono', 'Courier New', monospace;
        }
        
        /* Stock Controls */
        .stock-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .stock-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .stock-btn.minus { background: #ff4444; color: white; }
        .stock-btn.plus { background: var(--success); color: white; }
        
        .stock-qty {
            font-size: 24px;
            font-weight: 700;
            color: var(--accent);
            min-width: 50px;
            text-align: center;
        }
        
        /* Lishi Section */
        .lishi-section {
            background: linear-gradient(135deg, #1e3a5f 0%, #1a1a2e 100%);
            border: 1px solid #2a4a6a;
        }
        
        /* Lishi Lookup Panel */
        .lishi-lookup-panel {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 210;
            overflow-y: auto;
        }
        
        .lishi-lookup-panel.on { display: block; }
        
        .lishi-lookup-header {
            background: linear-gradient(135deg, #1e3a5f 0%, var(--card) 100%);
            padding: 16px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .lishi-lookup-header > div {
            flex: 1;
        }

        .my-lishi-btn {
            padding: 8px 12px;
            background: var(--accent);
            color: var(--bg);
            border: none;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
        }

        .my-lishi-btn:hover {
            opacity: 0.9;
        }

        .my-lishi-btn.active {
            background: var(--accent2);
        }

        .lishi-lookup-title {
            font-size: 20px;
            color: var(--accent);
            margin-bottom: 4px;
        }
        
        .lishi-lookup-filters {
            padding: 16px;
            background: var(--card);
            border-bottom: 1px solid var(--border);
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .lishi-lookup-filters .sel {
            flex: 1;
            min-width: 100px;
        }
        
        .lishi-lookup-results {
            padding: 16px;
        }

        .my-lishi-section {
            margin-bottom: 24px;
        }

        .my-lishi-section-title {
            font-size: 14px;
            font-weight: 600;
            padding: 10px 12px;
            border-radius: 8px;
            margin-bottom: 12px;
        }

        .my-lishi-section-title.owned {
            background: rgba(0, 200, 83, 0.15);
            color: var(--success);
        }

        .my-lishi-section-title.not-owned {
            background: rgba(107, 107, 141, 0.15);
            color: var(--dim);
        }

        .my-lishi-empty {
            text-align: center;
            color: var(--dim);
            padding: 20px;
            font-style: italic;
        }

        .my-lishi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 10px;
        }

        .my-lishi-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .my-lishi-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        .my-lishi-card.owned {
            border-color: var(--success);
            background: rgba(0, 200, 83, 0.05);
        }

        .my-lishi-card-name {
            font-size: 14px;
            font-weight: 700;
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
            margin-bottom: 4px;
        }

        .my-lishi-card-keyways {
            font-size: 11px;
            color: var(--dim);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .my-lishi-card-codeseries {
            font-size: 10px;
            color: var(--accent2);
            margin-top: 4px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .lishi-vehicle-group {
            background: var(--card);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--border);
        }
        
        .lishi-vehicle-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }
        
        .lishi-vehicle-name {
            font-size: 18px;
            font-weight: 600;
            color: var(--text);
        }
        
        .lishi-vehicle-years {
            font-size: 13px;
            color: var(--accent);
            margin-top: 2px;
        }
        
        .lishi-keyway-badge {
            font-size: 12px;
            padding: 4px 10px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--accent2);
            font-family: 'JetBrains Mono', monospace;
        }
        
        .lishi-tool-row {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--bg);
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .lishi-tool-name-large {
            font-size: 24px;
            font-weight: 700;
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
            min-width: 80px;
        }
        
        .lishi-tool-missing {
            font-size: 14px;
            color: var(--dim);
            font-style: italic;
        }
        
        .lishi-direction-btns {
            display: flex;
            gap: 6px;
        }
        
        .lishi-dir-btn {
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            border: 2px solid var(--border);
            background: var(--bg);
            color: var(--dim);
            transition: all 0.2s;
        }
        
        .lishi-dir-btn:hover {
            border-color: var(--accent);
        }
        
        .lishi-dir-btn.active.cw {
            background: #4CAF50;
            border-color: #4CAF50;
            color: white;
        }
        
        .lishi-dir-btn.active.ccw {
            background: #2196F3;
            border-color: #2196F3;
            color: white;
        }
        
        .lishi-confirm-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--border);
        }
        
        .lishi-confirm-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
        }
        
        .lishi-confirm-status.confirmed {
            color: #4CAF50;
        }
        
        .lishi-confirm-status.unconfirmed {
            color: #ffc107;
        }
        
        .lishi-confirm-badge {
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }
        
        .lishi-confirm-badge.confirmed {
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
        }
        
        .lishi-confirm-badge.unconfirmed {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
        }
        
        .lishi-confirm-btn {
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            background: var(--success);
            color: white;
        }
        
        .lishi-confirm-btn:hover {
            opacity: 0.9;
        }
        
        .lishi-confirm-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .lishi-notes-row {
            margin-top: 10px;
            padding: 10px;
            background: rgba(255, 193, 7, 0.1);
            border-radius: 6px;
            border-left: 3px solid var(--warning);
        }
        
        .lishi-notes-label {
            font-size: 10px;
            color: var(--warning);
            text-transform: uppercase;
            margin-bottom: 4px;
        }
        
        .lishi-notes-text {
            font-size: 13px;
            color: var(--text);
            line-height: 1.4;
        }
        
        .lishi-actions-row {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }
        
        .lishi-action-btn {
            padding: 8px 12px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--dim);
            font-size: 12px;
            cursor: pointer;
        }
        
        .lishi-action-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }
        
        /* Lishi Tool Detail Panel */
        .lishi-detail-panel {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 250;
            overflow-y: auto;
        }
        
        .lishi-detail-panel.on { display: block; }
        
        .lishi-detail-header {
            background: linear-gradient(135deg, #1e3a5f 0%, var(--card) 100%);
            padding: 16px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .lishi-detail-header h2 {
            flex: 1;
            font-size: 20px;
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
        }
        
        .edit-tool-btn {
            padding: 8px 14px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-size: 13px;
            cursor: pointer;
        }
        
        .edit-tool-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }
        
        .lishi-detail-content {
            padding: 16px;
        }
        
        .lishi-detail-section {
            background: var(--card);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--border);
        }
        
        .lishi-detail-section h3 {
            font-size: 12px;
            color: var(--accent);
            text-transform: uppercase;
            margin-bottom: 12px;
            letter-spacing: 1px;
        }
        
        .lishi-spec-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }
        
        .lishi-spec-row:last-child { border-bottom: none; }
        
        .lishi-spec-label {
            color: var(--dim);
            font-size: 13px;
        }
        
        .lishi-spec-value {
            color: var(--text);
            font-size: 13px;
            font-weight: 500;
            text-align: right;
        }
        
        .lishi-spec-value.mono {
            font-family: 'JetBrains Mono', monospace;
        }
        
        .lishi-spec-value.success { color: var(--success); }
        .lishi-spec-value.warning { color: var(--warning); }
        .lishi-spec-value.danger { color: #ff4444; }
        
        .lishi-works-on-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 8px;
        }
        
        .lishi-works-on-item {
            text-align: center;
            padding: 12px 8px;
            background: var(--bg);
            border-radius: 8px;
            border: 1px solid var(--border);
        }
        
        .lishi-works-on-item.yes {
            border-color: var(--success);
            background: rgba(0, 200, 83, 0.1);
        }
        
        .lishi-works-on-item.no {
            border-color: #ff4444;
            background: rgba(255, 68, 68, 0.1);
        }
        
        .lishi-works-on-icon {
            font-size: 24px;
            margin-bottom: 4px;
        }
        
        .lishi-works-on-label {
            font-size: 11px;
            color: var(--dim);
        }
        
        .lishi-works-on-status {
            font-size: 12px;
            font-weight: 600;
            margin-top: 4px;
        }
        
        .lishi-works-on-item.yes .lishi-works-on-status { color: var(--success); }
        .lishi-works-on-item.no .lishi-works-on-status { color: #ff4444; }
        
        .lishi-keyway-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }
        
        .lishi-keyway-chip {
            padding: 6px 12px;
            background: var(--bg);
            border: 1px solid var(--accent2);
            border-radius: 6px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            color: var(--accent2);
        }
        
        .lishi-vehicle-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .lishi-vehicle-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: var(--bg);
            border-radius: 6px;
            margin-bottom: 6px;
            border: 1px solid var(--border);
        }
        
        .lishi-vehicle-item:hover {
            border-color: var(--accent);
        }
        
        .lishi-vehicle-info {
            flex: 1;
        }
        
        .lishi-vehicle-name-small {
            font-size: 13px;
            color: var(--text);
        }
        
        .lishi-vehicle-years-small {
            font-size: 11px;
            color: var(--dim);
        }
        
        .lishi-vehicle-direction {
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }
        
        .lishi-vehicle-direction.cw { background: #4CAF50; color: white; }
        .lishi-vehicle-direction.ccw { background: #2196F3; color: white; }
        .lishi-vehicle-direction.unset { background: var(--border); color: var(--dim); }
        
        .lishi-stock-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 16px;
            background: var(--bg);
            border-radius: 8px;
            margin-top: 8px;
        }
        
        .lishi-stock-toggle-btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border: 2px solid var(--border);
            background: var(--bg);
            color: var(--dim);
            transition: all 0.2s;
        }
        
        .lishi-stock-toggle-btn.active {
            border-color: var(--success);
            background: rgba(0, 200, 83, 0.2);
            color: var(--success);
        }
        
        .lishi-stock-toggle-btn.active.no {
            border-color: #ff4444;
            background: rgba(255, 68, 68, 0.2);
            color: #ff4444;
        }
        
        .lishi-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .lishi-keyway {
            font-size: 14px;
            color: var(--accent2);
            font-weight: 600;
        }
        
        .lishi-tool-display {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--bg);
            border-radius: 8px;
        }
        
        .lishi-tool-name {
            font-size: 20px;
            font-weight: 700;
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
        }
        
        .lishi-direction {
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            border: none;
        }
        
        .lishi-direction.cw { background: #4CAF50; color: white; }
        .lishi-direction.ccw { background: #2196F3; color: white; }
        
        .lishi-add-btn {
            padding: 10px 16px;
            background: var(--accent);
            color: var(--bg);
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
        }
        
        /* Pricing Section */
        .pricing-section {
            background: linear-gradient(135deg, #2a2a1a 0%, #1a1a2e 100%);
            border: 1px solid #4a4a2a;
        }
        
        .vendor-price-card {
            background: var(--bg);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            border: 1px solid var(--border);
        }
        
        .vendor-price-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .vendor-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--accent2);
        }
        
        .vendor-price-row {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            padding: 4px 0;
        }
        
        .vendor-price-row .label { color: var(--dim); }
        .vendor-price-row .value { color: var(--success); font-weight: 600; }
        
        .edit-prices-btn {
            padding: 4px 8px;
            background: none;
            border: 1px solid var(--border);
            color: var(--dim);
            border-radius: 4px;
            font-size: 11px;
            cursor: pointer;
        }
        
        .edit-prices-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }
        
        .add-vendor-price-btn {
            width: 100%;
            padding: 12px;
            background: var(--bg);
            border: 2px dashed var(--border);
            border-radius: 8px;
            color: var(--dim);
            font-size: 13px;
            cursor: pointer;
            margin-top: 8px;
        }
        
        .add-vendor-price-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }
        
        /* FCC Page */
        .fcc-panel {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 230;
            overflow-y: auto;
        }
        
        .fcc-panel.on { display: block; }
        
        .fcc-header {
            background: linear-gradient(135deg, #2a1a4a 0%, var(--card) 100%);
            padding: 16px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .fcc-id-display {
            font-size: 28px;
            font-weight: 700;
            color: var(--accent2);
            font-family: 'JetBrains Mono', monospace;
            margin: 12px 0;
        }
        
        .fcc-keys-list { padding: 16px; }
        
        .fcc-key-item {
            background: var(--card);
            padding: 14px;
            border-radius: 10px;
            margin-bottom: 10px;
            border: 1px solid var(--border);
            cursor: pointer;
        }
        
        .fcc-key-item:hover { border-color: var(--accent); }
        
        /* FID Manager */
        .fid-panel {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 200;
            overflow-y: auto;
        }
        
        .fid-panel.on { display: block; }
        
        .fid-header {
            background: linear-gradient(135deg, #1a3a2a 0%, var(--card) 100%);
            padding: 16px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .fid-title {
            font-size: 20px;
            color: var(--success);
            margin-bottom: 8px;
        }
        
        .fid-search {
            width: 100%;
            padding: 12px;
            background: var(--bg);
            border: 2px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 14px;
            margin-top: 12px;
        }
        
        .fid-list { padding: 16px; }
        
        .fid-card {
            background: var(--card);
            padding: 14px;
            border-radius: 10px;
            margin-bottom: 10px;
            border: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .fid-info h4 {
            font-size: 18px;
            font-weight: 700;
            color: var(--accent2);
            font-family: 'JetBrains Mono', monospace;
        }
        
        .fid-info p {
            font-size: 12px;
            color: var(--dim);
            margin-top: 4px;
        }
        
        .fid-number {
            font-size: 14px;
            font-weight: 700;
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
            padding: 4px 10px;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid var(--accent);
            border-radius: 6px;
            margin-bottom: 4px;
        }
        
        .fid-number.unassigned {
            color: var(--dim);
            background: var(--bg);
            border-color: var(--border);
            font-style: italic;
        }
        
        .fid-card {
            background: var(--card);
            padding: 14px;
            border-radius: 10px;
            margin-bottom: 10px;
            border: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .fid-card-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .fid-card-actions {
            display: flex;
            gap: 6px;
        }
        
        .fid-prefix-item {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
        }
        
        .fid-prefix-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .fid-prefix-code {
            font-size: 18px;
            font-weight: 700;
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
        }
        
        .fid-prefix-name {
            font-size: 13px;
            color: var(--text);
        }
        
        .fid-prefix-makes {
            font-size: 11px;
            color: var(--dim);
            margin-top: 4px;
        }
        
        .fid-prefix-actions {
            display: flex;
            gap: 6px;
        }
        
        .fid-prefix-btn {
            padding: 4px 8px;
            background: none;
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--dim);
            font-size: 11px;
            cursor: pointer;
        }
        
        .fid-prefix-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }
        
        .fid-prefix-btn.danger:hover {
            border-color: #ff4444;
            color: #ff4444;
        }

        /* Vehicle Panel */
        .vehicle-panel {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 200;
            overflow-y: auto;
        }

        .vehicle-panel.on { display: block; }

        .vehicle-header {
            background: linear-gradient(135deg, #2a4a5a 0%, var(--card) 100%);
            padding: 16px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .vehicle-title {
            font-size: 20px;
            color: #4da6ff;
            margin-bottom: 8px;
        }

        .vehicle-search {
            width: 100%;
            padding: 12px;
            background: var(--bg);
            border: 2px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 14px;
            margin-top: 12px;
        }

        .vehicle-filters {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .vehicle-filter-select {
            flex: 1;
            min-width: 100px;
            padding: 10px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-size: 13px;
        }

        .vehicle-list { padding: 16px; }

        .vehicle-card {
            background: var(--card);
            padding: 14px;
            border-radius: 10px;
            margin-bottom: 10px;
            border: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
        }

        .vehicle-card:hover {
            border-color: #4da6ff;
            transform: translateX(4px);
        }

        .vehicle-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .vehicle-card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
        }

        .vehicle-card-years {
            font-size: 12px;
            color: #4da6ff;
            background: rgba(77, 166, 255, 0.1);
            padding: 2px 8px;
            border-radius: 4px;
        }

        .vehicle-card-info {
            font-size: 12px;
            color: var(--dim);
        }

        .vehicle-stock-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        .vehicle-stock-badge.in-stock {
            background: rgba(0, 255, 136, 0.15);
            color: var(--success);
        }

        .vehicle-stock-badge.out-of-stock {
            background: rgba(255, 68, 68, 0.15);
            color: #ff4444;
        }

        /* Vehicle Detail View */
        .vehicle-detail-panel {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 210;
            overflow-y: auto;
        }

        .vehicle-detail-panel.on { display: block; }

        .vehicle-detail-header {
            background: linear-gradient(135deg, #2a4a5a 0%, var(--card) 100%);
            padding: 16px;
            border-bottom: 1px solid var(--border);
        }

        .vehicle-detail-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 4px;
        }

        .vehicle-detail-subtitle {
            font-size: 14px;
            color: #4da6ff;
        }

        .vehicle-info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            padding: 16px;
            background: var(--card);
            margin: 16px;
            border-radius: 10px;
            border: 1px solid var(--border);
        }

        .vehicle-info-item {
            padding: 8px;
        }

        .vehicle-info-label {
            font-size: 11px;
            color: var(--dim);
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .vehicle-info-value {
            font-size: 14px;
            color: var(--text);
            font-weight: 500;
        }

        .vehicle-info-value.highlight {
            color: #4da6ff;
            font-family: 'JetBrains Mono', monospace;
        }

        .vehicle-section {
            margin: 16px;
        }

        .vehicle-section-title {
            font-size: 16px;
            font-weight: 600;
            color: #4da6ff;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
        }

        .fccid-group {
            margin-bottom: 8px;
            border: 1px solid var(--border);
            border-radius: 10px;
            overflow: hidden;
            background: var(--card);
        }
        .fccid-group-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 14px;
            cursor: pointer;
            background: rgba(0,212,255,0.06);
            user-select: none;
        }
        .fccid-group-title {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .fccid-group-arrow {
            font-size: 10px;
            color: var(--dim);
            transition: transform 0.2s;
        }
        .fccid-group.collapsed .fccid-group-arrow {
            transform: rotate(-90deg);
        }
        .fccid-group-keys {
            padding: 4px 8px 8px;
        }
        .fccid-group.collapsed .fccid-group-keys {
            display: none;
        }

        .vehicle-key-card {
            background: var(--card);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            border: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .vehicle-key-card.in-stock {
            border-color: var(--success);
            background: rgba(0, 255, 136, 0.05);
        }

        .vehicle-key-info h4 {
            font-size: 14px;
            color: var(--text);
            margin-bottom: 4px;
        }

        .vehicle-key-info p {
            font-size: 12px;
            color: var(--dim);
        }

        .vehicle-key-stock {
            text-align: right;
        }

        .vehicle-key-stock .count {
            font-size: 18px;
            font-weight: 700;
            color: var(--success);
        }

        .vehicle-key-stock .label {
            font-size: 10px;
            color: var(--dim);
        }

        .vehicle-tools-section {
            background: var(--card);
            padding: 16px;
            border-radius: 10px;
            border: 1px solid var(--border);
        }

        .vehicle-tool-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }

        .vehicle-tool-item:last-child {
            border-bottom: none;
        }

        .vehicle-tool-name {
            font-size: 14px;
            color: var(--text);
        }

        .vehicle-tool-status {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .vehicle-tool-status.owned {
            background: rgba(0, 255, 136, 0.15);
            color: var(--success);
        }

        .vehicle-tool-status.needed {
            background: rgba(255, 170, 0, 0.15);
            color: #ffaa00;
        }

        /* Add Inventory Panel */
        .add-inventory-panel, .purchase-history-panel {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 310;
            overflow-y: auto;
        }
        
        .add-inventory-panel.on, .purchase-history-panel.on { display: block; }
        
        .add-inv-header {
            background: linear-gradient(135deg, #2d5a3d 0%, var(--card) 100%);
            padding: 16px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .add-inv-title {
            flex: 1;
            font-size: 20px;
            color: var(--success);
        }
        
        .add-inv-header-buttons {
            display: flex;
            gap: 8px;
        }

        .history-btn {
            padding: 8px 12px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-size: 12px;
            cursor: pointer;
        }
        
        .add-inv-content {
            padding: 16px;
        }
        
        .add-inv-step-title {
            font-size: 16px;
            color: var(--accent);
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
        }
        
        .add-inv-section {
            margin-bottom: 16px;
        }
        
        .add-inv-section label {
            display: block;
            font-size: 12px;
            color: var(--dim);
            margin-bottom: 6px;
            text-transform: uppercase;
        }
        
        .add-inv-input, .add-inv-select {
            width: 100%;
            padding: 12px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 14px;
        }
        
        .add-inv-input:focus, .add-inv-select:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        .add-inv-filters {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .add-inv-filters .add-inv-select {
            flex: 1;
            min-width: 100px;
        }
        
        .add-inv-toggle-row {
            display: flex;
            gap: 8px;
        }
        
        .add-inv-toggle {
            flex: 1;
            padding: 10px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--dim);
            font-size: 13px;
            cursor: pointer;
        }
        
        .add-inv-toggle.active {
            background: var(--accent);
            color: var(--bg);
            border-color: var(--accent);
        }
        
        .add-inv-results {
            margin-top: 16px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .add-inv-placeholder {
            text-align: center;
            color: var(--dim);
            padding: 30px;
            font-size: 13px;
        }
        
        .add-inv-result-item {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
            cursor: pointer;
        }
        
        .add-inv-result-item:hover {
            border-color: var(--accent);
        }
        
        .add-inv-result-pn {
            font-size: 16px;
            font-weight: 600;
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
        }
        
        .add-inv-result-details {
            font-size: 12px;
            color: var(--dim);
            margin-top: 4px;
        }
        
        .add-inv-result-vehicles {
            font-size: 11px;
            color: var(--text);
            margin-top: 6px;
        }
        
        .add-inv-result-tags {
            display: flex;
            gap: 6px;
            margin-top: 8px;
            flex-wrap: wrap;
        }
        
        .add-inv-tag {
            font-size: 10px;
            padding: 3px 8px;
            background: var(--bg);
            border-radius: 4px;
            color: var(--dim);
        }
        
        .add-inv-tag.oem {
            background: rgba(0, 200, 83, 0.2);
            color: var(--success);
        }
        
        .add-inv-tag.aftermarket {
            background: rgba(255, 193, 7, 0.2);
            color: var(--warning);
        }
        
        .add-inv-selected-key {
            background: var(--card);
            border: 2px solid var(--accent);
            border-radius: 10px;
            padding: 16px;
            margin-bottom: 20px;
        }
        
        .add-inv-qty-row {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .add-inv-qty-btn {
            width: 44px;
            height: 44px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 20px;
            cursor: pointer;
        }
        
        .add-inv-qty-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }
        
        .add-inv-qty {
            width: 80px;
            text-align: center;
            font-size: 20px;
            font-weight: 600;
        }
        
        .add-inv-price-row {
            display: flex;
            align-items: center;
        }
        
        .add-inv-currency {
            padding: 12px;
            background: var(--card);
            border: 1px solid var(--border);
            border-right: none;
            border-radius: 8px 0 0 8px;
            color: var(--dim);
        }
        
        .add-inv-price-row .add-inv-input {
            border-radius: 0 8px 8px 0;
        }
        
        .add-inv-buttons {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }
        
        .add-inv-btn {
            flex: 1;
            padding: 14px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border: none;
        }
        
        .add-inv-btn.primary {
            background: var(--success);
            color: white;
        }
        
        .add-inv-btn.secondary {
            background: var(--card);
            border: 1px solid var(--border);
            color: var(--text);
        }
        
        .add-inv-success {
            text-align: center;
            padding: 40px 20px;
        }
        
        .add-inv-success-icon {
            width: 80px;
            height: 80px;
            background: var(--success);
            color: white;
            font-size: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
        }
        
        .add-inv-success-title {
            font-size: 24px;
            color: var(--success);
            margin-bottom: 12px;
        }
        
        .add-inv-success-details {
            font-size: 14px;
            color: var(--dim);
            line-height: 1.6;
        }
        
        /* Bulk Inventory - Selected Items */
        .bulk-selected-items {
            margin-top: 16px;
        }

        .bulk-selected-item {
            background: var(--card);
            border: 1px solid var(--accent);
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .bulk-selected-item-info {
            flex: 1;
        }

        .bulk-selected-item-pn {
            font-size: 16px;
            font-weight: 600;
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
        }

        .bulk-selected-item-detail {
            font-size: 12px;
            color: var(--dim);
            margin-top: 4px;
        }

        .bulk-remove-btn {
            width: 32px;
            height: 32px;
            background: rgba(255, 107, 53, 0.2);
            border: none;
            border-radius: 6px;
            color: var(--accent2);
            font-size: 16px;
            cursor: pointer;
            flex-shrink: 0;
            margin-left: 8px;
        }

        .bulk-add-more-btn {
            width: 100%;
            padding: 14px;
            background: var(--card);
            border: 1px dashed var(--accent);
            border-radius: 10px;
            color: var(--accent);
            font-size: 14px;
            cursor: pointer;
            margin-top: 12px;
        }

        .bulk-add-more-btn:hover {
            background: rgba(0, 212, 255, 0.1);
        }

        .bulk-search-box {
            margin-top: 12px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 12px;
        }

        .bulk-search-box .add-inv-input {
            margin-bottom: 8px;
        }

        .bulk-search-results {
            max-height: 250px;
            overflow-y: auto;
        }

        .bulk-next-btn {
            width: 100%;
            padding: 14px;
            background: var(--success);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 16px;
        }

        .bulk-next-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* Step 2 - Detail cards */
        .bulk-detail-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .bulk-detail-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }

        .bulk-detail-card-pn {
            font-size: 18px;
            font-weight: 700;
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
        }

        .bulk-detail-card-fcc {
            font-size: 12px;
            color: var(--dim);
        }

        /* Sub-item splitting for same FCC ID */
        .bulk-sub-items {
            margin-top: 12px;
        }

        .bulk-sub-item {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
        }

        .bulk-sub-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .bulk-sub-item-pn {
            font-size: 14px;
            font-weight: 600;
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
        }

        .bulk-sub-item-desc {
            font-size: 11px;
            color: var(--dim);
        }

        .bulk-sub-remove {
            background: none;
            border: none;
            color: var(--accent2);
            font-size: 14px;
            cursor: pointer;
            padding: 4px;
        }

        .bulk-add-variant-btn {
            width: 100%;
            padding: 10px;
            background: var(--bg);
            border: 1px dashed var(--border);
            border-radius: 8px;
            color: var(--accent);
            font-size: 13px;
            cursor: pointer;
            margin-top: 8px;
        }

        .bulk-add-variant-btn:hover {
            border-color: var(--accent);
        }

        .bulk-field-row {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }

        .bulk-field-row > * {
            flex: 1;
        }

        .bulk-field-row label {
            display: block;
            font-size: 11px;
            color: var(--dim);
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .bulk-shared-fields {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border);
        }

        .bulk-shared-fields-title {
            font-size: 14px;
            color: var(--text);
            margin-bottom: 12px;
            font-weight: 600;
        }

        /* Purchase History */
        .purchase-history-filters {
            padding: 12px 16px;
            background: var(--card);
            border-bottom: 1px solid var(--border);
            display: flex;
            gap: 8px;
        }
        
        .purchase-history-filters .add-inv-input {
            flex: 1;
        }
        
        .purchase-history-filters .add-inv-select {
            width: 150px;
        }
        
        .purchase-history-list {
            padding: 16px;
        }
        
        .purchase-item {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 14px;
            margin-bottom: 10px;
        }
        
        .purchase-item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }
        
        .purchase-item-pn {
            font-size: 16px;
            font-weight: 600;
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
        }
        
        .purchase-item-date {
            font-size: 11px;
            color: var(--dim);
        }
        
        .purchase-item-details {
            display: flex;
            gap: 16px;
            font-size: 13px;
            color: var(--text);
        }
        
        .purchase-item-vendor {
            color: var(--accent2);
        }
        
        .purchase-item-total {
            color: var(--success);
            font-weight: 600;
        }
        
        /* PWA Install Banner */
        .pwa-install-banner {
            display: none;
            position: fixed;
            bottom: 70px;
            left: 16px;
            right: 16px;
            background: linear-gradient(135deg, var(--card) 0%, #252545 100%);
            border: 1px solid var(--accent);
            border-radius: 12px;
            padding: 16px;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 212, 255, 0.3);
        }
        
        .pwa-install-banner.show { display: block; }
        
        .pwa-install-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .pwa-install-icon {
            font-size: 32px;
        }
        
        .pwa-install-text {
            flex: 1;
        }
        
        .pwa-install-text h4 {
            font-size: 14px;
            color: var(--text);
            margin-bottom: 4px;
        }
        
        .pwa-install-text p {
            font-size: 12px;
            color: var(--dim);
        }
        
        .pwa-install-btn {
            padding: 10px 16px;
            background: var(--accent);
            color: var(--bg);
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 13px;
            cursor: pointer;
        }
        
        .pwa-install-close {
            position: absolute;
            top: 8px;
            right: 8px;
            background: none;
            border: none;
            color: var(--dim);
            font-size: 18px;
            cursor: pointer;
            padding: 4px;
        }
        
        /* Add Custom Key Panel */
        .add-custom-key-panel {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 320;
            overflow-y: auto;
        }
        
        .add-custom-key-panel.on { display: block; }
        
        .custom-vehicle-row {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
        }
        
        .custom-vehicle-row-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .custom-vehicle-row-title {
            font-size: 12px;
            color: var(--accent);
            font-weight: 600;
        }
        
        .custom-vehicle-remove {
            background: none;
            border: none;
            color: #ff4444;
            font-size: 18px;
            cursor: pointer;
            padding: 0 4px;
        }
        
        .custom-vehicle-fields {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }
        
        .custom-vehicle-fields input,
        .custom-vehicle-fields select {
            padding: 8px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-size: 13px;
        }
        
        .custom-vehicle-years {
            display: flex;
            gap: 8px;
            grid-column: span 2;
        }

        .custom-vehicle-fields input[id*="ModelOther"] {
            grid-column: span 2;
        }
        
        .custom-vehicle-years input {
            flex: 1;
        }
        
        /* Custom Keys List in Settings */
        .custom-key-item {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
            cursor: pointer;
        }
        
        .custom-key-item:hover {
            border-color: var(--accent);
        }
        
        .custom-key-item-pn {
            font-size: 14px;
            font-weight: 600;
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
        }
        
        .custom-key-item-details {
            font-size: 12px;
            color: var(--text);
            margin-top: 4px;
        }
        
        .custom-key-item-vehicles {
            font-size: 11px;
            color: var(--dim);
            margin-top: 4px;
        }
        
        .fid-btn {
            padding: 8px 14px;
            background: var(--accent);
            color: var(--bg);
            border: none;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
        }
        
        /* Settings Panel */
        .settings-panel {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 200;
            overflow-y: auto;
        }
        
        .settings-panel.on { display: block; }
        
        .settings-header {
            background: var(--card);
            padding: 16px;
            border-bottom: 1px solid var(--border);
        }
        
        .settings-content { padding: 16px; }
        
        .settings-section {
            background: var(--card);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--border);
        }
        
        .settings-section h3 {
            font-size: 14px;
            color: var(--accent);
            margin-bottom: 12px;
        }
        
        .settings-btn {
            width: 100%;
            padding: 14px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 14px;
            cursor: pointer;
            margin-bottom: 8px;
            text-align: left;
        }
        
        .settings-btn:hover { border-color: var(--accent); }
        .settings-btn.danger { border-color: #ff4444; color: #ff4444; }
        
        .settings-search {
            width: 100%;
            padding: 10px 12px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 14px;
        }
        
        .settings-search:focus {
            outline: none;
            border-color: var(--accent);
        }

        .settings-nav-btn {
            display: flex;
            align-items: center;
            gap: 12px;
            width: 100%;
            padding: 14px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            text-align: left;
        }

        .settings-nav-btn:hover {
            border-color: var(--accent);
            background: var(--bg);
        }

        .settings-nav-icon {
            font-size: 24px;
        }

        .settings-nav-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .settings-nav-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
        }

        .settings-nav-desc {
            font-size: 11px;
            color: var(--dim);
        }

        .settings-nav-arrow {
            font-size: 16px;
            color: var(--dim);
        }
        
        /* Lishi Inventory Item */
        .lishi-inventory-item {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
        }
        
        .lishi-inventory-item.in-stock {
            border-left: 3px solid var(--success);
        }
        
        .lishi-inventory-item.not-in-stock {
            border-left: 3px solid #ff4444;
            opacity: 0.7;
        }
        
        .lishi-inv-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }
        
        .lishi-inv-name {
            font-size: 18px;
            font-weight: 700;
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
        }
        
        .lishi-inv-stock-badge {
            font-size: 10px;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: 600;
        }
        
        .lishi-inv-stock-badge.in-stock {
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
        }
        
        .lishi-inv-stock-badge.not-in-stock {
            background: rgba(255, 68, 68, 0.2);
            color: #ff4444;
        }
        
        .lishi-inv-details {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            font-size: 11px;
            color: var(--dim);
            margin-bottom: 8px;
        }
        
        .lishi-inv-detail {
            background: var(--card);
            padding: 3px 8px;
            border-radius: 4px;
        }
        
        .lishi-inv-detail.warning {
            background: rgba(255, 193, 7, 0.2);
            color: var(--warning);
        }
        
        .lishi-inv-keyways {
            font-size: 12px;
            color: var(--text);
            margin-bottom: 8px;
        }
        
        .lishi-inv-keyways span {
            display: inline-block;
            background: var(--card);
            padding: 2px 6px;
            border-radius: 4px;
            margin-right: 4px;
            margin-bottom: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
            color: var(--accent2);
        }
        
        .lishi-inv-notes {
            font-size: 12px;
            color: var(--dim);
            font-style: italic;
            margin-bottom: 8px;
        }
        
        .lishi-inv-actions {
            display: flex;
            gap: 8px;
        }
        
        .lishi-inv-btn {
            padding: 6px 10px;
            background: none;
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--dim);
            font-size: 11px;
            cursor: pointer;
        }
        
        .lishi-inv-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }
        
        .lishi-inv-btn.danger:hover {
            border-color: #ff4444;
            color: #ff4444;
        }
        
        /* Vendor List in Settings */
        .vendor-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--bg);
            border-radius: 8px;
            margin-bottom: 8px;
            border: 1px solid var(--border);
        }
        
        .vendor-list-item .name {
            font-size: 14px;
            color: var(--text);
        }
        
        .vendor-list-item .type {
            font-size: 11px;
            color: var(--dim);
            margin-top: 2px;
        }
        
        .vendor-list-item .remove-btn {
            padding: 6px 10px;
            background: none;
            border: 1px solid #ff4444;
            color: #ff4444;
            border-radius: 4px;
            font-size: 11px;
            cursor: pointer;
        }
        
        .vendor-list-item .remove-btn:hover {
            background: #ff4444;
            color: white;
        }
        
        .vendor-list-item.default .remove-btn {
            display: none;
        }
        
        .add-vendor-btn {
            width: 100%;
            padding: 12px;
            background: var(--accent);
            color: var(--bg);
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 8px;
        }

        /* Tools Panel */
        .tools-panel {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 200;
            overflow-y: auto;
        }

        .tools-panel.on { display: block; }

        /* Generic Panel (Incomplete Vehicles, etc.) */
        .panel {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 210;
            overflow-y: auto;
        }

        .panel.on { display: block; }

        .panel-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: var(--card);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 1;
        }

        .panel-header h2 {
            margin: 0;
            font-size: 18px;
            color: var(--text);
        }

        .tools-header {
            background: linear-gradient(135deg, #1e3a5f 0%, var(--card) 100%);
            padding: 16px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .tools-title {
            font-size: 18px;
            font-weight: 600;
            flex: 1;
        }

        .tools-content {
            padding: 16px;
            padding-bottom: 80px;
        }

        .tools-section-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .tools-section-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .tools-section-card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .tools-section-icon {
            font-size: 32px;
        }

        .tools-section-title {
            font-size: 18px;
            font-weight: 600;
        }

        .tools-section-desc {
            color: var(--dim);
            font-size: 14px;
        }

        /* Programmers Panel */
        .programmers-panel {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 205;
            overflow-y: auto;
        }

        .programmers-panel.on { display: block; }

        .programmers-header {
            background: linear-gradient(135deg, #1e3a5f 0%, var(--card) 100%);
            padding: 16px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .programmers-header-top {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .programmers-title {
            font-size: 18px;
            font-weight: 600;
            flex: 1;
        }

        .platform-tabs {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 4px;
        }

        .platform-tab {
            padding: 8px 16px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 20px;
            color: var(--dim);
            font-size: 13px;
            white-space: nowrap;
            cursor: pointer;
        }

        .platform-tab.active {
            background: var(--accent);
            border-color: var(--accent);
            color: var(--bg);
        }

        .programmers-filters {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .filter-chip {
            padding: 6px 12px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 16px;
            color: var(--dim);
            font-size: 12px;
            cursor: pointer;
        }

        .filter-chip.active {
            background: var(--accent);
            border-color: var(--accent);
            color: var(--bg);
        }

        .programmers-content {
            padding: 16px;
            padding-bottom: 80px;
        }

        .tools-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .tool-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
        }

        .tool-card-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .tool-card-name {
            font-size: 16px;
            font-weight: 600;
        }

        .tool-card-pn {
            color: var(--dim);
            font-size: 12px;
        }

        .tool-status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        .tool-status-badge.owned {
            background: rgba(76, 175, 80, 0.2);
            color: #4caf50;
        }

        .tool-status-badge.wishlist {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
        }

        .tool-status-badge.not-owned {
            background: rgba(158, 158, 158, 0.2);
            color: #9e9e9e;
        }

        .tool-card-platforms {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            margin: 8px 0;
        }

        .platform-badge {
            padding: 2px 8px;
            background: rgba(76, 139, 245, 0.2);
            border-radius: 10px;
            color: var(--accent);
            font-size: 11px;
        }

        .tool-card-meta {
            display: flex;
            justify-content: space-between;
            color: var(--dim);
            font-size: 12px;
        }

        /* Platform Management */
        .platform-mgmt-panel {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 210;
            overflow-y: auto;
        }

        .platform-mgmt-panel.on { display: block; }

        .platform-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .platform-card-info {
            flex: 1;
        }

        .platform-card-name {
            font-size: 16px;
            font-weight: 600;
        }

        .platform-card-mfr {
            color: var(--dim);
            font-size: 12px;
        }

        .platform-card-count {
            color: var(--accent);
            font-size: 12px;
            margin-top: 4px;
        }

        .platform-card-actions {
            display: flex;
            gap: 8px;
        }

        .platform-action-btn {
            padding: 8px 12px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--dim);
            font-size: 12px;
            cursor: pointer;
        }

        .platform-action-btn.delete {
            color: #ff5252;
            border-color: #ff5252;
        }

        /* Tool Detail Panel */
        .tool-detail-panel {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 215;
            overflow-y: auto;
        }

        .tool-detail-panel.on { display: block; }

        .tool-detail-header {
            background: linear-gradient(135deg, #1e3a5f 0%, var(--card) 100%);
            padding: 16px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .tool-detail-title {
            font-size: 18px;
            font-weight: 600;
            flex: 1;
        }

        .tool-detail-content {
            padding: 16px;
            padding-bottom: 80px;
        }

        .tool-detail-section {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .tool-detail-section h3 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--accent);
        }

        .tool-status-toggle {
            display: flex;
            gap: 8px;
        }

        .tool-status-toggle-btn {
            flex: 1;
            padding: 12px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--dim);
            font-size: 13px;
            cursor: pointer;
        }

        .tool-status-toggle-btn.active {
            background: rgba(76, 175, 80, 0.2);
            border-color: #4caf50;
            color: #4caf50;
        }

        .tool-status-toggle-btn.wishlist.active {
            background: rgba(255, 193, 7, 0.2);
            border-color: #ffc107;
            color: #ffc107;
        }

        .tool-status-toggle-btn.not-owned.active {
            background: rgba(158, 158, 158, 0.2);
            border-color: #9e9e9e;
            color: #9e9e9e;
        }

        .tool-platforms-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tool-platform-item {
            padding: 8px 12px;
            background: rgba(76, 139, 245, 0.1);
            border: 1px solid var(--accent);
            border-radius: 8px;
            color: var(--accent);
            font-size: 13px;
        }

        .tool-vehicle-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .tool-vehicle-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 12px;
            background: var(--bg);
            border-radius: 6px;
        }

        .tool-job-types {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .job-type-badge {
            padding: 4px 10px;
            background: rgba(156, 39, 176, 0.2);
            border-radius: 12px;
            color: #ce93d8;
            font-size: 12px;
        }

        .tool-notes-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .tool-note-item {
            padding: 12px;
            background: var(--bg);
            border-radius: 6px;
            font-size: 13px;
        }

        .tool-note-item.cross-ref {
            border-left: 3px solid var(--accent);
        }

        .add-note-btn {
            width: 100%;
            padding: 10px;
            background: transparent;
            border: 1px dashed var(--border);
            border-radius: 6px;
            color: var(--dim);
            font-size: 13px;
            cursor: pointer;
            margin-top: 8px;
        }

        /* Add/Edit Tool Form */
        .add-tool-panel {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 220;
            overflow-y: auto;
        }

        .add-tool-panel.on { display: block; }

        .tool-form-section {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .tool-form-section h3 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--accent);
        }

        .tool-form-row {
            margin-bottom: 12px;
        }

        .tool-form-row label {
            display: block;
            font-size: 12px;
            color: var(--dim);
            margin-bottom: 4px;
        }

        .tool-form-row input,
        .tool-form-row select,
        .tool-form-row textarea {
            width: 100%;
            padding: 10px 12px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--fg);
            font-size: 14px;
        }

        .tool-form-row textarea {
            min-height: 80px;
            resize: vertical;
        }

        .platform-checkbox-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 8px;
        }

        .platform-checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: var(--bg);
            border-radius: 6px;
        }

        .platform-checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
        }

        .status-radio-group {
            display: flex;
            gap: 8px;
        }

        .status-radio-item {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 10px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            cursor: pointer;
        }

        .status-radio-item.selected {
            border-color: var(--accent);
            background: rgba(76, 139, 245, 0.1);
        }

        .status-radio-item input[type="radio"] {
            display: none;
        }

        .job-type-checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .job-type-checkbox-item {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 12px;
            background: var(--bg);
            border-radius: 6px;
        }

        .vehicle-app-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .vehicle-app-item {
            display: flex;
            gap: 8px;
            align-items: center;
            padding: 8px;
            background: var(--bg);
            border-radius: 6px;
        }

        .vehicle-app-item input,
        .vehicle-app-item select {
            flex: 1;
            padding: 8px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--fg);
            font-size: 13px;
        }

        .vehicle-app-item input[type="number"] {
            width: 70px;
            flex: none;
        }

        .remove-vehicle-app-btn {
            padding: 6px 10px;
            background: transparent;
            border: 1px solid #ff5252;
            border-radius: 4px;
            color: #ff5252;
            font-size: 12px;
            cursor: pointer;
        }

        .add-vehicle-app-btn {
            width: 100%;
            padding: 10px;
            background: transparent;
            border: 1px dashed var(--border);
            border-radius: 6px;
            color: var(--dim);
            font-size: 13px;
            cursor: pointer;
        }

        .tool-form-actions {
            display: flex;
            gap: 12px;
            padding: 16px;
            position: sticky;
            bottom: 0;
            background: var(--bg);
            border-top: 1px solid var(--border);
        }

        .tool-form-actions button {
            flex: 1;
            padding: 14px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
        }

        .tool-form-cancel {
            background: var(--card);
            border: 1px solid var(--border);
            color: var(--dim);
        }

        .tool-form-save {
            background: var(--accent);
            border: none;
            color: var(--bg);
        }

        /* Add Platform Modal */
        .add-platform-modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.8);
            z-index: 230;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .add-platform-modal.on {
            display: flex;
        }

        .add-platform-modal-content {
            background: var(--card);
            border-radius: 12px;
            padding: 20px;
            width: 100%;
            max-width: 400px;
        }

        .add-platform-modal h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .add-platform-modal-actions {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }

        .add-platform-modal-actions button {
            flex: 1;
            padding: 12px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
        }

        /* Wishlist Panel */
        .wishlist-panel {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 208;
            overflow-y: auto;
        }

        .wishlist-panel.on { display: block; }

        /* Fixed Home Button */
        .home-btn-fixed {
            position: fixed;
            top: 12px;
            right: 20px;
            width: 44px;
            height: 44px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 50%;
            color: var(--accent);
            font-size: 20px;
            cursor: pointer;
            z-index: 300;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .home-btn-fixed:hover {
            background: var(--accent);
            color: var(--bg);
        }

        /* Bottom Nav */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card);
            border-top: 1px solid var(--border);
            display: flex;
            z-index: 150;
        }
        
        .nav-btn {
            flex: 1;
            padding: 12px;
            background: none;
            border: none;
            color: var(--dim);
            font-size: 12px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }
        
        .nav-btn.active { color: var(--accent); }
        .nav-btn .icon { font-size: 20px; }
        
        /* Cloud Sync Styles */
        .cloud-sync-section {
            margin-bottom: 16px;
        }
        
        .sync-status-box {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--bg);
            border-radius: 8px;
            margin-bottom: 12px;
            border: 1px solid var(--border);
        }
        
        .sync-status-box.connected {
            border-color: var(--accent);
        }
        
        .sync-icon-wrap {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            background: rgba(102, 102, 128, 0.2);
        }
        
        .sync-status-box.connected .sync-icon-wrap {
            background: rgba(0, 212, 170, 0.2);
        }
        
        .sync-info-wrap {
            flex: 1;
        }
        
        .sync-status-text {
            font-weight: 600;
            font-size: 14px;
        }
        
        .sync-status-box.connected .sync-status-text {
            color: var(--accent);
        }
        
        .sync-detail-text {
            font-size: 11px;
            color: var(--dim);
            margin-top: 2px;
        }
        
        .sync-btn {
            padding: 12px 16px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 8px;
        }
        
        .sync-btn.google {
            background: #4285f4;
            color: white;
        }
        
        .sync-btn.google:hover {
            background: #3574e0;
        }
        
        .sync-btn.sync-now {
            background: var(--accent);
            color: var(--bg);
        }
        
        .sync-btn.signout {
            background: var(--bg);
            color: var(--text);
            border: 1px solid var(--border);
        }
        
        .user-info-box {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--bg);
            border-radius: 8px;
            margin-bottom: 12px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--bg);
            font-size: 16px;
        }
        
        .user-avatar img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .user-details .user-name {
            font-weight: 600;
            font-size: 14px;
        }
        
        .user-details .user-email {
            font-size: 11px;
            color: var(--dim);
        }
        
        .last-sync-text {
            text-align: center;
            font-size: 11px;
            color: var(--dim);
            padding: 8px;
        }
        
        .last-sync-text span {
            color: var(--accent);
        }
        
        .sync-items-list {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border);
        }
        
        .sync-item-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 0;
            font-size: 13px;
        }
        
        .sync-item-row .count {
            color: var(--accent);
            font-weight: 600;
            font-family: 'JetBrains Mono', monospace;
        }
        
        .syncing-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            color: var(--accent2);
            font-size: 12px;
            padding: 8px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .spinning {
            animation: spin 1s linear infinite;
            display: inline-block;
        }

        /* Shared Users Section */
        .shared-users-section {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border);
        }

        .shared-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .shared-status-badge {
            font-size: 10px;
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: 500;
        }

        .shared-status-badge.enabled {
            background: rgba(0, 212, 255, 0.2);
            color: var(--accent);
        }

        .authorized-users-list {
            background: var(--bg);
            border-radius: 8px;
            margin: 8px 0;
            max-height: 150px;
            overflow-y: auto;
        }

        .authorized-user-row {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border-bottom: 1px solid var(--border);
            font-size: 13px;
        }

        .authorized-user-row:last-child {
            border-bottom: none;
        }

        .user-email-text {
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .owner-badge {
            font-size: 10px;
            background: var(--accent2);
            color: var(--bg);
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 8px;
        }

        .remove-user-btn {
            background: none;
            border: none;
            color: #ff6b6b;
            font-size: 18px;
            cursor: pointer;
            padding: 0 4px;
            margin-left: 8px;
            opacity: 0.7;
        }

        .remove-user-btn:hover {
            opacity: 1;
        }

        .add-user-row {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }

        .add-user-input {
            flex: 1;
            padding: 8px 12px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-size: 13px;
        }

        .add-user-btn {
            padding: 8px 16px;
            background: var(--accent);
            border: none;
            border-radius: 6px;
            color: var(--bg);
            font-weight: 600;
            cursor: pointer;
        }

        .add-user-btn:hover {
            opacity: 0.9;
        }

        .sync-btn.danger-outline {
            background: transparent;
            border: 1px solid #ff6b6b;
            color: #ff6b6b;
        }

        .sync-btn.danger-outline:hover {
            background: rgba(255, 107, 107, 0.1);
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.8);
            z-index: 300;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal.on { display: flex; }
        
        .modal-content {
            background: var(--card);
            border-radius: 12px;
            padding: 20px;
            max-width: 400px;
            width: 100%;
            border: 1px solid var(--border);
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-title {
            font-size: 18px;
            color: var(--accent);
            margin-bottom: 16px;
        }
        
        .modal-input-group {
            margin-bottom: 12px;
        }
        
        .modal-input-group label {
            display: block;
            font-size: 11px;
            color: var(--dim);
            text-transform: uppercase;
            margin-bottom: 6px;
        }
        
        .modal-input {
            width: 100%;
            padding: 10px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-size: 14px;
        }
        
        .modal-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        /* Keyway Multi-Select Styles */
        .keyway-select-container {
            position: relative;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 8px;
            min-height: 44px;
        }

        .keyway-select-container:focus-within {
            border-color: var(--accent);
        }

        .keyway-selected-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 6px;
        }

        .keyway-selected-tags:empty {
            margin-bottom: 0;
        }

        .keyway-tag {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            background: var(--accent);
            color: var(--bg);
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .keyway-tag-remove {
            cursor: pointer;
            opacity: 0.7;
            font-size: 14px;
        }

        .keyway-tag-remove:hover {
            opacity: 1;
        }

        .keyway-search-input {
            width: 100%;
            padding: 6px 8px;
            background: transparent;
            border: none;
            color: var(--text);
            font-size: 14px;
            outline: none;
        }

        .keyway-dropdown {
            display: none;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 8px;
        }

        .keyway-dropdown.show {
            display: block;
        }

        .keyway-select-container.open .keyway-dropdown {
            display: block;
        }

        .keyway-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px;
            cursor: pointer;
            font-size: 13px;
            border-bottom: 1px solid var(--border);
        }

        .keyway-option:last-child {
            border-bottom: none;
        }

        .keyway-option:hover {
            background: var(--bg);
        }

        .keyway-option.selected {
            background: rgba(0, 212, 255, 0.1);
        }

        .keyway-option-checkbox {
            width: 16px;
            height: 16px;
            border: 2px solid var(--border);
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .keyway-option.selected .keyway-option-checkbox {
            background: var(--accent);
            border-color: var(--accent);
        }

        .keyway-option.selected .keyway-option-checkbox::after {
            content: '';
            color: var(--bg);
            font-size: 10px;
            font-weight: bold;
        }

        .keyway-option-label {
            flex: 1;
        }

        .keyway-option-count {
            font-size: 11px;
            color: var(--dim);
        }

        .keyway-option.add-new-keyway {
            background: rgba(74, 144, 217, 0.15);
            border-bottom: 1px solid var(--border);
        }

        .keyway-option.add-new-keyway:hover {
            background: rgba(74, 144, 217, 0.25);
        }

        .keyway-option.add-new-keyway .keyway-option-checkbox {
            background: #4a90d9;
            border-color: #4a90d9;
            color: white;
            font-weight: bold;
            font-size: 12px;
        }

        textarea.modal-input {
            resize: vertical;
            min-height: 80px;
            font-family: inherit;
        }

        .modal-input:disabled {
            background: var(--card);
            color: var(--accent);
            font-weight: 600;
            cursor: not-allowed;
            opacity: 1;
        }

        .modal-btns {
            display: flex;
            gap: 8px;
            margin-top: 16px;
        }
        
        .modal-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
        }
        
        .modal-btn.primary {
            background: var(--accent);
            color: var(--bg);
        }
        
        .modal-btn.secondary {
            background: var(--bg);
            color: var(--text);
            border: 1px solid var(--border);
        }
        
        /* Hidden */
        #importInput { display: none; }
        
        /* Toast */
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--card);
            color: var(--text);
            padding: 12px 24px;
            border-radius: 8px;
            border: 1px solid var(--accent);
            z-index: 400;
            display: none;
        }
        
        .toast.on { display: block; }

        /* Year Range Form Styles */
        .year-range-form-modal .modal-content {
            max-width: 500px;
            max-height: 90vh;
        }

        .year-range-section {
            background: var(--bg);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 16px;
        }

        .year-range-section-title {
            font-size: 11px;
            color: var(--accent);
            text-transform: uppercase;
            margin-bottom: 12px;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .year-range-row {
            display: flex;
            gap: 12px;
        }

        .year-range-row > div {
            flex: 1;
        }

        .dropdown-with-new {
            position: relative;
        }

        .dropdown-with-new select {
            width: 100%;
            padding: 10px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-size: 14px;
        }

        .dropdown-with-new select:focus {
            outline: none;
            border-color: var(--accent);
        }

        .inline-add-new {
            display: none;
            margin-top: 8px;
        }

        .inline-add-new.visible {
            display: block;
        }

        .inline-add-new input {
            width: 100%;
            padding: 10px;
            background: var(--card);
            border: 1px solid var(--accent);
            border-radius: 6px;
            color: var(--text);
            font-size: 14px;
        }

        .inline-add-new input:focus {
            outline: none;
        }

        .auto-populated {
            position: relative;
        }

        .auto-populated::after {
            content: '';
            position: absolute;
            right: 32px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 12px;
            opacity: 0.7;
        }

        .auto-populated select {
            background: rgba(0, 212, 255, 0.05);
        }

        /* Multi-select for Button Functions */
        .multiselect-container {
            position: relative;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            min-height: 44px;
        }

        .multiselect-container:focus-within {
            border-color: var(--accent);
        }

        .multiselect-selected {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            padding: 8px;
            min-height: 44px;
            cursor: pointer;
        }

        .multiselect-tag {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            background: var(--accent);
            color: var(--bg);
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .multiselect-tag-remove {
            cursor: pointer;
            opacity: 0.7;
            font-size: 14px;
        }

        .multiselect-tag-remove:hover {
            opacity: 1;
        }

        .multiselect-placeholder {
            color: var(--dim);
            font-size: 14px;
            padding: 4px 0;
        }

        .multiselect-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 6px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 10;
            margin-top: 4px;
        }

        .multiselect-dropdown.open {
            display: block;
        }

        .multiselect-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px;
            cursor: pointer;
            font-size: 13px;
            border-bottom: 1px solid var(--border);
        }

        .multiselect-option:last-child {
            border-bottom: none;
        }

        .multiselect-option:hover {
            background: var(--bg);
        }

        .multiselect-option.selected {
            background: rgba(0, 212, 255, 0.1);
        }

        .multiselect-checkbox {
            width: 16px;
            height: 16px;
            border: 2px solid var(--border);
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .multiselect-option.selected .multiselect-checkbox {
            background: var(--accent);
            border-color: var(--accent);
        }

        .multiselect-option.selected .multiselect-checkbox::after {
            content: '';
            color: var(--bg);
            font-size: 10px;
            font-weight: bold;
        }

        /* Conflict Warnings */
        .conflict-warning {
            display: none;
            padding: 10px 12px;
            border-radius: 6px;
            margin-top: 8px;
            font-size: 12px;
        }

        .conflict-warning.visible {
            display: block;
        }

        .conflict-warning.warn {
            background: rgba(255, 193, 7, 0.15);
            border: 1px solid var(--warning);
            color: var(--warning);
        }

        .conflict-warning.block {
            background: rgba(255, 68, 68, 0.15);
            border: 1px solid #ff4444;
            color: #ff4444;
        }

        .conflict-warning-text {
            margin-bottom: 8px;
        }

        .conflict-verify {
            display: flex;
            align-items: center;
            gap: 8px;
            padding-top: 8px;
            border-top: 1px solid rgba(255, 193, 7, 0.3);
        }

        .conflict-verify input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: var(--warning);
        }

        .conflict-verify label {
            font-size: 11px;
            color: var(--text);
            cursor: pointer;
        }

        .warnings-summary {
            display: none;
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid var(--warning);
            border-radius: 8px;
            padding: 12px;
            margin-top: 16px;
        }

        .warnings-summary.visible {
            display: block;
        }

        .warnings-summary-title {
            font-size: 12px;
            color: var(--warning);
            font-weight: 600;
            margin-bottom: 8px;
        }

        .warnings-summary-list {
            font-size: 12px;
            color: var(--text);
        }

        .warnings-summary-item {
            padding: 4px 0;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .warnings-summary-item::before {
            content: '';
            font-size: 10px;
        }

        .modal-btn.primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Year Override Styles */
        .year-overrides-section {
            background: rgba(255, 107, 53, 0.1);
            border: 1px dashed var(--accent2);
            border-radius: 8px;
            padding: 12px;
            margin-top: 16px;
        }

        .year-overrides-title {
            font-size: 11px;
            color: var(--accent2);
            text-transform: uppercase;
            margin-bottom: 12px;
            letter-spacing: 0.5px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .add-override-btn {
            width: 100%;
            padding: 12px;
            background: transparent;
            border: 1px dashed var(--accent2);
            border-radius: 6px;
            color: var(--accent2);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .add-override-btn:hover {
            background: rgba(255, 107, 53, 0.1);
        }

        .override-item {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
            position: relative;
        }

        .override-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .override-item-title {
            font-size: 13px;
            color: var(--accent2);
            font-weight: 600;
        }

        .remove-override-btn {
            background: transparent;
            border: none;
            color: #ff4444;
            cursor: pointer;
            font-size: 18px;
            padding: 4px 8px;
        }

        .override-year-row {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
        }

        .override-year-row .modal-input-group {
            flex: 1;
            margin-bottom: 0;
        }

        .override-fields-select {
            margin-bottom: 12px;
        }

        .override-field-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            background: var(--bg);
            border-radius: 6px;
            margin-bottom: 6px;
            cursor: pointer;
        }

        .override-field-checkbox:hover {
            background: rgba(0, 212, 255, 0.1);
        }

        .override-field-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
        }

        .override-field-value {
            margin-top: 8px;
            padding: 10px;
            background: var(--bg);
            border-radius: 6px;
        }

        .override-field-value-label {
            font-size: 11px;
            color: var(--dim);
            margin-bottom: 4px;
        }

        .override-validation-error {
            color: #ff4444;
            font-size: 12px;
            padding: 8px;
            background: rgba(255, 68, 68, 0.1);
            border-radius: 4px;
            margin-top: 8px;
            display: none;
        }

        .override-validation-error.visible {
            display: block;
        }

        /* Vehicle detail override display */
        .vehicle-override-section {
            background: rgba(255, 107, 53, 0.1);
            border: 1px solid var(--accent2);
            border-radius: 8px;
            padding: 12px;
            margin-top: 12px;
        }

        .vehicle-override-header {
            font-size: 12px;
            color: var(--accent2);
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .vehicle-override-item {
            background: var(--card);
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 8px;
        }

        .vehicle-override-item:last-child {
            margin-bottom: 0;
        }

        .vehicle-override-years {
            font-size: 13px;
            color: var(--text);
            font-weight: 600;
            margin-bottom: 6px;
        }

        .vehicle-override-fields {
            font-size: 12px;
            color: var(--dim);
        }

        .vehicle-override-field {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            border-bottom: 1px solid var(--border);
        }

        .vehicle-override-field:last-child {
            border-bottom: none;
        }

        .vehicle-override-field-name {
            color: var(--dim);
        }

        .vehicle-override-field-value {
            color: var(--accent2);
            font-weight: 500;
        }
    </style>
</head>
<body>

<!-- Main Header -->
<div class="header">
    <h1> Lock & Scroll <small style="font-size:12px;color:var(--dim)">v130</small></h1>
    <div class="search-row">
        <div class="sel">
            <label>Year</label>
            <select id="fYear" onchange="updateMakeDropdown(); updateModelDropdown(); applyFilters()"><option value="">All Years</option></select>
        </div>
        <div class="sel">
            <label>Make</label>
            <select id="fMake" onchange="updateYearDropdown(); updateModelDropdown(); applyFilters()"><option value="">All Makes</option></select>
        </div>
        <div class="sel">
            <label>Model</label>
            <select id="fModel" onchange="updateYearDropdown(); updateMakeDropdown(); applyFilters()"><option value="">All Models</option></select>
        </div>
        <div class="sel" style="flex:0;min-width:auto;">
            <label>&nbsp;</label>
            <button onclick="openAddInventory()" style="padding:10px 14px;background:var(--accent);border:none;border-radius:8px;color:var(--bg);font-size:14px;font-weight:600;cursor:pointer;">+ Add Key</button>
        </div>
        <div class="sel" style="flex:0;min-width:auto;">
            <label>&nbsp;</label>
            <button onclick="resetFilters()" style="padding:10px 14px;background:var(--bg);border:1px solid var(--border);border-radius:8px;color:var(--accent);font-size:14px;cursor:pointer;"> Reset</button>
        </div>
    </div>
    <input type="text" class="search-box" id="searchBox" placeholder="Search part #, FCC ID, keyway..." oninput="applyFilters()">

    <!-- Advanced Search Toggle -->
    <button onclick="toggleAdvancedSearch()" id="advancedSearchToggle" style="width:100%;padding:10px;margin-top:8px;background:var(--card);border:1px solid var(--border);border-radius:8px;color:var(--accent);font-size:13px;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;">
        <span id="advancedSearchIcon"></span> Advanced Search
    </button>

    <!-- Advanced Search Panel -->
    <div id="advancedSearchPanel" style="display:none;margin-top:8px;padding:12px;background:var(--card);border:1px solid var(--border);border-radius:8px;">
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:8px;">
            <div>
                <label style="font-size:11px;color:var(--dim);text-transform:uppercase;display:block;margin-bottom:4px;">Keyway</label>
                <select id="advKeywayFilter" class="modal-input" style="width:100%;padding:8px;" onchange="applyFilters()">
                    <option value="">Any Keyway</option>
                </select>
            </div>
            <div>
                <label style="font-size:11px;color:var(--dim);text-transform:uppercase;display:block;margin-bottom:4px;">Chip Type</label>
                <select id="advChipFilter" class="modal-input" style="width:100%;padding:8px;" onchange="applyFilters()">
                    <option value="">Any Chip</option>
                </select>
            </div>
            <div>
                <label style="font-size:11px;color:var(--dim);text-transform:uppercase;display:block;margin-bottom:4px;">Key Type</label>
                <select id="advKeyTypeFilter" class="modal-input" style="width:100%;padding:8px;" onchange="applyFilters()">
                    <option value="">Any Type</option>
                </select>
            </div>
            <div>
                <label style="font-size:11px;color:var(--dim);text-transform:uppercase;display:block;margin-bottom:4px;">Frequency</label>
                <select id="advFrequencyFilter" class="modal-input" style="width:100%;padding:8px;" onchange="applyFilters()">
                    <option value="">Any Frequency</option>
                </select>
            </div>
            <div>
                <label style="font-size:11px;color:var(--dim);text-transform:uppercase;display:block;margin-bottom:4px;">Buttons</label>
                <select id="advButtonsFilter" class="modal-input" style="width:100%;padding:8px;" onchange="applyFilters()">
                    <option value="">Any Buttons</option>
                </select>
            </div>
            <div>
                <label style="font-size:11px;color:var(--dim);text-transform:uppercase;display:block;margin-bottom:4px;">FCC ID</label>
                <input type="text" id="advFccFilter" class="modal-input" style="width:100%;padding:8px;box-sizing:border-box;" placeholder="e.g. KR5TXN7" oninput="applyFilters()">
            </div>
        </div>
        <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center;">
            <span id="advancedFilterCount" style="font-size:12px;color:var(--dim);"></span>
            <button onclick="clearAdvancedFilters()" style="padding:6px 12px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:12px;cursor:pointer;">Clear Advanced Filters</button>
        </div>
    </div>

    <div class="stats">
        <div>Showing: <span id="showCount">0</span></div>
        <div>Total: <span id="totalCount">0</span></div>
    </div>
</div>

<!-- Key List -->
<div class="list" id="keyList"></div>

<!-- Key Detail Panel -->
<div class="detail-panel" id="detailPanel">
    <div class="detail-header">
        <button class="back-btn" onclick="closeDetail()"></button>
        <h2 id="detailTitle">Key Details</h2>
    </div>
    <div class="detail-content" id="detailContent"></div>
</div>

<!-- FCC Panel -->
<div class="fcc-panel" id="fccPanel">
    <div class="fcc-header">
        <button class="back-btn" onclick="closeFcc()"></button>
        <div class="fcc-id-display" id="fccIdDisplay"></div>
        <div id="fccKeyCount" style="color:var(--dim);font-size:13px;"></div>
    </div>
    <div class="fcc-keys-list" id="fccKeysList"></div>
</div>

<!-- Vehicle Lookup Panel - Make Selection -->
<div class="vehicle-panel" id="vehiclePanel">
    <div class="vehicle-header">
        <button class="back-btn" onclick="closeVehiclePanel()"></button>
        <div class="vehicle-title"> Vehicle Lookup</div>
        <div class="vehicle-filters">
            <select class="vehicle-filter-select" id="vehicleYearFilter" onchange="onYearFilterChange()">
                <option value="">Year</option>
            </select>
            <select class="vehicle-filter-select" id="vehicleMakeFilter" onchange="onMakeFilterChange()">
                <option value="">Make</option>
            </select>
            <select class="vehicle-filter-select" id="vehicleModelFilter" onchange="onModelFilterChange()">
                <option value="">Model</option>
            </select>
        </div>
    </div>
    <div class="vehicle-list" id="vehicleMakeList"></div>
</div>

<!-- Vehicle Models Panel - After selecting make -->
<div class="vehicle-panel" id="vehicleModelsPanel" style="z-index:205;">
    <div class="vehicle-header">
        <button class="back-btn" onclick="closeVehicleModelsPanel()"></button>
        <div class="vehicle-title" id="vehicleModelsPanelTitle"> Select Model</div>
    </div>
    <div class="vehicle-list" id="vehicleModelsList"></div>
</div>

<!-- Vehicle Key Type Panel - After selecting model -->
<div class="vehicle-panel" id="vehicleKeyTypePanel" style="z-index:206;">
    <div class="vehicle-header">
        <button class="back-btn" onclick="closeVehicleKeyTypePanel()"></button>
        <div class="vehicle-title" id="vehicleKeyTypePanelTitle"> Select Key Type</div>
    </div>
    <div class="vehicle-list" id="vehicleKeyTypeList"></div>
</div>

<!-- Vehicle Years Panel - After selecting key type -->
<div class="vehicle-panel" id="vehicleYearsPanel" style="z-index:207;">
    <div class="vehicle-header">
        <button class="back-btn" onclick="closeVehicleYearsPanel()"></button>
        <div class="vehicle-title" id="vehicleYearsPanelTitle"> Select Year</div>
    </div>
    <div class="vehicle-list" id="vehicleYearsList"></div>
</div>

<!-- Vehicle Detail Panel -->
<div class="vehicle-detail-panel" id="vehicleDetailPanel">
    <div class="vehicle-detail-header">
        <button class="back-btn" onclick="closeVehicleDetail()"></button>
        <div class="vehicle-detail-title" id="vehicleDetailTitle">Vehicle Name</div>
        <div class="vehicle-detail-subtitle" id="vehicleDetailSubtitle">Year Range</div>
    </div>
    <div id="vehicleDetailContent"></div>
</div>

<!-- FID Manager Panel -->
<div class="fid-panel" id="fidPanel">
    <div class="fid-header">
        <button class="back-btn" onclick="closeFid()"></button>
        <div class="fid-title"> FID Manager</div>
        <div style="color:var(--dim);font-size:12px;">Manage FCC IDs with custom FID numbers</div>
        <div style="display:flex;gap:8px;margin-top:12px;">
            <input type="text" class="fid-search" id="fidSearch" placeholder="Search FCC ID or FID..." oninput="filterFids()" style="flex:1;margin:0;">
            <select id="fidPrefixFilter" onchange="filterFids()" style="padding:10px;background:var(--bg);border:1px solid var(--border);border-radius:8px;color:var(--text);font-size:14px;">
                <option value="">All Groups</option>
            </select>
        </div>
        <div style="display:flex;gap:8px;margin-top:12px;">
            <button onclick="openFidManager()" style="flex:1;padding:10px;background:var(--accent);color:var(--bg);border:none;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;"> FID Manager</button>
            <button onclick="openFidPrefixSettings()" style="padding:10px 14px;background:var(--bg);border:1px solid var(--border);border-radius:8px;color:var(--text);font-size:13px;cursor:pointer;"> Prefixes</button>
        </div>
    </div>
    <div class="fid-list" id="fidList"></div>
</div>

<!-- FID Prefix Settings Modal -->
<div class="modal" id="fidPrefixModal">
    <div class="modal-content" style="max-width:500px;">
        <div class="modal-title"> FID Prefix Groups</div>
        <div id="fidPrefixList" style="max-height:400px;overflow-y:auto;margin-bottom:16px;"></div>
        <button onclick="openAddPrefixModal()" style="width:100%;padding:12px;background:var(--accent);color:var(--bg);border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;margin-bottom:12px;">+ Add New Prefix Group</button>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeFidPrefixSettings()">Close</button>
        </div>
    </div>
</div>

<!-- Add/Edit Prefix Modal -->
<div class="modal" id="addPrefixModal">
    <div class="modal-content">
        <div class="modal-title" id="addPrefixModalTitle">Add Prefix Group</div>
        <div class="modal-input-group">
            <label>Prefix Code (e.g., "N", "GM", "F")</label>
            <input type="text" class="modal-input" id="prefixCode" placeholder="2-3 letters" style="text-transform:uppercase;" maxlength="4">
        </div>
        <div class="modal-input-group">
            <label>Group Name</label>
            <input type="text" class="modal-input" id="prefixName" placeholder="e.g., Nissan/Infiniti">
        </div>
        <div class="modal-input-group">
            <label>Makes (comma separated)</label>
            <input type="text" class="modal-input" id="prefixMakes" placeholder="e.g., Nissan, Infiniti">
        </div>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeAddPrefixModal()">Cancel</button>
            <button class="modal-btn primary" onclick="savePrefix()">Save</button>
        </div>
    </div>
</div>

<!-- Edit FID Modal -->
<div class="modal" id="editFidModal">
    <div class="modal-content" style="max-height:90vh;overflow-y:auto;">
        <div class="modal-title">Edit FID Assignment</div>
        <div style="padding:12px;background:var(--bg);border-radius:8px;margin-bottom:16px;">
            <div style="font-size:11px;color:var(--dim);text-transform:uppercase;">FCC ID</div>
            <div id="editFidFccId" style="font-size:18px;color:var(--accent2);font-family:monospace;font-weight:700;"></div>
            <div id="editFidCurrentFid" style="font-size:12px;color:var(--dim);margin-top:4px;"></div>
        </div>

        <!-- FID Number Section -->
        <div class="modal-input-group">
            <label>FID Number</label>
            <div style="display:flex;gap:8px;align-items:center;">
                <select class="modal-input" id="editFidPrefix" style="width:100px;"></select>
                <input type="text" class="modal-input" id="editFidNumber" placeholder="001" style="flex:1;font-family:monospace;">
                <button type="button" onclick="autoAssignNextFid()" style="padding:8px 12px;background:var(--accent);color:var(--bg);border:none;border-radius:6px;font-size:12px;cursor:pointer;white-space:nowrap;" title="Auto-assign next available number"> Next</button>
            </div>
        </div>
        <div id="editFidWarning" style="display:none;padding:10px;background:rgba(255,68,68,0.1);border:1px solid #ff4444;border-radius:6px;color:#ff4444;font-size:12px;margin-bottom:12px;"></div>

        <!-- Move To Section -->
        <div style="border-top:1px solid var(--border);margin-top:16px;padding-top:16px;">
            <div style="font-size:12px;color:var(--accent2);text-transform:uppercase;margin-bottom:8px;"> Move to Position</div>
            <div style="font-size:11px;color:var(--dim);margin-bottom:8px;">Move this FID to a specific number. If occupied, choose how to handle the displaced FID.</div>
            <div style="display:flex;gap:8px;align-items:center;">
                <select class="modal-input" id="moveFidPrefix" style="width:100px;"></select>
                <input type="text" class="modal-input" id="moveFidNumber" placeholder="001" style="width:80px;font-family:monospace;">
                <button type="button" onclick="showMoveOptions()" style="padding:8px 12px;background:var(--accent2);color:var(--bg);border:none;border-radius:6px;font-size:12px;cursor:pointer;">Move</button>
            </div>
            <div id="moveOptionsPanel" style="display:none;margin-top:12px;padding:12px;background:var(--bg);border-radius:8px;">
                <div id="moveConflictInfo" style="font-size:12px;margin-bottom:12px;"></div>
                <div style="display:flex;flex-direction:column;gap:8px;">
                    <button type="button" onclick="executeMoveSwap()" class="modal-btn" style="background:var(--accent2);color:var(--bg);"> Swap positions</button>
                    <button type="button" onclick="executeMoveShift()" class="modal-btn" style="background:var(--accent);color:var(--bg);"> Shift others down</button>
                    <button type="button" onclick="hideMoveOptions()" class="modal-btn secondary">Cancel move</button>
                </div>
            </div>
        </div>

        <!-- Merge Section -->
        <div style="border-top:1px solid var(--border);margin-top:16px;padding-top:16px;">
            <div style="font-size:12px;color:var(--accent);text-transform:uppercase;margin-bottom:8px;"> Merge with Another FCC ID</div>
            <div style="font-size:11px;color:var(--dim);margin-bottom:8px;">Combine two FCC IDs under one FID (useful for reversed or duplicate entries)</div>
            <div class="modal-input-group">
                <label>Merge into FID:</label>
                <select class="modal-input" id="mergeTargetFid">
                    <option value="">Select a FID to merge into...</option>
                </select>
            </div>
            <div id="mergeInfo" style="display:none;padding:10px;background:rgba(0,212,255,0.1);border:1px solid var(--accent);border-radius:6px;font-size:12px;margin-bottom:12px;"></div>
        </div>

        <div class="modal-btns" style="flex-wrap:wrap;gap:8px;">
            <button class="modal-btn secondary" onclick="closeEditFidModal()">Cancel</button>
            <button class="modal-btn" style="background:#ff4444;color:white;" onclick="confirmRemoveFid()">Remove FID</button>
            <button class="modal-btn" id="mergeBtn" style="background:var(--accent);color:var(--bg);display:none;" onclick="mergeFids()"> Merge</button>
            <button class="modal-btn primary" onclick="saveFidEdit()">Save</button>
        </div>
    </div>
</div>

<!-- Remove FID Confirmation Modal -->
<div class="modal" id="removeFidConfirmModal">
    <div class="modal-content">
        <div class="modal-title"> Remove FID Assignment</div>
        <p style="margin-bottom:16px;color:var(--dim);">Are you sure you want to remove the FID assignment for <strong id="removeFidFccId"></strong>?</p>
        <p style="font-size:12px;color:var(--dim);margin-bottom:16px;">This will leave the position empty without rearranging other FIDs.</p>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeRemoveFidConfirm()">Cancel</button>
            <button class="modal-btn" style="background:#ff4444;color:white;" onclick="removeFidAssignment()">Yes, Remove</button>
        </div>
    </div>
</div>

<!-- FID Manager Panel -->
<div class="settings-panel" id="fidManagerPanel" style="z-index:210;">
    <div class="settings-header">
        <button class="back-btn" onclick="closeFidManager()"></button>
        <h2> FID Manager</h2>
    </div>
    <div class="settings-content">
        <!-- Stats Overview -->
        <div class="settings-section">
            <h3> Overview</h3>
            <div id="fidManagerStats" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:12px;margin-bottom:16px;"></div>
        </div>

        <!-- Quick Actions -->
        <div class="settings-section">
            <h3> Quick Actions</h3>
            <div style="display:flex;flex-direction:column;gap:8px;">
                <button class="settings-btn" onclick="fidManagerAutoAssignAll()" style="background:var(--accent);color:var(--bg);">
                     Auto-Assign All Unassigned FIDs
                </button>
                <button class="settings-btn" onclick="fidManagerReassignAll()" style="background:var(--accent2);color:var(--bg);">
                     Reassign All FIDs (Fresh Start)
                </button>
                <button class="settings-btn danger" onclick="fidManagerClearAll()">
                     Remove All FID Assignments
                </button>
            </div>
        </div>

        <!-- Bulk Actions -->
        <div class="settings-section">
            <h3> Bulk Actions</h3>
            <p style="font-size:12px;color:var(--dim);margin-bottom:12px;">Select multiple FIDs below, then apply bulk actions.</p>
            <div id="fidBulkActions" style="display:none;margin-bottom:16px;padding:12px;background:var(--bg);border-radius:8px;">
                <div style="display:flex;align-items:center;gap:8px;margin-bottom:12px;">
                    <span id="fidSelectedCount" style="font-weight:600;color:var(--accent);">0 selected</span>
                    <button onclick="fidManagerSelectAll()" style="padding:4px 8px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;cursor:pointer;">Select All</button>
                    <button onclick="fidManagerDeselectAll()" style="padding:4px 8px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;cursor:pointer;">Deselect All</button>
                </div>
                <div style="display:flex;flex-wrap:wrap;gap:8px;">
                    <button onclick="fidManagerBulkChangePrefix()" class="settings-btn" style="flex:1;min-width:140px;"> Change Prefix</button>
                    <button onclick="fidManagerBulkShift()" class="settings-btn" style="flex:1;min-width:140px;"> Shift Numbers</button>
                    <button onclick="fidManagerBulkRemove()" class="settings-btn danger" style="flex:1;min-width:140px;"> Remove Selected</button>
                </div>
            </div>
            <div style="display:flex;gap:8px;margin-bottom:12px;">
                <input type="text" id="fidManagerSearch" class="settings-search" placeholder="Search FCC ID or FID..." oninput="filterFidManagerList()" style="flex:1;">
                <select id="fidManagerPrefixFilter" class="modal-input" style="width:100px;" onchange="filterFidManagerList()">
                    <option value="">All</option>
                </select>
            </div>
        </div>

        <!-- FID List -->
        <div class="settings-section">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
                <h3 style="margin:0;"> All FID Assignments <span id="fidManagerListCount" style="font-size:12px;color:var(--dim);font-weight:normal;"></span></h3>
                <div id="fidDragControls">
                    <button id="fidDragModeBtn" onclick="toggleFidDragMode()" style="padding:6px 12px;background:var(--card);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:12px;cursor:pointer;">
                         Reorder Mode
                    </button>
                </div>
            </div>
            <div id="fidDragModeBar" style="display:none;margin-bottom:12px;padding:12px;background:rgba(255,149,0,0.1);border:1px solid #ff9500;border-radius:8px;">
                <div style="display:flex;justify-content:space-between;align-items:center;">
                    <span style="color:#ff9500;font-weight:600;"> Drag Mode Active - Drag items to reorder</span>
                    <div style="display:flex;gap:8px;">
                        <button onclick="cancelFidDragMode()" style="padding:6px 12px;background:var(--card);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:12px;cursor:pointer;">Cancel</button>
                        <button onclick="saveFidDragOrder()" style="padding:6px 12px;background:#34c759;border:none;border-radius:6px;color:white;font-size:12px;font-weight:600;cursor:pointer;"> Save Order</button>
                    </div>
                </div>
            </div>
            <div id="fidManagerList" style="max-height:400px;overflow-y:auto;"></div>
        </div>
    </div>
</div>

<!-- FID Bulk Change Prefix Modal -->
<div class="modal" id="fidBulkPrefixModal">
    <div class="modal-content">
        <div class="modal-title">Change Prefix for Selected FIDs</div>
        <div class="modal-input-group">
            <label>New Prefix</label>
            <select class="modal-input" id="fidBulkNewPrefix"></select>
        </div>
        <p style="font-size:12px;color:var(--dim);margin-bottom:16px;">Selected FIDs will be reassigned new numbers under the chosen prefix.</p>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeFidBulkPrefixModal()">Cancel</button>
            <button class="modal-btn primary" onclick="executeBulkChangePrefix()">Apply</button>
        </div>
    </div>
</div>

<!-- FID Bulk Shift Modal -->
<div class="modal" id="fidBulkShiftModal">
    <div class="modal-content">
        <div class="modal-title">Shift FID Numbers</div>
        <div class="modal-input-group">
            <label>Shift Amount</label>
            <div style="display:flex;gap:8px;align-items:center;">
                <button onclick="document.getElementById('fidShiftAmount').value = Math.max(-100, parseInt(document.getElementById('fidShiftAmount').value || 0) - 1)" style="padding:8px 12px;background:var(--card);border:1px solid var(--border);border-radius:4px;cursor:pointer;">-</button>
                <input type="number" class="modal-input" id="fidShiftAmount" value="0" style="text-align:center;width:80px;">
                <button onclick="document.getElementById('fidShiftAmount').value = Math.min(100, parseInt(document.getElementById('fidShiftAmount').value || 0) + 1)" style="padding:8px 12px;background:var(--card);border:1px solid var(--border);border-radius:4px;cursor:pointer;">+</button>
            </div>
        </div>
        <p style="font-size:12px;color:var(--dim);margin-bottom:16px;">Positive numbers shift up (e.g., N-001  N-002), negative shift down.</p>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeFidBulkShiftModal()">Cancel</button>
            <button class="modal-btn primary" onclick="executeBulkShift()">Apply</button>
        </div>
    </div>
</div>

<!-- FID Confirm Clear All Modal -->
<div class="modal" id="fidClearAllModal">
    <div class="modal-content">
        <div class="modal-title"> Remove All FID Assignments</div>
        <p style="margin-bottom:16px;color:var(--dim);">Are you sure you want to remove <strong>ALL</strong> FID assignments?</p>
        <p style="font-size:12px;color:#ff4444;margin-bottom:16px;">This action cannot be undone. All FCC IDs will become unassigned.</p>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeFidClearAllModal()">Cancel</button>
            <button class="modal-btn" style="background:#ff4444;color:white;" onclick="executeClearAllFids()">Yes, Remove All</button>
        </div>
    </div>
</div>

<!-- FID Confirm Reassign All Modal -->
<div class="modal" id="fidReassignAllModal">
    <div class="modal-content">
        <div class="modal-title"> Reassign All FIDs</div>
        <p style="margin-bottom:16px;color:var(--dim);">This will clear all existing assignments and auto-assign fresh FID numbers to all FCC IDs.</p>
        <p style="font-size:12px;color:var(--accent);margin-bottom:16px;">FIDs will be assigned in order: Non-chip/Chip keys first, then Remote Head/Flip keys, then Proximity keys.</p>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeFidReassignAllModal()">Cancel</button>
            <button class="modal-btn primary" onclick="executeReassignAllFids()">Reassign All</button>
        </div>
    </div>
</div>

<!-- Settings Panel -->
<div class="settings-panel" id="settingsPanel">
    <div class="settings-header">
        <button class="back-btn" onclick="closeSettings()"></button>
        <h2> Settings</h2>
    </div>
    <div class="settings-content">
        <div class="settings-section cloud-sync-section">
            <h3> Cloud Sync</h3>
            <p style="font-size:12px;color:var(--dim);margin-bottom:12px;">Sync your data across all devices.</p>
            <div id="cloudSyncUI"></div>
        </div>

        <div class="settings-section">
            <h3>Manage Data</h3>
            <div style="display:flex;flex-direction:column;gap:8px;">
                <button class="settings-nav-btn" onclick="openLishiSettingsPanel()">
                    <span class="settings-nav-icon"></span>
                    <div class="settings-nav-info">
                        <span class="settings-nav-title">Lishi Tool Inventory</span>
                        <span class="settings-nav-desc">Manage your Lishi tools and cut ranges</span>
                    </div>
                    <span class="settings-nav-arrow"></span>
                </button>
                <button class="settings-nav-btn" onclick="openVendorsSettingsPanel()">
                    <span class="settings-nav-icon"></span>
                    <div class="settings-nav-info">
                        <span class="settings-nav-title">Vendors</span>
                        <span class="settings-nav-desc">Manage pricing vendors</span>
                    </div>
                    <span class="settings-nav-arrow"></span>
                </button>
                <button class="settings-nav-btn" onclick="openCustomKeysSettingsPanel()">
                    <span class="settings-nav-icon"></span>
                    <div class="settings-nav-info">
                        <span class="settings-nav-title">Custom Keys</span>
                        <span class="settings-nav-desc">Manage keys you've added</span>
                    </div>
                    <span class="settings-nav-arrow"></span>
                </button>
                <button class="settings-nav-btn" onclick="openCategoriesSettingsPanel()">
                    <span class="settings-nav-icon"></span>
                    <div class="settings-nav-info">
                        <span class="settings-nav-title">Tool Categories</span>
                        <span class="settings-nav-desc">Organize equipment categories</span>
                    </div>
                    <span class="settings-nav-arrow"></span>
                </button>
                <button class="settings-nav-btn" onclick="openPlatformsSettingsPanel()">
                    <span class="settings-nav-icon"></span>
                    <div class="settings-nav-info">
                        <span class="settings-nav-title">Tool Platforms</span>
                        <span class="settings-nav-desc">Programming platforms and manufacturers</span>
                    </div>
                    <span class="settings-nav-arrow"></span>
                </button>
                <button class="settings-nav-btn" onclick="openFidManager()">
                    <span class="settings-nav-icon"></span>
                    <div class="settings-nav-info">
                        <span class="settings-nav-title">FID Manager</span>
                        <span class="settings-nav-desc">Manage Fob ID assignments</span>
                    </div>
                    <span class="settings-nav-arrow"></span>
                </button>
                <button class="settings-nav-btn" onclick="openCodeSeriesSettingsPanel()">
                    <span class="settings-nav-icon">#</span>
                    <div class="settings-nav-info">
                        <span class="settings-nav-title">Code Series</span>
                        <span class="settings-nav-desc">Manage key cut code series values</span>
                    </div>
                    <span class="settings-nav-arrow"></span>
                </button>
                <button class="settings-nav-btn" onclick="openDropdownDataPanel()">
                    <span class="settings-nav-icon">&#128221;</span>
                    <div class="settings-nav-info">
                        <span class="settings-nav-title">Dropdown Data</span>
                        <span class="settings-nav-desc">Manage keyways, chips, types, frequencies &amp; more</span>
                    </div>
                    <span class="settings-nav-arrow"></span>
                </button>
            </div>
        </div>

        <div class="settings-section">
            <h3>Import / Export</h3>
            <div style="display:flex;gap:8px;">
                <button class="settings-btn" onclick="exportData()" style="flex:1;"> Export</button>
                <button class="settings-btn" onclick="document.getElementById('importInput').click()" style="flex:1;"> Import</button>
                <input type="file" id="importInput" accept=".json" onchange="importData(event)" style="display:none;">
            </div>
            <button class="settings-btn" onclick="copyOverridesToClipboard()" style="width:100%;margin-top:8px;"> Copy Overrides to Clipboard</button>
        </div>

        <div class="settings-section">
            <h3>App Updates</h3>
            <p style="font-size:12px;color:var(--dim);margin-bottom:12px;">Force refresh to get the latest version.</p>
            <button class="settings-btn" onclick="forceUpdateApp()" style="width:100%;"> Update App</button>
            <p id="currentVersionDisplay" style="font-size:11px;color:var(--dim);margin-top:8px;text-align:center;">Current: v130</p>
        </div>

        <div class="settings-section">
            <h3>Reset Data</h3>
            <div style="display:flex;gap:8px;">
                <button class="settings-btn danger" onclick="clearLishi()" style="flex:1;font-size:12px;"> Clear Lishi</button>
                <button class="settings-btn danger" onclick="clearStock()" style="flex:1;font-size:12px;"> Reset Stock</button>
            </div>
        </div>

        <div class="settings-section" style="text-align:center;">
            <p style="color:var(--dim);font-size:11px;margin:0;">Lock & Scroll v130<br>Keys: <span id="aboutTotal">0</span>  Keyways: <span id="aboutKeyways">0</span>  Vendors: <span id="aboutVendors">0</span><br>Lishi: <span id="aboutLishi">0</span>  Tools: <span id="aboutTools">0</span>  Platforms: <span id="aboutPlatforms">0</span></p>
        </div>
    </div>
</div>

<!-- Lishi Settings Panel -->
<div class="panel" id="lishiSettingsPanel">
    <div class="panel-header">
        <button class="back-btn" onclick="closeLishiSettingsPanel()"></button>
        <h2> Lishi Tool Inventory</h2>
    </div>
    <div style="padding:16px;">
        <input type="text" class="settings-search" id="lishiInventorySearch" placeholder="Search Lishi tools..." oninput="filterLishiInventory()" style="width:100%;box-sizing:border-box;">
        <div id="lishiInventoryList" style="margin-top:12px;"></div>
        <button class="add-vendor-btn" onclick="openAddLishiToolModal()" style="margin-top:12px;width:100%;">+ Add Lishi Tool</button>
    </div>
</div>

<!-- Vendors Settings Panel -->
<div class="panel" id="vendorsSettingsPanel">
    <div class="panel-header">
        <button class="back-btn" onclick="closeVendorsSettingsPanel()"></button>
        <h2> Vendors</h2>
    </div>
    <div style="padding:16px;">
        <p style="font-size:12px;color:var(--dim);margin-bottom:12px;">Manage vendors for pricing. Default vendors cannot be removed.</p>
        <div id="vendorList"></div>
        <button class="add-vendor-btn" onclick="openAddVendorModal()" style="margin-top:12px;width:100%;">+ Add Vendor</button>
    </div>
</div>

<!-- Custom Keys Settings Panel -->
<div class="panel" id="customKeysSettingsPanel">
    <div class="panel-header">
        <button class="back-btn" onclick="closeCustomKeysSettingsPanel()"></button>
        <h2> Custom Keys</h2>
    </div>
    <div style="padding:16px;">
        <p style="font-size:12px;color:var(--dim);margin-bottom:12px;">Manage keys you've added to the database.</p>
        <div id="customKeysList"></div>
        <button class="add-vendor-btn" onclick="openAddCustomKey(); closeCustomKeysSettingsPanel(); closeSettings();" style="margin-top:12px;width:100%;">+ Add Custom Key</button>
    </div>
</div>

<!-- Categories Settings Panel -->
<div class="panel" id="categoriesSettingsPanel">
    <div class="panel-header">
        <button class="back-btn" onclick="closeCategoriesSettingsPanel()"></button>
        <h2> Tool Categories</h2>
    </div>
    <div style="padding:16px;">
        <p style="font-size:12px;color:var(--dim);margin-bottom:12px;">Manage equipment categories for organizing your tools.</p>
        <div id="categoryList"></div>
        <div style="display:flex;gap:8px;margin-top:12px;">
            <button class="add-vendor-btn" onclick="openAddCategoryModal()" style="flex:1;">+ Add Category</button>
            <button class="add-vendor-btn" onclick="openSettingsAddToolPanel()" style="flex:1;">+ Add Tool</button>
        </div>
    </div>
</div>

<!-- Settings Add Tool Panel -->
<div class="add-tool-panel" id="settingsAddToolPanel">
    <div class="tools-header">
        <button class="back-btn" onclick="closeSettingsAddToolPanel()"></button>
        <div class="tools-title" id="settingsAddToolPanelTitle"> Add Tool</div>
    </div>
    <div class="tools-content" style="padding-bottom:100px;">
        <div class="tool-form-section">
            <h3>Basic Information</h3>
            <div class="tool-form-row">
                <label>Tool Name *</label>
                <input type="text" id="settingsToolFormName" placeholder="e.g., BA Smart Cable">
            </div>
            <div class="tool-form-row">
                <label>Category *</label>
                <select id="settingsToolFormCategory">
                    <!-- Dynamically populated -->
                </select>
            </div>
        </div>

        <div class="tool-form-section">
            <h3>Platform Compatibility</h3>
            <div class="tool-form-row">
                <label>Compatibility Type *</label>
                <select id="settingsToolFormCompatType" onchange="handleSettingsCompatTypeChange()">
                    <option value="single">Single Platform</option>
                    <option value="multiple">Multiple Platforms</option>
                </select>
            </div>
            <div class="tool-form-row" id="settingsSinglePlatformSelect">
                <label>Select Platform *</label>
                <select id="settingsToolFormSinglePlatform">
                    <option value="">Select platform...</option>
                </select>
            </div>
            <div class="tool-form-row" id="settingsMultiplePlatformSelect" style="display:none;">
                <label>Select Platforms *</label>
                <div class="platform-checkbox-list" id="settingsToolFormPlatformCheckboxes">
                </div>
            </div>
        </div>

        <div class="tool-form-section">
            <h3>Vehicle Applications</h3>
            <div class="vehicle-app-list" id="settingsToolFormVehicleApps">
            </div>
            <button class="add-vehicle-app-btn" onclick="addSettingsToolVehicleApp()">+ Add Vehicle Application</button>
        </div>
    </div>
    <div class="tool-form-actions">
        <button class="tool-form-cancel" onclick="closeSettingsAddToolPanel()">Cancel</button>
        <button class="tool-form-save" onclick="saveSettingsToolForm()">Save Tool</button>
    </div>
</div>

<!-- Platforms Settings Panel -->
<div class="panel" id="platformsSettingsPanel">
    <div class="panel-header">
        <button class="back-btn" onclick="closePlatformsSettingsPanel()"></button>
        <h2> Tool Platforms</h2>
    </div>
    <div style="padding:16px;">
        <p style="font-size:12px;color:var(--dim);margin-bottom:12px;">Manage programming platforms and manufacturers.</p>
        <div id="settingsPlatformList"></div>
        <button class="add-vendor-btn" onclick="openAddPlatformModal()" style="margin-top:12px;width:100%;">+ Add Platform</button>
    </div>
</div>

<!-- Code Series Settings Panel -->
<div class="panel" id="codeSeriesSettingsPanel">
    <div class="panel-header">
        <button class="back-btn" onclick="closeCodeSeriesSettingsPanel()"></button>
        <h2># Code Series</h2>
    </div>
    <div style="padding:16px;">
        <p style="font-size:12px;color:var(--dim);margin-bottom:12px;">Manage key cut code series values used across vehicles and Lishi tools.</p>
        <input type="text" class="settings-search" id="codeSeriesSearch" placeholder="Search code series..." oninput="renderCodeSeriesList()" style="width:100%;box-sizing:border-box;">
        <div id="codeSeriesList" style="margin-top:12px;"></div>
        <button class="add-vendor-btn" onclick="addNewCodeSeriesValue()" style="margin-top:12px;width:100%;">+ Add Code Series</button>
    </div>
</div>

<!-- Dropdown Data Management Panel -->
<div class="panel" id="dropdownDataPanel">
    <div class="panel-header">
        <button class="back-btn" onclick="closeDropdownDataPanel()">&#8592;</button>
        <h2>&#128221; Dropdown Data</h2>
    </div>
    <div style="padding:16px;">
        <p style="font-size:12px;color:var(--dim);margin-bottom:12px;">Manage the values that appear in dropdown menus throughout the app. Editing a value will update all keys that use it.</p>
        <div style="margin-bottom:12px;">
            <label style="display:block;font-size:11px;color:var(--dim);text-transform:uppercase;margin-bottom:4px;">Category</label>
            <select id="dropdownDataCategory" onchange="renderDropdownDataList()" style="width:100%;padding:10px;background:var(--bg);border:1px solid var(--border);border-radius:8px;color:var(--text);font-size:14px;">
                <option value="keyway">Keyway / Blade</option>
                <option value="chip">Chip Type</option>
                <option value="keyType">Key Type</option>
                <option value="frequency">Frequency</option>
                <option value="buttons">Buttons</option>
                <option value="battery">Battery</option>
                <option value="brand">Brand</option>
            </select>
        </div>
        <input type="text" id="dropdownDataSearch" placeholder="Search values..." oninput="renderDropdownDataList()" style="width:100%;padding:10px;background:var(--bg);border:1px solid var(--border);border-radius:8px;color:var(--text);font-size:14px;box-sizing:border-box;margin-bottom:12px;">
        <div id="dropdownDataList" style="margin-top:4px;"></div>
        <button class="add-vendor-btn" onclick="openAddDropdownValueModal()" style="margin-top:12px;width:100%;">+ Add New Value</button>
    </div>
</div>

<!-- Edit Dropdown Value Modal -->
<div class="modal" id="editDropdownValueModal">
    <div class="modal-content" style="max-width:450px;">
        <div class="modal-title" id="editDropdownValueTitle">Edit Value</div>
        <div id="editDropdownAffectedWarning" style="display:none;background:rgba(255,193,7,0.15);border:1px solid var(--warning);border-radius:8px;padding:12px;margin-bottom:16px;">
            <div style="font-weight:600;color:var(--warning);margin-bottom:6px;">&#9888;&#65039; This change will affect:</div>
            <div id="editDropdownAffectedList" style="max-height:150px;overflow-y:auto;font-size:12px;color:var(--text);"></div>
        </div>
        <div class="modal-input-group">
            <label>Value</label>
            <input type="text" class="modal-input" id="editDropdownValueInput" oninput="previewDropdownValueChange()">
        </div>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeEditDropdownValueModal()">Cancel</button>
            <button class="modal-btn" onclick="openMergeDropdownModal()" style="background:#7c4dff;color:white;">Merge</button>
            <button class="modal-btn" onclick="deleteDropdownValue()" style="background:#e53935;color:white;">Delete</button>
            <button class="modal-btn primary" onclick="saveDropdownValueEdit()">Save</button>
        </div>
    </div>
</div>

<!-- Merge Dropdown Value Modal -->
<div class="modal" id="mergeDropdownValueModal">
    <div class="modal-content" style="max-width:450px;">
        <div class="modal-title">Merge Values</div>
        <div style="font-size:13px;color:var(--dim);margin-bottom:12px;">
            All keys using "<span id="mergeDropdownSource" style="color:var(--text);font-weight:600;"></span>" will be updated to the selected target value, and the source will be removed.
        </div>
        <div class="modal-input-group">
            <label>Merge into</label>
            <select class="modal-input" id="mergeDropdownTarget" onchange="previewMergeDropdown()" style="padding:10px;"></select>
        </div>
        <div id="mergeDropdownPreview" style="display:none;background:rgba(255,193,7,0.15);border:1px solid var(--warning);border-radius:8px;padding:12px;margin-bottom:12px;">
            <div style="font-weight:600;color:var(--warning);margin-bottom:6px;">This merge will affect:</div>
            <div id="mergeDropdownPreviewList" style="max-height:150px;overflow-y:auto;font-size:12px;color:var(--text);"></div>
        </div>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeMergeDropdownModal()">Cancel</button>
            <button class="modal-btn primary" onclick="executeMergeDropdown()" style="background:#7c4dff;">Merge</button>
        </div>
    </div>
</div>

<!-- Add Dropdown Value Modal -->
<div class="modal" id="addDropdownValueModal">
    <div class="modal-content" style="max-width:400px;">
        <div class="modal-title" id="addDropdownValueTitle">Add Value</div>
        <div class="modal-input-group">
            <label>New Value</label>
            <input type="text" class="modal-input" id="addDropdownValueInput">
        </div>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeAddDropdownValueModal()">Cancel</button>
            <button class="modal-btn primary" onclick="saveNewDropdownValue()">Add</button>
        </div>
    </div>
</div>

<!-- Code Series Usages Modal -->
<div class="modal" id="codeSeriesUsagesModal">
    <div class="modal-content" style="max-width:450px;">
        <div class="modal-title" id="codeSeriesUsagesTitle">Usages</div>
        <div id="codeSeriesUsagesList" style="max-height:400px;overflow-y:auto;"></div>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="document.getElementById('codeSeriesUsagesModal').classList.remove('on')">Close</button>
        </div>
    </div>
</div>

<!-- Edit Code Series Modal -->
<div class="modal" id="editCodeSeriesModal">
    <div class="modal-content" style="max-width:400px;">
        <div class="modal-title">Edit Code Series</div>
        <div id="editCodeSeriesInfo" style="font-size:12px;color:var(--dim);margin-bottom:12px;"></div>
        <div class="modal-input-group">
            <label>Code Series Value</label>
            <input type="text" class="modal-input" id="editCodeSeriesValue" placeholder="e.g., 1001-4096">
        </div>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeEditCodeSeriesModal()">Cancel</button>
            <button class="modal-btn primary" onclick="saveEditCodeSeries()">Save</button>
        </div>
    </div>
</div>

<!-- Edit Vehicles Modal -->
<div class="modal" id="editVehiclesModal">
    <div class="modal-content" style="max-width:550px;">
        <div class="modal-title">Edit Compatible Vehicles</div>
        <div id="editVehiclesList" style="max-height:350px;overflow-y:auto;margin-bottom:12px;"></div>
        <button onclick="addVehicleToKey()" style="width:100%;padding:10px;background:var(--bg);border:1px dashed var(--border);border-radius:8px;color:var(--accent);font-size:13px;cursor:pointer;margin-bottom:16px;">+ Add Vehicle</button>
        <div class="modal-buttons">
            <button class="modal-btn" onclick="closeEditVehiclesModal()">Cancel</button>
            <button class="modal-btn primary" onclick="saveKeyVehicles()">Save Changes</button>
        </div>
    </div>
</div>

<!-- Add Single Vehicle Modal -->
<div class="modal" id="addSingleVehicleModal">
    <div class="modal-content" style="max-width:400px;">
        <div class="modal-title">Add Vehicle Application</div>
        <div style="margin-bottom:16px;">
            <label style="display:block;font-size:12px;color:var(--dim);margin-bottom:6px;">Make</label>
            <select id="addVehMake" onchange="onAddVehicleMakeChange(this.value)"
                style="width:100%;padding:10px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:14px;">
                <option value="">Select Make...</option>
            </select>
        </div>
        <div style="margin-bottom:16px;">
            <label style="display:block;font-size:12px;color:var(--dim);margin-bottom:6px;">Model</label>
            <select id="addVehModel" onchange="onAddVehicleModelChange(this.value)"
                style="width:100%;padding:10px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:14px;">
                <option value="">Select Model...</option>
            </select>
        </div>
        <div style="display:grid;grid-template-columns:auto 1fr auto 1fr;gap:8px;margin-bottom:16px;align-items:end;">
            <div>
                <label style="display:block;font-size:12px;color:var(--dim);margin-bottom:6px;">Month</label>
                <select id="addVehStartMonth"
                    style="padding:10px 4px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:13px;box-sizing:border-box;"></select>
            </div>
            <div>
                <label style="display:block;font-size:12px;color:var(--dim);margin-bottom:6px;">Start Year</label>
                <input type="number" id="addVehStartYear" placeholder="e.g. 2015"
                    style="width:100%;padding:10px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:14px;box-sizing:border-box;">
            </div>
            <div>
                <label style="display:block;font-size:12px;color:var(--dim);margin-bottom:6px;">Month</label>
                <select id="addVehEndMonth"
                    style="padding:10px 4px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:13px;box-sizing:border-box;"></select>
            </div>
            <div>
                <label style="display:block;font-size:12px;color:var(--dim);margin-bottom:6px;">End Year</label>
                <input type="number" id="addVehEndYear" placeholder="e.g. 2020"
                    style="width:100%;padding:10px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:14px;box-sizing:border-box;">
            </div>
        </div>
        <div style="margin-bottom:16px;">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                <label style="font-size:12px;color:var(--dim);">Code Series (optional)</label>
                <button onclick="addAddVehicleCodeSeriesEntry()"
                    style="padding:4px 10px;background:var(--accent2);color:white;border:none;border-radius:4px;cursor:pointer;font-size:11px;">+ Add Code Series</button>
            </div>
            <div id="addVehCodeSeriesList" style="max-height:150px;overflow-y:auto;"></div>
        </div>
        <div class="modal-buttons">
            <button class="modal-btn" onclick="closeAddSingleVehicleModal()">Cancel</button>
            <button class="modal-btn primary" onclick="saveAddSingleVehicle()">Add Vehicle</button>
        </div>
    </div>
</div>

<!-- Edit Custom Key Modal -->
<div class="modal" id="editCustomKeyModal">
    <div class="modal-content" style="max-width:500px;">
        <div class="modal-title">Edit Custom Key</div>
        <div class="modal-input-group">
            <label style="display:flex;justify-content:space-between;align-items:center;">
                <span>Part Number</span>
                <button type="button" id="editCustomKeyPNUnlockBtn" onclick="unlockEditCustomKeyPN()"
                    style="font-size:11px;padding:3px 9px;background:var(--bg);border:1px solid var(--border);border-radius:5px;color:var(--accent);cursor:pointer;">
                    &#128274; Edit PN
                </button>
            </label>
            <input type="text" class="modal-input" id="editCustomKeyPN" disabled style="opacity:0.7;font-family:monospace;">
            <div id="editCustomKeyPNWarning" style="display:none;margin-top:6px;padding:8px 10px;background:rgba(255,165,0,0.13);border:1px solid orange;border-radius:6px;font-size:12px;color:orange;">
                &#9888; Changing a part number will update the key in the database and migrate any existing stock quantity. Proceed carefully.
            </div>
        </div>
        <div class="modal-input-group">
            <label>FCC ID</label>
            <input type="text" class="modal-input" id="editCustomKeyFCC">
        </div>
        <div class="modal-input-group">
            <label>Keyway / Blade</label>
            <input type="text" class="modal-input" id="editCustomKeyKeyway">
        </div>
        <div class="modal-input-group">
            <label>Chip Type</label>
            <input type="text" class="modal-input" id="editCustomKeyChip">
        </div>
        <div class="modal-input-group" style="display:flex;align-items:center;gap:12px;">
            <label style="display:flex;align-items:center;gap:8px;cursor:pointer;">
                <input type="checkbox" id="editCustomKeyIsVATS" onchange="toggleVATSFields()" style="width:18px;height:18px;cursor:pointer;">
                <span>VATS Key</span>
            </label>
        </div>
        <div class="modal-input-group" id="editCustomKeyVATSSection" style="display:none;background:rgba(255,107,53,0.1);padding:12px;border-radius:8px;border-left:3px solid var(--accent2);">
            <label style="color:var(--accent2);">Secondary Key Part Number (Door/Trunk)</label>
            <input type="text" class="modal-input" id="editCustomKeySecondaryPN" placeholder="e.g., B62">
        </div>
        <div class="modal-input-group">
            <label>Key Type</label>
            <input type="text" class="modal-input" id="editCustomKeyType">
        </div>
        <div class="modal-input-group">
            <label>Buttons</label>
            <input type="text" class="modal-input" id="editCustomKeyButtons">
        </div>
        <div class="modal-input-group">
            <label>Frequency</label>
            <input type="text" class="modal-input" id="editCustomKeyFrequency">
        </div>
        <div class="modal-input-group">
            <label>Notes</label>
            <textarea class="modal-input" id="editCustomKeyNotes" style="min-height:60px;resize:vertical;"></textarea>
        </div>
        <div class="modal-btns">
            <button class="modal-btn" style="background:#ff4444;color:white;" onclick="deleteCustomKey()"> Delete</button>
            <button class="modal-btn secondary" onclick="closeEditCustomKeyModal()">Cancel</button>
            <button class="modal-btn primary" onclick="saveEditCustomKey()">Save Changes</button>
        </div>
    </div>
</div>

<!-- Edit Key Info Modal -->
<div class="modal" id="editKeyInfoModal">
    <div class="modal-content" style="max-width:500px;">
        <div class="modal-title">Edit Key Information</div>
        <div class="modal-input-group">
            <label style="display:flex;justify-content:space-between;align-items:center;">
                <span>Part Number</span>
                <button type="button" id="editKeyInfoPNUnlockBtn" onclick="unlockEditKeyInfoPN()"
                    style="display:none;font-size:11px;padding:3px 9px;background:var(--bg);border:1px solid var(--border);border-radius:5px;color:var(--accent);cursor:pointer;">
                    &#128274; Edit PN
                </button>
            </label>
            <input type="text" class="modal-input" id="editKeyInfoPN" disabled style="opacity:0.7;font-family:monospace;">
            <div id="editKeyInfoPNWarning" style="display:none;margin-top:6px;padding:8px 10px;background:rgba(255,165,0,0.13);border:1px solid orange;border-radius:6px;font-size:12px;color:orange;">
                &#9888; Changing a part number will update the key in the database and migrate any existing stock quantity. Proceed carefully.
            </div>
        </div>
        <div class="modal-input-group">
            <label>Key Type</label>
            <select class="modal-input" id="editKeyInfoKeyType" onchange="handleCustomDropdown(this, 'editKeyInfoKeyTypeOther')">
                <option value="">-- None --</option>
                <option value="__other__">+ Other (custom)</option>
            </select>
            <input type="text" class="modal-input" id="editKeyInfoKeyTypeOther" placeholder="Enter custom key type..." style="display:none;margin-top:6px;">
        </div>
        <div class="modal-input-group">
            <label>Keyway / Blade</label>
            <select class="modal-input" id="editKeyInfoKeyway" onchange="handleCustomDropdown(this, 'editKeyInfoKeywayOther')">
                <option value="">-- None --</option>
                <option value="__other__">+ Other (custom)</option>
            </select>
            <input type="text" class="modal-input" id="editKeyInfoKeywayOther" placeholder="Enter custom keyway..." style="display:none;margin-top:6px;">
        </div>
        <div class="modal-input-group">
            <label>Chip Type</label>
            <select class="modal-input" id="editKeyInfoChip" onchange="handleCustomDropdown(this, 'editKeyInfoChipOther')">
                <option value="">-- None --</option>
                <option value="__other__">+ Other (custom)</option>
            </select>
            <input type="text" class="modal-input" id="editKeyInfoChipOther" placeholder="Enter custom chip type..." style="display:none;margin-top:6px;">
        </div>
        <div class="modal-input-group" style="display:flex;align-items:center;gap:12px;">
            <label style="display:flex;align-items:center;gap:8px;cursor:pointer;">
                <input type="checkbox" id="editKeyInfoIsVATS" onchange="toggleEditKeyInfoVATS()" style="width:18px;height:18px;cursor:pointer;">
                <span>VATS Key</span>
            </label>
        </div>
        <div class="modal-input-group" id="editKeyInfoVATSSection" style="display:none;background:rgba(255,107,53,0.1);padding:12px;border-radius:8px;border-left:3px solid var(--accent2);">
            <label style="color:var(--accent2);">Secondary Key Part Number (Door/Trunk)</label>
            <select class="modal-input" id="editKeyInfoSecondaryPN" onchange="handleCustomDropdown(this, 'editKeyInfoSecondaryPNOther')">
                <option value="">-- None --</option>
                <option value="__other__">+ Other (custom)</option>
            </select>
            <input type="text" class="modal-input" id="editKeyInfoSecondaryPNOther" placeholder="Enter part number..." style="display:none;margin-top:6px;">
        </div>
        <div class="modal-input-group">
            <label>FCC ID</label>
            <select class="modal-input" id="editKeyInfoFCC" onchange="handleCustomDropdown(this, 'editKeyInfoFCCOther')">
                <option value="">-- None --</option>
                <option value="__other__">+ Other (custom)</option>
            </select>
            <input type="text" class="modal-input" id="editKeyInfoFCCOther" placeholder="Enter FCC ID..." style="display:none;margin-top:6px;">
        </div>
        <div class="modal-input-group">
            <label>Frequency</label>
            <select class="modal-input" id="editKeyInfoFrequency" onchange="handleCustomDropdown(this, 'editKeyInfoFrequencyOther')">
                <option value="">-- None --</option>
                <option value="__other__">+ Other (custom)</option>
            </select>
            <input type="text" class="modal-input" id="editKeyInfoFrequencyOther" placeholder="Enter custom frequency..." style="display:none;margin-top:6px;">
        </div>
        <div class="modal-input-group">
            <label>Buttons</label>
            <select class="modal-input" id="editKeyInfoButtons" onchange="handleCustomDropdown(this, 'editKeyInfoButtonsOther')">
                <option value="">-- None --</option>
                <option value="__other__">+ Other (custom)</option>
            </select>
            <input type="text" class="modal-input" id="editKeyInfoButtonsOther" placeholder="Enter custom button config..." style="display:none;margin-top:6px;">
        </div>
        <div class="modal-input-group">
            <label>Logo</label>
            <select class="modal-input" id="editKeyInfoLogo" onchange="handleCustomDropdown(this, 'editKeyInfoLogoOther')">
                <option value="">-- None --</option>
                <option value="__other__">+ Other (custom)</option>
            </select>
            <input type="text" class="modal-input" id="editKeyInfoLogoOther" placeholder="Enter logo..." style="display:none;margin-top:6px;">
        </div>
        <div class="modal-input-group">
            <label>Battery</label>
            <select class="modal-input" id="editKeyInfoBattery" onchange="handleCustomDropdown(this, 'editKeyInfoBatteryOther')">
                <option value="">-- None --</option>
                <option value="__other__">+ Other (custom)</option>
            </select>
            <input type="text" class="modal-input" id="editKeyInfoBatteryOther" placeholder="Enter battery type..." style="display:none;margin-top:6px;">
        </div>
        <div class="modal-input-group">
            <label>Emergency Key PN</label>
            <select class="modal-input" id="editKeyInfoEmergencyPN" onchange="handleCustomDropdown(this, 'editKeyInfoEmergencyPNOther')">
                <option value="">-- None --</option>
                <option value="__other__">+ Other (custom)</option>
            </select>
            <input type="text" class="modal-input" id="editKeyInfoEmergencyPNOther" placeholder="Enter part number..." style="display:none;margin-top:6px;">
        </div>
        <div class="modal-input-group">
            <label>Notes</label>
            <textarea class="modal-input" id="editKeyInfoNotes" style="min-height:60px;resize:vertical;" placeholder="Additional notes..."></textarea>
        </div>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeEditKeyInfoModal()">Cancel</button>
            <button class="modal-btn primary" onclick="saveEditKeyInfo()">Save Changes</button>
        </div>
    </div>
</div>

<!-- Add Vendor Modal -->
<div class="modal" id="addVendorModal">
    <div class="modal-content">
        <div class="modal-title">Add New Vendor</div>
        <div class="modal-input-group">
            <label>Vendor Name</label>
            <input type="text" class="modal-input" id="newVendorName" placeholder="e.g., Banner Solutions">
        </div>
        <div class="modal-input-group">
            <label>Vendor Type</label>
            <select class="modal-input" id="newVendorType">
                <option value="distributor">Distributor</option>
                <option value="online">Online Retailer</option>
                <option value="wholesale">Wholesale</option>
                <option value="other">Other</option>
            </select>
        </div>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeAddVendorModal()">Cancel</button>
            <button class="modal-btn primary" onclick="addVendor()">Add Vendor</button>
        </div>
    </div>
</div>

<!-- Edit Prices Modal -->
<div class="modal" id="editPricesModal">
    <div class="modal-content">
        <div class="modal-title">Edit Prices - <span id="editPricesVendor"></span></div>
        <div class="modal-input-group">
            <label>Price A (Primary)</label>
            <input type="text" class="modal-input" id="editPriceA" placeholder="0.00">
        </div>
        <div class="modal-input-group">
            <label>Price B (Secondary)</label>
            <input type="text" class="modal-input" id="editPriceB" placeholder="0.00">
        </div>
        <div class="modal-input-group">
            <label>Emergency Key Price</label>
            <input type="text" class="modal-input" id="editEmergency" placeholder="0.00">
        </div>
        <div class="modal-input-group">
            <label>Shell Price</label>
            <input type="text" class="modal-input" id="editShell" placeholder="0.00">
        </div>
        <div class="modal-input-group">
            <label>OEM Price</label>
            <input type="text" class="modal-input" id="editOem" placeholder="0.00">
        </div>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeEditPricesModal()">Cancel</button>
            <button class="modal-btn primary" onclick="savePrices()">Save Prices</button>
        </div>
    </div>
</div>

<!-- Add Vendor Price Modal -->
<div class="modal" id="addVendorPriceModal">
    <div class="modal-content">
        <div class="modal-title">Add Vendor Pricing</div>
        <div class="modal-input-group">
            <label>Select Vendor</label>
            <select class="modal-input" id="selectVendorForPrice"></select>
        </div>
        <div class="modal-input-group">
            <label>Price A (Primary)</label>
            <input type="text" class="modal-input" id="addPriceA" placeholder="0.00">
        </div>
        <div class="modal-input-group">
            <label>Price B (Secondary)</label>
            <input type="text" class="modal-input" id="addPriceB" placeholder="0.00">
        </div>
        <div class="modal-input-group">
            <label>Emergency Key Price</label>
            <input type="text" class="modal-input" id="addEmergency" placeholder="0.00">
        </div>
        <div class="modal-input-group">
            <label>Shell Price</label>
            <input type="text" class="modal-input" id="addShell" placeholder="0.00">
        </div>
        <div class="modal-input-group">
            <label>OEM Price</label>
            <input type="text" class="modal-input" id="addOem" placeholder="0.00">
        </div>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeAddVendorPriceModal()">Cancel</button>
            <button class="modal-btn primary" onclick="saveNewVendorPrice()">Add Pricing</button>
        </div>
    </div>
</div>

<!-- Lishi Lookup Panel -->
<div class="lishi-lookup-panel" id="lishiLookupPanel">
    <div class="lishi-lookup-header">
        <button class="back-btn" onclick="closeLishiLookup()"></button>
        <div>
            <div class="lishi-lookup-title"> Lishi Lookup</div>
            <div style="color:var(--dim);font-size:12px;">Find Lishi tools by vehicle</div>
        </div>
        <button class="my-lishi-btn" onclick="showMyLishiTools()"> My Tools</button>
    </div>
    <div class="lishi-lookup-filters" id="lishiLookupFilters">
        <div class="sel">
            <label>Year</label>
            <select id="lishiYear" onchange="filterLishiLookup()"><option value="">Select Year</option></select>
        </div>
        <div class="sel">
            <label>Make</label>
            <select id="lishiMake" onchange="updateLishiModels(); filterLishiLookup()"><option value="">Select Make</option></select>
        </div>
        <div class="sel">
            <label>Model</label>
            <select id="lishiModel" onchange="filterLishiLookup()"><option value="">Select Model</option></select>
        </div>
    </div>
    <div class="lishi-lookup-results" id="lishiLookupResults">
        <div style="text-align:center;color:var(--dim);padding:40px;">Select a vehicle to see Lishi information</div>
    </div>
</div>

<!-- Lishi Tool Detail Panel -->
<div class="lishi-detail-panel" id="lishiDetailPanel">
    <div class="lishi-detail-header">
        <button class="back-btn" onclick="closeLishiDetail()"></button>
        <h2 id="lishiDetailTitle">Lishi Tool</h2>
        <button class="edit-tool-btn" onclick="openEditLishiToolFromDetail()"> Edit</button>
        <button class="edit-tool-btn" style="color:#ff4444;border-color:#ff4444;" onclick="deleteLishiToolFromDetail()"> Delete</button>
    </div>
    <div class="lishi-detail-content" id="lishiDetailContent"></div>
</div>

<!-- Lishi Notes Modal -->
<div class="modal" id="lishiNotesModal">
    <div class="modal-content">
        <div class="modal-title"> Vehicle Group Notes</div>
        <div id="lishiNotesVehicleInfo" style="font-size:13px;color:var(--dim);margin-bottom:12px;"></div>
        <div class="modal-input-group">
            <label>Notes</label>
            <textarea class="modal-input" id="lishiNotesText" rows="4" placeholder="e.g., Driver door only, passenger is opposite"></textarea>
        </div>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeLishiNotesModal()">Cancel</button>
            <button class="modal-btn primary" onclick="saveLishiNotes()">Save Notes</button>
        </div>
    </div>
</div>

<!-- Vehicle Data Edit Modal -->
<div class="modal" id="vehicleDataEditModal">
    <div class="modal-content" style="max-height:90vh;overflow-y:auto;">
        <div class="modal-title">&#9999;&#65039; Edit Vehicle Data</div>
        <div id="vehicleDataEditInfo" style="font-size:13px;color:var(--dim);margin-bottom:12px;"></div>
        <div class="modal-input-group" style="display:flex;align-items:center;gap:10px;padding:10px;background:var(--card);border:1px solid var(--border);border-radius:8px;margin-bottom:12px;">
            <input type="checkbox" id="vehicleDataMultipleKeys" onchange="toggleVehicleDataMultipleKeys()" style="width:20px;height:20px;cursor:pointer;">
            <label for="vehicleDataMultipleKeys" style="cursor:pointer;font-size:13px;margin:0;">Different keys for ignition vs. doors/trunk/glovebox</label>
        </div>
        <!-- Single key fields -->
        <div id="vehicleDataSingleKeyFields">
            <div class="modal-input-group">
                <label>Part Number (Key Blank)</label>
                <select class="modal-input" id="vehicleDataKeyBlank" onchange="onVehicleDataDropdownChange('vehicleDataKeyBlank','pn')"></select>
            </div>
            <div class="modal-input-group">
                <label>Key Type</label>
                <select class="modal-input" id="vehicleDataKeyType" onchange="onVehicleDataDropdownChange('vehicleDataKeyType','keyType')"></select>
            </div>
            <div class="modal-input-group">
                <label>Chip</label>
                <select class="modal-input" id="vehicleDataChip" onchange="onVehicleDataDropdownChange('vehicleDataChip','chip')"></select>
            </div>
            <div class="modal-input-group" style="display:flex;gap:8px;">
                <div style="flex:1;">
                    <label>Keyway</label>
                    <select class="modal-input" id="vehicleDataKeyway" onchange="onVehicleDataDropdownChange('vehicleDataKeyway','keyway')"></select>
                </div>
                <div style="flex:1;">
                    <label>FCC ID</label>
                    <select class="modal-input" id="vehicleDataFccid" onchange="onVehicleDataDropdownChange('vehicleDataFccid','fccid')"></select>
                </div>
            </div>
            <div class="modal-input-group" style="display:flex;gap:8px;">
                <div style="flex:1;">
                    <label>Frequency</label>
                    <select class="modal-input" id="vehicleDataFrequency" onchange="onVehicleDataDropdownChange('vehicleDataFrequency','frequency')"></select>
                </div>
                <div style="flex:1;">
                    <label>Buttons</label>
                    <select class="modal-input" id="vehicleDataButtons" onchange="onVehicleDataDropdownChange('vehicleDataButtons','buttons')"></select>
                </div>
            </div>
            <div class="modal-input-group">
                <label>Battery</label>
                <select class="modal-input" id="vehicleDataBattery" onchange="onVehicleDataDropdownChange('vehicleDataBattery','battery')"></select>
            </div>
        </div>
        <!-- Dual key fields -->
        <div id="vehicleDataDualKeyFields" style="display:none;">
            <div class="modal-input-group">
                <label>Key Type</label>
                <select class="modal-input" id="vehicleDataKeyType2" onchange="onVehicleDataDropdownChange('vehicleDataKeyType2','keyType')"></select>
            </div>
            <div class="modal-input-group">
                <label>Battery</label>
                <select class="modal-input" id="vehicleDataBattery2" onchange="onVehicleDataDropdownChange('vehicleDataBattery2','battery')"></select>
            </div>
            <div style="padding:12px;background:rgba(0,212,255,0.08);border:1px solid var(--accent);border-radius:8px;margin-bottom:12px;">
                <div style="font-weight:600;color:var(--accent);margin-bottom:10px;font-size:14px;">&#128273; Ignition Key</div>
                <div class="modal-input-group">
                    <label>Key Blank (Part #)</label>
                    <select class="modal-input" id="vehicleDataIgnKeyBlank" onchange="onVehicleDataDropdownChange('vehicleDataIgnKeyBlank','pn')"></select>
                </div>
                <div class="modal-input-group">
                    <label>Chip Type</label>
                    <select class="modal-input" id="vehicleDataIgnChip" onchange="onVehicleDataDropdownChange('vehicleDataIgnChip','chip')"></select>
                </div>
                <div class="modal-input-group" style="display:flex;gap:8px;">
                    <div style="flex:1;">
                        <label>Keyway</label>
                        <select class="modal-input" id="vehicleDataIgnKeyway" onchange="onVehicleDataDropdownChange('vehicleDataIgnKeyway','keyway')"></select>
                    </div>
                    <div style="flex:1;">
                        <label>FCC ID</label>
                        <select class="modal-input" id="vehicleDataIgnFccid" onchange="onVehicleDataDropdownChange('vehicleDataIgnFccid','fccid')"></select>
                    </div>
                </div>
                <div class="modal-input-group" style="display:flex;gap:8px;">
                    <div style="flex:1;">
                        <label>Buttons</label>
                        <select class="modal-input" id="vehicleDataIgnButtons" onchange="onVehicleDataDropdownChange('vehicleDataIgnButtons','buttons')"></select>
                    </div>
                    <div style="flex:1;">
                        <label>Frequency</label>
                        <select class="modal-input" id="vehicleDataIgnFrequency" onchange="onVehicleDataDropdownChange('vehicleDataIgnFrequency','frequency')"></select>
                    </div>
                </div>
                <div class="modal-input-group vehicleDataPerKeyCodeSeries" style="display:none;">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                        <label style="margin:0;">Code Series (Ignition)</label>
                        <button onclick="addPerKeyCodeSeriesEntry('ignition')"
                            style="padding:4px 10px;background:var(--accent);color:white;border:none;border-radius:4px;cursor:pointer;font-size:11px;">+ Add Code Series</button>
                    </div>
                    <div id="vehicleDataIgnCodeSeriesList" style="max-height:200px;overflow-y:auto;"></div>
                </div>
            </div>
            <div style="padding:12px;background:rgba(255,107,53,0.08);border:1px solid var(--accent2);border-radius:8px;margin-bottom:12px;">
                <div style="font-weight:600;color:var(--accent2);margin-bottom:10px;font-size:14px;">&#128682; Door / Trunk / Glovebox Key</div>
                <div class="modal-input-group">
                    <label>Key Blank (Part #)</label>
                    <select class="modal-input" id="vehicleDataDoorKeyBlank" onchange="onVehicleDataDropdownChange('vehicleDataDoorKeyBlank','pn')"></select>
                </div>
                <div class="modal-input-group">
                    <label>Chip Type</label>
                    <select class="modal-input" id="vehicleDataDoorChip" onchange="onVehicleDataDropdownChange('vehicleDataDoorChip','chip')"></select>
                </div>
                <div class="modal-input-group" style="display:flex;gap:8px;">
                    <div style="flex:1;">
                        <label>Keyway</label>
                        <select class="modal-input" id="vehicleDataDoorKeyway" onchange="onVehicleDataDropdownChange('vehicleDataDoorKeyway','keyway')"></select>
                    </div>
                    <div style="flex:1;">
                        <label>FCC ID</label>
                        <select class="modal-input" id="vehicleDataDoorFccid" onchange="onVehicleDataDropdownChange('vehicleDataDoorFccid','fccid')"></select>
                    </div>
                </div>
                <div class="modal-input-group vehicleDataPerKeyCodeSeries" style="display:none;">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                        <label style="margin:0;">Code Series (Door)</label>
                        <button onclick="addPerKeyCodeSeriesEntry('door')"
                            style="padding:4px 10px;background:var(--accent2);color:white;border:none;border-radius:4px;cursor:pointer;font-size:11px;">+ Add Code Series</button>
                    </div>
                    <div id="vehicleDataDoorCodeSeriesList" style="max-height:200px;overflow-y:auto;"></div>
                </div>
            </div>
            <div class="modal-input-group" style="display:flex;align-items:center;gap:10px;padding:8px;background:var(--card);border:1px solid var(--border);border-radius:8px;">
                <input type="checkbox" id="vehicleDataDiffCodeSeries" onchange="toggleVehicleDataDiffCodeSeries()" style="width:18px;height:18px;cursor:pointer;">
                <label for="vehicleDataDiffCodeSeries" style="cursor:pointer;font-size:12px;margin:0;">Different code series for ignition vs. door key</label>
            </div>
        </div>
        <div class="modal-input-group" id="vehicleDataSharedCodeSeriesGroup">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                <label style="margin:0;">Code Series</label>
                <button onclick="addVehicleDataCodeSeriesEntry()"
                    style="padding:4px 10px;background:var(--accent2);color:white;border:none;border-radius:4px;cursor:pointer;font-size:11px;">+ Add Code Series</button>
            </div>
            <div id="vehicleDataCodeSeriesList" style="max-height:200px;overflow-y:auto;"></div>
        </div>
        <div class="modal-input-group" id="vehicleDataSecondaryKeyGroup" style="background:rgba(255,107,53,0.1);padding:12px;border-radius:8px;border:1px solid var(--accent2);">
            <label style="color:var(--accent2);">Door/Trunk/GB Key (for VATS vehicles)</label>
            <select class="modal-input" id="vehicleDataSecondaryKey">
                <option value="">None</option>
            </select>
            <div style="font-size:11px;color:var(--dim);margin-top:4px;">Select the non-chip key used for doors, trunk, and glovebox</div>
        </div>
        <div class="modal-input-group">
            <label>Notes</label>
            <textarea class="modal-input" id="vehicleDataNotes" rows="3" placeholder="Additional notes about this vehicle..."></textarea>
        </div>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeVehicleDataEditModal()">Cancel</button>
            <button class="modal-btn primary" onclick="saveVehicleDataEdit()">Save</button>
        </div>
    </div>
</div>

<!-- Quick Add Vehicle Modal -->
<div class="modal" id="quickAddVehicleModal">
    <div class="modal-content" style="max-height:90vh;overflow-y:auto;">
        <div class="modal-title"> Quick Add Vehicle</div>
        <div class="modal-input-group">
            <label>Make *</label>
            <select class="modal-input" id="quickVehicleMake" onchange="onQuickVehicleMakeChange()">
                <option value="">Select Make...</option>
            </select>
            <input type="text" class="modal-input" id="quickVehicleNewMake" placeholder="Enter new make..." style="display:none;margin-top:8px;">
        </div>
        <div class="modal-input-group">
            <label>Model *</label>
            <select class="modal-input" id="quickVehicleModel" onchange="onQuickVehicleModelChange()">
                <option value="">Select Model...</option>
            </select>
            <input type="text" class="modal-input" id="quickVehicleNewModel" placeholder="Enter new model..." style="display:none;margin-top:8px;">
        </div>
        <div class="modal-input-group" style="display:flex;gap:8px;flex-wrap:wrap;">
            <div style="flex:0 0 72px;">
                <label>Month</label>
                <select class="modal-input" id="quickVehicleMonthStart" style="padding:10px 4px;font-size:13px;"></select>
            </div>
            <div style="flex:1;min-width:80px;">
                <label>Year Start *</label>
                <input type="number" class="modal-input" id="quickVehicleYear" placeholder="2024" onchange="checkForSimilarVehicles()">
            </div>
            <div style="flex:0 0 72px;">
                <label>Month</label>
                <select class="modal-input" id="quickVehicleMonthEnd" style="padding:10px 4px;font-size:13px;"></select>
            </div>
            <div style="flex:1;min-width:80px;">
                <label>Year End</label>
                <input type="number" class="modal-input" id="quickVehicleYearEnd" placeholder="2024">
            </div>
        </div>
        <div id="quickVehicleSimilarSuggestion" style="display:none;margin-bottom:12px;"></div>
        <div class="modal-input-group" style="display:flex;align-items:center;gap:10px;padding:10px;background:var(--card);border:1px solid var(--border);border-radius:8px;margin-bottom:12px;">
            <input type="checkbox" id="quickVehicleMultipleKeys" onchange="toggleQuickVehicleMultipleKeys()" style="width:20px;height:20px;cursor:pointer;">
            <label for="quickVehicleMultipleKeys" style="cursor:pointer;font-size:13px;margin:0;">Different keys for ignition vs. doors/trunk/glovebox</label>
        </div>
        <button class="modal-btn secondary" id="quickVehicleOptionalToggle" onclick="toggleQuickVehicleOptionalFields()" style="width:100%;margin-bottom:12px;">
            + Show Optional Fields
        </button>
        <!-- Single key fields (default) -->
        <div id="quickVehicleSingleKeyFields">
            <div id="quickVehicleOptionalFields" style="display:none;">
                <div class="modal-input-group">
                    <label>Key Type</label>
                    <input type="text" class="modal-input" id="quickVehicleKeyType" placeholder="e.g., Proximity, Transponder">
                </div>
                <div class="modal-input-group">
                    <label>Chip</label>
                    <input type="text" class="modal-input" id="quickVehicleChip" placeholder="e.g., Hitag Pro">
                </div>
                <div class="modal-input-group">
                    <label>Buttons</label>
                    <input type="text" class="modal-input" id="quickVehicleButtons" placeholder="e.g., 4 Button">
                </div>
                <div class="modal-input-group">
                    <label>FCC ID <span id="quickVehicleFccidHint" style="font-size:11px;color:var(--accent);font-weight:400;"></span></label>
                    <input type="text" class="modal-input" id="quickVehicleFccid" placeholder="e.g., H92, KR5TXN7" list="fccidDatalist" oninput="updateFccidHint(this.value, 'quickVehicleFccidHint')">
                </div>
                <div class="modal-input-group">
                    <label>Frequency</label>
                    <input type="text" class="modal-input" id="quickVehicleFrequency" placeholder="e.g., 433.92 MHz">
                </div>
                <div class="modal-input-group">
                    <label>Keyway</label>
                    <input type="text" class="modal-input" id="quickVehicleKeyway" placeholder="e.g., DA34">
                </div>
                <div class="modal-input-group">
                    <label>Notes</label>
                    <textarea class="modal-input" id="quickVehicleNotes" rows="2" placeholder="Additional notes..."></textarea>
                </div>
            </div>
        </div>
        <!-- Dual key fields (when checkbox checked) -->
        <div id="quickVehicleDualKeyFields" style="display:none;">
            <div style="padding:12px;background:rgba(0,212,255,0.08);border:1px solid var(--accent);border-radius:8px;margin-bottom:12px;">
                <div style="font-weight:600;color:var(--accent);margin-bottom:10px;font-size:14px;">&#128273; Ignition Key</div>
                <div class="modal-input-group">
                    <label>Key Blank (Part #)</label>
                    <input type="text" class="modal-input" id="quickVehicleIgnKeyBlank" placeholder="e.g., B44, B99-P">
                </div>
                <div class="modal-input-group">
                    <label>Chip Type</label>
                    <input type="text" class="modal-input" id="quickVehicleIgnChip" placeholder="e.g., PK3, Hitag Pro">
                </div>
                <div class="modal-input-group">
                    <label>Keyway</label>
                    <input type="text" class="modal-input" id="quickVehicleIgnKeyway" placeholder="e.g., B99">
                </div>
                <div class="modal-input-group">
                    <label>FCC ID</label>
                    <input type="text" class="modal-input" id="quickVehicleIgnFccid" placeholder="e.g., H92, KOBLEAR1XT" list="fccidDatalist" oninput="updateFccidHint(this.value, 'quickVehicleIgnFccidHint')">
                </div>
                <div class="modal-input-group" style="display:flex;gap:8px;">
                    <div style="flex:1;">
                        <label>Buttons</label>
                        <input type="text" class="modal-input" id="quickVehicleIgnButtons" placeholder="e.g., 4 Button">
                    </div>
                    <div style="flex:1;">
                        <label>Frequency</label>
                        <input type="text" class="modal-input" id="quickVehicleIgnFrequency" placeholder="e.g., 315 MHz">
                    </div>
                </div>
                <div class="modal-input-group">
                    <label>Code Series</label>
                    <input type="text" class="modal-input" id="quickVehicleIgnCodeSeries" placeholder="e.g., DL01-DM70">
                </div>
            </div>
            <div style="padding:12px;background:rgba(255,107,53,0.08);border:1px solid var(--accent2);border-radius:8px;margin-bottom:12px;">
                <div style="font-weight:600;color:var(--accent2);margin-bottom:10px;font-size:14px;">&#128682; Door / Trunk / Glovebox Key</div>
                <div class="modal-input-group">
                    <label>Key Blank (Part #)</label>
                    <input type="text" class="modal-input" id="quickVehicleDoorKeyBlank" placeholder="e.g., B45, B62-P">
                </div>
                <div class="modal-input-group">
                    <label>Chip Type</label>
                    <input type="text" class="modal-input" id="quickVehicleDoorChip" placeholder="e.g., No Chip">
                </div>
                <div class="modal-input-group">
                    <label>Keyway</label>
                    <input type="text" class="modal-input" id="quickVehicleDoorKeyway" placeholder="e.g., B62">
                </div>
                <div class="modal-input-group">
                    <label>FCC ID</label>
                    <input type="text" class="modal-input" id="quickVehicleDoorFccid" placeholder="e.g., No Remote" value="No Remote" list="fccidDatalist" oninput="updateFccidHint(this.value, 'quickVehicleDoorFccidHint')">
                </div>
                <div class="modal-input-group">
                    <label>Code Series</label>
                    <input type="text" class="modal-input" id="quickVehicleDoorCodeSeries" placeholder="e.g., A01-D70">
                </div>
            </div>
            <div class="modal-input-group">
                <label>Notes</label>
                <textarea class="modal-input" id="quickVehicleDualNotes" rows="2" placeholder="Additional notes..."></textarea>
            </div>
        </div>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeQuickAddVehicleModal()">Cancel</button>
            <button class="modal-btn primary" onclick="saveQuickAddVehicle()">Add Vehicle</button>
        </div>
    </div>
</div>

<!-- Edit Custom Vehicle Modal -->
<div class="modal" id="editCustomVehicleModal">
    <div class="modal-content" style="max-height:90vh;overflow-y:auto;">
        <div class="modal-title">&#9999;&#65039; Edit Vehicle</div>
        <input type="hidden" id="editCustomVehicleId">
        <div id="editCustomVehicleSimilarSuggestion" style="display:none;"></div>
        <div class="modal-input-group" style="display:flex;gap:8px;">
            <div style="flex:1;">
                <label>Make</label>
                <input type="text" class="modal-input" id="editCustomVehicleMake">
            </div>
            <div style="flex:1;">
                <label>Model</label>
                <input type="text" class="modal-input" id="editCustomVehicleModel">
            </div>
        </div>
        <div class="modal-input-group" style="display:flex;gap:8px;flex-wrap:wrap;">
            <div style="flex:0 0 72px;">
                <label>Month</label>
                <select class="modal-input" id="editCustomVehicleMonthStart" style="padding:10px 4px;font-size:13px;"></select>
            </div>
            <div style="flex:1;min-width:80px;">
                <label>Year Start</label>
                <input type="number" class="modal-input" id="editCustomVehicleYearStart">
            </div>
            <div style="flex:0 0 72px;">
                <label>Month</label>
                <select class="modal-input" id="editCustomVehicleMonthEnd" style="padding:10px 4px;font-size:13px;"></select>
            </div>
            <div style="flex:1;min-width:80px;">
                <label>Year End</label>
                <input type="number" class="modal-input" id="editCustomVehicleYearEnd">
            </div>
        </div>
        <div class="modal-input-group" style="display:flex;align-items:center;gap:10px;padding:10px;background:var(--card);border:1px solid var(--border);border-radius:8px;">
            <input type="checkbox" id="editCustomVehicleMultipleKeys" onchange="toggleEditVehicleMultipleKeys()" style="width:20px;height:20px;cursor:pointer;">
            <label for="editCustomVehicleMultipleKeys" style="cursor:pointer;font-size:13px;margin:0;">Different keys for ignition vs. doors/trunk/glovebox</label>
        </div>
        <!-- Single key fields -->
        <div id="editCustomVehicleSingleKeyFields">
            <div class="modal-input-group">
                <label>Key Type</label>
                <input type="text" class="modal-input" id="editCustomVehicleKeyType" placeholder="e.g., Proximity, Transponder">
            </div>
            <div class="modal-input-group">
                <label>Chip</label>
                <input type="text" class="modal-input" id="editCustomVehicleChip" placeholder="e.g., Hitag Pro">
            </div>
            <div class="modal-input-group">
                <label>Buttons</label>
                <input type="text" class="modal-input" id="editCustomVehicleButtons" placeholder="e.g., 4 Button">
            </div>
            <div class="modal-input-group">
                <label>FCC ID <span id="editCustomVehicleFccidHint" style="font-size:11px;color:var(--accent);font-weight:400;"></span></label>
                <input type="text" class="modal-input" id="editCustomVehicleFccid" placeholder="e.g., H92, KR5TXN7" list="fccidDatalist" oninput="updateFccidHint(this.value, 'editCustomVehicleFccidHint')">
            </div>
            <div class="modal-input-group">
                <label>Frequency</label>
                <input type="text" class="modal-input" id="editCustomVehicleFrequency" placeholder="e.g., 433.92 MHz">
            </div>
            <div class="modal-input-group">
                <label>Keyway</label>
                <input type="text" class="modal-input" id="editCustomVehicleKeyway" placeholder="e.g., DA34">
            </div>
        </div>
        <!-- Dual key fields -->
        <div id="editCustomVehicleDualKeyFields" style="display:none;">
            <div style="padding:12px;background:rgba(0,212,255,0.08);border:1px solid var(--accent);border-radius:8px;margin-bottom:12px;margin-top:8px;">
                <div style="font-weight:600;color:var(--accent);margin-bottom:10px;font-size:14px;">&#128273; Ignition Key</div>
                <div class="modal-input-group">
                    <label>Key Blank (Part #)</label>
                    <input type="text" class="modal-input" id="editCustomVehicleIgnKeyBlank" placeholder="e.g., B44, B99-P">
                </div>
                <div class="modal-input-group">
                    <label>Chip Type</label>
                    <input type="text" class="modal-input" id="editCustomVehicleIgnChip" placeholder="e.g., PK3">
                </div>
                <div class="modal-input-group">
                    <label>Keyway</label>
                    <input type="text" class="modal-input" id="editCustomVehicleIgnKeyway" placeholder="e.g., B99">
                </div>
                <div class="modal-input-group">
                    <label>FCC ID</label>
                    <input type="text" class="modal-input" id="editCustomVehicleIgnFccid" placeholder="e.g., H92, KOBLEAR1XT" list="fccidDatalist" oninput="updateFccidHint(this.value, 'editCustomVehicleIgnFccidHint')">
                </div>
                <div class="modal-input-group" style="display:flex;gap:8px;">
                    <div style="flex:1;">
                        <label>Buttons</label>
                        <input type="text" class="modal-input" id="editCustomVehicleIgnButtons" placeholder="e.g., 4 Button">
                    </div>
                    <div style="flex:1;">
                        <label>Frequency</label>
                        <input type="text" class="modal-input" id="editCustomVehicleIgnFrequency" placeholder="e.g., 315 MHz">
                    </div>
                </div>
                <div class="modal-input-group">
                    <label>Code Series</label>
                    <input type="text" class="modal-input" id="editCustomVehicleIgnCodeSeries" placeholder="e.g., DL01-DM70">
                </div>
            </div>
            <div style="padding:12px;background:rgba(255,107,53,0.08);border:1px solid var(--accent2);border-radius:8px;margin-bottom:12px;">
                <div style="font-weight:600;color:var(--accent2);margin-bottom:10px;font-size:14px;">&#128682; Door / Trunk / Glovebox Key</div>
                <div class="modal-input-group">
                    <label>Key Blank (Part #)</label>
                    <input type="text" class="modal-input" id="editCustomVehicleDoorKeyBlank" placeholder="e.g., B45, B62-P">
                </div>
                <div class="modal-input-group">
                    <label>Chip Type</label>
                    <input type="text" class="modal-input" id="editCustomVehicleDoorChip" placeholder="e.g., No Chip">
                </div>
                <div class="modal-input-group">
                    <label>Keyway</label>
                    <input type="text" class="modal-input" id="editCustomVehicleDoorKeyway" placeholder="e.g., B62">
                </div>
                <div class="modal-input-group">
                    <label>FCC ID</label>
                    <input type="text" class="modal-input" id="editCustomVehicleDoorFccid" placeholder="e.g., No Remote" list="fccidDatalist" oninput="updateFccidHint(this.value, 'editCustomVehicleDoorFccidHint')">
                </div>
                <div class="modal-input-group">
                    <label>Code Series</label>
                    <input type="text" class="modal-input" id="editCustomVehicleDoorCodeSeries" placeholder="e.g., A01-D70">
                </div>
            </div>
        </div>
        </div>
        <div class="modal-input-group">
            <label>Notes</label>
            <textarea class="modal-input" id="editCustomVehicleNotes" rows="2" placeholder="Additional notes..."></textarea>
        </div>
        <div class="modal-btns">
            <button class="modal-btn danger" onclick="deleteCustomVehicle()" style="margin-right:auto;">Delete</button>
            <button class="modal-btn secondary" onclick="closeEditCustomVehicleModal()">Cancel</button>
            <button class="modal-btn primary" onclick="saveEditCustomVehicle()">Save</button>
        </div>
    </div>
</div>

<!-- Incomplete Vehicles Panel -->
<div class="panel" id="incompleteVehiclesPanel">
    <div class="panel-header">
        <button class="back-btn" onclick="closeIncompleteVehiclesPanel()"></button>
        <h2>Incomplete Vehicles</h2>
    </div>
    <div id="incompleteVehiclesContent"></div>
</div>

<!-- Add/Edit Lishi Tool Modal -->
<div class="modal" id="lishiToolModal">
    <div class="modal-content">
        <div class="modal-title" id="lishiToolModalTitle">Add Lishi Tool</div>
        <div class="modal-input-group" id="lishiToolNameGroup">
            <label>Tool Name</label>
            <input type="text" class="modal-input" id="lishiToolName" placeholder="e.g., HU66, TOY43, GM37" style="text-transform:uppercase;">
        </div>
        <div class="modal-input-group">
            <label>Associated Keyway(s)</label>
            <div class="keyway-select-container" id="keywaySelectContainer">
                <div class="keyway-selected-tags" id="keywaySelectedTags"></div>
                <input type="text" class="keyway-search-input" id="keywaySearchInput" placeholder="Search keyways..." oninput="filterKeywayOptions()" onfocus="showKeywayDropdown()">
                <div class="keyway-dropdown" id="keywayDropdown"></div>
            </div>
            <input type="hidden" id="lishiToolKeyways">
        </div>
        <div class="modal-input-group">
            <label>Code Series (comma separated for multiple)</label>
            <input type="text" class="modal-input" id="lishiToolCodeSeries" placeholder="e.g., A001-A500, B001-B250">
        </div>
        <div class="modal-input-group">
            <label>Works On</label>
            <select class="modal-input" id="lishiToolWorksOn">
                <option value="all">Door, Ignition & Trunk</option>
                <option value="door-trunk">Door & Trunk Only</option>
                <option value="door-only">Door Only</option>
                <option value="ignition-only">Ignition Only</option>
            </select>
        </div>
        <div class="modal-input-group">
            <label>Cut Range (e.g., "1-10" or "3-10")</label>
            <div style="display:flex;gap:8px;align-items:center;">
                <input type="number" class="modal-input" id="lishiToolCutStart" placeholder="Start" min="1" style="width:80px;">
                <span style="color:var(--dim);">to</span>
                <input type="number" class="modal-input" id="lishiToolCutEnd" placeholder="End" min="1" style="width:80px;">
                <span style="color:var(--dim);">of</span>
                <input type="number" class="modal-input" id="lishiToolCutTotal" placeholder="Total" min="1" style="width:80px;">
            </div>
        </div>
        <div class="modal-input-group">
            <label>In Stock</label>
            <select class="modal-input" id="lishiToolInStock">
                <option value="yes">Yes - I own this tool</option>
                <option value="no">No - Don't have it</option>
            </select>
        </div>
        <div class="modal-input-group">
            <label>Notes</label>
            <textarea class="modal-input" id="lishiToolNotes" rows="2" placeholder="Optional notes about this tool"></textarea>
        </div>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeLishiToolModal()">Cancel</button>
            <button class="modal-btn primary" onclick="saveLishiTool()">Save Tool</button>
        </div>
    </div>
</div>

<!-- Rename Model Modal -->
<div class="modal" id="renameModelModal">
    <div class="modal-content">
        <div class="modal-title"> Edit Model</div>
        <input type="hidden" id="renameModelMake">
        <input type="hidden" id="renameModelOldName">
        <div class="modal-input-group">
            <label>Current Name</label>
            <div id="renameModelCurrentName" style="padding:10px;background:var(--bg);border-radius:6px;color:var(--dim);"></div>
        </div>
        <div class="modal-input-group">
            <label>New Name (or select existing to merge)</label>
            <input type="text" class="modal-input" id="renameModelNewName" placeholder="Enter new model name">
            <select class="modal-input" id="renameModelExisting" style="margin-top:8px;" onchange="document.getElementById('renameModelNewName').value = this.value; updateRenamePreview();">
                <option value="">-- Or select existing model to merge --</option>
            </select>
        </div>
        <div id="renameModelPreview" style="margin-top:12px;padding:12px;background:var(--bg);border-radius:8px;font-size:13px;color:var(--dim);"></div>
        <div class="modal-btns" style="flex-wrap:wrap;gap:8px;">
            <button class="modal-btn" onclick="deleteVehicleModel()" style="background:var(--danger);color:#fff;margin-right:auto;">Delete Model</button>
            <button class="modal-btn secondary" onclick="closeRenameModelModal()">Cancel</button>
            <button class="modal-btn primary" onclick="renameVehicleModel()">Rename & Merge</button>
        </div>
    </div>
</div>

<!-- Add New Make Modal -->
<div class="modal" id="addNewMakeModal">
    <div class="modal-content">
        <div class="modal-title"> Add New Make</div>
        <div id="addNewMakeSimilarWarning" style="display:none;padding:12px;background:rgba(255,193,7,0.1);border:1px solid var(--warning);border-radius:8px;margin-bottom:16px;">
            <div style="font-size:12px;color:var(--warning);font-weight:600;margin-bottom:8px;">Similar makes found:</div>
            <div id="addNewMakeSimilarList" style="font-size:13px;color:var(--text);"></div>
        </div>
        <div class="modal-input-group">
            <label>Make Name</label>
            <input type="text" class="modal-input" id="addNewMakeName" placeholder="e.g., Toyota, Ford, BMW" oninput="checkSimilarMakes()">
        </div>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeAddNewMakeModal()">Cancel</button>
            <button class="modal-btn primary" onclick="saveNewMake()">Add Make</button>
        </div>
    </div>
</div>

<!-- Add New Model Modal -->
<div class="modal" id="addNewModelModal">
    <div class="modal-content">
        <div class="modal-title" id="addNewModelTitle"> Add New Model</div>
        <input type="hidden" id="addNewModelMake">
        <div id="addNewModelSimilarWarning" style="display:none;padding:12px;background:rgba(255,193,7,0.1);border:1px solid var(--warning);border-radius:8px;margin-bottom:16px;">
            <div style="font-size:12px;color:var(--warning);font-weight:600;margin-bottom:8px;">Similar models found:</div>
            <div id="addNewModelSimilarList" style="font-size:13px;color:var(--text);"></div>
        </div>
        <div class="modal-input-group">
            <label>Model Name</label>
            <input type="text" class="modal-input" id="addNewModelName" placeholder="e.g., Camry, F-150, X5" oninput="checkSimilarModels()">
        </div>
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeAddNewModelModal()">Cancel</button>
            <button class="modal-btn primary" onclick="saveNewModel()">Add Model</button>
        </div>
    </div>
</div>

<!-- Add Year Range Modal (Enhanced) -->
<div class="modal year-range-form-modal" id="addYearRangeModal">
    <div class="modal-content">
        <div class="modal-title">Add Year Range</div>
        <input type="hidden" id="addYearRangeMake">
        <input type="hidden" id="addYearRangeModel">
        <input type="hidden" id="addYearRangeKeyType">

        <!-- Vehicle Info Banner -->
        <div style="padding:12px;background:var(--bg);border-radius:8px;margin-bottom:16px;">
            <div id="addYearRangeVehicleInfo" style="font-size:14px;color:var(--accent);font-weight:600;"></div>
        </div>

        <!-- Required: Year Range -->
        <div class="year-range-section">
            <div class="year-range-section-title">Year Range (Required)</div>
            <div class="year-range-row">
                <div class="modal-input-group" style="margin-bottom:0;">
                    <label>Start Year</label>
                    <input type="number" class="modal-input" id="addYearRangeStart" placeholder="2020" min="1900" max="2099" oninput="checkYearRangeConflicts()">
                </div>
                <div class="modal-input-group" style="margin-bottom:0;">
                    <label>End Year</label>
                    <input type="number" class="modal-input" id="addYearRangeEnd" placeholder="2024" min="1900" max="2099" oninput="checkYearRangeConflicts()">
                </div>
            </div>
            <!-- Year Range Conflict Warnings -->
            <div class="conflict-warning block" id="duplicateYearWarning">
                <div class="conflict-warning-text">This year range already exists. Edit instead?</div>
            </div>
            <div class="conflict-warning warn" id="overlapYearWarning">
                <div class="conflict-warning-text" id="overlapYearWarningText">Overlaps with existing range. Verify intentional.</div>
                <div class="conflict-verify">
                    <input type="checkbox" id="verifyOverlapYear" onchange="updateSaveButtonState()">
                    <label for="verifyOverlapYear">I've verified this is correct</label>
                </div>
            </div>
        </div>

        <!-- Multiple Keys Checkbox -->
        <div class="modal-input-group" style="display:flex;align-items:center;gap:10px;padding:10px;background:var(--card);border:1px solid var(--border);border-radius:8px;margin-bottom:12px;">
            <input type="checkbox" id="yrfMultipleKeys" onchange="toggleYrfMultipleKeys()" style="width:20px;height:20px;cursor:pointer;">
            <label for="yrfMultipleKeys" style="cursor:pointer;font-size:13px;margin:0;">Different keys for ignition vs. doors/trunk/glovebox</label>
        </div>

        <!-- Key Information Section (Single Key - default) -->
        <div id="yrfSingleKeyFields">
        <div class="year-range-section">
            <div class="year-range-section-title">Key Information</div>

            <!-- Key Type (shown first to drive chip visibility) -->
            <div class="modal-input-group">
                <label>Key Type</label>
                <div class="dropdown-with-new">
                    <select class="modal-input" id="yrfKeyType" onchange="onYrfKeyTypeChange()">
                        <option value="">Select Key Type...</option>
                    </select>
                    <div class="inline-add-new" id="yrfKeyTypeNew">
                        <input type="text" placeholder="Enter new key type..." id="yrfKeyTypeNewInput">
                    </div>
                </div>
            </div>

            <!-- Key Blank -->
            <div class="modal-input-group">
                <label>Key Blank</label>
                <div class="dropdown-with-new">
                    <select class="modal-input" id="yrfKeyBlank" onchange="onKeyBlankChange()">
                        <option value="">Select Key Blank...</option>
                    </select>
                    <div class="inline-add-new" id="yrfKeyBlankNew">
                        <input type="text" placeholder="Enter new key blank..." id="yrfKeyBlankNewInput">
                    </div>
                </div>
            </div>

            <!-- Keyway (auto-populates from Key Blank) -->
            <div class="modal-input-group">
                <label>Keyway</label>
                <div class="dropdown-with-new" id="yrfKeywayContainer">
                    <select class="modal-input" id="yrfKeyway" onchange="onYrfFieldChange('keyway')">
                        <option value="">Select Keyway...</option>
                    </select>
                    <div class="inline-add-new" id="yrfKeywayNew">
                        <input type="text" placeholder="Enter new keyway..." id="yrfKeywayNewInput">
                    </div>
                </div>
                <div class="conflict-warning warn" id="keywayMismatchWarning">
                    <div class="conflict-warning-text" id="keywayMismatchText"></div>
                    <div class="conflict-verify">
                        <input type="checkbox" id="verifyKeywayMismatch" onchange="updateSaveButtonState()">
                        <label for="verifyKeywayMismatch">I've verified this is correct</label>
                    </div>
                </div>
            </div>

            <!-- Chip Type (hidden when Non-Chip Key type is selected) -->
            <div class="modal-input-group" id="yrfChipTypeGroup">
                <label>Chip Type</label>
                <div class="dropdown-with-new" id="yrfChipContainer">
                    <select class="modal-input" id="yrfChipType" onchange="onYrfFieldChange('chip')">
                        <option value="">Select Chip Type...</option>
                    </select>
                    <div class="inline-add-new" id="yrfChipTypeNew">
                        <input type="text" placeholder="Enter new chip type..." id="yrfChipTypeNewInput">
                    </div>
                </div>
                <div class="conflict-warning warn" id="chipMismatchWarning">
                    <div class="conflict-warning-text" id="chipMismatchText"></div>
                    <div class="conflict-verify">
                        <input type="checkbox" id="verifyChipMismatch" onchange="updateSaveButtonState()">
                        <label for="verifyChipMismatch">I've verified this is correct</label>
                    </div>
                </div>
                <div class="conflict-warning warn" id="noChipWarning">
                    <div class="conflict-warning-text" id="noChipWarningText"></div>
                    <div class="conflict-verify">
                        <input type="checkbox" id="verifyNoChip" onchange="updateSaveButtonState()">
                        <label for="verifyNoChip">I've verified this is correct</label>
                    </div>
                </div>
            </div>

            <!-- Button Count -->
            <div class="modal-input-group">
                <label>Button Count</label>
                <div class="dropdown-with-new" id="yrfButtonCountContainer">
                    <select class="modal-input" id="yrfButtonCount" onchange="onYrfDropdownChange('yrfButtonCount')">
                        <option value="">Select Button Count...</option>
                    </select>
                    <div class="inline-add-new" id="yrfButtonCountNew">
                        <input type="text" placeholder="Enter button count..." id="yrfButtonCountNewInput">
                    </div>
                </div>
            </div>

            <!-- Button Functions (multi-select) -->
            <div class="modal-input-group">
                <label>Button Functions</label>
                <div class="multiselect-container" id="yrfButtonFunctionsContainer" onclick="toggleButtonFunctionsDropdown(event)">
                    <div class="multiselect-selected" id="yrfButtonFunctionsSelected">
                        <span class="multiselect-placeholder">Select functions...</span>
                    </div>
                    <div class="multiselect-dropdown" id="yrfButtonFunctionsDropdown">
                        <!-- Options populated dynamically -->
                    </div>
                </div>
            </div>

            <!-- FCC ID -->
            <div class="modal-input-group">
                <label>FCC ID</label>
                <div class="dropdown-with-new">
                    <select class="modal-input" id="yrfFccId" onchange="onFccIdChange()">
                        <option value="">Select FCC ID...</option>
                    </select>
                    <div class="inline-add-new" id="yrfFccIdNew">
                        <input type="text" placeholder="Enter new FCC ID..." id="yrfFccIdNewInput">
                    </div>
                </div>
                <div class="conflict-warning warn" id="fccMismatchWarning">
                    <div class="conflict-warning-text" id="fccMismatchText"></div>
                    <div class="conflict-verify">
                        <input type="checkbox" id="verifyFccMismatch" onchange="updateSaveButtonState()">
                        <label for="verifyFccMismatch">I've verified this is correct</label>
                    </div>
                </div>
            </div>

            <!-- Frequency -->
            <div class="modal-input-group">
                <label>Frequency</label>
                <div class="dropdown-with-new" id="yrfFrequencyContainer">
                    <select class="modal-input" id="yrfFrequency" onchange="onYrfDropdownChange('yrfFrequency')">
                        <option value="">Select Frequency...</option>
                    </select>
                    <div class="inline-add-new" id="yrfFrequencyNew">
                        <input type="text" placeholder="Enter new frequency..." id="yrfFrequencyNewInput">
                    </div>
                </div>
            </div>

            <!-- Part Numbers Row -->
            <div class="year-range-row">
                <div class="modal-input-group" style="margin-bottom:0;">
                    <label>Ilco Part Number</label>
                    <div class="dropdown-with-new">
                        <select class="modal-input" id="yrfIlcoPartNum" onchange="onYrfDropdownChange('yrfIlcoPartNum')">
                            <option value="">Select Ilco PN...</option>
                        </select>
                        <div class="inline-add-new" id="yrfIlcoPartNumNew">
                            <input type="text" placeholder="Enter Ilco PN..." id="yrfIlcoPartNumNewInput">
                        </div>
                    </div>
                </div>
                <div class="modal-input-group" style="margin-bottom:0;">
                    <label>Keystone Part Number</label>
                    <div class="dropdown-with-new">
                        <select class="modal-input" id="yrfKeystonePartNum" onchange="onYrfDropdownChange('yrfKeystonePartNum')">
                            <option value="">Select Keystone PN...</option>
                        </select>
                        <div class="inline-add-new" id="yrfKeystonePartNumNew">
                            <input type="text" placeholder="Enter Keystone PN..." id="yrfKeystonePartNumNewInput">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Code Series -->
            <div class="modal-input-group">
                <label>Code Series</label>
                <div class="dropdown-with-new">
                    <select class="modal-input" id="yrfCodeSeries" onchange="onYrfDropdownChange('yrfCodeSeries')">
                        <option value="">Select Code Series...</option>
                    </select>
                    <div class="inline-add-new" id="yrfCodeSeriesNew">
                        <input type="text" placeholder="e.g., DL01-DM70" id="yrfCodeSeriesNewInput">
                    </div>
                </div>
            </div>
        </div>

        <!-- Alternative Ignition Keys section -->
        <div class="year-range-section" id="yrfAltKeysSection">
            <div class="year-range-section-title" style="display:flex;justify-content:space-between;align-items:center;">
                <span>Alternative Ignition Keys <span style="font-size:10px;color:var(--dim);font-weight:400;text-transform:none;">(Optional  for vehicles with 2 possible ignition keys)</span></span>
            </div>
            <div id="yrfAltKeysList"></div>
            <button type="button" class="add-override-btn" onclick="addYrfAltKey()">+ Add Alternative Key</button>
        </div>
        </div>

        <!-- Dual Key Fields (when multiple keys checkbox is checked) -->
        <div id="yrfDualKeyFields" style="display:none;">
            <!-- Ignition Keys List -->
            <div style="margin-bottom:14px;">
                <div style="font-weight:600;color:var(--accent);margin-bottom:8px;font-size:14px;">&#128273; Ignition Key(s)</div>
                <div id="yrfIgnKeysList"></div>
                <button type="button" class="add-override-btn" onclick="addYrfDualKey('ign')">+ Add Ignition Key</button>
            </div>
            <!-- Door Keys List -->
            <div style="margin-bottom:12px;">
                <div style="font-weight:600;color:var(--accent2);margin-bottom:8px;font-size:14px;">&#128682; Door / Trunk / Glovebox Key(s)</div>
                <div id="yrfDoorKeysList"></div>
                <button type="button" class="add-override-btn" onclick="addYrfDualKey('door')">+ Add Door Key</button>
            </div>
        </div>

        <!-- Year-Specific Overrides Section -->
        <div class="year-overrides-section">
            <div class="year-overrides-title">
                <span> Year-Specific Overrides</span>
                <span style="font-weight:400;font-size:10px;color:var(--dim);text-transform:none;">(Optional)</span>
            </div>
            <div id="yearOverridesList"></div>
            <button type="button" class="add-override-btn" onclick="addYearOverride()">
                + Add Year-Specific Override
            </button>
        </div>

        <!-- Warnings Summary -->
        <div class="warnings-summary" id="yearRangeWarningsSummary">
            <div class="warnings-summary-title">Warnings require verification before saving:</div>
            <div class="warnings-summary-list" id="yearRangeWarningsList"></div>
        </div>

        <!-- Buttons -->
        <div class="modal-btns">
            <button class="modal-btn secondary" onclick="closeAddYearRangeModal()">Cancel</button>
            <button class="modal-btn primary" id="saveYearRangeBtn" onclick="saveNewYearRange()">Add Year Range</button>
        </div>
    </div>
</div>

<!-- Add Inventory Panel -->
<div class="add-inventory-panel" id="addInventoryPanel">
    <div class="add-inv-header">
        <button class="back-btn" onclick="closeAddInventory()"></button>
        <div class="add-inv-title">Add Inventory</div>
        <div class="add-inv-header-buttons">
            <button class="history-btn" onclick="closeAddInventory()">Inventory</button>
            <button class="history-btn" onclick="openPurchaseHistory()">History</button>
        </div>
    </div>

    <div class="add-inv-content">
        <!-- Step 1: Select Items -->
        <div class="add-inv-step" id="addInvStep1">
            <div class="add-inv-step-title">Step 1: Select FIDs</div>

            <!-- Active search area -->
            <div id="bulkSearchArea">
                <div class="add-inv-section">
                    <label>Search by FCC ID, FID, or Keyway</label>
                    <input type="text" class="add-inv-input" id="addInvSearch" placeholder="Enter FCC ID, FID, or keyway..." oninput="bulkSearchKeys()">
                </div>

                <div class="add-inv-results" id="addInvResults">
                    <div class="add-inv-placeholder">Enter search criteria above to find keys</div>
                </div>
            </div>

            <!-- Selected items list -->
            <div class="bulk-selected-items" id="bulkSelectedItems"></div>

            <!-- Add More Inventory button -->
            <button class="bulk-add-more-btn" id="bulkAddMoreBtn" style="display:none;" onclick="showBulkSearch()">+ Add More Inventory</button>

            <!-- Next button -->
            <button class="bulk-next-btn" id="bulkNextBtn" style="display:none;" onclick="goToBulkStep2()">Next: Identify &amp; Add Details</button>

            <div class="add-inv-section" style="margin-top:20px;padding-top:20px;border-top:1px solid var(--border);">
                <button onclick="openAddCustomKey()" style="width:100%;padding:14px;background:var(--card);border:1px dashed var(--accent);border-radius:10px;color:var(--accent);font-size:14px;cursor:pointer;">
                    + Add Custom Key to Database
                </button>
            </div>
        </div>

        <!-- Step 2: Purchase Details for All Items -->
        <div class="add-inv-step" id="addInvStep2" style="display:none;">
            <div class="add-inv-step-title">Step 2: Identify & Purchase Details</div>

            <!-- Shared purchase fields -->
            <div class="bulk-shared-fields" style="border-top:none;padding-top:0;margin-top:0;margin-bottom:20px;">
                <div class="bulk-shared-fields-title">Order Information</div>
                <div class="add-inv-section">
                    <label>Vendor/Distributor</label>
                    <select class="add-inv-select" id="addInvVendor">
                        <option value="">Select vendor...</option>
                    </select>
                </div>
                <div class="add-inv-section">
                    <label>Date Purchased</label>
                    <input type="date" class="add-inv-input" id="addInvDate">
                </div>
                <div class="bulk-field-row">
                    <div>
                        <label>Invoice/PO #</label>
                        <input type="text" class="add-inv-input" id="addInvInvoice" placeholder="Invoice number...">
                    </div>
                    <div>
                        <label>Notes</label>
                        <input type="text" class="add-inv-input" id="addInvNotes" placeholder="Any notes...">
                    </div>
                </div>
            </div>

            <!-- Per-item detail cards rendered by JS -->
            <div id="bulkDetailCards"></div>

            <div class="add-inv-buttons">
                <button class="add-inv-btn secondary" onclick="goToStep1()">Back</button>
                <button class="add-inv-btn primary" onclick="submitBulkInventory()">Add All to Inventory</button>
            </div>
        </div>

        <!-- Step 3: Confirmation -->
        <div class="add-inv-step" id="addInvStep3" style="display:none;">
            <div class="add-inv-success">
                <div class="add-inv-success-icon"></div>
                <div class="add-inv-success-title">Added to Inventory!</div>
                <div class="add-inv-success-details" id="addInvSuccessDetails"></div>
            </div>

            <div class="add-inv-buttons">
                <button class="add-inv-btn secondary" onclick="goToStep1()">Add Another</button>
                <button class="add-inv-btn primary" onclick="closeAddInventory()">Done</button>
            </div>
        </div>
    </div>
</div>

<!-- Purchase History Panel -->
<div class="purchase-history-panel" id="purchaseHistoryPanel">
    <div class="add-inv-header">
        <button class="back-btn" onclick="closePurchaseHistory()"></button>
        <div class="add-inv-title"> Purchase History</div>
    </div>
    <div class="purchase-history-filters">
        <input type="text" class="add-inv-input" id="historySearch" placeholder="Search..." oninput="filterPurchaseHistory()">
        <select class="add-inv-select" id="historyVendor" onchange="filterPurchaseHistory()">
            <option value="">All Vendors</option>
        </select>
    </div>
    <div class="purchase-history-list" id="purchaseHistoryList"></div>
</div>

<!-- Add Custom Key Panel -->
<div class="add-custom-key-panel" id="addCustomKeyPanel">
    <div class="add-inv-header">
        <button class="back-btn" onclick="closeAddCustomKey()"></button>
        <div class="add-inv-title"> Add Custom Key</div>
    </div>
    
    <div class="add-inv-content">
        <div class="add-inv-section">
            <label>Part Number *</label>
            <input type="text" class="add-inv-input" id="customKeyPN" placeholder="e.g., B111-PT, HYQ14FBA">
        </div>
        
        <div class="add-inv-section">
            <label>FCC ID</label>
            <div style="display:flex;gap:8px;">
                <input type="text" class="add-inv-input" id="customKeyFCC" placeholder="e.g., HYQ14FBA, KR5TXN7" style="flex:1;">
                <button type="button" onclick="autoAssignFidForNewKey()" style="padding:8px 12px;background:var(--accent);color:var(--bg);border:none;border-radius:8px;font-size:12px;font-weight:600;cursor:pointer;white-space:nowrap;"> Assign FID</button>
            </div>
            <div id="newKeyFidDisplay" style="margin-top:6px;font-size:12px;color:var(--dim);display:none;"></div>
        </div>
        
        <div class="add-inv-section">
            <label>Keyway / Blade</label>
            <select class="add-inv-select" id="customKeyKeyway" onchange="handleCustomDropdown(this, 'customKeyKeywayOther')">
            </select>
            <input type="text" class="add-inv-input" id="customKeyKeywayOther" placeholder="Enter custom keyway..." style="display:none;margin-top:8px;">
        </div>

        <div class="add-inv-section">
            <label>Key Type</label>
            <select class="add-inv-select" id="customKeyType" onchange="handleCustomDropdown(this, 'customKeyTypeOther'); toggleCustomKeyChipType()">
                <option value="">Select type...</option>
                <option value="Proximity">Proximity / Smart Key</option>
                <option value="Remote Head Key">Remote Head Key</option>
                <option value="Flip Key">Flip Key</option>
                <option value="PEPS Flip Key">PEPS Flip Key</option>
                <option value="Fobik">Fobik</option>
                <option value="Chip Key">Chip Key (Transponder)</option>
                <option value="Non-Chip Key">Non-Chip Key</option>
                <option value="Remote Only">Remote Only (no key blade)</option>
                <option value="VATS">VATS</option>
                <option value="VATS Single-Sided">VATS Single-Sided</option>
                <option value="VATS Double-Sided">VATS Double-Sided</option>
                <option value="__other__">+ Other (custom)</option>
            </select>
            <input type="text" class="add-inv-input" id="customKeyTypeOther" placeholder="Enter custom key type..." style="display:none;margin-top:8px;">
        </div>

        <div class="add-inv-section" id="customKeyChipSection">
            <label>Chip Type</label>
            <select class="add-inv-select" id="customKeyChip" onchange="handleCustomDropdown(this, 'customKeyChipOther')">
            </select>
            <input type="text" class="add-inv-input" id="customKeyChipOther" placeholder="Enter custom chip type..." style="display:none;margin-top:8px;">
        </div>

        <div class="add-inv-section">
            <label>Buttons</label>
            <select class="add-inv-select" id="customKeyButtons" onchange="handleCustomDropdown(this, 'customKeyButtonsOther')">
                <option value="">Select...</option>
                <optgroup label="2 Button">
                    <option value="2 Button: L, U (Lock, Unlock)">2 Button: L, U (Lock, Unlock)</option>
                </optgroup>
                <optgroup label="3 Button">
                    <option value="3 Button: L, U, P (Lock, Unlock, Panic)">3 Button: L, U, P (Lock, Unlock, Panic)</option>
                    <option value="3 Button: L, U, T (Lock, Unlock, Trunk)">3 Button: L, U, T (Lock, Unlock, Trunk)</option>
                    <option value="3 Button: L, U, H (Lock, Unlock, Hatch)">3 Button: L, U, H (Lock, Unlock, Hatch)</option>
                    <option value="3 Button: L, U, PSD (Lock, Unlock, Power Sliding Door)">3 Button: L, U, PSD (Lock, Unlock, Power Sliding Door)</option>
                </optgroup>
                <optgroup label="4 Button">
                    <option value="4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)">4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)</option>
                    <option value="4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)">4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)</option>
                    <option value="4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)">4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)</option>
                    <option value="4 Button: L, U, P, G (Lock, Unlock, Panic, Gate)">4 Button: L, U, P, G (Lock, Unlock, Panic, Gate)</option>
                    <option value="4 Button: L, U, P, RG (Lock, Unlock, Panic, Rear Glass)">4 Button: L, U, P, RG (Lock, Unlock, Panic, Rear Glass)</option>
                    <option value="4 Button: L, U, P, PSD (Lock, Unlock, Panic, Power Sliding Door)">4 Button: L, U, P, PSD (Lock, Unlock, Panic, PSD)</option>
                    <option value="4 Button: L, U, P, CH (Lock, Unlock, Panic, Charge)">4 Button: L, U, P, CH (Lock, Unlock, Panic, Charge)</option>
                    <option value="4 Button: L, U, P, AC (Lock, Unlock, Panic, Air Conditioning)">4 Button: L, U, P, AC (Lock, Unlock, Panic, A/C)</option>
                </optgroup>
                <optgroup label="5 Button">
                    <option value="5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)">5 Button: L, U, P, T, RS (Trunk + Remote Start)</option>
                    <option value="5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)">5 Button: L, U, P, H, RS (Hatch + Remote Start)</option>
                    <option value="5 Button: L, U, P, RG, RS (Lock, Unlock, Panic, Rear Glass, Remote Start)">5 Button: L, U, P, RG, RS (Rear Glass + Remote Start)</option>
                    <option value="5 Button: L, U, P, PSD2 (Lock, Unlock, Panic, Dual Power Sliding Doors)">5 Button: L, U, P, PSD2 (Dual Power Sliding Doors)</option>
                    <option value="5 Button: L, U, P, TG, RS (Lock, Unlock, Panic, Tailgate, Remote Start)">5 Button: L, U, P, TG, RS (Tailgate + Remote Start)</option>
                </optgroup>
                <optgroup label="6 Button">
                    <option value="6 Button: L, U, P, H, PSD2 (Lock, Unlock, Panic, Hatch, Dual Power Sliding Doors)">6 Button: L, U, P, H, PSD2 (Hatch + Dual PSD)</option>
                    <option value="6 Button: L, U, P, T, PSD2 (Lock, Unlock, Panic, Trunk, Dual Power Sliding Doors)">6 Button: L, U, P, T, PSD2 (Trunk + Dual PSD)</option>
                    <option value="6 Button: L, U, P, H, RS, HTL (Lock, Unlock, Panic, Hatch, Remote Start, Head & Tail Lights)">6 Button: L, U, P, H, RS, HTL (Hatch + RS + Lights)</option>
                    <option value="6 Button: L, U, P, T, RS, HTL (Lock, Unlock, Panic, Trunk, Remote Start, Head & Tail Lights)">6 Button: L, U, P, T, RS, HTL (Trunk + RS + Lights)</option>
                </optgroup>
                <optgroup label="7+ Button">
                    <option value="7 Button: L, U, P, H, PSD2, RS (Lock, Unlock, Panic, Hatch, Dual PSD, Remote Start)">7 Button: L, U, P, H, PSD2, RS (Hatch + Dual PSD + RS)</option>
                    <option value="8 Button: L, U, P, H, RSPA-F, RSPA-R, HTL (Lock, Unlock, Panic, Hatch, RSPA Front/Rear, Head & Tail Lights)">8 Button: Advanced (RSPA + Lights)</option>
                </optgroup>
                <optgroup label="No Buttons">
                    <option value="None (Transponder Only)">None (Transponder Only)</option>
                </optgroup>
                <option value="__other__">+ Other (custom)</option>
            </select>
            <input type="text" class="add-inv-input" id="customKeyButtonsOther" placeholder="e.g., 4 Button: L, U, P, X (Lock, Unlock, Panic, Custom)" style="display:none;margin-top:8px;">
        </div>
        
        <div class="add-inv-section">
            <label>Frequency</label>
            <select class="add-inv-select" id="customKeyFreq" onchange="handleCustomDropdown(this, 'customKeyFreqOther')">
                <option value="">Select...</option>
                <optgroup label="315 MHz Band (North America)">
                    <option value="315 MHz">315 MHz</option>
                    <option value="314.35 MHz">314.35 MHz</option>
                    <option value="314.975 MHz">314.975 MHz</option>
                    <option value="313.85 MHz">313.85 MHz</option>
                    <option value="313.8 MHz">313.8 MHz</option>
                    <option value="315-316 MHz">315-316 MHz</option>
                    <option value="314.5-315.5 MHz">314.5-315.5 MHz</option>
                    <option value="312.1-314.35 MHz">312.1-314.35 MHz</option>
                </optgroup>
                <optgroup label="433 MHz Band (Europe/Asia)">
                    <option value="433.92 MHz">433.92 MHz</option>
                    <option value="433.4-434.4 MHz">433.4-434.4 MHz</option>
                    <option value="433.66-434.18 MHz">433.66-434.18 MHz</option>
                </optgroup>
                <optgroup label="902 MHz Band">
                    <option value="902.375-903.425 MHz">902.375-903.425 MHz</option>
                </optgroup>
                <optgroup label="923 MHz Band">
                    <option value="923.625-924.6 MHz">923.625-924.6 MHz</option>
                </optgroup>
                <optgroup label="No Frequency">
                    <option value="None (Transponder Only)">None (Transponder Only)</option>
                </optgroup>
                <option value="__other__">+ Other (custom)</option>
            </select>
            <input type="text" class="add-inv-input" id="customKeyFreqOther" placeholder="Enter custom frequency..." style="display:none;margin-top:8px;">
        </div>

        <div class="add-inv-section" style="border-top:1px solid var(--border);padding-top:16px;margin-top:8px;">
            <label>Vehicle Applications</label>
            <div id="customKeyVehicles"></div>
            <button onclick="addCustomKeyVehicle()" style="width:100%;padding:10px;background:var(--bg);border:1px dashed var(--border);border-radius:8px;color:var(--dim);font-size:13px;cursor:pointer;margin-top:8px;">
                + Add Vehicle
            </button>
        </div>
        
        <div class="add-inv-section" style="border-top:1px solid var(--border);padding-top:16px;margin-top:8px;">
            <label>Notes</label>
            <textarea class="add-inv-input" id="customKeyNotes" placeholder="Any additional notes..." style="min-height:80px;resize:vertical;"></textarea>
        </div>
        
        <div class="add-inv-buttons" style="margin-top:24px;">
            <button class="add-inv-btn secondary" onclick="closeAddCustomKey()">Cancel</button>
            <button class="add-inv-btn primary" onclick="saveCustomKey()">Save to Database</button>
        </div>
    </div>
</div>

<!-- Tools Main Panel -->
<div class="tools-panel" id="toolsPanel">
    <div class="tools-header">
        <button class="back-btn" onclick="closeToolsPanel()"></button>
        <div class="tools-title"> Tools & Equipment</div>
    </div>
    <div class="tools-content">
        <div class="tools-section-card" onclick="openLishiLookup()">
            <div class="tools-section-card-header">
                <span class="tools-section-icon"></span>
                <div>
                    <div class="tools-section-title">Lishi Tools</div>
                    <div class="tools-section-desc">Picking & decoding tools for locks</div>
                </div>
            </div>
        </div>
        <div class="tools-section-card" onclick="openProgrammersPanel()">
            <div class="tools-section-card-header">
                <span class="tools-section-icon"></span>
                <div>
                    <div class="tools-section-title">Programmers & Equipment</div>
                    <div class="tools-section-desc">Cables, adapters, EEPROM clamps & pin readers</div>
                </div>
            </div>
        </div>
        <div class="tools-section-card" onclick="openQuickAddVehicleModal()">
            <div class="tools-section-card-header">
                <span class="tools-section-icon"></span>
                <div>
                    <div class="tools-section-title">Quick Add Vehicle</div>
                    <div class="tools-section-desc">Create vehicles for tool linking</div>
                </div>
            </div>
        </div>
        <div class="tools-section-card" onclick="openIncompleteVehiclesView()" id="incompleteVehiclesCard">
            <div class="tools-section-card-header">
                <span class="tools-section-icon"></span>
                <div>
                    <div class="tools-section-title">Incomplete Vehicles <span id="incompleteVehiclesBadge" style="background:#ff9500;color:#fff;padding:2px 8px;border-radius:10px;font-size:11px;margin-left:8px;display:none;">0</span></div>
                    <div class="tools-section-desc">Complete partial vehicle records</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Programmers & Equipment Panel -->
<div class="programmers-panel" id="programmersPanel">
    <div class="programmers-header">
        <div class="programmers-header-top">
            <button class="back-btn" onclick="closeProgrammersPanel()"></button>
            <div class="programmers-title"> Programmers & Equipment</div>
            <button class="back-btn" onclick="openPlatformMgmt()" title="Manage Platforms"></button>
        </div>
        <div class="platform-tabs" id="platformTabs">
            <button class="platform-tab active" data-platform="all" onclick="selectPlatformFilter('all')">All Platforms</button>
        </div>
        <div class="programmers-filters" id="categoryFilters">
            <!-- Dynamically populated by renderCategoryFilters() -->
        </div>
        <div class="programmers-filters" style="margin-top:8px;">
            <button class="filter-chip active" data-status="all" onclick="selectStatusFilter('all')">All Status</button>
            <button class="filter-chip" data-status="owned" onclick="selectStatusFilter('owned')"> Owned</button>
            <button class="filter-chip" data-status="wishlist" onclick="selectStatusFilter('wishlist')"> Wishlist</button>
            <button class="filter-chip" data-status="not-owned" onclick="selectStatusFilter('not-owned')">Not Owned</button>
        </div>
    </div>
    <div class="programmers-content">
        <div style="display:flex;gap:8px;margin-bottom:16px;">
            <button class="back-btn" style="flex:1;padding:12px;border-radius:8px;font-size:14px;" onclick="openAddToolPanel()">+ Add Tool</button>
            <button class="back-btn" style="padding:12px;border-radius:8px;font-size:14px;" onclick="openWishlistPanel()"> Wishlist</button>
        </div>
        <div class="tools-list" id="toolsList">
            <div style="text-align:center;color:var(--dim);padding:40px;">No tools yet. Add your first tool!</div>
        </div>
    </div>
</div>

<!-- Platform Management Panel -->
<div class="platform-mgmt-panel" id="platformMgmtPanel">
    <div class="tools-header">
        <button class="back-btn" onclick="closePlatformMgmt()"></button>
        <div class="tools-title"> Manage Platforms</div>
    </div>
    <div class="tools-content">
        <button class="back-btn" style="width:100%;padding:12px;margin-bottom:16px;border-radius:8px;font-size:14px;" onclick="openAddPlatformModal()">+ Add Platform</button>
        <div id="platformList">
            <div style="text-align:center;color:var(--dim);padding:40px;">No platforms yet. Add your first platform!</div>
        </div>
    </div>
</div>

<!-- Tool Detail Panel -->
<div class="tool-detail-panel" id="toolDetailPanel">
    <div class="tool-detail-header">
        <button class="back-btn" onclick="closeToolDetail()"></button>
        <div class="tool-detail-title" id="toolDetailTitle">Tool Details</div>
        <button class="back-btn" onclick="editCurrentTool()"></button>
    </div>
    <div class="tool-detail-content" id="toolDetailContent">
    </div>
</div>

<!-- Add/Edit Tool Panel -->
<div class="add-tool-panel" id="addToolPanel">
    <div class="tools-header">
        <button class="back-btn" onclick="closeAddToolPanel()"></button>
        <div class="tools-title" id="addToolPanelTitle"> Add Tool</div>
    </div>
    <div class="tools-content" style="padding-bottom:100px;">
        <div class="tool-form-section">
            <h3>Basic Information</h3>
            <div class="tool-form-row">
                <label>Tool Name *</label>
                <input type="text" id="toolFormName" placeholder="e.g., BA Smart Cable">
            </div>
            <div class="tool-form-row">
                <label>Part Number</label>
                <input type="text" id="toolFormPartNumber" placeholder="e.g., XD8ABA9EN">
            </div>
            <div class="tool-form-row">
                <label>Category *</label>
                <select id="toolFormCategory">
                    <!-- Dynamically populated by populateCategorySelect() -->
                </select>
            </div>
        </div>

        <div class="tool-form-section">
            <h3>Platform Compatibility</h3>
            <div class="tool-form-row">
                <label>Compatibility Type *</label>
                <select id="toolFormCompatType" onchange="handleCompatTypeChange()">
                    <option value="single">Single Platform</option>
                    <option value="multiple">Multiple Platforms</option>
                </select>
            </div>
            <div class="tool-form-row" id="singlePlatformSelect">
                <label>Select Platform *</label>
                <select id="toolFormSinglePlatform">
                    <option value="">Select platform...</option>
                </select>
            </div>
            <div class="tool-form-row" id="multiplePlatformSelect" style="display:none;">
                <label>Select Platforms *</label>
                <div class="platform-checkbox-list" id="toolFormPlatformCheckboxes">
                </div>
            </div>
        </div>

        <div class="tool-form-section">
            <h3>Job Types</h3>
            <div class="job-type-checkbox-group">
                <label class="job-type-checkbox-item">
                    <input type="checkbox" value="AKL" id="jobTypeAKL">
                    <span>AKL</span>
                </label>
                <label class="job-type-checkbox-item">
                    <input type="checkbox" value="Add Key" id="jobTypeAddKey">
                    <span>Add Key</span>
                </label>
                <label class="job-type-checkbox-item">
                    <input type="checkbox" value="Remote Programming" id="jobTypeRemote">
                    <span>Remote Programming</span>
                </label>
                <label class="job-type-checkbox-item">
                    <input type="checkbox" value="Parameter Reset" id="jobTypeParamReset">
                    <span>Parameter Reset</span>
                </label>
            </div>
        </div>

        <div class="tool-form-section">
            <h3>Status</h3>
            <div class="status-radio-group" id="toolFormStatusGroup">
                <label class="status-radio-item selected" onclick="selectToolStatus('owned')">
                    <input type="radio" name="toolStatus" value="owned" checked>
                    <span> Owned</span>
                </label>
                <label class="status-radio-item" onclick="selectToolStatus('wishlist')">
                    <input type="radio" name="toolStatus" value="wishlist">
                    <span> Wishlist</span>
                </label>
                <label class="status-radio-item" onclick="selectToolStatus('not-owned')">
                    <input type="radio" name="toolStatus" value="not-owned">
                    <span> Not Owned</span>
                </label>
            </div>
        </div>

        <div class="tool-form-section">
            <h3>Vehicle Applications</h3>
            <div class="vehicle-app-list" id="toolFormVehicleApps">
            </div>
            <button class="add-vehicle-app-btn" onclick="addToolVehicleApp()">+ Add Vehicle Application</button>
        </div>

        <div class="tool-form-section">
            <h3>Notes</h3>
            <div class="tool-form-row">
                <label>Tool Notes (always visible on this tool)</label>
                <textarea id="toolFormNotes" placeholder="General notes about this tool..."></textarea>
            </div>
            <div class="tool-form-row">
                <label>Cross-Reference Notes (shown on tool AND related vehicles)</label>
                <textarea id="toolFormCrossRefNotes" placeholder="Notes that will appear on vehicle pages..."></textarea>
            </div>
        </div>
    </div>
    <div class="tool-form-actions">
        <button class="tool-form-cancel" onclick="closeAddToolPanel()">Cancel</button>
        <button class="tool-form-save" onclick="saveToolForm()">Save Tool</button>
    </div>
</div>

<!-- Add Platform Modal -->
<div class="add-platform-modal" id="addPlatformModal">
    <div class="add-platform-modal-content">
        <h3 id="addPlatformModalTitle">Add Platform</h3>
        <div class="tool-form-row">
            <label>Platform/Manufacturer *</label>
            <input type="text" id="platformFormName" placeholder="e.g., OBDstar, Autel, Xhorse">
        </div>
        <div class="add-platform-modal-actions">
            <button class="tool-form-cancel" onclick="closeAddPlatformModal()">Cancel</button>
            <button class="tool-form-save" onclick="savePlatformForm()">Save</button>
        </div>
    </div>
</div>

<!-- Add Category Modal -->
<div class="add-platform-modal" id="addCategoryModal">
    <div class="add-platform-modal-content">
        <h3 id="addCategoryModalTitle">Add Category</h3>
        <div class="tool-form-row">
            <label>Category Name *</label>
            <input type="text" id="categoryFormName" placeholder="e.g., Transponder Tools">
        </div>
        <div class="add-platform-modal-actions">
            <button class="tool-form-cancel" onclick="closeAddCategoryModal()">Cancel</button>
            <button class="tool-form-save" onclick="saveCategoryForm()">Save</button>
        </div>
    </div>
</div>

<!-- Wishlist Panel -->
<div class="wishlist-panel" id="wishlistPanel">
    <div class="tools-header">
        <button class="back-btn" onclick="closeWishlistPanel()"></button>
        <div class="tools-title"> Tool Wishlist</div>
    </div>
    <div class="tools-content">
        <div class="tools-list" id="wishlistToolsList">
            <div style="text-align:center;color:var(--dim);padding:40px;">No items in wishlist</div>
        </div>
    </div>
</div>

<!-- PWA Install Banner -->
<div class="pwa-install-banner" id="pwaInstallBanner">
    <button class="pwa-install-close" onclick="dismissInstallBanner()"></button>
    <div class="pwa-install-content">
        <div class="pwa-install-icon"></div>
        <div class="pwa-install-text">
            <h4>Install Lock & Scroll</h4>
            <p>Add to home screen for quick access</p>
        </div>
        <button class="pwa-install-btn" onclick="installPWA()">Install</button>
    </div>
</div>

<!-- FCCID datalist for autocomplete -->
<datalist id="fccidDatalist"></datalist>

<!-- Bottom Navigation -->
<div class="bottom-nav">
    <button class="nav-btn active" onclick="showTab('keys', event)">
        <span class="icon"></span>
        <span>Keys</span>
    </button>
    <button class="nav-btn" onclick="showTab('vehicle', event)">
        <span class="icon"></span>
        <span>Vehicle</span>
    </button>
    <button class="nav-btn" onclick="showTab('tools', event)">
        <span class="icon"></span>
        <span>Tools</span>
    </button>
    <button class="nav-btn" onclick="showTab('fid', event)">
        <span class="icon"></span>
        <span>FID</span>
    </button>
    <button class="nav-btn" onclick="showTab('settings', event)">
        <span class="icon"></span>
        <span>Settings</span>
    </button>
</div>

<!-- Fixed Home Button -->
<button class="home-btn-fixed" onclick="goHome()" title="Home"></button>

<!-- Toast -->
<div class="toast" id="toast"></div>

<script>
// ===================== FIREBASE CONFIG =====================
let firebaseEnabled = false;
let auth = null;
let firebaseDb = null;

// Try to initialize Firebase (won't break app if it fails)
try {
    if (typeof firebase !== 'undefined') {
        const firebaseConfig = {
            apiKey: "AIzaSyBFoy27lEbnfvNIIUoUHmRbyQ8ijUc379c",
            authDomain: "locknscroll.firebaseapp.com",
            projectId: "locknscroll",
            storageBucket: "locknscroll.firebasestorage.app",
            messagingSenderId: "988809034214",
            appId: "1:988809034214:web:6e006dad85b8f931d13e27"
        };
        firebase.initializeApp(firebaseConfig);
        auth = firebase.auth();
        firebaseDb = firebase.firestore();
        firebaseEnabled = true;
        console.log('Firebase initialized successfully');
    }
} catch (e) {
    console.log('Firebase not available, running in offline mode:', e);
}

// Cloud Sync State
let currentUser = null;
let lastSyncTime = null;
let isSyncing = false;
let syncEnabled = false;

// Shared Database State
let sharedModeEnabled = false;
let sharedOwnerEmail = null;
let authorizedUsers = []; // Array of email addresses

// ===================== CLOUD SYNC FUNCTIONS =====================
function renderCloudSyncUI() {
    const container = document.getElementById('cloudSyncUI');
    if (!container) return;
    
    if (!firebaseEnabled) {
        container.innerHTML = `
            <div class="sync-status-box">
                <div class="sync-icon-wrap"></div>
                <div class="sync-info-wrap">
                    <div class="sync-status-text">Offline Mode</div>
                    <div class="sync-detail-text">Cloud sync requires internet connection</div>
                </div>
            </div>
        `;
        return;
    }
    
    if (!currentUser) {
        // Not signed in
        container.innerHTML = `
            <div class="sync-status-box">
                <div class="sync-icon-wrap"></div>
                <div class="sync-info-wrap">
                    <div class="sync-status-text">Not Connected</div>
                    <div class="sync-detail-text">Sign in to enable cloud sync</div>
                </div>
            </div>
            <button class="sync-btn google" onclick="signInWithGoogle()">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="white"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
                Sign in with Google
            </button>
        `;
    } else {
        // Signed in
        const initial = currentUser.displayName ? currentUser.displayName.charAt(0).toUpperCase() : '?';
        const avatarContent = currentUser.photoURL 
            ? `<img src="${currentUser.photoURL}" alt="Avatar">` 
            : initial;
        const lastSyncStr = lastSyncTime ? formatLastSync(lastSyncTime) : 'Never';
        const statusIcon = isSyncing ? '<span class="spinning"></span>' : '';
        const statusText = isSyncing ? 'Syncing...' : 'Connected & Synced';
        const statusDetail = isSyncing ? 'Uploading changes...' : 'All data up to date';
        
        container.innerHTML = `
            <div class="sync-status-box connected">
                <div class="sync-icon-wrap">${statusIcon}</div>
                <div class="sync-info-wrap">
                    <div class="sync-status-text">${statusText}</div>
                    <div class="sync-detail-text">${statusDetail}</div>
                </div>
            </div>
            <div class="user-info-box">
                <div class="user-avatar">${avatarContent}</div>
                <div class="user-details">
                    <div class="user-name">${currentUser.displayName || 'User'}</div>
                    <div class="user-email">${currentUser.email}</div>
                </div>
            </div>
            <button class="sync-btn sync-now" onclick="syncNow()" ${isSyncing ? 'disabled' : ''}>
                 Sync Now
            </button>
            <button class="sync-btn signout" onclick="signOutUser()">
                Sign Out
            </button>
            <div class="last-sync-text">Last synced: <span>${lastSyncStr}</span></div>
            <div class="sync-items-list">
                <div class="sync-item-row"><span>Custom Keys</span><span class="count">${customKeys.length}</span></div>
                <div class="sync-item-row"><span>Stock Counts <span style="font-size:10px;color:var(--dim);">(personal)</span></span><span class="count">${Object.keys(stockData).length}</span></div>
                <div class="sync-item-row"><span>Lishi Tools</span><span class="count">${Object.keys(lishiInventory).length}</span></div>
                <div class="sync-item-row"><span>FID Assignments</span><span class="count">${Object.keys(fidAssignments).length}</span></div>
                <div class="sync-item-row"><span>Purchase History</span><span class="count">${purchaseHistory.length}</span></div>
            </div>
            ${renderSharedUsersSection()}
        `;
    }
}

function formatLastSync(date) {
    const now = new Date();
    const diff = now - date;
    if (diff < 60000) return 'Just now';
    if (diff < 3600000) return Math.floor(diff / 60000) + ' min ago';
    if (diff < 86400000) return Math.floor(diff / 3600000) + ' hours ago';
    return date.toLocaleDateString();
}

function renderSharedUsersSection() {
    const isOwner = sharedOwnerEmail === currentUser?.email;
    const isAuthorized = authorizedUsers.includes(currentUser?.email);

    if (!sharedModeEnabled) {
        // Shared mode not enabled yet
        return `
            <div class="shared-users-section">
                <div class="shared-header">
                    <span> Team Sharing</span>
                </div>
                <p style="font-size:11px;color:var(--dim);margin:8px 0;">Share your database with other users. All team members will see and edit the same data.</p>
                <button class="sync-btn" onclick="enableSharedMode()" style="margin-top:8px;">
                     Enable Team Sharing
                </button>
            </div>
        `;
    }

    // Shared mode is enabled
    let usersListHtml = '';
    if (authorizedUsers.length > 0) {
        usersListHtml = authorizedUsers.map(email => {
            const isOwnerUser = email === sharedOwnerEmail;
            const removeBtn = isOwner && !isOwnerUser
                ? `<button class="remove-user-btn" onclick="removeAuthorizedUser('${email}')" title="Remove user"></button>`
                : '';
            return `
                <div class="authorized-user-row">
                    <span class="user-email-text">${email}</span>
                    ${isOwnerUser ? '<span class="owner-badge">Owner</span>' : ''}
                    ${removeBtn}
                </div>
            `;
        }).join('');
    } else {
        usersListHtml = '<div style="color:var(--dim);font-size:12px;padding:8px;">No users added yet</div>';
    }

    const addUserHtml = isOwner ? `
        <div class="add-user-row">
            <input type="email" id="newUserEmail" placeholder="Enter email address" class="add-user-input">
            <button class="add-user-btn" onclick="addAuthorizedUser()">Add</button>
        </div>
    ` : '';

    const statusText = isAuthorized || isOwner
        ? ' You have access to the shared database'
        : ' You are not authorized - ask the owner to add your email';

    return `
        <div class="shared-users-section">
            <div class="shared-header">
                <span> Team Sharing</span>
                <span class="shared-status-badge enabled">Enabled</span>
            </div>
            <p style="font-size:11px;color:var(--dim);margin:8px 0;">${statusText}</p>
            <div class="authorized-users-list">
                ${usersListHtml}
            </div>
            ${addUserHtml}
            ${isOwner ? `<button class="sync-btn danger-outline" onclick="disableSharedMode()" style="margin-top:12px;font-size:11px;">Disable Team Sharing</button>` : ''}
        </div>
    `;
}

async function loadSharedConfig() {
    if (!firebaseDb || !currentUser) return;

    try {
        const configDoc = await firebaseDb.collection('shared').doc('config').get();
        if (configDoc.exists) {
            const config = configDoc.data();
            sharedModeEnabled = true;
            sharedOwnerEmail = config.ownerEmail || null;
            authorizedUsers = config.authorizedUsers || [];
        } else {
            sharedModeEnabled = false;
            sharedOwnerEmail = null;
            authorizedUsers = [];
        }
    } catch (error) {
        console.error('Error loading shared config:', error);
    }
}

async function saveSharedConfig() {
    if (!firebaseDb || !currentUser) return;

    try {
        await firebaseDb.collection('shared').doc('config').set({
            ownerEmail: sharedOwnerEmail,
            authorizedUsers: authorizedUsers,
            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        });
    } catch (error) {
        console.error('Error saving shared config:', error);
        toast('Failed to save shared config');
    }
}

async function enableSharedMode() {
    if (!currentUser) return;

    if (!confirm('Enable Team Sharing? Your data will be shared with users you add. You will be the owner and can manage who has access.')) {
        return;
    }

    sharedModeEnabled = true;
    sharedOwnerEmail = currentUser.email;
    authorizedUsers = [currentUser.email];

    await saveSharedConfig();

    // Upload current data to shared location
    await uploadToCloud();

    toast('Team sharing enabled! Add users by their email.');
    renderCloudSyncUI();
}

async function disableSharedMode() {
    if (!currentUser || sharedOwnerEmail !== currentUser.email) {
        toast('Only the owner can disable sharing');
        return;
    }

    if (!confirm('Disable Team Sharing? Other users will lose access to the shared database.')) {
        return;
    }

    try {
        // Delete shared config
        await firebaseDb.collection('shared').doc('config').delete();
        // Optionally keep the shared data or delete it
        // For safety, we'll keep the data but it won't be accessible

        sharedModeEnabled = false;
        sharedOwnerEmail = null;
        authorizedUsers = [];

        toast('Team sharing disabled');
        renderCloudSyncUI();
    } catch (error) {
        console.error('Error disabling shared mode:', error);
        toast('Failed to disable sharing');
    }
}

async function addAuthorizedUser() {
    const input = document.getElementById('newUserEmail');
    const email = input?.value?.trim().toLowerCase();

    if (!email) {
        toast('Please enter an email address');
        return;
    }

    if (!email.includes('@')) {
        toast('Please enter a valid email address');
        return;
    }

    if (authorizedUsers.includes(email)) {
        toast('User already has access');
        return;
    }

    authorizedUsers.push(email);
    await saveSharedConfig();

    input.value = '';
    toast('User added: ' + email);
    renderCloudSyncUI();
}

async function removeAuthorizedUser(email) {
    if (email === sharedOwnerEmail) {
        toast('Cannot remove the owner');
        return;
    }

    if (!confirm('Remove ' + email + ' from team sharing?')) {
        return;
    }

    authorizedUsers = authorizedUsers.filter(e => e !== email);
    await saveSharedConfig();

    toast('User removed');
    renderCloudSyncUI();
}

async function signInWithGoogle() {
    if (!firebaseEnabled || !auth) {
        toast('Cloud sync not available');
        return;
    }
    try {
        const provider = new firebase.auth.GoogleAuthProvider();
        await auth.signInWithPopup(provider);
        toast('Signed in successfully!');
    } catch (error) {
        console.error('Sign in error:', error);
        if (error.code === 'auth/popup-blocked') {
            toast('Please allow popups for this site');
        } else if (error.code === 'auth/cancelled-popup-request') {
            // User cancelled, ignore
        } else {
            toast('Sign in failed: ' + error.message);
        }
    }
}

async function signOutUser() {
    if (!auth) return;
    try {
        await auth.signOut();
        currentUser = null;
        syncEnabled = false;
        lastSyncTime = null;
        renderCloudSyncUI();
        toast('Signed out');
    } catch (error) {
        console.error('Sign out error:', error);
        toast('Sign out failed');
    }
}

async function syncNow() {
    if (!currentUser || isSyncing || !firebaseDb) return;
    
    isSyncing = true;
    renderCloudSyncUI();
    
    try {
        await uploadToCloud();
        await downloadFromCloud();
        lastSyncTime = new Date();
        localStorage.setItem('lockscroll_last_sync', lastSyncTime.toISOString());
        toast('Sync complete!');
    } catch (error) {
        console.error('Sync error:', error);
        toast('Sync failed: ' + error.message);
    }
    
    isSyncing = false;
    renderCloudSyncUI();
}

async function uploadToCloud() {
    if (!currentUser || !firebaseDb) return;

    try {
        // Always save personal data (stock counts) to user's own location
        const personalDocRef = firebaseDb.collection('users').doc(currentUser.uid);
        const personalData = {
            stockData: stockData,
            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        };
        await personalDocRef.set(personalData, { merge: true });

        // Check if user is authorized for shared mode
        if (sharedModeEnabled) {
            const isAuthorized = authorizedUsers.includes(currentUser.email);
            if (!isAuthorized) {
                console.log('User not authorized for shared database');
                return;
            }

            // Save shared data to shared location (excludes stockData)
            const sharedDocRef = firebaseDb.collection('shared').doc('data');
            const sharedData = {
                customKeys: customKeys,
                customVehicles: customVehicles,
                lishiInventory: lishiInventory,
                lishiVehicleData: lishiVehicleData,
                lishiData: lishiData,
                deletedLishiTools: deletedLishiTools,
                customKeyways: customKeyways,
                vendorPrices: vendorPrices,
                customVendors: customVendors,
                fidAssignments: fidAssignments,
                fidMerges: fidMerges,
                fidPrefixes: fidPrefixes,
                purchaseHistory: purchaseHistory,
                toolsDatabase: toolsDatabase,
                vehicleOverrides: vehicleOverrides,
                keyInfoOverrides: keyInfoOverrides,
                vehicleYearNotes: vehicleYearNotes,
                customDropdownValues: customDropdownValues,
                keyRelationships: keyRelationships,
                fccRelationships: fccRelationships,
                updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
                lastUpdatedBy: currentUser.email
            };
            await sharedDocRef.set(sharedData, { merge: true });
        } else {
            // Not in shared mode - save everything to personal location
            const allData = {
                customKeys: customKeys,
                customVehicles: customVehicles,
                lishiInventory: lishiInventory,
                lishiVehicleData: lishiVehicleData,
                lishiData: lishiData,
                deletedLishiTools: deletedLishiTools,
                customKeyways: customKeyways,
                vendorPrices: vendorPrices,
                customVendors: customVendors,
                fidAssignments: fidAssignments,
                fidMerges: fidMerges,
                fidPrefixes: fidPrefixes,
                purchaseHistory: purchaseHistory,
                toolsDatabase: toolsDatabase,
                vehicleOverrides: vehicleOverrides,
                keyInfoOverrides: keyInfoOverrides,
                vehicleYearNotes: vehicleYearNotes,
                customDropdownValues: customDropdownValues,
                keyRelationships: keyRelationships,
                fccRelationships: fccRelationships,
                updatedAt: firebase.firestore.FieldValue.serverTimestamp()
            };
            await personalDocRef.set(allData, { merge: true });
        }
        console.log('Cloud sync successful');
    } catch (error) {
        console.error('Cloud sync failed:', error);
        toast('Cloud backup failed: ' + error.message);
    }
}

async function downloadFromCloud() {
    if (!currentUser || !firebaseDb) return;

    // Always load personal data (stock counts) from user's own location
    const personalDocRef = firebaseDb.collection('users').doc(currentUser.uid);
    const personalDoc = await personalDocRef.get();
    if (personalDoc.exists) {
        const personalData = personalDoc.data();
        if (personalData.stockData) {
            stockData = { ...stockData, ...personalData.stockData };
            saveStock();
        }
    }

    // Check if user is authorized for shared mode
    if (sharedModeEnabled) {
        const isAuthorized = authorizedUsers.includes(currentUser.email);
        if (!isAuthorized) {
            console.log('User not authorized for shared database');
            return;
        }
    }

    // Use shared location if enabled, otherwise user's personal location for other data
    const docRef = sharedModeEnabled
        ? firebaseDb.collection('shared').doc('data')
        : firebaseDb.collection('users').doc(currentUser.uid);

    const dataDoc = await docRef.get();

    if (dataDoc.exists) {
        const data = dataDoc.data();

        // Note: stockData is loaded separately from personal location above
        if (data.customKeys && data.customKeys.length > 0) {
            // Merge custom keys by part number
            const existingPNs = new Set(customKeys.map(k => k.pn));
            data.customKeys.forEach(key => {
                if (!existingPNs.has(key.pn)) {
                    customKeys.push(key);
                } else {
                    // Update existing
                    const idx = customKeys.findIndex(k => k.pn === key.pn);
                    if (idx >= 0) customKeys[idx] = key;
                }
            });
            saveCustomKeys();
            // Rebuild DB with custom keys
            loadCustomKeysIntoDB();
        }
        if (data.customVehicles && data.customVehicles.length > 0) {
            // Merge custom vehicles by ID
            const existingIds = new Set(customVehicles.map(v => v.id));
            data.customVehicles.forEach(vehicle => {
                if (!existingIds.has(vehicle.id)) {
                    customVehicles.push(vehicle);
                } else {
                    // Update existing
                    const idx = customVehicles.findIndex(v => v.id === vehicle.id);
                    if (idx >= 0) customVehicles[idx] = vehicle;
                }
            });
            saveCustomVehicles();
        }
        if (data.lishiInventory) {
            lishiInventory = { ...lishiInventory, ...data.lishiInventory };
            saveLishiInventory();
        }
        if (data.lishiVehicleData) {
            lishiVehicleData = { ...lishiVehicleData, ...data.lishiVehicleData };
            saveLishiVehicle();
        }
        if (data.lishiData) {
            lishiData = { ...lishiData, ...data.lishiData };
            saveLishi();
        }
        if (data.deletedLishiTools && data.deletedLishiTools.length > 0) {
            // Merge deleted tools lists
            data.deletedLishiTools.forEach(tool => {
                if (!deletedLishiTools.includes(tool)) {
                    deletedLishiTools.push(tool);
                }
            });
            saveDeletedLishiTools();
        }
        if (data.customKeyways && data.customKeyways.length > 0) {
            // Merge custom keyways lists
            data.customKeyways.forEach(kw => {
                if (!customKeyways.includes(kw)) {
                    customKeyways.push(kw);
                }
            });
            saveCustomKeyways();
        }
        if (data.vendorPrices) {
            vendorPrices = { ...vendorPrices, ...data.vendorPrices };
            saveVendorPrices();
        }
        if (data.customVendors) {
            // Merge custom vendors
            data.customVendors.forEach(v => {
                if (!customVendors.find(cv => cv.name === v.name)) {
                    customVendors.push(v);
                }
            });
            saveCustomVendors();
        }
        if (data.fidAssignments) {
            fidAssignments = { ...fidAssignments, ...data.fidAssignments };
            saveFidAssignments();
        }
        if (data.fidMerges) {
            fidMerges = { ...fidMerges, ...data.fidMerges };
            saveFidMerges();
        }
        if (data.fidPrefixes) {
            fidPrefixes = { ...fidPrefixes, ...data.fidPrefixes };
            saveFidPrefixes();
        }
        if (data.purchaseHistory && data.purchaseHistory.length > 0) {
            // Merge purchase history by ID
            const existingIds = new Set(purchaseHistory.map(p => p.id));
            data.purchaseHistory.forEach(p => {
                if (!existingIds.has(p.id)) {
                    purchaseHistory.push(p);
                }
            });
            savePurchaseHistory();
        }
        if (data.toolsDatabase) {
            // Merge tools database
            if (data.toolsDatabase.platforms) {
                toolsDatabase.platforms = { ...toolsDatabase.platforms, ...data.toolsDatabase.platforms };
            }
            if (data.toolsDatabase.tools) {
                toolsDatabase.tools = { ...toolsDatabase.tools, ...data.toolsDatabase.tools };
            }
            saveToolsDatabase();
        }
        if (data.vehicleOverrides) {
            vehicleOverrides = { ...vehicleOverrides, ...data.vehicleOverrides };
            saveVehicleOverrides();
            applyVehicleOverridesToDB();
        }
        if (data.keyInfoOverrides) {
            keyInfoOverrides = { ...keyInfoOverrides, ...data.keyInfoOverrides };
            saveKeyInfoOverrides();
            applyKeyInfoOverridesToDB();
        }
        if (data.vehicleYearNotes) {
            vehicleYearNotes = { ...vehicleYearNotes, ...data.vehicleYearNotes };
            saveVehicleYearNotes();
        }
        if (data.customDropdownValues) {
            customDropdownValues = { keyway: [], chip: [], keyType: [], frequency: [], buttons: [], battery: [], brand: [], ...data.customDropdownValues };
            saveCustomDropdownValues();
        }
        if (data.keyRelationships) {
            keyRelationships = { ...keyRelationships, ...data.keyRelationships };
            saveToIndexedDB('keyRelationships', keyRelationships);
        }
        if (data.fccRelationships) {
            fccRelationships = { ...fccRelationships, ...data.fccRelationships };
            saveToIndexedDB('fccRelationships', fccRelationships);
        }

        // Refresh UI
        buildFilters();
        applyFilters();
        if (typeof renderLishiInventory === 'function') {
            renderLishiInventory();
        }
    }
}

function loadCustomKeysIntoDB() {
    // Remove old custom keys from DB
    DB = DB.filter(k => !k.isCustom);
    // Filter out custom keys that duplicate base DB part numbers
    const basePNs = new Set(DB.map(k => String(k.pn).toLowerCase()));
    const beforeCount = customKeys.length;
    customKeys = customKeys.filter(ck => !basePNs.has(String(ck.pn).toLowerCase()));
    if (customKeys.length < beforeCount) {
        saveCustomKeys();
    }
    // Add current custom keys
    customKeys.forEach(key => {
        DB.push({ ...key, isCustom: true });
    });
}

// Auto-sync when data changes
function triggerAutoSync() {
    if (currentUser && syncEnabled && !isSyncing && firebaseEnabled) {
        // Debounce - wait 2 seconds after last change before syncing
        clearTimeout(window.autoSyncTimeout);
        window.autoSyncTimeout = setTimeout(() => {
            syncNow();
        }, 2000);
    }
}

// Listen for auth state changes (only if Firebase is available)
if (firebaseEnabled && auth) {
    auth.onAuthStateChanged(async (user) => {
        currentUser = user;
        syncEnabled = !!user;

        if (user) {
            // Load last sync time
            const lastSync = localStorage.getItem('lockscroll_last_sync');
            if (lastSync) {
                lastSyncTime = new Date(lastSync);
            }

            // Load shared config first to determine where to sync from
            try {
                await loadSharedConfig();
            } catch (error) {
                console.error('Failed to load shared config:', error);
            }

            // Download cloud data on sign in
            try {
                await downloadFromCloud();
                lastSyncTime = new Date();
                localStorage.setItem('lockscroll_last_sync', lastSyncTime.toISOString());
            } catch (error) {
                console.error('Initial sync failed:', error);
            }
        } else {
            // Reset shared mode state on sign out
            sharedModeEnabled = false;
            sharedOwnerEmail = null;
            authorizedUsers = [];
        }

        renderCloudSyncUI();
    });
}

// ===================== DATABASE =====================
let DB = [{"logo":"Infiniti logo","vehiclesRaw":"QX60 (19-20)","priceB":null,"emergencyPN":"42063","distributorPrices":{"KeylessRide":{"priceA":"155","priceB":null,"oem":null,"emergency":"7.95","shell":null}},"emergencyPrice":"7.95","frequency":"433.92 MHz","fccid":"KR5TXN7","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","pn":"8390","battery":"2032 qty 1","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"155","ilco":null,"shellPrice":null,"vehicles":[{"make":"Infiniti","model":"QX60","startYear":2019,"endYear":2020}],"oem":null,"chip":"Hitag AES PCF7921M"},{"logo":"Infiniti logo","vehiclesRaw":"QX60 (19-20)","priceB":"74","emergencyPN":"42063","distributorPrices":{"KeylessRide":{"priceA":"94","priceB":"74","oem":null,"emergency":"7.95","shell":null}},"emergencyPrice":"7.95","frequency":"433.92 MHz","fccid":"KR5TXN7","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","pn":"8386","battery":"2032 qty 1","inStock":null,"shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"94","ilco":null,"shellPrice":null,"vehicles":[{"make":"Infiniti","model":"QX60","startYear":2019,"endYear":2020}],"oem":null,"chip":"Hitag AES PCF7921M"},{"logo":"Nissan logo","vehiclesRaw":"Altima (19-23), Sentra (20-24), Versa Sedan (20-23)","priceB":null,"emergencyPN":"42046","distributorPrices":{"KeylessRide":{"priceA":"74","priceB":null,"oem":null,"emergency":null,"shell":null}},"emergencyPrice":6.95,"frequency":"433.92 MHz","fccid":"KR5TXN4","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","pn":"6511","battery":"2032 qty 1","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"74","ilco":null,"shellPrice":null,"vehicles":[{"make":"Nissan","model":"Altima","startYear":2019,"endYear":2023},{"make":"Nissan","model":"Sentra","startYear":2020,"endYear":2023},{"make":"Nissan","model":"Versa Sedan","startYear":2020,"endYear":2023},{"make":"Nissan","model":"Altima","startYear":2019,"endYear":2023},{"make":"Nissan","model":"Sentra","startYear":2020,"endYear":2024},{"make":"Nissan","model":"Versa Sedan","startYear":2020,"endYear":2023}],"oem":null,"chip":"Hitag AES PCF7921M"},{"logo":"Infiniti logo","priceB":"59","emergencyPN":"42046","distributorPrices":{"KeylessRide":{"priceA":"74","priceB":"59","oem":null,"emergency":"6.95","shell":null}},"emergencyPrice":"6.95","frequency":"315 MHz","fccid":"KR5S180144203","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","pn":"8445","battery":"2032","shellPN":null,"priceA":"74","ilco":null,"shellPrice":null,"vehicles":[{"make":"Infiniti","model":"Q50","startYear":2014,"endYear":2015},{"make":"Infiniti","model":"Q50 Hybrid","startYear":2014,"endYear":2014}],"oem":null,"chip":"Hitag AES PCF7953M"},{"logo":"Nissan logo","vehiclesRaw":"Rogue (17-18)","priceB":"44","emergencyPN":"42046","distributorPrices":{"KeylessRide":{"priceA":"59","priceB":"44","oem":null,"emergency":"6.95","shell":null}},"emergencyPrice":"6.95","frequency":"433.92 MHz","fccid":"KR5S180144106","stockQty":0,"keyway":"DA34","notes":null,"oem":null,"keyType":"Proximity","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","pn":"5029","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"59","ilco":null,"shellPrice":null,"vehicles":[{"make":"Nissan","model":"Rogue","startYear":2014,"endYear":2018},{"make":"Nissan","model":"Rogue","startYear":2017,"endYear":2018},{"make":"Nissan","model":"Rogue","startYear":2017,"endYear":2018}],"battery":"2032 qty 1","chip":"Hitag AES PCF7953M"},{"logo":"Nissan logo","vehiclesRaw":"Rogue (14-18)","priceB":"59","emergencyPN":"42046","distributorPrices":{"KeylessRide":{"priceA":"89","priceB":"59","oem":null,"emergency":"6.95","shell":null}},"emergencyPrice":"6.95","frequency":"433.92 MHz","fccid":"KR5S180144106","stockQty":0,"keyway":"DA34","notes":null,"oem":null,"keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","pn":"5095","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"89","ilco":null,"shellPrice":null,"vehicles":[{"make":"Nissan","model":"Rogue","startYear":2014,"endYear":2018},{"make":"Nissan","model":"Rogue","startYear":2014,"endYear":2018}],"battery":"2032 qty 1","chip":"Hitag AES PCF7953M"},{"logo":"Nissan logo","vehiclesRaw":"Rogue (17-18)","priceB":"44","emergencyPN":"42046","distributorPrices":{"KeylessRide":{"priceA":"64","priceB":"44","oem":null,"emergency":null,"shell":null}},"emergencyPrice":6.95,"frequency":"433.92 MHz","fccid":"KR5S180144106","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Proximity","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","pn":"5033","battery":"2032 qty 1","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"64","ilco":null,"shellPrice":null,"vehicles":[{"make":"Nissan","model":"Rogue","startYear":2014,"endYear":2018},{"make":"Nissan","model":"Rogue","startYear":2017,"endYear":2018}],"oem":null,"chip":"Hitag AES PCF7953M"},{"pn":"6502","fccid":"KR5S180144014","ilco":null,"vehicles":[{"make":"Infiniti","model":"QX60","startYear":2016,"endYear":2019},{"make":"Infiniti","model":"Q50","startYear":2016,"endYear":2019},{"make":"Nissan","model":"Murano","startYear":2015,"endYear":2018},{"make":"Nissan","model":"Pathfinder","startYear":2016,"endYear":2018},{"make":"Nissan","model":"Titan","startYear":2016,"endYear":2018},{"make":"Nissan","model":"Altima","startYear":2016,"endYear":2018},{"make":"Nissan","model":"Maxima","startYear":2016,"endYear":2019}],"keyType":"Proximity","keyway":"DA34","chip":"Hitag AES PCF7953M","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","stockQty":0,"frequency":"433.92 MHz","battery":"2032","logo":"Nissan","emergencyPN":"42046","shellPN":null,"notes":null,"distributorPrices":{"KeylessRide":{"priceA":"99","priceB":"59","oem":null,"emergency":null,"shell":null}},"priceA":"99","priceB":"59","oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"8494","fccid":"KR5S180144014","ilco":null,"vehicles":[{"make":"Infiniti","model":"QX60","startYear":2016,"endYear":2019},{"make":"Infiniti","model":"Q50","startYear":2016,"endYear":2019},{"make":"Nissan","model":"Murano","startYear":2015,"endYear":2018},{"make":"Nissan","model":"Pathfinder","startYear":2016,"endYear":2018},{"make":"Nissan","model":"Titan","startYear":2016,"endYear":2018},{"make":"Nissan","model":"Altima","startYear":2016,"endYear":2018},{"make":"Nissan","model":"Maxima","startYear":2016,"endYear":2019}],"keyType":"Proximity","keyway":"DA34","chip":"Hitag AES PCF7953M","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","stockQty":0,"frequency":"433.92 MHz","battery":"2032","logo":"Nissan","emergencyPN":"42046","shellPN":null,"notes":null,"distributorPrices":{"KeylessRide":{"priceA":"174","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"174","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"5006","fccid":"KR5S180144014","ilco":null,"vehicles":[{"make":"Infiniti","model":"QX60","startYear":2016,"endYear":2019},{"make":"Infiniti","model":"Q50","startYear":2016,"endYear":2019},{"make":"Nissan","model":"Murano","startYear":2015,"endYear":2018},{"make":"Nissan","model":"Pathfinder","startYear":2016,"endYear":2018},{"make":"Nissan","model":"Titan","startYear":2016,"endYear":2018},{"make":"Nissan","model":"Altima","startYear":2016,"endYear":2018},{"make":"Nissan","model":"Maxima","startYear":2016,"endYear":2019}],"keyType":"Proximity","keyway":"DA34","chip":"Hitag AES PCF7953M","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","stockQty":0,"frequency":"433.92 MHz","battery":"2032","logo":"Nissan","emergencyPN":"42046","shellPN":null,"notes":null,"distributorPrices":{"KeylessRide":{"priceA":"97","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"97","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"5005","fccid":"KR5S180144014","ilco":null,"vehicles":[{"make":"Infiniti","model":"QX60","startYear":2016,"endYear":2019},{"make":"Infiniti","model":"Q50","startYear":2016,"endYear":2019},{"make":"Nissan","model":"Murano","startYear":2015,"endYear":2018},{"make":"Nissan","model":"Pathfinder","startYear":2016,"endYear":2018},{"make":"Nissan","model":"Titan","startYear":2016,"endYear":2018},{"make":"Nissan","model":"Altima","startYear":2016,"endYear":2018},{"make":"Nissan","model":"Maxima","startYear":2016,"endYear":2019}],"keyType":"Proximity","keyway":"DA34","chip":"Hitag AES PCF7953M","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","stockQty":0,"frequency":"433.92 MHz","battery":"2032","logo":"Nissan","emergencyPN":"42046","shellPN":null,"notes":null,"distributorPrices":{"KeylessRide":{"priceA":"57","priceB":"39","oem":null,"emergency":null,"shell":null}},"priceA":"57","priceB":"39","oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"6508","fccid":"KR5S180144014","ilco":null,"vehicles":[{"make":"Infiniti","model":"QX60","startYear":2016,"endYear":2019},{"make":"Infiniti","model":"Q50","startYear":2016,"endYear":2019},{"make":"Nissan","model":"Murano","startYear":2015,"endYear":2018},{"make":"Nissan","model":"Pathfinder","startYear":2016,"endYear":2018},{"make":"Nissan","model":"Titan","startYear":2016,"endYear":2018},{"make":"Nissan","model":"Altima","startYear":2016,"endYear":2018},{"make":"Nissan","model":"Maxima","startYear":2016,"endYear":2019}],"keyType":"Proximity","keyway":"DA34","chip":"Hitag AES PCF7953M","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","stockQty":0,"frequency":"433.92 MHz","battery":"2032","logo":"Nissan","emergencyPN":"42046","shellPN":null,"notes":null,"distributorPrices":{"KeylessRide":{"priceA":"79","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"79","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"logo":"Nissan logo","vehiclesRaw":"Altima (13-15)","priceB":"49","emergencyPN":"42046","distributorPrices":{"KeylessRide":{"priceA":"57","priceB":"49","oem":null,"emergency":null,"shell":null}},"emergencyPrice":6.95,"frequency":"433.92 MHz","fccid":"KR5S180144014","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","pn":"8351","battery":"2032 qty 1","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"57","ilco":null,"shellPrice":null,"vehicles":[{"make":"Nissan","model":"Altima","startYear":2013,"endYear":2015},{"make":"Nissan","model":"Altima","startYear":2013,"endYear":2015}],"oem":null,"chip":"HITAG 3 PCF7952"},{"pn":"6079","fccid":"KR5S180144014","ilco":null,"vehicles":[{"make":"Infiniti","model":"QX60","startYear":2016,"endYear":2019},{"make":"Infiniti","model":"Q50","startYear":2016,"endYear":2019}],"keyType":"Proximity","keyway":"DA34","chip":"Hitag AES PCF7953M","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","stockQty":0,"frequency":"433.92 MHz","battery":"2032","logo":"Infiniti","emergencyPN":"42046","shellPN":null,"notes":null,"distributorPrices":{"KeylessRide":{"priceA":"89","priceB":"59","oem":null,"emergency":null,"shell":null}},"priceA":"89","priceB":"59","oem":null,"emergencyPrice":null,"shellPrice":null},{"logo":"Infiniti logo","vehiclesRaw":"Q50 (16-19), Q60 (17-19)","priceB":"59","emergencyPN":"42046","distributorPrices":{"KeylessRide":{"priceA":"89","priceB":"59","oem":null,"emergency":null,"shell":null}},"emergencyPrice":6.95,"frequency":"433.92 MHz","fccid":"KR5S180144014","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","pn":"5027","battery":"2032 qty 1","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"89","ilco":null,"shellPrice":null,"vehicles":[{"make":"Infiniti","model":"QX60","startYear":2016,"endYear":2019},{"make":"Infiniti","model":"Q50","startYear":2016,"endYear":2019},{"make":"Infiniti","model":"Q60","startYear":2017,"endYear":2019}],"oem":null,"chip":"Hitag AES PCF7953M"},{"logo":"Infiniti logo","vehiclesRaw":"QX60 (16-19)","priceB":null,"emergencyPN":"42046","distributorPrices":{"KeylessRide":{"priceA":"89","priceB":null,"oem":null,"emergency":null,"shell":null}},"emergencyPrice":6.95,"frequency":"433.92 MHz","fccid":"KR5S180144014","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","pn":"9699","battery":"2032 qty 1","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"89","ilco":null,"shellPrice":null,"vehicles":[{"make":"Infiniti","model":"QX60","startYear":2016,"endYear":2019},{"make":"Infiniti","model":"Q50","startYear":2016,"endYear":2019}],"oem":null,"chip":"Hitag AES PCF7953M"},{"logo":"Z logo","vehiclesRaw":"370Z (09-19)","priceB":null,"emergencyPN":"42046","distributorPrices":{"KeylessRide":{"priceA":"124","priceB":null,"oem":null,"emergency":null,"shell":null}},"emergencyPrice":6.95,"frequency":"315 MHz","fccid":"KR55WK49622","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","pn":"9991","battery":"2032 qty 1","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"124","ilco":null,"shellPrice":null,"vehicles":[{"make":"Infiniti","model":"EX35","startYear":2008,"endYear":2012},{"make":"Infiniti","model":"EX37","startYear":2013,"endYear":2013},{"make":"Infiniti","model":"FX35","startYear":2009,"endYear":2010},{"make":"Infiniti","model":"FX50","startYear":2009,"endYear":2010},{"make":"Infiniti","model":"QX50","startYear":2014,"endYear":2017},{"make":"Nissan","model":"350Z","startYear":2009,"endYear":2019},{"make":"Nissan","model":"370Z","startYear":2009,"endYear":2019}],"oem":null,"chip":"PH 46"},{"pn":"9947","fccid":"KR55WK49622","ilco":null,"vehicles":[{"make":"Infiniti","model":"EX35","startYear":2008,"endYear":2012},{"make":"Infiniti","model":"EX37","startYear":2013,"endYear":2013},{"make":"Infiniti","model":"FX35","startYear":2009,"endYear":2010},{"make":"Infiniti","model":"FX50","startYear":2009,"endYear":2010},{"make":"Infiniti","model":"QX50","startYear":2014,"endYear":2017},{"make":"Nissan","model":"350Z","startYear":2009,"endYear":2019}],"keyType":"Proximity","keyway":"DA34","chip":"PH 46","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","stockQty":0,"frequency":"315 MHz","battery":"2025","logo":"Infiniti","emergencyPN":"42046","shellPN":null,"notes":null,"distributorPrices":{"KeylessRide":{"priceA":"164","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"164","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"609139","fccid":"KBRASTU15, CWTWB1U733, CWTWB1U821","ilco":null,"vehicles":[{"make":"Infiniti","model":"G35 Coupe","startYear":2003,"endYear":2006},{"make":"Infiniti","model":"G35 Sedan","startYear":2003,"endYear":2006},{"make":"Infiniti","model":"I35","startYear":2002,"endYear":2004},{"make":"Infiniti","model":"QX56","startYear":2004,"endYear":2006},{"make":"Nissan","model":"350Z","startYear":2003,"endYear":2009},{"make":"Nissan","model":"Altima","startYear":2002,"endYear":2006},{"make":"Nissan","model":"Maxima","startYear":2002,"endYear":2006},{"make":"Nissan","model":"Versa Sedan","startYear":2007,"endYear":2008}],"keyType":"Remote Only","keyway":null,"chip":null,"buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","stockQty":0,"frequency":"315 MHz","battery":"2025","logo":null,"emergencyPN":null,"shellPN":"809139","notes":null,"distributorPrices":{},"priceA":null,"priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"logo":"Nissan logo","priceB":null,"emergencyPN":"42047","distributorPrices":{"KeylessRide":{"priceA":"110","priceB":null,"oem":null,"emergency":null,"shell":null}},"emergencyPrice":null,"frequency":"315 MHz","fccid":"CWTWBU729","stockQty":0,"keyway":"DA34","notes":"***Interchangeable with FCC CWTWBU735 and CWTWBU624***","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","pn":"9776","battery":"2025","shellPN":null,"priceA":"110","ilco":null,"shellPrice":null,"vehicles":[{"make":"Nissan","model":"Armada","startYear":2008,"endYear":2012},{"make":"Nissan","model":"Pathfinder","startYear":2008,"endYear":2012},{"make":"Nissan","model":"Rogue","startYear":2008,"endYear":2013},{"make":"Nissan","model":"Versa Hatchback","startYear":2007,"endYear":2012},{"make":"Nissan","model":"Versa Sedan","startYear":2007,"endYear":2012}],"oem":null,"chip":null},{"logo":"Nissan logo","vehiclesRaw":"Armada (08-15)","priceB":64,"emergencyPN":"42047","distributorPrices":{"KeylessRide":{"priceA":"99","priceB":null,"oem":null,"emergency":null,"shell":null}},"emergencyPrice":null,"frequency":"314.975 MHz","fccid":"CWTWBU624","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","pn":"9894","battery":"2025 qty 1","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"99","ilco":null,"shellPrice":null,"vehicles":[{"make":"Nissan","model":"Armada","startYear":2008,"endYear":2015},{"make":"Nissan","model":"Armada","startYear":2008,"endYear":2015}],"oem":null,"chip":"PH 46"},{"logo":"Nissan logo","vehiclesRaw":"Leaf (13-17)","priceB":null,"emergencyPN":"42046","distributorPrices":{"KeylessRide":{"priceA":"174","priceB":null,"oem":null,"emergency":null,"shell":null}},"emergencyPrice":6.95,"frequency":"314.975 MHz","fccid":"CWTWB1U840","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Proximity","buttons":"4 Button: L, U, P, CL (Lock, Unlock, Panic, Charge Lid)","pn":"8447","battery":"2025 qty 1","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"174","ilco":null,"shellPrice":null,"vehicles":[{"make":"Nissan","model":"Sentra","startYear":2013,"endYear":2019},{"make":"Nissan","model":"Versa Sedan","startYear":2013,"endYear":2019},{"make":"Nissan","model":"Leaf","startYear":2013,"endYear":2017},{"make":"Nissan","model":"Leaf","startYear":2013,"endYear":2017}],"oem":null,"chip":"PH 46"},{"logo":"Nissan logo","vehiclesRaw":"Sentra (13-19), Versa Sedan (13-19)","priceB":"49","emergencyPN":"42046","distributorPrices":{"KeylessRide":{"priceA":"74","priceB":"49","oem":null,"emergency":null,"shell":null}},"emergencyPrice":6.95,"frequency":"314.975 MHz","fccid":"CWTWB1U840","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","pn":"8376","battery":"2025 qty 1","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"74","ilco":null,"shellPrice":null,"vehicles":[{"make":"Nissan","model":"Sentra","startYear":2013,"endYear":2019},{"make":"Nissan","model":"Versa Sedan","startYear":2013,"endYear":2019},{"make":"Nissan","model":"Leaf","startYear":2013,"endYear":2017},{"make":"Nissan","model":"Sentra","startYear":2013,"endYear":2019},{"make":"Nissan","model":"Versa Sedan","startYear":2013,"endYear":2019}],"oem":null,"chip":"PH 46"},{"logo":null,"vehiclesRaw":"Armada (13-15), Frontier (11-19), NV (12-21), Sentra (11-12), Titan (11-15), Versa Hatchback (12), Versa Sedan (09-13), Xterra (12-15)","priceB":"13.95","emergencyPN":null,"distributorPrices":{"KeylessRide":{"priceA":"29","priceB":"13.95","oem":null,"emergency":null,"shell":null}},"emergencyPrice":null,"frequency":"315 MHz","fccid":"CWTWB1U821","stockQty":0,"keyway":null,"notes":null,"keyType":"Remote Only","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","pn":"8141","battery":"2025 qty 1","inStock":null,"shellPN":"808141","originalMake":"Infiniti/Nissan","priceA":"29","ilco":null,"shellPrice":null,"vehicles":[{"make":"Nissan","model":"Armada","startYear":2013,"endYear":2015},{"make":"Nissan","model":"Frontier","startYear":2011,"endYear":2019},{"make":"Nissan","model":"NV Van","startYear":2012,"endYear":2021},{"make":"Nissan","model":"Sentra","startYear":2011,"endYear":2012},{"make":"Nissan","model":"Titan","startYear":2011,"endYear":2015},{"make":"Nissan","model":"Versa Hatchback","startYear":2012,"endYear":2012},{"make":"Nissan","model":"Versa Sedan","startYear":2009,"endYear":2013},{"make":"Nissan","model":"XTerra","startYear":2012,"endYear":2015},{"make":"Nissan","model":"Armada","startYear":2013,"endYear":2015},{"make":"Nissan","model":"Frontier","startYear":2011,"endYear":2019},{"make":"Nissan","model":"NV","startYear":2012,"endYear":2021},{"make":"Nissan","model":"Sentra","startYear":2011,"endYear":2012},{"make":"Nissan","model":"Titan","startYear":2011,"endYear":2015},{"make":"Nissan","model":"Versa Hatchback","startYear":2012,"endYear":2012},{"make":"Nissan","model":"Versa Sedan","startYear":2009,"endYear":2013},{"make":"Nissan","model":"Xterra","startYear":2012,"endYear":2015}],"oem":null,"chip":"No"},{"logo":"Nissan logo","vehiclesRaw":"Quest (11-17)","priceB":"34","emergencyPN":"42046","distributorPrices":{"KeylessRide":{"priceA":"59","priceB":"34","oem":null,"emergency":null,"shell":null}},"emergencyPrice":6.95,"frequency":"314.975 MHz","fccid":"CWTWB1U789","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Proximity","buttons":"5 Button: L, U, P, PSD2 (Lock, Unlock, Panic, Dual Power Sliding Doors)","pn":"8231","battery":"2025 qty 1","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"59","ilco":null,"shellPrice":null,"vehicles":[{"make":"Nissan","model":"Quest","startYear":201,"endYear":2017},{"make":"Nissan","model":"Quest","startYear":2011,"endYear":2017}],"oem":null,"chip":"PH 46"},{"logo":"Nissan logo","vehiclesRaw":"Quest (11-17)","priceB":null,"emergencyPN":"42046","distributorPrices":{"KeylessRide":{"priceA":"110","priceB":null,"oem":null,"emergency":null,"shell":null}},"emergencyPrice":6.95,"frequency":"314.975 MHz","fccid":"CWTWB1U789","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Proximity","buttons":"6 Button: L, U, P, T, PSD2 (Lock, Unlock, Panic, Trunk, Dual Power Sliding Doors)","pn":"8142","battery":"2025 qty 1","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"110","ilco":null,"shellPrice":null,"vehicles":[{"make":"Nissan","model":"Quest","startYear":201,"endYear":2017},{"make":"Nissan","model":"Quest","startYear":2011,"endYear":2017}],"oem":null,"chip":"PH 46"},{"logo":"Nissan logo","vehiclesRaw":"Armada (17-22)","priceB":"74","emergencyPN":"42046","distributorPrices":{"KeylessRide":{"priceA":"109","priceB":"74","oem":null,"emergency":null,"shell":null}},"emergencyPrice":6.95,"frequency":"433.92 MHz","fccid":"CWTWB1U787","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","pn":"5019","battery":"2025 qty 1","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"109","ilco":null,"shellPrice":null,"vehicles":[{"make":"Infiniti","model":"M35h","startYear":2012,"endYear":2013},{"make":"Infiniti","model":"M37","startYear":2011,"endYear":2013},{"make":"Infiniti","model":"M56","startYear":2011,"endYear":2013},{"make":"Infiniti","model":"Q70","startYear":2014,"endYear":2019},{"make":"Infiniti","model":"Q70L","startYear":2015,"endYear":2019},{"make":"Nissan","model":"Armada","startYear":2017,"endYear":2022},{"make":"Nissan","model":"Armada","startYear":2017,"endYear":2022}],"oem":null,"chip":"PH 46"},{"logo":"Infiniti logo","vehiclesRaw":"M35h (12-13), M37 (11-13), M56 (11-13), Q70 (14-19), Q70L (15-19)","priceB":"74","emergencyPN":"42046","distributorPrices":{"KeylessRide":{"priceA":"109","priceB":"74","oem":null,"emergency":null,"shell":null}},"emergencyPrice":6.95,"frequency":"433.92 MHz","fccid":"CWTWB1U787","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","pn":"8308","battery":"2025 qty 1","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"109","ilco":null,"shellPrice":null,"vehicles":[{"make":"Infiniti","model":"M35h","startYear":2012,"endYear":2013},{"make":"Infiniti","model":"M37","startYear":2011,"endYear":2013},{"make":"Infiniti","model":"M56","startYear":2011,"endYear":2013},{"make":"Infiniti","model":"Q70","startYear":2014,"endYear":2019},{"make":"Infiniti","model":"Q70L","startYear":2015,"endYear":2019},{"make":"Nissan","model":"Armada","startYear":2017,"endYear":2022}],"oem":null,"chip":"PH 46"},{"logo":"Nissan logo","vehiclesRaw":"Rogue (13-15), Sentra (13-19), Versa Sedan (14-19)","priceB":"9.95","emergencyPN":"7642","distributorPrices":{"KeylessRide":{"priceA":"24.95","priceB":"9.95","oem":null,"emergency":null,"shell":null}},"emergencyPrice":8.99,"frequency":"315 MHz","fccid":"CWTWB1U751, CWTWB1U816","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","pn":"8382","battery":"1620 qty 1","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"24.95","ilco":null,"shellPrice":null,"vehicles":[{"make":"Nissan","model":"350Z","startYear":2003,"endYear":2008},{"make":"Nissan","model":"Altima","startYear":2002,"endYear":2006},{"make":"Nissan","model":"Cube","startYear":2009,"endYear":2014},{"make":"Nissan","model":"Juke","startYear":2011,"endYear":2014},{"make":"Nissan","model":"Titan","startYear":2004,"endYear":2019},{"make":"Nissan","model":"Armada","startYear":2004,"endYear":2015},{"make":"Nissan","model":"Frontier","startYear":2001,"endYear":2021},{"make":"Nissan","model":"Versa","startYear":2007,"endYear":2012},{"make":"Nissan","model":"Murano","startYear":2003,"endYear":2008},{"make":"Nissan","model":"Maxima","startYear":2001,"endYear":2006},{"make":"Nissan","model":"Sentra","startYear":2007,"endYear":2012},{"make":"Nissan","model":"NV Van","startYear":2012,"endYear":2021},{"make":"Nissan","model":"Pathfinder","startYear":2002,"endYear":2012},{"make":"Nissan","model":"XTerra","startYear":2001,"endYear":2015},{"make":"Nissan","model":"Quest","startYear":2004,"endYear":2009},{"make":"Infiniti","model":"FX35","startYear":2003,"endYear":2008},{"make":"Infiniti","model":"FX45","startYear":2003,"endYear":2008},{"make":"Infiniti","model":"QX4","startYear":2002,"endYear":2004},{"make":"Infiniti","model":"G35","startYear":2003,"endYear":2007},{"make":"Infiniti","model":"I35","startYear":2002,"endYear":2004},{"make":"Infiniti","model":"QX56","startYear":2004,"endYear":2007},{"make":"Chevrolet","model":"City Express","startYear":2015,"endYear":2018},{"make":"Nissan","model":"Versa Note","startYear":2014,"endYear":2019},{"make":"Nissan","model":"Versa Sedan","startYear":2012,"endYear":2013},{"make":"Nissan","model":"Rogue","startYear":2013,"endYear":2015},{"make":"Nissan","model":"Sentra","startYear":2013,"endYear":2019},{"make":"Nissan","model":"Versa Sedan","startYear":2014,"endYear":2019}],"oem":null,"chip":"PH 46"},{"logo":"Nissan logo","vehiclesRaw":"Cube (09-10), NV (20-21), Rogue (08-15), Sentra (13-19)","priceB":"9.95","emergencyPN":"7642","distributorPrices":{"KeylessRide":{"priceA":"24.95","priceB":"9.95","oem":null,"emergency":null,"shell":null}},"emergencyPrice":8.99,"frequency":"315 MHz","fccid":"CWTWB1U751","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","pn":"9888","battery":"1620 qty 1","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"24.95","ilco":null,"shellPrice":null,"vehicles":[{"make":"Nissan","model":"350Z","startYear":2003,"endYear":2008},{"make":"Nissan","model":"Altima","startYear":2002,"endYear":2006},{"make":"Nissan","model":"Cube","startYear":2009,"endYear":2014},{"make":"Nissan","model":"Juke","startYear":2011,"endYear":2014},{"make":"Nissan","model":"Titan","startYear":2004,"endYear":2019},{"make":"Nissan","model":"Armada","startYear":2004,"endYear":2015},{"make":"Nissan","model":"Frontier","startYear":2001,"endYear":2021},{"make":"Nissan","model":"Versa","startYear":2007,"endYear":2012},{"make":"Nissan","model":"Murano","startYear":2003,"endYear":2008},{"make":"Nissan","model":"Maxima","startYear":2001,"endYear":2006},{"make":"Nissan","model":"Sentra","startYear":2007,"endYear":2012},{"make":"Nissan","model":"NV Van","startYear":2012,"endYear":2021},{"make":"Nissan","model":"Pathfinder","startYear":2002,"endYear":2012},{"make":"Nissan","model":"XTerra","startYear":2001,"endYear":2015},{"make":"Nissan","model":"Quest","startYear":2004,"endYear":2009},{"make":"Infiniti","model":"FX35","startYear":2003,"endYear":2008},{"make":"Infiniti","model":"FX45","startYear":2003,"endYear":2008},{"make":"Infiniti","model":"QX4","startYear":2002,"endYear":2004},{"make":"Infiniti","model":"G35","startYear":2003,"endYear":2007},{"make":"Infiniti","model":"I35","startYear":2002,"endYear":2004},{"make":"Infiniti","model":"QX56","startYear":2004,"endYear":2007},{"make":"Chevrolet","model":"City Express","startYear":2015,"endYear":2018},{"make":"Nissan","model":"Versa Note","startYear":2014,"endYear":2019},{"make":"Nissan","model":"Versa Sedan","startYear":2012,"endYear":2013},{"make":"Nissan","model":"Cube","startYear":2009,"endYear":2010},{"make":"Nissan","model":"NV","startYear":2020,"endYear":2021},{"make":"Nissan","model":"Rogue","startYear":2008,"endYear":2015},{"make":"Nissan","model":"Sentra","startYear":2013,"endYear":2019}],"oem":null,"chip":"PH 46"},{"logo":null,"vehiclesRaw":"Sentra (05-06)","priceB":"13.95","emergencyPN":null,"distributorPrices":{"KeylessRide":{"priceA":"34","priceB":"13.95","oem":null,"emergency":null,"shell":null}},"emergencyPrice":null,"frequency":"315-316 MHz","fccid":"CWTWB1U429","stockQty":0,"keyway":null,"notes":null,"keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","pn":"9358","battery":"2025 qty 1","inStock":null,"shellPN":809358,"originalMake":"Infiniti/Nissan","priceA":"34","ilco":null,"shellPrice":null,"vehicles":[{"make":"Nissan","model":"Sentra","startYear":2005,"endYear":2006}],"oem":null,"chip":"No"},{"logo":"Nissan logo","vehiclesRaw":"Qashqai (19), Rogue (14-22), Rogue Sport (20)","priceB":"49","emergencyPN":"7636","distributorPrices":{"KeylessRide":{"priceA":"74","priceB":"49","oem":null,"emergency":"12.99","shell":null}},"emergencyPrice":"12.99","frequency":"433.92 MHz","fccid":"CWTWB1G767","stockQty":0,"keyway":"DA34","notes":null,"keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","pn":"8558","battery":"2032 qty 1","inStock":"Yes","shellPN":null,"originalMake":"Infiniti/Nissan","priceA":"74","ilco":null,"shellPrice":null,"vehicles":[{"make":"Nissan","model":"Qashqai","startYear":2019,"endYear":2019},{"make":"Nissan","model":"Rogue","startYear":2014,"endYear":2022},{"make":"Nissan","model":"Rogue Sport","startYear":2020,"endYear":2022},{"make":"Nissan","model":"Qashqai","startYear":2019,"endYear":2019},{"make":"Nissan","model":"Rogue","startYear":2014,"endYear":2022},{"make":"Nissan","model":"Rogue Sport","startYear":2020,"endYear":2020}],"oem":null,"chip":"PH 47"},{"pn":"B44","fccid":"B44","ilco":null,"vehicles":[{"model":"Regency","endYear":1998,"make":"Oldsmobile","startYear":1991},{"startYear":1991,"make":"Buick","model":"LeSabre","endYear":1999},{"startYear":1991,"model":"Reatta","endYear":1992,"make":"Buick"},{"endYear":1994,"make":"Buick","startYear":1992,"model":"Riviera"},{"model":"Roadmaster","startYear":1991,"endYear":1993,"make":"Buick"},{"startYear":1991,"make":"Cadillac","endYear":1992,"model":"Brougham"},{"startYear":1991,"model":"Fleetwood","make":"Cadillac","endYear":1992},{"model":"Beretta","startYear":1991,"endYear":1996,"make":"Chevrolet"},{"model":"Corsica w/o Tilt Wheel","make":"Chevrolet","startYear":1991,"endYear":1996},{"make":"Chevrolet","startYear":1991,"endYear":1996,"model":"Corsica w/ Tilt Wheel"},{"make":"Chevrolet","model":"Camaro","endYear":2002,"startYear":1991},{"model":"Z28","startYear":1991,"make":"Chevrolet","endYear":2002},{"make":"Chevrolet","startYear":1991,"model":"Cavalier","endYear":1994},{"model":"Corvette","make":"Chevrolet","endYear":1996,"startYear":1991},{"endYear":1996,"startYear":1991,"model":"Impala","make":"Chevrolet"},{"make":"Chevrolet","startYear":1991,"model":"Caprice","endYear":1996},{"endYear":1994,"startYear":1991,"model":"Blazer","make":"Chevrolet"},{"model":"C/K","startYear":1991,"endYear":1994,"make":"Chevrolet"},{"make":"Chevrolet","startYear":1991,"model":"Silverado","endYear":1994},{"model":"Typhoon","make":"Chevrolet","startYear":1991,"endYear":1994},{"startYear":1991,"model":"Lumina","endYear":1995,"make":"Chevrolet"},{"endYear":1995,"startYear":1991,"model":"S-10","make":"Chevrolet"},{"model":"Century","startYear":1991,"endYear":1996,"codeSeries":[{"series":"J","years":"1991-1996"},{"series":"K","years":"1991-1996"}],"make":"Buick"}],"keyType":"Non-Chip Key","keyway":"B77","chip":null,"buttons":null,"stockQty":0,"frequency":null,"battery":null,"logo":null,"emergencyPN":null,"shellPN":null,"notes":"Ignition","distributorPrices":{},"priceA":null,"priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null,"dualKeyRole":"ignition"},{"pn":"B45","fccid":"B45","ilco":null,"vehicles":[{"make":"Oldsmobile","startYear":1991,"model":"Regency","endYear":1998},{"model":"LeSabre","endYear":1999,"make":"Buick","startYear":1991},{"startYear":1991,"model":"Reatta","make":"Buick","endYear":1992},{"make":"Buick","endYear":1994,"model":"Riviera","startYear":1992},{"make":"Buick","model":"Roadmaster","endYear":1993,"startYear":1991},{"endYear":1999,"startYear":1991,"make":"Cadillac","model":"Concours"},{"make":"Cadillac","endYear":1999,"model":"DeVille","startYear":1991},{"startYear":1991,"endYear":2003,"model":"El Dorado","make":"Cadillac"},{"endYear":1996,"model":"Seville","make":"Cadillac","startYear":1991},{"startYear":1991,"model":"Beretta","endYear":1996,"make":"Chevrolet"},{"make":"Chevrolet","model":"Corsica w/o Tilt Wheel","endYear":1996,"startYear":1991},{"make":"Chevrolet","endYear":1996,"startYear":1991,"model":"Corsica w/ Tilt Wheel"},{"model":"Camaro","make":"Chevrolet","startYear":1991,"endYear":2002},{"model":"Z28","make":"Chevrolet","endYear":2002,"startYear":1991},{"startYear":1991,"endYear":1994,"model":"Cavalier","make":"Chevrolet"},{"model":"Corvette","endYear":1996,"make":"Chevrolet","startYear":1991},{"make":"Chevrolet","endYear":1996,"startYear":1991,"model":"Impala"},{"model":"Caprice","make":"Chevrolet","endYear":1996,"startYear":1991},{"endYear":1994,"make":"Chevrolet","startYear":1991,"model":"Blazer"},{"make":"Chevrolet","startYear":1991,"model":"C/K","endYear":1994},{"endYear":1994,"model":"Silverado","startYear":1991,"make":"Chevrolet"},{"startYear":1991,"model":"Typhoon","endYear":1994,"make":"Chevrolet"},{"model":"Lumina","endYear":1995,"make":"Chevrolet","startYear":1991},{"make":"Chevrolet","startYear":1991,"endYear":1995,"model":"S-10"},{"endYear":1996,"make":"Buick","codeSeries":[{"years":"1991-1996","series":"L"},{"years":"1991-1996","series":"M"}],"model":"Century","startYear":1991},{"model":"Park Avenue","endYear":1996,"startYear":1991,"make":"Buick"},{"make":"Buick","model":"Roadmaster","startYear":1994,"endYear":1996},{"startYear":1992,"make":"Buick","endYear":1992,"model":"Skylark"},{"endYear":1993,"startYear":1993,"make":"Buick","model":"Skylark"},{"endYear":1994,"model":"Skylark","startYear":1994,"make":"Buick"},{"startYear":1991,"make":"Cadillac","endYear":1992,"model":"Brougham"},{"model":"Brougham","startYear":1993,"make":"Cadillac","endYear":1996},{"make":"Cadillac","startYear":1991,"model":"Fleetwood","codeSeries":[],"endYear":1992},{"endYear":1996,"model":"Fleetwood","startYear":1993,"codeSeries":[],"make":"Cadillac"}],"keyType":"Non-Chip Key","keyway":"B79","chip":null,"buttons":null,"stockQty":0,"frequency":null,"battery":null,"logo":null,"emergencyPN":null,"shellPN":null,"notes":"Door, Trunk, Glove Box","distributorPrices":{},"priceA":null,"priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null,"dualKeyRole":"door"},{"pn":"40146","fccid":null,"ilco":null,"vehicles":[{"make":"Buick","model":"Century","startYear":1997,"endYear":2005},{"make":"Buick","model":"Regal","startYear":1997,"endYear":2004},{"make":"Buick","model":"Riviera","startYear":1995,"endYear":1999},{"make":"Chevrolet","model":"Corvette","startYear":1997,"endYear":1999},{"make":"Oldsmobile","model":"Aurora","startYear":1995,"endYear":1999}],"keyType":"VATS","keyway":"B86","chip":"VATS","buttons":null,"stockQty":0,"frequency":null,"battery":null,"logo":"GM logo","emergencyPN":null,"shellPN":null,"notes":"Normal VATS Bow","distributorPrices":{"KeylessRide":{"priceA":"$6.29","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"$6.29","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"logo":null,"priceB":null,"emergencyPN":null,"distributorPrices":{},"emergencyPrice":null,"frequency":null,"fccid":"HD101","stockQty":0,"keyway":"HD92","notes":null,"keyType":"Non-Chip Key","buttons":null,"pn":"HD101","battery":null,"shellPN":null,"priceA":null,"ilco":"X208","shellPrice":null,"vehicles":[{"make":"Acura","model":"Vigor","startYear":1992,"endYear":1994},{"make":"Acura","model":"Legend","startYear":1991,"endYear":1996}],"oem":null,"chip":null},{"pn":"8216","fccid":"M3N5WY8145","ilco":null,"vehicles":[{"make":"Acura","model":"ZDX","startYear":2010,"endYear":2013}],"keyType":"Proximity","keyway":"HO01","chip":"PH 46","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","stockQty":0,"frequency":"313.85 MHz","battery":"2032","logo":null,"emergencyPN":null,"shellPN":null,"notes":"Memory #2","distributorPrices":{"KeylessRide":{"priceA":"129","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"129","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"8215","fccid":"M3N5WY8145","ilco":null,"vehicles":[{"make":"Acura","model":"ZDX","startYear":2010,"endYear":2013}],"keyType":"Proximity","keyway":"HO01","chip":"PH 46","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","stockQty":0,"frequency":"313.85 MHz","battery":"2032","logo":null,"emergencyPN":null,"shellPN":null,"notes":"Memory #1","distributorPrices":{"KeylessRide":{"priceA":"129","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"129","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"5075","fccid":"KR5995364","ilco":null,"vehicles":[{"make":"Acura","model":"TLX","startYear":2018,"endYear":2023}],"keyType":"Proximity","keyway":"HO01","chip":"HITAG 3","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","stockQty":0,"frequency":"923.625-924.6 MHz","battery":"2032","logo":null,"emergencyPN":"40304","shellPN":null,"notes":"Memory #2","distributorPrices":{"KeylessRide":{"priceA":"164","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"164","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"5074","fccid":"KR5995364","ilco":null,"vehicles":[{"make":"Acura","model":"TLX","startYear":2018,"endYear":2023}],"keyType":"Proximity","keyway":"HO01","chip":"HITAG 3","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","stockQty":0,"frequency":"923.625-924.6 MHz","battery":"2032","logo":null,"emergencyPN":"40304","shellPN":null,"notes":"Memory #1","distributorPrices":{"KeylessRide":{"priceA":"239","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"239","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"8515","fccid":"ACJ932HK1210A","ilco":null,"vehicles":[{"make":"Acura","model":"RLX","startYear":2014,"endYear":2015}],"keyType":"Proximity","keyway":"HO01","chip":"HITAG 3","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","stockQty":0,"frequency":"313.85 MHz","battery":"2032","logo":null,"emergencyPN":null,"shellPN":null,"notes":"Memory #1","distributorPrices":{"KeylessRide":{"priceA":"394","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"394","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"8514","fccid":"ACJ932HK1210A","ilco":null,"vehicles":[{"make":"Acura","model":"RLX","startYear":2014,"endYear":2015}],"keyType":"Proximity","keyway":"HO01","chip":"HITAG 3","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","stockQty":0,"frequency":"313.85 MHz","battery":"2032","logo":null,"emergencyPN":null,"shellPN":null,"notes":"Memory #2","distributorPrices":{"KeylessRide":{"priceA":"389","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"389","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"HD92","fccid":"HD92","ilco":"X183","vehicles":[{"make":"Acura","model":"Integra","startYear":1984,"endYear":1989},{"make":"Acura","model":"Legend","startYear":1986,"endYear":1990}],"keyType":"Non-Chip Key","keyway":"HD103","chip":null,"buttons":null,"stockQty":0,"frequency":null,"battery":null,"logo":null,"emergencyPN":null,"shellPN":null,"notes":null,"distributorPrices":{},"priceA":null,"priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"8676","fccid":"KR580399900","ilco":null,"vehicles":[{"make":"Acura","model":"ILX","startYear":2016,"endYear":2022},{"make":"Acura","model":"RLX","startYear":2016,"endYear":2020}],"keyType":"Proximity","keyway":"HO01","chip":"HITAG 3","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","stockQty":0,"frequency":"923.625-924.6 MHz","battery":"2032","logo":null,"emergencyPN":"40304","shellPN":null,"notes":"Memory #2","distributorPrices":{"KeylessRide":{"priceA":"239","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"239","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"8675","fccid":"KR580399900","ilco":null,"vehicles":[{"make":"Acura","model":"ILX","startYear":2016,"endYear":2022},{"make":"Acura","model":"RLX","startYear":2016,"endYear":2020}],"keyType":"Proximity","keyway":"HO01","chip":"HITAG 3","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","stockQty":0,"frequency":"923.625-924.6 MHz","battery":"2032","logo":null,"emergencyPN":"40304","shellPN":null,"notes":"Memory #1","distributorPrices":{"KeylessRide":{"priceA":"239","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"239","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"8674","fccid":"KR580399900","ilco":null,"vehicles":[{"make":"Acura","model":"ILX","startYear":2016,"endYear":2022}],"keyType":"Proximity","keyway":"HO01","chip":"HITAG 3","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","stockQty":0,"frequency":"923.625-924.6 MHz","battery":"2032","logo":null,"emergencyPN":"40304","shellPN":null,"notes":"Non-Memory","distributorPrices":{"KeylessRide":{"priceA":"225","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"225","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"8672","fccid":"KR5V1X","ilco":null,"vehicles":[{"make":"Acura","model":"ILX","startYear":2016,"endYear":2019}],"keyType":"Proximity","keyway":"HO01","chip":"HITAG 3 PCF7920","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","stockQty":0,"frequency":"313.55-314.15 MHz","battery":"2032","logo":null,"emergencyPN":"40304","shellPN":null,"notes":"Non-Memory","distributorPrices":{"KeylessRide":{"priceA":"134","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"134","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"8622","fccid":"KR5V1X","ilco":"72147-TZ3-A01 OR 72147-TZ3-A11","vehicles":[{"make":"Acura","model":"ILX","startYear":2016,"endYear":2019},{"make":"Acura","model":"RLX","startYear":2016,"endYear":2019},{"make":"Acura","model":"TLX","startYear":2015,"endYear":2017}],"keyType":"Proximity","keyway":"HO01","chip":"HITAG 3 PCF7920","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","stockQty":0,"frequency":"313.55-314.15 MHz","battery":"2032","logo":null,"emergencyPN":"40304","shellPN":null,"notes":"Memory #1","distributorPrices":{"KeylessRide":{"priceA":"128","priceB":"87","oem":null,"emergency":null,"shell":null}},"priceA":"128","priceB":"87","oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"8607","fccid":"KR5V1X","ilco":"72147-TZ3-A01 OR 72147-TZ3-A11","vehicles":[{"make":"Acura","model":"ILX","startYear":2016,"endYear":2019},{"make":"Acura","model":"RLX","startYear":2016,"endYear":2019},{"make":"Acura","model":"TLX","startYear":2015,"endYear":2017}],"keyType":"Proximity","keyway":"HO01","chip":"HITAG 3 PCF7920","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","stockQty":0,"frequency":"313.55-314.15 MHz","battery":"2032","logo":null,"emergencyPN":"40304","shellPN":null,"notes":"Memory #2","distributorPrices":{"KeylessRide":{"priceA":"128","priceB":"87","oem":null,"emergency":null,"shell":null}},"priceA":"128","priceB":"87","oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"8354","fccid":"KR5434760","ilco":"72147-TX6-A01 or 72147-TX6-A11","vehicles":[{"make":"Acura","model":"ILX","startYear":2013,"endYear":2015}],"keyType":"Proximity","keyway":"HO01","chip":"PH 46","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","stockQty":0,"frequency":"313.85 MHz","battery":"2032","logo":null,"emergencyPN":"8064","shellPN":null,"notes":null,"distributorPrices":{"KeylessRide":{"priceA":"139","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"139","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"8353","fccid":"KR5434760","ilco":"72147-TX6-A01 or 72147-TX6-A11","vehicles":[{"make":"Acura","model":"ILX","startYear":2013,"endYear":2015}],"keyType":"Proximity","keyway":"HO01","chip":"PH 46","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","stockQty":0,"frequency":"313.85 MHz","battery":"2032","logo":null,"emergencyPN":"8064","shellPN":null,"notes":"Memory #1","distributorPrices":{"KeylessRide":{"priceA":"179","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"179","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"HD103","fccid":"HD103","ilco":"X214/ HD103","vehicles":[{"startYear":1990,"make":"Acura","model":"Integra","endYear":1999},{"make":"Acura","model":"NSX","startYear":1991,"endYear":1996},{"model":"TL","make":"Acura","startYear":1995,"endYear":1998}],"keyType":"Non-Chip Key","keyway":"HD103","chip":null,"buttons":null,"stockQty":0,"frequency":null,"battery":null,"logo":null,"emergencyPN":null,"shellPN":null,"notes":null,"distributorPrices":{},"priceA":null,"priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"priceA":139,"priceB":84,"oem":null,"pn":9027,"fccid":"OHT-4882056","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"Hitag AES PCF7939M","originalMake":"Dodge","vehiclesRaw":"Dodge Ram Pickup (19-24) Ram Pickup (19-24)","vehicles":[{"make":"Dodge","model":"Ram Pickup","startYear":2019,"endYear":2024}],"emergencyPN":40226,"keyway":"Y159","emergencyPrice":8.95,"shellPN":null,"shellPrice":null,"logo":"RAM Logo","frequency":433.92,"battery":2450,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":139,"priceB":84,"oem":null,"emergency":8.95,"shell":null}}},{"priceA":94,"priceB":64,"oem":null,"pn":9008,"fccid":"OHT-4882056","keyType":"Proximity","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"Yes","chip":"Hitag AES PCF7939M","originalMake":"Dodge","vehiclesRaw":"Dodge Ram Pickup (19-24) Ram Pickup (19-24)","vehicles":[{"make":"Dodge","model":"Ram Pickup","startYear":2019,"endYear":2024}],"emergencyPN":40226,"keyway":"Y159","emergencyPrice":8.95,"shellPN":null,"shellPrice":null,"logo":"RAM Logo","frequency":433.92,"battery":2450,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":94,"priceB":64,"oem":null,"emergency":8.95,"shell":null}}},{"priceA":"$114","priceB":69,"oem":null,"pn":9009,"fccid":"OHT-4882056","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"Hitag AES PCF7939M","originalMake":"Dodge","vehiclesRaw":"Dodge Ram Pickup (19-24) Ram Pickup (19-24)","vehicles":[{"make":"Dodge","model":"Ram Pickup","startYear":2019,"endYear":2024}],"emergencyPN":40226,"keyway":"Y159","emergencyPrice":8.95,"shellPN":null,"shellPrice":null,"logo":"RAM Logo","frequency":433.92,"battery":2450,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$114","priceB":69,"oem":null,"emergency":8.95,"shell":null}}},{"priceA":"$119","priceB":89,"oem":null,"pn":9307,"fccid":"OHT-4882056","keyType":"Proximity","buttons":"6 Button: L, U, P, T, RS, AS (Lock, Unlock, Panic, Trunk, Remote Start, Auto Start)","inStock":"Yes","chip":"Hitag AES PCF7939M","originalMake":"Dodge","vehiclesRaw":"Dodge Ram Pickup (19-24) Ram Pickup (19-24)","vehicles":[{"make":"Dodge","model":"Ram Pickup","startYear":2019,"endYear":2024}],"emergencyPN":40226,"keyway":"Y159","emergencyPrice":8.95,"shellPN":null,"shellPrice":null,"logo":"RAM Logo","frequency":433.92,"battery":2450,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$119","priceB":89,"oem":null,"emergency":8.95,"shell":null}}},{"priceA":139,"priceB":null,"oem":null,"pn":9646,"fccid":"M3N-97395900","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"Hitag AES Type 4A","originalMake":"Chrysler","vehiclesRaw":"Chrysler Pacifca (17-24) Voyager (20-23)","vehicles":[{"make":"Chrysler","model":"Pacifca","startYear":2017,"endYear":2024},{"make":"Chrysler","model":"Voyager","startYear":2020,"endYear":2023}],"emergencyPN":40234,"keyway":"Y159","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Chrysler Logo","frequency":433.92,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":139,"priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":139,"priceB":null,"oem":null,"pn":9643,"fccid":"M3N-97395900","keyType":"Proximity","buttons":"6 Button: L, U, P, H, PSD2 (Lock, Unlock, Panic, Hatch, Dual Power Sliding Doors)","inStock":"Yes","chip":"Hitag AES Type 4A","originalMake":"Chrysler","vehiclesRaw":"Chrysler Pacifca (17-24) Voyager (20-23)","vehicles":[{"make":"Chrysler","model":"Pacifca","startYear":2017,"endYear":2024},{"make":"Chrysler","model":"Voyager","startYear":2020,"endYear":2023}],"emergencyPN":40234,"keyway":"Y159","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Chrysler Logo","frequency":433.92,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":139,"priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":79,"priceB":49,"oem":null,"pn":9652,"fccid":"M3N-97395900","keyType":"Proximity","buttons":"7 Button: L, U, P, H, PSD2, RS (Lock, Unlock, Panic, Hatch, Dual PSD, Remote Start)","inStock":"Yes","chip":"Hitag AES Type 4A","originalMake":"Chrysler","vehiclesRaw":"Chrysler Pacifca (17-24) Voyager (20-23)","vehicles":[{"make":"Chrysler","model":"Pacifca","startYear":2017,"endYear":2024},{"make":"Chrysler","model":"Voyager","startYear":2020,"endYear":2023}],"emergencyPN":40234,"keyway":"Y159","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Chrysler Logo","frequency":433.92,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":79,"priceB":49,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":154,"priceB":null,"oem":null,"pn":5302,"fccid":"OHT1130261","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"Hitag AES PCF7939M","originalMake":"Jeep","vehiclesRaw":"Jeep Wrangler (18-24) Gladiator (20-23)","vehicles":[{"make":"Jeep","model":"Wrangler","startYear":2018,"endYear":2024},{"make":"Jeep","model":"Gladiator","startYear":2020,"endYear":2023}],"emergencyPN":7658,"keyway":"SIP22","emergencyPrice":8.95,"shellPN":null,"shellPrice":null,"logo":"Jeep Logo","frequency":433.92,"battery":2450,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":154,"priceB":null,"oem":null,"emergency":8.95,"shell":null}}},{"priceA":154,"priceB":null,"oem":null,"pn":5303,"fccid":"OHT1130261","keyType":"Proximity","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"Yes","chip":"Hitag AES PCF7939M","originalMake":"Jeep","vehiclesRaw":"Jeep Wrangler (18-24) Gladiator (20-23)","vehicles":[{"make":"Jeep","model":"Wrangler","startYear":2018,"endYear":2024},{"make":"Jeep","model":"Gladiator","startYear":2020,"endYear":2023}],"emergencyPN":7658,"keyway":"SIP22","emergencyPrice":8.95,"shellPN":null,"shellPrice":null,"logo":"Jeep Logo","frequency":433.92,"battery":2450,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":154,"priceB":null,"oem":null,"emergency":8.95,"shell":null}}},{"priceA":159,"priceB":null,"oem":null,"pn":8565,"fccid":"GQ4-54T","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"PH 46 HITAG2","originalMake":"Dodge","vehiclesRaw":"Dodge Ram Pickup (13-23) Ram Pickup (13-23)","vehicles":[{"make":"Dodge","model":"Ram Pickup","startYear":2013,"endYear":2023}],"emergencyPN":40239,"keyway":"Y159","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"RAM Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":159,"priceB":null,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":94,"priceB":null,"oem":null,"pn":8406,"fccid":"GQ4-54T","keyType":"Proximity","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"Yes","chip":"PH 46 HITAG2","originalMake":"Dodge","vehiclesRaw":"Dodge Ram Pickup (13-23) Ram Pickup (13-23)","vehicles":[{"make":"Dodge","model":"Ram Pickup","startYear":2013,"endYear":2023}],"emergencyPN":40239,"keyway":"Y159","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"RAM Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":94,"priceB":null,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":"$79","priceB":59,"oem":null,"pn":8568,"fccid":"GQ4-54T","keyType":"Proximity","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","inStock":"Yes","chip":"Hitag AES PCF7953M","originalMake":"Jeep","vehiclesRaw":"Jeep Cherokee (14-23)","vehicles":[{"make":"Jeep","model":"Cherokee","startYear":2014,"endYear":2023}],"emergencyPN":40239,"keyway":"Y159","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Jeep Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$79","priceB":59,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":139,"priceB":59,"oem":null,"pn":5069,"fccid":"M3N-40821302","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"Hitag AES PCF7953M","originalMake":"Jeep","vehiclesRaw":"Jeep Compass (17-25)","vehicles":[{"make":"Jeep","model":"Compass","startYear":2017,"endYear":2025}],"emergencyPN":40237,"keyway":"SIP22","emergencyPrice":6.95,"shellPN":808191,"shellPrice":14.95,"logo":"Jeep Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":139,"priceB":59,"oem":null,"emergency":6.95,"shell":14.95}}},{"priceA":"$89","priceB":69,"oem":null,"pn":8191,"fccid":"M3N-40821302","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"PH 46","originalMake":"Dodge","vehiclesRaw":"Dodge Charger (10-18) Dart (13-16) Durango (14-25) Journey (11-20)","vehicles":[{"make":"Dodge","model":"Charger","startYear":2010,"endYear":2018},{"make":"Dodge","model":"Dart","startYear":2013,"endYear":2016},{"make":"Dodge","model":"Durango","startYear":2014,"endYear":2025},{"make":"Dodge","model":"Journey","startYear":2011,"endYear":2020}],"emergencyPN":40239,"keyway":"Y159","emergencyPrice":6.95,"shellPN":808191,"shellPrice":14.95,"logo":"Dodge Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$89","priceB":69,"oem":null,"emergency":6.95,"shell":14.95}}},{"priceA":79,"priceB":49,"oem":null,"pn":8153,"fccid":"M3N-40821302","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"PH 46","originalMake":"Dodge","vehiclesRaw":"Dodge Challenger (15-18) Charger (10-23) Dart (13-16)","vehicles":[{"make":"Dodge","model":"Challenger","startYear":2015,"endYear":2018},{"make":"Dodge","model":"Charger","startYear":2010,"endYear":2023},{"make":"Dodge","model":"Dart","startYear":2013,"endYear":2016}],"emergencyPN":40239,"keyway":"Y159","emergencyPrice":6.95,"shellPN":808153,"shellPrice":14.95,"logo":"Dodge Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":79,"priceB":49,"oem":null,"emergency":6.95,"shell":14.95}}},{"priceA":149,"priceB":69,"oem":null,"pn":8158,"fccid":"M3N-40821302","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"PH 46","originalMake":"Chrysler","vehiclesRaw":"Chrysler 300 (11-18)","vehicles":[{"make":"Chrysler","model":"300","startYear":2011,"endYear":2018}],"emergencyPN":40239,"keyway":"Y159","emergencyPrice":6.95,"shellPN":808153,"shellPrice":14.95,"logo":"Chrysler Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":149,"priceB":69,"oem":null,"emergency":6.95,"shell":14.95}}},{"priceA":169,"priceB":74,"oem":null,"pn":8579,"fccid":"M3M-40821302, M3N-XXXXXXXX","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"Hitag AES PCF7953M","originalMake":"Chrysler","vehiclesRaw":"Chrysler 200 (15-17)","vehicles":[{"make":"Chrysler","model":"200","startYear":2015,"endYear":2017}],"emergencyPN":40239,"keyway":"Y159","emergencyPrice":6.95,"shellPN":808153,"shellPrice":14.95,"logo":"Chrysler Logo","frequency":434.1,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":169,"priceB":74,"oem":null,"emergency":6.95,"shell":14.95}}},{"priceA":134,"priceB":69,"oem":null,"pn":5068,"fccid":"M3N-40821302","keyType":"Proximity","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","inStock":"Yes","chip":"Hitag AES PCF7953M","originalMake":"Jeep","vehiclesRaw":"Jeep Compass (17-25)","vehicles":[{"make":"Jeep","model":"Compass","startYear":2017,"endYear":2025}],"emergencyPN":40237,"keyway":"SIP22","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":null,"frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":134,"priceB":69,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":49.95,"priceB":44,"oem":null,"pn":5186,"fccid":"M3N-40821302","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"Hitag AES PCF7953M","originalMake":"Dodge","vehiclesRaw":"Dodge Challenger (19-20)","vehicles":[{"make":"Dodge","model":"Challenger","startYear":2019,"endYear":2020}],"emergencyPN":40239,"keyway":"Y159","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"1320 Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":49.95,"priceB":44,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":69,"priceB":44,"oem":null,"pn":7550,"fccid":"M3N-40821302","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"Hitag AES PCF7953M","originalMake":"Chrysler","vehiclesRaw":"Chrysler 300 (19-23)","vehicles":[{"make":"Chrysler","model":"300","startYear":2019,"endYear":2023}],"emergencyPN":40239,"keyway":"Y159","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Chrysler Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":69,"priceB":44,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":139,"priceB":74,"oem":null,"pn":8184,"fccid":"M3N-40821302","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"Dodge","vehiclesRaw":"Dodge Challenger (15-18) Charger (10-18) Dart (13-16)","vehicles":[{"make":"Dodge","model":"Challenger","startYear":2015,"endYear":2018},{"make":"Dodge","model":"Charger","startYear":2010,"endYear":2018},{"make":"Dodge","model":"Dart","startYear":2013,"endYear":2016}],"emergencyPN":40239,"keyway":"Y159","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Dodge Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":139,"priceB":74,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":149,"priceB":69,"oem":null,"pn":8196,"fccid":"M3N-40821302","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"Chrysler","vehiclesRaw":"Chrysler 300 (11-18)","vehicles":[{"make":"Chrysler","model":"300","startYear":2011,"endYear":2018}],"emergencyPN":40239,"keyway":"Y159","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Chrysler Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":149,"priceB":69,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":"$79","priceB":59,"oem":null,"pn":8291,"fccid":"M3N-40821302","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"Hitag AES PCF7953M","originalMake":"Dodge","vehiclesRaw":"Dodge Challenger (19-23) Charger (19-23)","vehicles":[{"make":"Dodge","model":"Challenger","startYear":2019,"endYear":2023},{"make":"Dodge","model":"Charger","startYear":2019,"endYear":2023}],"emergencyPN":40239,"keyway":"Y159","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Dodge Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$79","priceB":59,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":139,"priceB":69,"oem":null,"pn":8419,"fccid":"M3N-40821302","keyType":"Proximity","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"Jeep","vehiclesRaw":"Jeep Grand Cherokee (14-21) Grand Cherokee WK (22)","vehicles":[{"make":"Jeep","model":"Grand Cherokee","startYear":2014,"endYear":2021},{"make":"Jeep","model":"Grand Cherokee WK","startYear":2022,"endYear":2022}],"emergencyPN":40239,"keyway":"Y159","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Jeep Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":139,"priceB":69,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":79,"priceB":49,"oem":null,"pn":8486,"fccid":"M3N-40821302","keyType":"Proximity","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"Dodge","vehiclesRaw":"Dodge Durango (14-25)","vehicles":[{"make":"Dodge","model":"Durango","startYear":2014,"endYear":2025}],"emergencyPN":40239,"keyway":"Y159","emergencyPrice":6.95,"shellPN":808419,"shellPrice":11.95,"logo":"Dodge Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":79,"priceB":49,"oem":null,"emergency":6.95,"shell":11.95}}},{"priceA":"$119","priceB":null,"oem":null,"pn":8541,"fccid":"M3N-40821302","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"Hitag AES PCF7953M","originalMake":"Dodge","vehiclesRaw":"Dodge Challenger (19-23) Charger (19-23)","vehicles":[{"make":"Dodge","model":"Challenger","startYear":2019,"endYear":2023},{"make":"Dodge","model":"Charger","startYear":2019,"endYear":2023}],"emergencyPN":40239,"keyway":"Y159","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"SRT Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$119","priceB":null,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":149,"priceB":59,"oem":null,"pn":8578,"fccid":"M3M-40821302, M3N-XXXXXXXX","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"Hitag AES PCF7953M","originalMake":"Chrysler","vehiclesRaw":"Chrysler 200 (15-17)","vehicles":[{"make":"Chrysler","model":"200","startYear":2015,"endYear":2017}],"emergencyPN":40239,"keyway":"Y159","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Chrysler Logo","frequency":434.1,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":149,"priceB":59,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":149,"priceB":null,"oem":null,"pn":5182,"fccid":"M3N-40821302","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"Hitag AES PCF7953M","originalMake":"Dodge","vehiclesRaw":"Dodge Challenger (19-23) Charger (19-23)","vehicles":[{"make":"Dodge","model":"Challenger","startYear":2019,"endYear":2023},{"make":"Dodge","model":"Charger","startYear":2019,"endYear":2023}],"emergencyPN":40239,"keyway":"Y159","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"SRT Hellcat Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":149,"priceB":null,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":149,"priceB":87,"oem":null,"pn":8228,"fccid":"IYZ-C01C","keyType":"Fobik","buttons":"7 Button: L, U, P, + (Lock, Unlock, Panic, +More)","inStock":"Yes","chip":"PH 46","originalMake":"Chrysler","vehiclesRaw":"Chrysler Town & Country (11-16)","vehicles":[{"make":"Chrysler","model":"Town & Country","startYear":2011,"endYear":2016}],"emergencyPN":9870,"keyway":"Y159","emergencyPrice":4.95,"shellPN":808228,"shellPrice":11.95,"logo":"30th Anniversary/ Chrysler Logo","frequency":433.92,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":149,"priceB":87,"oem":null,"emergency":4.95,"shell":11.95}}},{"priceA":119,"priceB":59,"oem":null,"pn":8207,"fccid":"IYZ-C01C","keyType":"Fobik","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"PH 46","originalMake":"Dodge","vehiclesRaw":"Dodge C (12) Durango (11-13) Grand Caravan (11-20)","vehicles":[{"make":"Dodge","model":"Durango","startYear":2011,"endYear":2013},{"make":"Dodge","model":"Grand Caravan","startYear":2011,"endYear":2020}],"emergencyPN":9870,"keyway":"Y159","emergencyPrice":4.95,"shellPN":808207,"shellPrice":11.95,"logo":"Dodge Logo","frequency":433.92,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":119,"priceB":59,"oem":null,"emergency":4.95,"shell":11.95}}},{"priceA":144,"priceB":59,"oem":null,"pn":9968,"fccid":"IYZ-C01C","keyType":"Fobik","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"Dodge","vehiclesRaw":"Dodge Durango (11-13) Grand Caravan (11-19) Ram Pickup (09-12) Ram C/V (14) Pickup (11-12)","vehicles":[{"make":"Dodge","model":"Durango","startYear":2011,"endYear":2013},{"make":"Dodge","model":"Grand Caravan","startYear":2011,"endYear":2019},{"make":"Dodge","model":"Ram Pickup","startYear":2009,"endYear":2012},{"make":"Dodge","model":"Ram C/V","startYear":2014,"endYear":2014},{"make":"Dodge","model":"Ram Pickup","startYear":2011,"endYear":2012}],"emergencyPN":9870,"keyway":"Y159","emergencyPrice":4.95,"shellPN":809968,"shellPrice":11.95,"logo":"Dodge Logo","frequency":433.92,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":144,"priceB":59,"oem":null,"emergency":4.95,"shell":11.95}}},{"priceA":124,"priceB":59,"oem":null,"pn":8181,"fccid":"IYZ-C01C","keyType":"Fobik","buttons":"5 Button: L, U, P, RG, RS (Lock, Unlock, Panic, Rear Glass, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"Jeep","vehiclesRaw":"Jeep Commander (08-10) Grand Cherokee (08-12)","vehicles":[{"make":"Jeep","model":"Commander","startYear":2008,"endYear":2010},{"make":"Jeep","model":"Grand Cherokee","startYear":2008,"endYear":2012}],"emergencyPN":9870,"keyway":"Y159","emergencyPrice":4.59,"shellPN":808180,"shellPrice":11.95,"logo":"Jeep Logo","frequency":433.92,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":124,"priceB":59,"oem":null,"emergency":4.59,"shell":11.95}}},{"priceA":129,"priceB":59,"oem":null,"pn":8084,"fccid":"IYZ-C01C","keyType":"Fobik","buttons":"6 Button: L, U, P, H, PSD2 (Lock, Unlock, Panic, Hatch, Dual Power Sliding Doors)","inStock":"Yes","chip":"PH 46","originalMake":"Chrysler","vehiclesRaw":"Chrysler Town & Country (11-16)","vehicles":[{"make":"Chrysler","model":"Town & Country","startYear":2011,"endYear":2016}],"emergencyPN":9870,"keyway":"Y159","emergencyPrice":4.95,"shellPN":808084,"shellPrice":11.95,"logo":"Chrysler Logo","frequency":433.92,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":129,"priceB":59,"oem":null,"emergency":4.95,"shell":11.95}}},{"priceA":"$109","priceB":59,"oem":null,"pn":8112,"fccid":"IYZ-C01C","keyType":"Fobik","buttons":"6 Button: L, U, P, H, PSD2 (Lock, Unlock, Panic, Hatch, Dual Power Sliding Doors)","inStock":"Yes","chip":"PH 46","originalMake":"Dodge","vehiclesRaw":"Dodge C (12) Grand Caravan (11-19) Ram C/V (13)","vehicles":[{"make":"Dodge","model":"Grand Caravan","startYear":2011,"endYear":2019},{"make":"Dodge","model":"Ram C/V","startYear":2013,"endYear":2013}],"emergencyPN":9870,"keyway":"Y159","emergencyPrice":4.95,"shellPN":808084,"shellPrice":11.95,"logo":"Dodge Logo","frequency":433.92,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$109","priceB":59,"oem":null,"emergency":4.95,"shell":11.95}}},{"priceA":"$109","priceB":59,"oem":12.95,"pn":8144,"fccid":"IYZ-C01C","keyType":"Fobik","buttons":"7 Button: L, U, P, H, RS, PSD2 (Lock, Unlock, Panic, Hatch, Remote Start, Dual PSD)","inStock":"Yes","chip":"PH 46","originalMake":"Dodge","vehiclesRaw":"Dodge Grand Caravan (11-19)","vehicles":[{"make":"Dodge","model":"Grand Caravan","startYear":2011,"endYear":2019}],"emergencyPN":9870,"keyway":"Y159","emergencyPrice":4.95,"shellPN":808228,"shellPrice":11.95,"logo":"Dodge Logo","frequency":433.92,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$109","priceB":59,"oem":12.95,"emergency":4.95,"shell":11.95}}},{"priceA":"$124","priceB":74,"oem":null,"pn":8293,"fccid":"GQ4-53T","keyType":"Fobik","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"PH 46","originalMake":"Dodge","vehiclesRaw":"Dodge Ram Pickup (13-24) Ram Pickup (13-24)","vehicles":[{"make":"Dodge","model":"Ram Pickup","startYear":2013,"endYear":2024}],"emergencyPN":9870,"keyway":"Y159","emergencyPrice":4.95,"shellPN":808478,"shellPrice":11.95,"logo":"RAM Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$124","priceB":74,"oem":null,"emergency":4.95,"shell":11.95}}},{"priceA":"$119","priceB":49,"oem":null,"pn":8478,"fccid":"GQ4-53T","keyType":"Fobik","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"Hitag AES PCF7961M","originalMake":"Jeep","vehiclesRaw":"Jeep Cherokee (14-20)","vehicles":[{"make":"Jeep","model":"Cherokee","startYear":2014,"endYear":2020}],"emergencyPN":9870,"keyway":"Y159","emergencyPrice":4.95,"shellPN":808478,"shellPrice":11.95,"logo":"Jeep Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$119","priceB":49,"oem":null,"emergency":4.95,"shell":11.95}}},{"priceA":"$124","priceB":59,"oem":null,"pn":8572,"fccid":"GQ4-53T","keyType":"Fobik","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"Yes","chip":"Hitag AES PCF7961M","originalMake":"Jeep","vehiclesRaw":"Jeep Cherokee (14-20)","vehicles":[{"make":"Jeep","model":"Cherokee","startYear":2014,"endYear":2020}],"emergencyPN":9870,"keyway":"Y159","emergencyPrice":4.95,"shellPN":808417,"shellPrice":11.95,"logo":"Jeep Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$124","priceB":59,"oem":null,"emergency":4.95,"shell":11.95}}},{"priceA":109,"priceB":74,"oem":null,"pn":8417,"fccid":"GQ4-53T","keyType":"Fobik","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"Dodge","vehiclesRaw":"Dodge Ram Pickup (13-24) Ram Pickup (13-24)","vehicles":[{"make":"Dodge","model":"Ram Pickup","startYear":2013,"endYear":2024}],"emergencyPN":9870,"keyway":"Y159","emergencyPrice":4.95,"shellPN":808417,"shellPrice":11.95,"logo":"RAM Logo","frequency":433.9,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":109,"priceB":74,"oem":null,"emergency":4.95,"shell":11.95}}},{"priceA":119,"priceB":null,"oem":null,"pn":9865,"fccid":"M3N5WY783X","keyType":"Fobik","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"PH 46","originalMake":"Dodge","vehiclesRaw":"Dodge Charger (08-10) Grand Caravan (08-10) Journey (09-10) Magnum (08)","vehicles":[{"make":"Dodge","model":"Charger","startYear":2008,"endYear":2010},{"make":"Dodge","model":"Grand Caravan","startYear":2008,"endYear":2010},{"make":"Dodge","model":"Journey","startYear":2009,"endYear":2010},{"make":"Dodge","model":"Magnum","startYear":2008,"endYear":2008}],"emergencyPN":9870,"keyway":"Y159","emergencyPrice":4.95,"shellPN":809865,"shellPrice":6.95,"logo":"Dodge Logo","frequency":433.92,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":119,"priceB":null,"oem":null,"emergency":4.95,"shell":6.95}}},{"priceA":104,"priceB":null,"oem":null,"pn":9848,"fccid":"M3N5WY783X","keyType":"Fobik","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":"Yes","chip":"PH 46","originalMake":"Jeep","vehiclesRaw":"Jeep Commander (08-10) Grand Cherokee (08-12)","vehicles":[{"make":"Jeep","model":"Commander","startYear":2008,"endYear":2010},{"make":"Jeep","model":"Grand Cherokee","startYear":2008,"endYear":2012}],"emergencyPN":9870,"keyway":"Y159","emergencyPrice":4.95,"shellPN":809848,"shellPrice":6.95,"logo":"Jeep Logo","frequency":433.92,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":104,"priceB":null,"oem":null,"emergency":4.95,"shell":6.95}}},{"priceA":144,"priceB":44,"oem":null,"pn":9431,"fccid":"M3N65981772, M3N5WY72XX","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"PH 46","originalMake":"Jeep","vehiclesRaw":"Jeep Liberty (05-07)","vehicles":[{"make":"Jeep","model":"Liberty","startYear":2005,"endYear":2007}],"emergencyPN":null,"keyway":"Y159","emergencyPrice":null,"shellPN":809575,"shellPrice":6.95,"logo":"Jeep Logo","frequency":315,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":144,"priceB":44,"oem":null,"emergency":null,"shell":6.95}}},{"priceA":114,"priceB":44,"oem":null,"pn":9380,"fccid":"OHT692714AA, M3N5WY72XX","keyType":"Remote Head Key","buttons":"6 Button: L, U, P, T, PSD2 (Lock, Unlock, Panic, Trunk, Dual Power Sliding Doors)","inStock":"Yes","chip":"PH 46","originalMake":"Dodge","vehiclesRaw":"Dodge Caravan (04-07) Grand Caravan (04-07)","vehicles":[{"make":"Dodge","model":"Caravan","startYear":2004,"endYear":2007},{"make":"Dodge","model":"Grand Caravan","startYear":2004,"endYear":2007}],"emergencyPN":null,"keyway":"Y159","emergencyPrice":null,"shellPN":809380,"shellPrice":6.95,"logo":"Dodge Logo","frequency":315,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":114,"priceB":44,"oem":null,"emergency":null,"shell":6.95}}},{"priceA":109,"priceB":14.95,"oem":null,"pn":9578,"fccid":"OHT692427AA","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"PH 46","originalMake":"Dodge","vehiclesRaw":"Dodge Caliber (07-12) Dakota (05-11) Durango (07-09) Ram Pickup (06-09)","vehicles":[{"make":"Dodge","model":"Caliber","startYear":2007,"endYear":2012},{"make":"Dodge","model":"Dakota","startYear":2005,"endYear":2011},{"make":"Dodge","model":"Durango","startYear":2007,"endYear":2009},{"make":"Dodge","model":"Ram Pickup","startYear":2006,"endYear":2009}],"emergencyPN":null,"keyway":"Y159","emergencyPrice":null,"shellPN":809579,"shellPrice":6.95,"logo":"Dodge Logo","frequency":315,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":109,"priceB":14.95,"oem":null,"emergency":null,"shell":6.95}}},{"priceA":104,"priceB":14.95,"oem":null,"pn":9579,"fccid":"OHT692427AA","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"PH 46","originalMake":"Chrysler","vehiclesRaw":"Chrysler Aspen (07-09) PT Cruiser (06-10) Dodge Dakota (12)","vehicles":[{"make":"Chrysler","model":"Aspen","startYear":2007,"endYear":2009},{"make":"Chrysler","model":"PT Cruiser","startYear":2006,"endYear":2010},{"make":"Dodge","model":"Dakota","startYear":2012,"endYear":2012}],"emergencyPN":null,"keyway":"Y159","emergencyPrice":null,"shellPN":809579,"shellPrice":6.95,"logo":"Chrysler Logo","frequency":315,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":104,"priceB":14.95,"oem":null,"emergency":null,"shell":6.95}}},{"priceA":109,"priceB":29,"oem":null,"pn":9575,"fccid":"OHT692427AA","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, RG (Lock, Unlock, Panic, Rear Glass)","inStock":"Yes","chip":"PH 46","originalMake":"Chrysler","vehiclesRaw":"Chrysler PT Cruiser (06-10) Sebring Sedan (07-10)","vehicles":[{"make":"Chrysler","model":"PT Cruiser","startYear":2006,"endYear":2010},{"make":"Chrysler","model":"Sebring Sedan","startYear":2007,"endYear":2010}],"emergencyPN":null,"keyway":"Y159","emergencyPrice":null,"shellPN":809575,"shellPrice":6.95,"logo":"Chrysler Logo","frequency":315,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":109,"priceB":29,"oem":null,"emergency":null,"shell":6.95}}},{"priceA":104,"priceB":17.95,"oem":null,"pn":9760,"fccid":"OHT692427AA,OHT692713AA","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"PH 46","originalMake":"Jeep","vehiclesRaw":"Jeep Compass (07-16) Patriot (07-16)","vehicles":[{"make":"Jeep","model":"Compass","startYear":2007,"endYear":2016},{"make":"Jeep","model":"Patriot","startYear":2007,"endYear":2016}],"emergencyPN":null,"keyway":"Y159","emergencyPrice":null,"shellPN":809579,"shellPrice":6.95,"logo":"Jeep Logo","frequency":315,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":104,"priceB":17.95,"oem":null,"emergency":null,"shell":6.95}}},{"priceA":112,"priceB":9.95,"oem":null,"pn":9584,"fccid":"OHT692427AB","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"PH 46","originalMake":"Dodge","vehiclesRaw":"Dodge Avenger (08-14) Durango (07-09)","vehicles":[{"make":"Dodge","model":"Avenger","startYear":2008,"endYear":2014},{"make":"Dodge","model":"Durango","startYear":2007,"endYear":2009}],"emergencyPN":null,"keyway":"Y159","emergencyPrice":null,"shellPN":809575,"shellPrice":6.95,"logo":"Dodge Logo","frequency":315,"battery":2032,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":112,"priceB":9.95,"oem":null,"emergency":null,"shell":6.95}}},{"priceA":29.95,"priceB":14.95,"oem":null,"pn":9107,"fccid":"GQ43VT9T","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Remote only","chip":null,"originalMake":"Chrysler General","vehiclesRaw":"Chrysler PT Cruiser (05) Dodge Intrepid (98) Neon (00-05) Plymouth Neon (00-01)","vehicles":[{"make":"Chrysler","model":"PT Cruiser","startYear":2005,"endYear":2005},{"make":"Dodge","model":"Intrepid","startYear":1998,"endYear":1998},{"make":"Dodge","model":"Neon","startYear":2000,"endYear":2005},{"make":"Plymouth","model":"Neon","startYear":2000,"endYear":2001}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":805621,"shellPrice":6.95,"logo":null,"frequency":315,"battery":2016,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":29.95,"priceB":14.95,"oem":null,"emergency":null,"shell":6.95}}},{"priceA":19.95,"priceB":12.95,"oem":null,"pn":5512,"fccid":"GQ43VT17T","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Remote only","chip":null,"originalMake":"Chrysler General","vehiclesRaw":"Chrysler 300M (01-04) Concorde (01-04) LHS (01) Sebring (01-06) Dodge Intrepid (01-04) Stratus (01-06) Viper (03-10)","vehicles":[{"make":"Chrysler","model":"300M","startYear":2001,"endYear":2004},{"make":"Chrysler","model":"Concorde","startYear":2001,"endYear":2004},{"make":"Chrysler","model":"LHS","startYear":2001,"endYear":2001},{"make":"Chrysler","model":"Sebring","startYear":2001,"endYear":2006},{"make":"Dodge","model":"Intrepid","startYear":2001,"endYear":2004},{"make":"Dodge","model":"Stratus","startYear":2001,"endYear":2006},{"make":"Dodge","model":"Viper","startYear":2003,"endYear":2010}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":805621,"shellPrice":6.95,"logo":null,"frequency":315,"battery":2016,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":19.95,"priceB":12.95,"oem":null,"emergency":null,"shell":6.95}}},{"priceA":110,"priceB":14.95,"oem":null,"pn":5560,"fccid":"GQ43VT5T","keyType":"Remote Only","buttons":"3 Button: L, U, T (Lock, Unlock, Trunk)","inStock":"Remote only","chip":null,"originalMake":"Chrysler General","vehiclesRaw":"Chrysler Imperial (91-92) New Yorker (91-92) Dodge Intrepid (93) Viper (94-96) Eagle Vision (93)","vehicles":[{"make":"Chrysler","model":"Imperial","startYear":1991,"endYear":1992},{"make":"Chrysler","model":"New Yorker","startYear":1991,"endYear":1992},{"make":"Dodge","model":"Intrepid","startYear":1993,"endYear":1993},{"make":"Dodge","model":"Viper","startYear":1994,"endYear":1996},{"make":"Eagle","model":"Vision","startYear":1993,"endYear":1993}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Chrysler Logo","frequency":315,"battery":2016,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":110,"priceB":14.95,"oem":null,"emergency":null,"shell":null}}},{"priceA":25,"priceB":null,"oem":null,"pn":45506,"fccid":"TPX2","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TPX2","originalMake":"Chrysler General","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"Y159","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA Logo","frequency":null,"battery":null,"notes":"Clonable Chip; Removable chip sleeve","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":25,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":25,"priceB":null,"oem":null,"pn":45583,"fccid":"TPX3","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TPX3","originalMake":"Chrysler General","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"Y159","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":"Clonable Chip; Removable chip sleeve","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":25,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":49,"priceB":null,"oem":null,"pn":48522,"fccid":"TK60","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TK60","originalMake":"Chrysler General","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"Y159","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Keyline logo","frequency":null,"battery":null,"notes":"Clonable Chip Head","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":49,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.49,"priceB":null,"oem":null,"pn":"Y160","fccid":"Y160","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4D 64","originalMake":"Chrysler General","vehiclesRaw":null,"vehicles":[{"make":"Chrysler","model":"300M","startYear":1999,"endYear":2004},{"make":"Chrysler","model":"Cirrus","startYear":1999,"endYear":2000},{"make":"Chrysler","model":"Concorde","startYear":1998,"endYear":2004},{"make":"Chrysler","model":"LHS","startYear":1999,"endYear":2001},{"make":"Chrysler","model":"PT Cruiser","startYear":2001,"endYear":2005},{"make":"Chrysler","model":"Sebring","startYear":1998,"endYear":2006},{"make":"Chrysler","model":"Town & Country","startYear":2001,"endYear":2003},{"make":"Chrysler","model":"Voyager","startYear":2001,"endYear":2003},{"make":"Dodge","model":"Caravan","startYear":2001,"endYear":2003},{"make":"Dodge","model":"Dakota","startYear":2001,"endYear":2004},{"make":"Dodge","model":"Durango","startYear":2001,"endYear":2003},{"make":"Dodge","model":"Grand Caravan","startYear":2001,"endYear":2003},{"make":"Dodge","model":"Intrepid","startYear":1998,"endYear":2004},{"make":"Dodge","model":"Neon","startYear":2000,"endYear":2005},{"make":"Dodge","model":"Ram Pickup","startYear":2002,"endYear":2005},{"make":"Dodge","model":"Stratus","startYear":1999,"endYear":2006},{"make":"Jeep","model":"Cherokee","startYear":1998,"endYear":2001},{"make":"Jeep","model":"Grand Cherokee","startYear":1998,"endYear":2004},{"make":"Jeep","model":"Liberty","startYear":2002,"endYear":2004},{"make":"Jeep","model":"Wrangler","startYear":1998,"endYear":2006},{"make":"Plymouth","model":"Breeze","startYear":1999,"endYear":2000},{"make":"Plymouth","model":"Neon","startYear":2000,"endYear":2001}],"emergencyPN":null,"keyway":"Y159","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA Logo","frequency":null,"battery":null,"notes":"TP21CHR-15.PG","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.49,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["42055","45200","40240","40241"]},{"priceA":67,"priceB":null,"oem":null,"pn":"Y164","fccid":"Y164","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"PH 46","originalMake":"Chrysler General","vehiclesRaw":"Chrysler\n  300 (05-07)\n  Aspen (07-09)\n  PT Cruiser (06-10)\n  Pacifica (04-08)\n  Sebring Convertible (08-10)\n  Sebring Sedan (07-10)\n  Town & Country (04-07)","vehicles":[{"make":"Chrysler","model":"300","startYear":2005,"endYear":2007},{"make":"Chrysler","model":"Aspen","startYear":2007,"endYear":2009},{"make":"Chrysler","model":"PT Cruiser","startYear":2006,"endYear":2010},{"make":"Chrysler","model":"Pacifica","startYear":2004,"endYear":2008},{"make":"Chrysler","model":"Sebring Convertible","startYear":2008,"endYear":2010},{"make":"Chrysler","model":"Sebring Sedan","startYear":2007,"endYear":2010},{"make":"Chrysler","model":"Town & Country","startYear":2004,"endYear":2007},{"make":"Chrysler","model":"200","startYear":2011,"endYear":2014},{"make":"Dodge","model":"Avenger","startYear":2008,"endYear":2014},{"make":"Dodge","model":"Caliber","startYear":2007,"endYear":2012},{"make":"Dodge","model":"Caravan","startYear":2004,"endYear":2007},{"make":"Dodge","model":"Charger","startYear":2006,"endYear":2007},{"make":"Dodge","model":"Dakota","startYear":2005,"endYear":2012},{"make":"Dodge","model":"Durango","startYear":2004,"endYear":2009},{"make":"Dodge","model":"Grand Caravan","startYear":2004,"endYear":2007},{"make":"Dodge","model":"Magnum","startYear":2005,"endYear":2007},{"make":"Dodge","model":"Nitro","startYear":2007,"endYear":2011},{"make":"Dodge","model":"Ram Pickup","startYear":2006,"endYear":2009},{"make":"Jeep","model":"Commander","startYear":2006,"endYear":2007},{"make":"Jeep","model":"Compass","startYear":2007,"endYear":2017},{"make":"Jeep","model":"Grand Cherokee","startYear":2005,"endYear":2007},{"make":"Jeep","model":"Liberty","startYear":2005,"endYear":2012},{"make":"Jeep","model":"Patriot","startYear":2007,"endYear":2017},{"make":"Jeep","model":"Wrangler","startYear":2007,"endYear":2018},{"make":"Mitsubishi","model":"Raider","startYear":2006,"endYear":2009},{"make":"Dodge","model":"Dakota","startYear":2011,"endYear":2012},{"make":"Jeep","model":"Wrangler","startYear":2007,"endYear":2015}],"emergencyPN":null,"keyway":"Y159","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Chrysler logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":67,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["48050","40211","40245","40247","40248"]},{"priceA":19.85,"priceB":null,"oem":null,"pn":"Y170","fccid":"Y170","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"PH 46","originalMake":"Dodge","vehiclesRaw":null,"vehicles":[{"make":"Chrysler","model":"300","startYear":2008,"endYear":2010},{"make":"Chrysler","model":"Town & Country","startYear":2008,"endYear":2016},{"make":"Dodge","model":"Challenger","startYear":2008,"endYear":2014},{"make":"Dodge","model":"Charger","startYear":2008,"endYear":2010},{"make":"Dodge","model":"Dart","startYear":2013,"endYear":2016},{"make":"Dodge","model":"Grand Caravan","startYear":2008,"endYear":2020},{"make":"Dodge","model":"Journey","startYear":2009,"endYear":2010},{"make":"Dodge","model":"Magnum","startYear":2008,"endYear":2008},{"make":"Dodge","model":"Ram Pickup","startYear":2009,"endYear":2024},{"make":"Jeep","model":"Commander","startYear":2008,"endYear":2010},{"make":"Jeep","model":"Grand Cherokee","startYear":2008,"endYear":2012},{"make":"Dodge","model":"Ram Pickup","startYear":2011,"endYear":2024},{"make":"Volkswagen","model":"Routan","startYear":2009,"endYear":2014}],"emergencyPN":null,"keyway":"Y159","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Dodge logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":19.85,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["43001","43009","48051"]},{"priceA":74,"priceB":49,"oem":null,"pn":5023,"fccid":"M3N-A2C93142300","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"Hitag Pro","originalMake":"Ford","vehiclesRaw":"Ford Bronco (21\u201323), Bronco Sport (21\u201324), EcoSport (18\u201323), Edge (17\u201324), Escape (20\u201325), Explorer (18\u201321), F-Series/F150/F250 Light Duty Pickup (18\u201324), F-Series/F250/F350/F450/F550 Super Duty Pickup (17\u201324), Fusion (17\u201320), Fusion Hybrid (17\u201320), Maverick (22\u201324), Ranger (19\u201323)","vehicles":[{"make":"Ford","model":"Bronco","startYear":2021,"endYear":2023},{"make":"Ford","model":"Bronco Sport","startYear":2021,"endYear":2024},{"make":"Ford","model":"EcoSport","startYear":2018,"endYear":2023},{"make":"Ford","model":"Edge","startYear":2017,"endYear":2024},{"make":"Ford","model":"Escape","startYear":2020,"endYear":2025},{"make":"Ford","model":"Explorer","startYear":2018,"endYear":2021},{"make":"Ford","model":"F-Series/F150/F250 Light Duty Pickup","startYear":2018,"endYear":2024},{"make":"Ford","model":"F-Series/F250/F350/F450/F550 Super Duty Pickup","startYear":2017,"endYear":2024},{"make":"Ford","model":"Fusion","startYear":2017,"endYear":2020},{"make":"Ford","model":"Fusion Hybrid","startYear":2017,"endYear":2020},{"make":"Ford","model":"Maverick","startYear":2022,"endYear":2024},{"make":"Ford","model":"Ranger","startYear":2019,"endYear":2023}],"emergencyPN":45204,"keyway":"HU101","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Ford Logo","frequency":314.95,"battery":2450,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":74,"priceB":49,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$94","priceB":"$59","oem":null,"pn":5039,"fccid":"M3N-A2C931423, M3N-A2C93142300","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"HITAG Pro","originalMake":"Ford","vehiclesRaw":"Ford Edge (17\u201324), Escape (24\u201325), Fusion (17\u201320), Fusion Hybrid (17\u201320), Mustang (20\u201322)","vehicles":[{"make":"Ford","model":"Edge","startYear":2017,"endYear":2024},{"make":"Ford","model":"Escape","startYear":2024,"endYear":2025},{"make":"Ford","model":"Fusion","startYear":2017,"endYear":2020},{"make":"Ford","model":"Fusion Hybrid","startYear":2017,"endYear":2020},{"make":"Ford","model":"Mustang","startYear":2020,"endYear":2022}],"emergencyPN":45204,"keyway":"HU101","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Ford logo","frequency":314.95,"battery":2450,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$94","priceB":"$59","oem":null,"emergency":null,"shell":null}}},{"priceA":"$139","priceB":"$69","oem":null,"pn":9637,"fccid":"M3N-A2C93142300","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"HITAG Pro","originalMake":"Ford","vehiclesRaw":"Ford Mustang (18\u201322)","vehicles":[{"make":"Ford","model":"Mustang","startYear":2018,"endYear":2022}],"emergencyPN":45204,"keyway":"HU101","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GT logo","frequency":314.95,"battery":2450,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$139","priceB":"$69","oem":null,"emergency":null,"shell":null}}},{"priceA":"$79","priceB":"$59","oem":null,"pn":5041,"fccid":"M3N-A2C931426, M3N-A2C93142600","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"HITAG Pro","originalMake":"Ford","vehiclesRaw":"Ford Fusion (17\u201320), Fusion Hybrid (17\u201320), Mustang (20\u201322)","vehicles":[{"make":"Ford","model":"Fusion","startYear":2017,"endYear":2020},{"make":"Ford","model":"Fusion Hybrid","startYear":2017,"endYear":2020},{"make":"Ford","model":"Mustang","startYear":2020,"endYear":2022}],"emergencyPN":45204,"keyway":"HU101","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Ford logo","frequency":"902.375-903.425 MHz","battery":2450,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$79","priceB":"$59","oem":null,"emergency":null,"shell":null}}},{"priceA":"$89","priceB":null,"oem":null,"pn":9137,"fccid":"M3N-A2C931426, M3N-A2C93142600","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"HITAG Pro","originalMake":"Ford","vehiclesRaw":"Ford F-Series/F150/F250 Light Duty Pickup (18\u201324), F-Series/F250/F350/F450/F550 Super Duty Pickup (17\u201324), Maverick (22\u201324)","vehicles":[{"make":"Ford","model":"F-Series/F150/F250 Light Duty Pickup","startYear":2018,"endYear":2024},{"make":"Ford","model":"F-Series/F250/F350/F450/F550 Super Duty Pickup","startYear":2017,"endYear":2024},{"make":"Ford","model":"Maverick","startYear":2022,"endYear":2024}],"emergencyPN":45204,"keyway":"HU101","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Ford logo","frequency":"902.375-903.425 MHz","battery":2450,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$89","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$94","priceB":null,"oem":null,"pn":9544,"fccid":"M3N-A2C931426","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"HITAG Pro","originalMake":"Ford","vehiclesRaw":"Ford Mustang (18\u201323)","vehicles":[{"make":"Ford","model":"Mustang","startYear":2018,"endYear":2023}],"emergencyPN":45204,"keyway":"HU101","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Pony logo","frequency":"902.375-903.425 MHz","battery":2450,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$94","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$164","priceB":null,"oem":null,"pn":5008,"fccid":"M3N-A2C940780","keyType":"Proximity","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"Yes","chip":"HITAG Pro","originalMake":"Lincoln","vehiclesRaw":"Lincoln Continental (17\u201319), MKC (17\u201319), MKZ (17\u201320)","vehicles":[{"make":"Lincoln","model":"Continental","startYear":2017,"endYear":2019},{"make":"Lincoln","model":"MKC","startYear":2017,"endYear":2019},{"make":"Lincoln","model":"MKZ","startYear":2017,"endYear":2020}],"emergencyPN":45205,"keyway":"HU101","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Lincoln logo","frequency":"902.375-903.425 MHz","battery":2450,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$164","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$129","priceB":"$69","oem":null,"pn":5009,"fccid":"M3N-A2C940780, M3N-A2C94078000","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"HITAG Pro","originalMake":"Lincoln","vehiclesRaw":"Lincoln Continental (17\u201319), MKC (17\u201319), MKX (18), MKZ (17\u201320)","vehicles":[{"make":"Lincoln","model":"Continental","startYear":2017,"endYear":2019},{"make":"Lincoln","model":"MKC","startYear":2017,"endYear":2019},{"make":"Lincoln","model":"MKX","startYear":2018,"endYear":2018},{"make":"Lincoln","model":"MKZ","startYear":2017,"endYear":2020}],"emergencyPN":45205,"keyway":"HU101","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Lincoln logo","frequency":"902.375-903.425 MHz","battery":2450,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$129","priceB":"$69","oem":null,"emergency":null,"shell":null}}},{"priceA":"$79","priceB":null,"oem":null,"pn":8629,"fccid":"M3N-A2C31243800, A2C87115400","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"HITAG Pro","originalMake":"Ford","vehiclesRaw":"Ford Explorer (16\u201317), F-Series/F150/F250 Light Duty Pickup (15\u201317)","vehicles":[{"make":"Ford","model":"Explorer","startYear":2016,"endYear":2017},{"make":"Ford","model":"F-Series/F150/F250 Light Duty Pickup","startYear":2015,"endYear":2017}],"emergencyPN":42093,"keyway":"HU101","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Ford logo","frequency":"314.95 MHz","battery":"2025 x2","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$79","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$179","priceB":null,"oem":null,"pn":8646,"fccid":"M3N-A2C31243300","keyType":"Proximity","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"Yes","chip":"HITAG Pro","originalMake":"Lincoln","vehiclesRaw":"Lincoln MKC (15\u201316), MKX (16\u201318)","vehicles":[{"make":"Lincoln","model":"MKC","startYear":2015,"endYear":2016},{"make":"Lincoln","model":"MKX","startYear":2016,"endYear":2018}],"emergencyPN":42093,"keyway":"HU101","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Lincoln logo","frequency":"902.375-902.425 MHz","battery":"2025 x2","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$179","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$169","priceB":null,"oem":null,"pn":8643,"fccid":"M3N-A2C31243300","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"HITAG Pro","originalMake":"Lincoln","vehiclesRaw":"Lincoln MKC (15\u201316), MKX (16\u201318)","vehicles":[{"make":"Lincoln","model":"MKC","startYear":2015,"endYear":2016},{"make":"Lincoln","model":"MKX","startYear":2016,"endYear":2018}],"emergencyPN":42093,"keyway":"HU101","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Lincoln logo","frequency":"902.375-902.425 MHz","battery":"2025 x2","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$169","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$134","priceB":"$94","oem":"$44","pn":8405,"fccid":"M3N-A2C31243300","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"HITAG Pro","originalMake":"Ford","vehiclesRaw":"Ford Edge (15\u201317), Explorer (16\u201317), Fusion (13\u201316), Fusion Hybrid (13\u201316)","vehicles":[{"make":"Ford","model":"Edge","startYear":2015,"endYear":2017},{"make":"Ford","model":"Explorer","startYear":2016,"endYear":2017},{"make":"Ford","model":"Fusion","startYear":2013,"endYear":2016},{"make":"Ford","model":"Fusion Hybrid","startYear":2013,"endYear":2016}],"emergencyPN":42093,"keyway":"HU101","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Ford logo","frequency":"902.375-903.425 MHz","battery":"2025 x2","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$134","priceB":"$94","oem":"$44","emergency":null,"shell":null}}},{"priceA":"$159","priceB":null,"oem":null,"pn":8424,"fccid":"M3N-A2C31243300","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"HITAG Pro","originalMake":"Lincoln","vehiclesRaw":"Lincoln MKZ (13\u201316)","vehicles":[{"make":"Lincoln","model":"MKZ","startYear":2013,"endYear":2016}],"emergencyPN":42093,"keyway":"HU101","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Lincoln logo","frequency":"902.375-903.425 MHz","battery":"2025 x2","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$159","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$164","priceB":"$94","oem":null,"pn":8627,"fccid":"M3N-A2C31243300","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"HITAG Pro","originalMake":"Ford","vehiclesRaw":"Ford Mustang (15\u201317)","vehicles":[{"make":"Ford","model":"Mustang","startYear":2015,"endYear":2017}],"emergencyPN":42093,"keyway":"HU101","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Pony logo","frequency":"902.375-903.425 MHz","battery":"2025 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$164","priceB":"$94","oem":null,"emergency":null,"shell":null}}},{"priceA":"$109","priceB":"$74","oem":null,"pn":8154,"fccid":"M3N5WY8609","keyType":"Proximity","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"Ford","vehiclesRaw":"Ford Edge (11\u201315), Escape (13), Expedition (15\u201317), Explorer (11\u201316), Flex (13\u201319), Focus (12\u201315), Taurus (13\u201319)","vehicles":[{"make":"Ford","model":"Edge","startYear":2011,"endYear":2015},{"make":"Ford","model":"Escape","startYear":2013,"endYear":2013},{"make":"Ford","model":"Expedition","startYear":2015,"endYear":2017},{"make":"Ford","model":"Explorer","startYear":2011,"endYear":2016},{"make":"Ford","model":"Flex","startYear":2013,"endYear":2019},{"make":"Ford","model":"Focus","startYear":2012,"endYear":2015},{"make":"Ford","model":"Taurus","startYear":2013,"endYear":2019}],"emergencyPN":45201,"keyway":"H75","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Ford logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$109","priceB":"$74","oem":null,"emergency":null,"shell":null}}},{"priceA":"$139","priceB":"$79","oem":null,"pn":8155,"fccid":"M3N5WY8609","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"Ford","vehiclesRaw":"Ford Edge (11\u201315), Escape (13), Expedition (15\u201317), Explorer (11\u201316), Flex (13\u201319), Focus (12\u201319), Taurus (13\u201319)","vehicles":[{"make":"Ford","model":"Edge","startYear":2011,"endYear":2015},{"make":"Ford","model":"Escape","startYear":2013,"endYear":2013},{"make":"Ford","model":"Expedition","startYear":2015,"endYear":2017},{"make":"Ford","model":"Explorer","startYear":2011,"endYear":2016},{"make":"Ford","model":"Flex","startYear":2013,"endYear":2019},{"make":"Ford","model":"Focus","startYear":2012,"endYear":2019},{"make":"Ford","model":"Taurus","startYear":2013,"endYear":2019}],"emergencyPN":45201,"keyway":"H75","emergencyPrice":null,"shellPN":808155,"shellPrice":17.99,"logo":"Ford logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$139","priceB":"$79","oem":null,"emergency":null,"shell":17.99}}},{"priceA":"$159","priceB":null,"oem":null,"pn":8392,"fccid":"M3N5WY8609","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"TI 4D 63 - 80-bit","originalMake":"Ford","vehiclesRaw":"Ford C-Max (13\u201318), Escape (13\u201319), Focus (12\u201319)","vehicles":[{"make":"Ford","model":"C-Max","startYear":2013,"endYear":2018},{"make":"Ford","model":"Escape","startYear":2013,"endYear":2019},{"make":"Ford","model":"Focus","startYear":2012,"endYear":2019}],"emergencyPN":45202,"keyway":"HU101","emergencyPrice":null,"shellPN":808155,"shellPrice":17.99,"logo":"Ford logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$159","priceB":null,"oem":null,"emergency":null,"shell":17.99}}},{"priceA":"$117","priceB":"$74","oem":null,"pn":8211,"fccid":"M3N5WY8609","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"Lincoln","vehiclesRaw":"Lincoln MKS (13\u201316), MKT (13\u201319), MKX (11\u201315), Navigator (15\u201317)","vehicles":[{"make":"Lincoln","model":"MKS","startYear":2013,"endYear":2016},{"make":"Lincoln","model":"MKT","startYear":2013,"endYear":2019},{"make":"Lincoln","model":"MKX","startYear":2011,"endYear":2015},{"make":"Lincoln","model":"Navigator","startYear":2015,"endYear":2017}],"emergencyPN":45201,"keyway":"H75","emergencyPrice":null,"shellPN":808155,"shellPrice":17.99,"logo":"Lincoln logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$117","priceB":"$74","oem":null,"emergency":null,"shell":17.99}}},{"priceA":"$74","priceB":"$44","oem":null,"pn":8136,"fccid":"KR55WK48801","keyType":"Proximity","buttons":"3 Button: L, U, T (Lock, Unlock, Trunk)","inStock":"Yes","chip":"TI 4D 63 - 80-bit","originalMake":"Ford","vehiclesRaw":"Ford C-Max (13\u201318), Fiesta (11\u201319), Focus (12\u201314)","vehicles":[{"make":"Ford","model":"C-Max","startYear":2013,"endYear":2018},{"make":"Ford","model":"Fiesta","startYear":2011,"endYear":2019},{"make":"Ford","model":"Focus","startYear":2012,"endYear":2014}],"emergencyPN":42071,"keyway":"HU101","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Ford logo","frequency":"433.59-434.25 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$74","priceB":"$44","oem":null,"emergency":null,"shell":null}}},{"priceA":"$94","priceB":"$49","oem":null,"pn":8644,"fccid":"N5F-A08TAA","keyType":"Flip Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"HITAG Pro","originalMake":"Ford","vehiclesRaw":"Ford Bronco Sport (21\u201323), EcoSport (18\u201323), Escape (20\u201323), Expedition (18\u201323), Explorer (16\u201323), F-Series/F150/F250 Light Duty Pickup (15\u201324), F-Series/F250/F350/F450/F550 Super Duty Pickup (17\u201322), Maverick (22\u201324), Ranger (19\u201323)","vehicles":[{"make":"Ford","model":"Bronco Sport","startYear":2021,"endYear":2023},{"make":"Ford","model":"EcoSport","startYear":2018,"endYear":2023},{"make":"Ford","model":"Escape","startYear":2020,"endYear":2023},{"make":"Ford","model":"Expedition","startYear":2018,"endYear":2023},{"make":"Ford","model":"Explorer","startYear":2016,"endYear":2023},{"make":"Ford","model":"F-Series/F150/F250 Light Duty Pickup","startYear":2015,"endYear":2024},{"make":"Ford","model":"F-Series/F250/F350/F450/F550 Super Duty Pickup","startYear":2017,"endYear":2022},{"make":"Ford","model":"Maverick","startYear":2022,"endYear":2024},{"make":"Ford","model":"Ranger","startYear":2019,"endYear":2023}],"emergencyPN":7637,"keyway":"HU101","emergencyPrice":null,"shellPN":808644,"shellPrice":9.95,"logo":"Ford logo","frequency":"314.95 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$94","priceB":"$49","oem":null,"emergency":null,"shell":9.95}}},{"priceA":"$79","priceB":"$49","oem":"$18.95","pn":8296,"fccid":"N5F-A08TAA","keyType":"Flip Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"HITAG Pro","originalMake":"Ford","vehiclesRaw":"Ford Explorer (20\u201323), Fusion (13\u201316), Fusion Hybrid (13\u201316)","vehicles":[{"make":"Ford","model":"Explorer","startYear":2020,"endYear":2023},{"make":"Ford","model":"Fusion","startYear":2013,"endYear":2016},{"make":"Ford","model":"Fusion Hybrid","startYear":2013,"endYear":2016}],"emergencyPN":7637,"keyway":"HU101","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Ford logo","frequency":"314.95 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$79","priceB":"$49","oem":"$18.95","emergency":null,"shell":null}}},{"priceA":"$124","priceB":"$27.95","oem":null,"pn":8662,"fccid":"N5F-A08TDA","keyType":"Flip Key","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"Yes","chip":"HITAG Pro","originalMake":"Ford","vehiclesRaw":"Ford Expedition (18\u201323), Explorer (18\u201319), F-Series/F150/F250 Light Duty Pickup (15\u201324), F-Series/F250/F350/F450/F550 Super Duty Pickup (17\u201322), Maverick (22\u201324), Ranger (19\u201323)","vehicles":[{"make":"Ford","model":"Expedition","startYear":2018,"endYear":2023},{"make":"Ford","model":"Explorer","startYear":2018,"endYear":2019},{"make":"Ford","model":"F-Series/F150/F250 Light Duty Pickup","startYear":2015,"endYear":2024},{"make":"Ford","model":"F-Series/F250/F350/F450/F550 Super Duty Pickup","startYear":2017,"endYear":2022},{"make":"Ford","model":"Maverick","startYear":2022,"endYear":2024},{"make":"Ford","model":"Ranger","startYear":2019,"endYear":2023}],"emergencyPN":42206,"keyway":"HU198","emergencyPrice":null,"shellPN":808662,"shellPrice":11.95,"logo":"Ford logo","frequency":"902.375-903.425 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$124","priceB":"$27.95","oem":null,"emergency":null,"shell":11.95}}},{"priceA":"$124","priceB":"$27.95","oem":null,"pn":8310,"fccid":"OUCD6000022","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"TI 4D 63 - 80-bit","originalMake":"Ford","vehiclesRaw":"Ford Escape (13\u201319), Transit Connect (14\u201319)","vehicles":[{"make":"Ford","model":"Escape","startYear":2013,"endYear":2019},{"make":"Ford","model":"Transit Connect","startYear":2014,"endYear":2019}],"emergencyPN":null,"keyway":"HU101","emergencyPrice":null,"shellPN":808310,"shellPrice":11.95,"logo":"Ford logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$124","priceB":"$27.95","oem":null,"emergency":null,"shell":11.95}}},{"priceA":"$132","priceB":"$19.95","oem":null,"pn":8160,"fccid":"OUCD6000022","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"TI 4D 63 - 80-bit","originalMake":"Ford","vehiclesRaw":"Ford C-Max (13\u201318), Escape (13\u201319), Focus (12\u201319)","vehicles":[{"make":"Ford","model":"C-Max","startYear":2013,"endYear":2018},{"make":"Ford","model":"Escape","startYear":2013,"endYear":2019},{"make":"Ford","model":"Focus","startYear":2012,"endYear":2019}],"emergencyPN":null,"keyway":"HU101","emergencyPrice":null,"shellPN":808160,"shellPrice":15.99,"logo":"Ford logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$132","priceB":"$19.95","oem":null,"emergency":null,"shell":15.99}}},{"priceA":"$114","priceB":"$54","oem":"$19.95","pn":8066,"fccid":"CWTWB1U793","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"TI 4D 63 - 80-bit","originalMake":"Ford","vehiclesRaw":"Ford Edge (11\u201315), Explorer (11\u201315), F-Series/F150/F250 Light Duty Pickup (11\u201314), F-Series/F250/F350/F450/F550 Super Duty Pickup (11\u201317), Flex (13\u201319), Ranger (11)","vehicles":[{"make":"Ford","model":"Edge","startYear":2011,"endYear":2015},{"make":"Ford","model":"Explorer","startYear":2011,"endYear":2015},{"make":"Ford","model":"F-Series/F150/F250 Light Duty Pickup","startYear":2011,"endYear":2014},{"make":"Ford","model":"F-Series/F250/F350/F450/F550 Super Duty Pickup","startYear":2011,"endYear":2017},{"make":"Ford","model":"Flex","startYear":2013,"endYear":2019},{"make":"Ford","model":"Ranger","startYear":2011,"endYear":2011}],"emergencyPN":null,"keyway":"H75","emergencyPrice":null,"shellPN":808066,"shellPrice":6.95,"logo":"Ford logo","frequency":"315 MHz","battery":"2032 x1","notes":"Refurbished remote OE8066-RK-B will fail to program into any vehicles that carry a 40-bit system type. Click button below to view a list of known vehicles with 40-bit system types:\n\nFord: Edge (07\u201310), Escape (07\u201312), Escape Hybrid (07), Expedition (11\u201314), Flex (09\u201314), Fusion (09\u201312), Fusion Hybrid (10\u201312), Mustang (10\u201314), Ranger (11), Taurus (08\u201312), Taurus X (08\u201309)\n\nLincoln: MKS (09), MKX (07\u201310), MKZ (07\u201312), MKZ Hybrid (12), Navigator (11\u201314), Zephyr (06)\n\nMazda: Tribute (08\u201311)\n\nMercury: Mariner (08\u201311), Mariner Hybrid (08\u201311), Milan (07\u201311), Milan Hybrid (10\u201311), Sable (08\u201309)","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$114","priceB":"$54","oem":"$19.95","emergency":null,"shell":6.95}}},{"priceA":"$114","priceB":"$54","oem":null,"pn":8095,"fccid":"CWTWB1U793","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"TI 4D 63 - 80-bit","originalMake":"Lincoln","vehiclesRaw":"Lincoln MKZ (13\u201317)","vehicles":[{"make":"Lincoln","model":"MKZ","startYear":2013,"endYear":2017}],"emergencyPN":null,"keyway":"H75","emergencyPrice":null,"shellPN":808066,"shellPrice":6.95,"logo":"Lincoln logo","frequency":"315 MHz","battery":"2032 x1","notes":"Refurbished remote OE8066-RK-B will fail to program into any vehicles that carry a 40-bit system type. Click button below to view a list of known vehicles with 40-bit system types:\n\nFord: Edge (07\u201310), Escape (07\u201312), Escape Hybrid (07), Expedition (11\u201314), Flex (09\u201314), Fusion (09\u201312), Fusion Hybrid (10\u201312), Mustang (10\u201314), Ranger (11), Taurus (08\u201312), Taurus X (08\u201309)\n\nLincoln: MKS (09), MKX (07\u201310), MKZ (07\u201312), MKZ Hybrid (12), Navigator (11\u201314), Zephyr (06)\n\nMazda: Tribute (08\u201311)\n\nMercury: Mariner (08\u201311), Mariner Hybrid (08\u201311), Milan (07\u201311), Milan Hybrid (10\u201311), Sable (08\u201309)","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$114","priceB":"$54","oem":null,"emergency":null,"shell":6.95}}},{"priceA":"$124","priceB":"$54","oem":"$19.95","pn":8067,"fccid":"CWTWB1U793","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"Yes","chip":"TI 4D 63 - 80-bit","originalMake":"Ford","vehiclesRaw":"Ford Edge (11\u201313), Explorer (11\u201315), F-Series/F150/F250 Light Duty Pickup (11\u201314), F-Series/F250/F350/F450/F550 Super Duty Pickup (11\u201317), Flex (13\u201316)","vehicles":[{"make":"Ford","model":"Edge","startYear":2011,"endYear":2013},{"make":"Ford","model":"Explorer","startYear":2011,"endYear":2015},{"make":"Ford","model":"F-Series/F150/F250 Light Duty Pickup","startYear":2011,"endYear":2014},{"make":"Ford","model":"F-Series/F250/F350/F450/F550 Super Duty Pickup","startYear":2011,"endYear":2017},{"make":"Ford","model":"Flex","startYear":2013,"endYear":2016}],"emergencyPN":null,"keyway":"H75","emergencyPrice":null,"shellPN":808067,"shellPrice":6.95,"logo":"Ford logo","frequency":"315 MHz","battery":"2032 x1","notes":"Refurbished remote OE8066-RK-B will fail to program into any vehicles that carry a 40-bit system type. Click button below to view a list of known vehicles with 40-bit system types:\n\nFord: Edge (07\u201310), Escape (07\u201312), Escape Hybrid (07), Expedition (11\u201314), Flex (09\u201314), Fusion (09\u201312), Fusion Hybrid (10\u201312), Mustang (10\u201314), Ranger (11), Taurus (08\u201312), Taurus X (08\u201309)\n\nLincoln: MKS (09), MKX (07\u201310), MKZ (07\u201312), MKZ Hybrid (12), Navigator (11\u201314), Zephyr (06)\n\nMazda: Tribute (08\u201311)\n\nMercury: Mariner (08\u201311), Mariner Hybrid (08\u201311), Milan (07\u201311), Milan Hybrid (10\u201311), Sable (08\u201309)","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$124","priceB":"$54","oem":"$19.95","emergency":null,"shell":6.95}}},{"priceA":"$91","priceB":"$54","oem":"$19.95","pn":8068,"fccid":"CWTWB1U793","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"TI 4D 63 - 80-bit","originalMake":"Ford","vehiclesRaw":"Ford Edge (11\u201315), Expedition (15\u201317), Explorer (11\u201315), Flex (13\u201319), Taurus (13\u201319)","vehicles":[{"make":"Ford","model":"Edge","startYear":2011,"endYear":2015},{"make":"Ford","model":"Expedition","startYear":2015,"endYear":2017},{"make":"Ford","model":"Explorer","startYear":2011,"endYear":2015},{"make":"Ford","model":"Flex","startYear":2013,"endYear":2019},{"make":"Ford","model":"Taurus","startYear":2013,"endYear":2019}],"emergencyPN":null,"keyway":"H75","emergencyPrice":null,"shellPN":808068,"shellPrice":6.95,"logo":"Ford logo","frequency":"315 MHz","battery":"2032 x1","notes":"Refurbished remote OE8066-RK-B will fail to program into any vehicles that carry a 40-bit system type. Click button below to view a list of known vehicles with 40-bit system types:\n\nFord: Edge (07\u201310), Escape (07\u201312), Escape Hybrid (07), Expedition (11\u201314), Flex (09\u201314), Fusion (09\u201312), Fusion Hybrid (10\u201312), Mustang (10\u201314), Ranger (11), Taurus (08\u201312), Taurus X (08\u201309)\n\nLincoln: MKS (09), MKX (07\u201310), MKZ (07\u201312), MKZ Hybrid (12), Navigator (11\u201314), Zephyr (06)\n\nMazda: Tribute (08\u201311)\n\nMercury: Mariner (08\u201311), Mariner Hybrid (08\u201311), Milan (07\u201311), Milan Hybrid (10\u201311), Sable (08\u201309)","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$91","priceB":"$54","oem":"$19.95","emergency":null,"shell":6.95}}},{"priceA":"$129","priceB":null,"oem":null,"pn":8094,"fccid":"CWTWB1U793","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"Yes","chip":"TI 4D 63 - 80-bit","originalMake":"Lincoln","vehiclesRaw":"Lincoln Navigator (13\u201317)","vehicles":[{"make":"Lincoln","model":"Navigator","startYear":2013,"endYear":2017}],"emergencyPN":null,"keyway":"H75","emergencyPrice":null,"shellPN":808067,"shellPrice":6.95,"logo":"Lincoln logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$129","priceB":null,"oem":null,"emergency":null,"shell":6.95}}},{"priceA":"$127","priceB":"$54","oem":null,"pn":8336,"fccid":"CWTWB1U793","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"TI 4D 63 - 80-bit","originalMake":"Lincoln","vehiclesRaw":"Lincoln MKS (10), MKZ (13\u201317), Navigator (15\u201317)","vehicles":[{"make":"Lincoln","model":"MKS","startYear":2010,"endYear":2010},{"make":"Lincoln","model":"MKZ","startYear":2013,"endYear":2017},{"make":"Lincoln","model":"Navigator","startYear":2015,"endYear":2017}],"emergencyPN":null,"keyway":"H75","emergencyPrice":null,"shellPN":808068,"shellPrice":6.98,"logo":"Lincoln logo","frequency":"315 MHz","battery":"2032 x1","notes":"Refurbished remote OE8066-RK-B will fail to program into any vehicles that carry a 40-bit system type. Click button below to view a list of known vehicles with 40-bit system types:\n\nFord: Edge (07\u201310), Escape (07\u201312), Escape Hybrid (07), Expedition (11\u201314), Flex (09\u201314), Fusion (09\u201312), Fusion Hybrid (10\u201312), Mustang (10\u201314), Ranger (11), Taurus (08\u201312), Taurus X (08\u201309)\n\nLincoln: MKS (09), MKX (07\u201310), MKZ (07\u201312), MKZ Hybrid (12), Navigator (11\u201314), Zephyr (06)\n\nMazda: Tribute (08\u201311)\n\nMercury: Mariner (08\u201311), Mariner Hybrid (08\u201311), Milan (07\u201311), Milan Hybrid (10\u201311), Sable (08\u201309)","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$127","priceB":"$54","oem":null,"emergency":null,"shell":6.98}}},{"priceA":"$118.49","priceB":null,"oem":null,"pn":8096,"fccid":"CWTWB1U793","keyType":"Remote Head Key","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"TI 4D 63 - 80-bit","originalMake":"Lincoln","vehiclesRaw":"Lincoln MKZ (11\u201312), Navigator (13\u201317)","vehicles":[{"make":"Lincoln","model":"MKZ","startYear":2011,"endYear":2012},{"make":"Lincoln","model":"Navigator","startYear":2013,"endYear":2017}],"emergencyPN":null,"keyway":"H75","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Lincoln logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$118.49","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$149","priceB":"$54","oem":"$17.95","pn":8259,"fccid":"CWTWB1U793","keyType":"Remote Head Key","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"TI 4D 63 - 80-bit","originalMake":"Ford","vehiclesRaw":"Ford Expedition (11\u201317), Explorer (13\u201315), Flex (13\u201319), Taurus (12\u201319)","vehicles":[{"make":"Ford","model":"Expedition","startYear":2011,"endYear":2017},{"make":"Ford","model":"Explorer","startYear":2013,"endYear":2015},{"make":"Ford","model":"Flex","startYear":2013,"endYear":2019},{"make":"Ford","model":"Taurus","startYear":2012,"endYear":2019}],"emergencyPN":null,"keyway":"H75","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Ford logo","frequency":"315 MHz","battery":"2032 x1","notes":"Refurbished remote OE8066-RK-B will fail to program into any vehicles that carry a 40-bit system type. Click button below to view a list of known vehicles with 40-bit system types:\n\nFord: Edge (07\u201310), Escape (07\u201312), Escape Hybrid (07), Expedition (11\u201314), Flex (09\u201314), Fusion (09\u201312), Fusion Hybrid (10\u201312), Mustang (10\u201314), Ranger (11), Taurus (08\u201312), Taurus X (08\u201309)\n\nLincoln: MKS (09), MKX (07\u201310), MKZ (07\u201312), MKZ Hybrid (12), Navigator (11\u201314), Zephyr (06)\n\nMazda: Tribute (08\u201311)\n\nMercury: Mariner (08\u201311), Mariner Hybrid (08\u201311), Milan (07\u201311), Milan Hybrid (10\u201311), Sable (08\u201309)","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$149","priceB":"$54","oem":"$17.95","emergency":null,"shell":null}}},{"priceA":"$132","priceB":"$19.95","oem":null,"pn":8569,"fccid":"CWTWB1U793","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"TI 4D 63 - 80-bit","originalMake":"Ford","vehiclesRaw":"Ford Fiesta (15\u201319)","vehicles":[{"make":"Ford","model":"Fiesta","startYear":2015,"endYear":2019}],"emergencyPN":null,"keyway":"HU101","emergencyPrice":null,"shellPN":808569,"shellPrice":6.95,"logo":"Ford logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$132","priceB":"$19.95","oem":null,"emergency":null,"shell":6.95}}},{"priceA":"$114","priceB":"$17.95","oem":null,"pn":9722,"fccid":"OUCD6000022","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"TI 4D 63","originalMake":"Ford","vehiclesRaw":"Ford Edge (07\u201310), Escape Hybrid (07), Flex (09\u201312), Fusion (11\u201312), Fusion Hybrid (11\u201312)","vehicles":[{"make":"Ford","model":"Edge","startYear":2007,"endYear":2010},{"make":"Ford","model":"Escape Hybrid","startYear":2007,"endYear":2007},{"make":"Ford","model":"Flex","startYear":2009,"endYear":2012},{"make":"Ford","model":"Fusion","startYear":2011,"endYear":2012},{"make":"Ford","model":"Fusion Hybrid","startYear":2011,"endYear":2012}],"emergencyPN":null,"keyway":"H75","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Ford logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$114","priceB":"$17.95","oem":null,"emergency":null,"shell":null}}},{"priceA":"$114","priceB":"$17.95","oem":null,"pn":9719,"fccid":"OUCD6000022","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"TI 4D 63","originalMake":"Ford","vehiclesRaw":"Ford Edge (07\u201310), Escape (08\u201312), Escape Hybrid (08\u201312), Expedition (11\u201314), Flex (09\u201312), Fusion (06\u201312), Fusion Hybrid (10\u201312), Mustang (10\u201314), Taurus (08\u201312)","vehicles":[{"make":"Ford","model":"Edge","startYear":2007,"endYear":2010},{"make":"Ford","model":"Escape","startYear":2008,"endYear":2012},{"make":"Ford","model":"Escape Hybrid","startYear":2008,"endYear":2012},{"make":"Ford","model":"Expedition","startYear":2011,"endYear":2014},{"make":"Ford","model":"Flex","startYear":2009,"endYear":2012},{"make":"Ford","model":"Fusion","startYear":2006,"endYear":2012},{"make":"Ford","model":"Fusion Hybrid","startYear":2010,"endYear":2012},{"make":"Ford","model":"Mustang","startYear":2010,"endYear":2014},{"make":"Ford","model":"Taurus","startYear":2008,"endYear":2012}],"emergencyPN":null,"keyway":"H75","emergencyPrice":null,"shellPN":809719,"shellPrice":15.95,"logo":"Ford logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$114","priceB":"$17.95","oem":null,"emergency":null,"shell":15.95}}},{"priceA":"$91.95","priceB":"$21.95","oem":null,"pn":9727,"fccid":"CWTWB1U722","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"TI 4D 63","originalMake":"Ford","vehiclesRaw":"Ford Expedition (10), Taurus X (08\u201309)","vehicles":[{"make":"Ford","model":"Expedition","startYear":2010,"endYear":2010},{"make":"Ford","model":"Taurus X","startYear":2008,"endYear":2009}],"emergencyPN":null,"keyway":"H75","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Ford logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$91.95","priceB":"$21.95","oem":null,"emergency":null,"shell":null}}},{"priceA":"$64","priceB":"$34.95","oem":null,"pn":8120,"fccid":"KR55WK47899","keyType":"Remote Only","buttons":"3 Button: L, U, T (Lock, Unlock, Trunk)","inStock":"No","chip":"TI 4D 63 - 80-bit","originalMake":"Ford","vehiclesRaw":"Ford Fiesta (11\u201319), Transit Connect (10\u201313)","vehicles":[{"make":"Ford","model":"Fiesta","startYear":2011,"endYear":2019},{"make":"Ford","model":"Transit Connect","startYear":2010,"endYear":2013}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Ford logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$64","priceB":"$34.95","oem":null,"emergency":null,"shell":null}}},{"priceA":"$17.95","priceB":"$9.95","oem":null,"pn":5342,"fccid":"CWTWB1U313, CWTWB1U343","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"No","chip":null,"originalMake":"Ford/Lincoln/Mercury","vehiclesRaw":"Ford Crown Victoria (95\u201306); Lincoln Continental (95\u201302), Mark VIII (97\u201398), Town Car (95\u201397); Mercury Grand Marquis (95\u201306), Marauder (03\u201304)","vehicles":[{"make":"Ford","model":"Crown Victoria","startYear":1995,"endYear":2006},{"make":"Lincoln","model":"Continental","startYear":1995,"endYear":2002},{"make":"Lincoln","model":"Mark VIII","startYear":1997,"endYear":1998},{"make":"Lincoln","model":"Town Car","startYear":1995,"endYear":1997},{"make":"Mercury","model":"Grand Marquis","startYear":1995,"endYear":2006},{"make":"Mercury","model":"Marauder","startYear":2003,"endYear":2004}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":805342,"shellPrice":6.95,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$17.95","priceB":"$9.95","oem":null,"emergency":null,"shell":6.95}}},{"priceA":"$19.43","priceB":"$14.95","oem":null,"pn":5350,"fccid":"CWTWB1U322, CWTWB1U331, GQ43VT11T","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"No","chip":null,"originalMake":"Ford/Lincoln/Mercury","vehiclesRaw":"Ford Escort (98\u201302), Escort ZX2 (02\u201303), Five Hundred (05), Focus (00\u201304), Mustang (99\u201305), Taurus (98\u201305), Thunderbird (02\u201305); Lincoln LS (00\u201305), Town Car (98\u201305); Mercury Cougar (99\u201302), Montego (05), Sable (98\u201305), Tracer (98\u201399)","vehicles":[{"make":"Ford","model":"Escort","startYear":1998,"endYear":2002},{"make":"Ford","model":"Escort ZX2","startYear":2002,"endYear":2003},{"make":"Ford","model":"Five Hundred","startYear":2005,"endYear":2005},{"make":"Ford","model":"Focus","startYear":2000,"endYear":2004},{"make":"Ford","model":"Mustang","startYear":1999,"endYear":2005},{"make":"Ford","model":"Taurus","startYear":1998,"endYear":2005},{"make":"Ford","model":"Thunderbird","startYear":2002,"endYear":2005},{"make":"Lincoln","model":"LS","startYear":2000,"endYear":2005},{"make":"Lincoln","model":"Town Car","startYear":1998,"endYear":2005},{"make":"Mercury","model":"Cougar","startYear":1999,"endYear":2002},{"make":"Mercury","model":"Montego","startYear":2005,"endYear":2005},{"make":"Mercury","model":"Sable","startYear":1998,"endYear":2005},{"make":"Mercury","model":"Tracer","startYear":1998,"endYear":1999}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":805350,"shellPrice":6.95,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$19.43","priceB":"$14.95","oem":null,"emergency":null,"shell":6.95}}},{"priceA":"$19.44","priceB":"$14.50","oem":null,"pn":5330,"fccid":"CWTWB1U212, CWTWB1U331, GQ43VT11T","keyType":"Remote Only","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"No","chip":null,"originalMake":"Ford/Lincoln/Mercury/Mazda","vehiclesRaw":"Ford E-Series/Econoline/Club Wagon Van (99\u201301), Escape (01), Excursion (00\u201301), Expedition (98\u201301), Explorer (98\u201301), Explorer Sport (00\u201301), Explorer Sport Trac (01), F-Series/F150/F250 Light Duty Pickup (98\u201301), F-Series/F250/F350/F450/F550 Super Duty Pickup (98\u201301), Ranger (98\u201301), Windstar (98\u201301); Lincoln Navigator (98\u201301); Mazda B-Series (98\u201302), Tribute (01\u201302); Mercury Mountaineer (98\u201301)","vehicles":[{"make":"Ford","model":"E-Series/Econoline/Club Wagon Van","startYear":1999,"endYear":2001},{"make":"Ford","model":"Escape","startYear":2001,"endYear":2001},{"make":"Ford","model":"Excursion","startYear":2000,"endYear":2001},{"make":"Ford","model":"Expedition","startYear":1998,"endYear":2001},{"make":"Ford","model":"Explorer","startYear":1998,"endYear":2001},{"make":"Ford","model":"Explorer Sport","startYear":2000,"endYear":2001},{"make":"Ford","model":"Explorer Sport Trac","startYear":2001,"endYear":2001},{"make":"Ford","model":"F-Series/F150/F250 Light Duty Pickup","startYear":1998,"endYear":2001},{"make":"Ford","model":"F-Series/F250/F350/F450/F550 Super Duty Pickup","startYear":1998,"endYear":2001},{"make":"Ford","model":"Ranger","startYear":1998,"endYear":2001},{"make":"Ford","model":"Windstar","startYear":1998,"endYear":2001},{"make":"Lincoln","model":"Navigator","startYear":1998,"endYear":2001},{"make":"Mazda","model":"B-Series","startYear":1998,"endYear":2002},{"make":"Mazda","model":"Tribute","startYear":2001,"endYear":2002},{"make":"Mercury","model":"Mountaineer","startYear":1998,"endYear":2001}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":805330,"shellPrice":6.95,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$19.44","priceB":"$14.50","oem":null,"emergency":null,"shell":6.95}}},{"priceA":"$19.43","priceB":"$14.95","oem":null,"pn":9138,"fccid":"CWTWB1U331, CWTWB1U322, CWTWB1U343","keyType":"Remote Only","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":"No","chip":null,"originalMake":"Ford/Lincoln/Mercury","vehiclesRaw":"Ford Expedition (03\u201310), Explorer (02\u201310); Lincoln Aviator (03\u201305), Navigator (03\u201310); Mercury Mountaineer (02\u201310)","vehicles":[{"make":"Ford","model":"Expedition","startYear":2003,"endYear":2010},{"make":"Ford","model":"Explorer","startYear":2002,"endYear":2010},{"make":"Lincoln","model":"Aviator","startYear":2003,"endYear":2005},{"make":"Lincoln","model":"Navigator","startYear":2003,"endYear":2010},{"make":"Mercury","model":"Mountaineer","startYear":2002,"endYear":2010}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809138,"shellPrice":8.95,"logo":null,"frequency":"314.5-315.5 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$19.43","priceB":"$14.95","oem":null,"emergency":null,"shell":8.95}}},{"priceA":"$19.43","priceB":"$14.95","oem":null,"pn":9352,"fccid":"CWTWB1U331, CWTWB1U345","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"No","chip":null,"originalMake":"Ford/Lincoln/Mercury","vehiclesRaw":"Ford Crown Victoria (07\u201311), Five Hundred (06\u201307), Focus (05\u201311), GT (05\u201306), Mustang (06\u201309), Taurus (06\u201307), Thunderbird (06); Lincoln LS (06), Town Car (06\u201311); Mercury Grand Marquis (06\u201311), Milan (06), Montego (06\u201307), Monterey (04\u201307)","vehicles":[{"make":"Ford","model":"Crown Victoria","startYear":2007,"endYear":2011},{"make":"Ford","model":"Five Hundred","startYear":2006,"endYear":2007},{"make":"Ford","model":"Focus","startYear":2005,"endYear":2011},{"make":"Ford","model":"GT","startYear":2005,"endYear":2006},{"make":"Ford","model":"Mustang","startYear":2006,"endYear":2009},{"make":"Ford","model":"Taurus","startYear":2006,"endYear":2007},{"make":"Ford","model":"Thunderbird","startYear":2006,"endYear":2006},{"make":"Lincoln","model":"LS","startYear":2006,"endYear":2006},{"make":"Lincoln","model":"Town Car","startYear":2006,"endYear":2011},{"make":"Mercury","model":"Grand Marquis","startYear":2006,"endYear":2011},{"make":"Mercury","model":"Milan","startYear":2006,"endYear":2006},{"make":"Mercury","model":"Montego","startYear":2006,"endYear":2007},{"make":"Mercury","model":"Monterey","startYear":2004,"endYear":2007}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":805350,"shellPrice":6.95,"logo":null,"frequency":"314.5-315.5 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$19.43","priceB":"$14.95","oem":null,"emergency":null,"shell":6.95}}},{"priceA":"$59","priceB":"$17.95","oem":null,"pn":5531,"fccid":"GQ43VT4T","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"No","chip":null,"originalMake":"Ford/Lincoln/Mercury","vehiclesRaw":"Ford Contour (95\u201300), Crown Victoria (93\u201394), Escort (97\u201398), Mustang (94\u201398), Taurus (93\u201397), Thunderbird (93\u201397); Lincoln Continental (92\u201394), Mark VIII (93\u201396), Town Car (93\u201394); Mercury Cougar (93\u201397), Grand Marquis (93\u201394), Mystique (95\u201300), Sable (93\u201397), Tracer (97\u201398)","vehicles":[{"make":"Ford","model":"Contour","startYear":1995,"endYear":2000},{"make":"Ford","model":"Crown Victoria","startYear":1993,"endYear":1994},{"make":"Ford","model":"Escort","startYear":1997,"endYear":1998},{"make":"Ford","model":"Mustang","startYear":1994,"endYear":1998},{"make":"Ford","model":"Taurus","startYear":1993,"endYear":1997},{"make":"Ford","model":"Thunderbird","startYear":1993,"endYear":1997},{"make":"Lincoln","model":"Continental","startYear":1992,"endYear":1994},{"make":"Lincoln","model":"Mark VIII","startYear":1993,"endYear":1996},{"make":"Lincoln","model":"Town Car","startYear":1993,"endYear":1994},{"make":"Mercury","model":"Cougar","startYear":1993,"endYear":1997},{"make":"Mercury","model":"Grand Marquis","startYear":1993,"endYear":1994},{"make":"Mercury","model":"Mystique","startYear":1995,"endYear":2000},{"make":"Mercury","model":"Sable","startYear":1993,"endYear":1997},{"make":"Mercury","model":"Tracer","startYear":1997,"endYear":1998}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2016 x2","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$59","priceB":"$17.95","oem":null,"emergency":null,"shell":null}}},{"priceA":20.95,"priceB":null,"oem":null,"pn":45513,"fccid":"TPX1","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"TPX1","originalMake":"Ford/Lincoln/Mercury","vehiclesRaw":"Ford\n\n1998 - 2002 CROWN VICTORIA\n2000 - 2005 EXCURSION\n1997 - 2002 EXPEDITION\n1998 - 2001 EXPLORER\n1999 - 2003 F SERIES\n1996 - 2004 MUSTANG\n1999 - 2000 RANGER\n1996 - 1999 TAURUS\n1999 - 2000 WINDSTAR\n\nLincoln\n\n2000 - 2002 BLACKWOOD\n1998 - 2002 CONTINENTAL\n1997 - 2002 NAVIGATOR\n1998 - 2002 TOWN CAR\n\nMercury\n\n1999 - 2002 COUGAR\n1998 - 2002 GRAND MARQUIS\n1998 - 2000 MOUNTAINEER\n1997 - 2000 MYSTIQUE\n1996 - 1999 SABLE","vehicles":[],"emergencyPN":null,"keyway":"H75","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":"Clonable chip","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":20.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":20.95,"priceB":null,"oem":null,"pn":"S30FDP","fccid":"S30FDP","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"TPX1","originalMake":"Ford/Lincoln/Mercury","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"S30FDP","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":"Clonable chip","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":20.95,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":[]},{"priceA":25,"priceB":null,"oem":null,"pn":45514,"fccid":"TPX2","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"TPX2","originalMake":"Ford/Lincoln/Mercury","vehiclesRaw":"Ford\n\n2003 - 2009 - CROWN VICTORIA\n2007 - 2009 - EDGE\n2007 - 2009- ESCAPE\n2003 - 2009 - EXPEDITION\n2000 - 2009 - EXPLORER\n2001 - 2009 - EXPLORER SPORT\n2004 - 2009 - F150\n2009 - 2010 - F250\n2009 - 2010 - F350\n2005 - 2007 - FIVE HUNDRED\n2009 -FLEX\n2000 - 2009 - FOCUS\n2004 - 2007 - FREESTAR\n2005 - 2007 - FREESTYLE\n2006 - 2010 - FUSION\n2005 - 2010 - MUSTANG\n2001- 2009 - RANGER\n2000 - 2010 - TAURUS\n2002 - 2005 - THUNDERBIRD\n2001 - 2003 - WINDSTAR\n\nLincoln\n\n2003 - 2005 - AVIATOR\n2000 - 2006 - LS\n2006 - 2008 - MARK LT\n2007 - 2009 - MKX\n2007 - 2009 - MKZ\n2003 - 2009 - NAVIGATOR\n2003 - 2009 - TOWN CAR\n2006 - ZEPHYR\n\nMercury\n\n2003 - 2009 - GRAND MARQUIS\n2003 - 2004 - MARAUDER\n2005 - 2006 - MARINER\n2006 - 2009 - MILAN\n2005 - 2009 - MONTEGO\n2004 - 2007 - MONTEREY\n2000 - 2009 - MOUNTAINEER\n2000 - 2009 - SABLE","vehicles":[],"emergencyPN":null,"keyway":"H75","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":"Clonable chip","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":25,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":25,"priceB":null,"oem":null,"pn":45516,"fccid":"TPX2","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"TPX2","originalMake":"Ford/Lincoln/Mercury","vehiclesRaw":"Ford\n\n2003 - 2009 - CROWN VICTORIA\n2007 - 2009 - EDGE\n2007 - 2009- ESCAPE\n2003 - 2009 - EXPEDITION\n2000 - 2009 - EXPLORER\n2001 - 2009 - EXPLORER SPORT\n2004 - 2009 - F150\n2009 - 2010 - F250\n2009 - 2010 - F350\n2005 - 2007 - FIVE HUNDRED\n2009 -FLEX\n2000 - 2009 - FOCUS\n2004 - 2007 - FREESTAR\n2005 - 2007 - FREESTYLE\n2006 - 2010 - FUSION\n2005 - 2010 - MUSTANG\n2001- 2009 - RANGER\n2000 - 2010 - TAURUS\n2002 - 2005 - THUNDERBIRD\n2001 - 2003 - WINDSTAR\n\nLincoln\n\n2003 - 2005 - AVIATOR\n2000 - 2006 - LS\n2006 - 2008 - MARK LT\n2007 - 2009 - MKX\n2007 - 2009 - MKZ\n2003 - 2009 - NAVIGATOR\n2003 - 2009 - TOWN CAR\n2006 - ZEPHYR\n\nMercury\n\n2003 - 2009 - GRAND MARQUIS\n2003 - 2004 - MARAUDER\n2005 - 2006 - MARINER\n2006 - 2009 - MILAN\n2005 - 2009 - MONTEGO\n2004 - 2007 - MONTEREY\n2000 - 2009 - MOUNTAINEER\n2000 - 2009 - SABLE","vehicles":[],"emergencyPN":null,"keyway":"H75","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":"Clonable chip","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":25,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":28.95,"priceB":null,"oem":null,"pn":40190,"fccid":"MARK8","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"Motorola","originalMake":"Ford/Lincoln/Mercury","vehiclesRaw":"Lincoln\n  Mark VIII (97-98)","vehicles":[{"make":"Lincoln","model":"Mark VIII","startYear":1997,"endYear":1998}],"emergencyPN":null,"keyway":"H75","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Strattec logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":28.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$8.49","priceB":null,"oem":null,"pn":"H73","fccid":"H73","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"TI 4C","originalMake":"Ford/Lincoln/Mercury","vehiclesRaw":"Ford Aspire (98\u201300), Ford Contour (97\u201300), Mustang (96), Mercury Cougar (99\u201302), Mercury Mystique (97\u201300)","vehicles":[{"make":"Ford","model":"Aspire","startYear":1998,"endYear":2000},{"make":"Ford","model":"Contour","startYear":1997,"endYear":2000},{"make":"Ford","model":"Mustang","startYear":1996,"endYear":1996},{"make":"Mercury","model":"Cougar","startYear":1999,"endYear":2002},{"make":"Mercury","model":"Mystique","startYear":1997,"endYear":2000}],"emergencyPN":null,"keyway":"H54/H60","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Strattec logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$8.49","priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["40201","48060"]},{"priceA":15,"priceB":null,"oem":null,"pn":"H72","fccid":"H72","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"TI 4C","originalMake":"Ford/Lincoln/Mercury","vehiclesRaw":"Mercury\n  Grand Marquis (98-02)\n  Mountaineer (98-00)\n  Sable (96-99)","vehicles":[{"make":"Mercury","model":"Grand Marquis","startYear":1998,"endYear":2002},{"make":"Mercury","model":"Mountaineer","startYear":1998,"endYear":2000},{"make":"Mercury","model":"Sable","startYear":1996,"endYear":1999},{"make":"Ford","model":"Crown Victoria","startYear":1998,"endYear":2002},{"make":"Ford","model":"Excursion","startYear":2000,"endYear":2005},{"make":"Ford","model":"Expedition","startYear":1998,"endYear":2002},{"make":"Ford","model":"Explorer","startYear":1998,"endYear":2000},{"make":"Ford","model":"GT","startYear":2005,"endYear":2006},{"make":"Ford","model":"Mustang","startYear":1996,"endYear":2004},{"make":"Ford","model":"Windstar","startYear":1999,"endYear":2000},{"make":"Ford","model":"Expedition","startYear":1997,"endYear":2002},{"make":"Ford","model":"Explorer Sport","startYear":2000,"endYear":2000},{"make":"Ford","model":"F-Series/F150/F250 Light Duty Pickup","startYear":1999,"endYear":2003},{"make":"Ford","model":"F150 Heritage","startYear":2004,"endYear":2004},{"make":"Ford","model":"Ranger","startYear":1999,"endYear":2000},{"make":"Ford","model":"Taurus","startYear":1996,"endYear":1999},{"make":"Lincoln","model":"Blackwood","startYear":2002,"endYear":2003},{"make":"Lincoln","model":"Continental","startYear":1998,"endYear":2002},{"make":"Lincoln","model":"Navigator","startYear":1998,"endYear":2002},{"make":"Lincoln","model":"Town Car","startYear":1998,"endYear":2002},{"make":"Mazda","model":"B-Series","startYear":1999,"endYear":2000}],"emergencyPN":null,"keyway":"H75","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Mercury logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":15,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["40150","40155","48070"]},{"priceA":7.49,"priceB":null,"oem":null,"pn":"H74/H86","fccid":"H74/H86","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"TI 4D 60","originalMake":"Ford/Lincoln/Mercury","vehiclesRaw":"Ford\n  Escape (01-04)\n  Focus (00-05)\n  Thunderbird (02)\nLincoln\n  LS (00-02)\nMazda\n  Tribute (01-04)","vehicles":[{"model":"Escape","make":"Ford","endYear":2004,"startYear":2001},{"startYear":2000,"endYear":2005,"make":"Ford","model":"Focus"},{"endYear":2002,"make":"Ford","startYear":2001,"model":"Thunderbird"},{"endYear":2002,"startYear":2000,"make":"Lincoln","model":"LS"},{"model":"Tribute","endYear":2004,"make":"Mazda","startYear":2001}],"emergencyPN":null,"keyway":"H75","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Strattec logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":7.49,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["48075","40196"]},{"priceA":15.99,"priceB":null,"oem":null,"pn":"H84","fccid":"H84","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"TI 4D 63 - 80-bit","originalMake":"Ford/Lincoln/Mercury/Mazda","vehiclesRaw":"Ford\n  Crown Victoria (03-11)\n  E-Series/Econoline/Club Wagon Van (08-19)\n  Edge (07-15)\n  Escape (05-12)\n  Escape Hybrid (07-12)\n  Expedition (03-17)\n  Explorer (00-15)\n  Explorer Sport (00-03)\n  Explorer Sport Trac (01-10)\n  F-Series/F150/F250 Light Duty Pickup (04-14)\n  F-Series/F250/F350/F450/F550 Super Duty Pickup (08-17)\n  Five Hundred (05-07)\n  Flex (09-19)\n  Focus (06-11)\n  Freestar (04-07)\n  Freestyle (05-07)\n  Fusion (06-12)\n  Fusion Hybrid (10-12)\n  Mustang (05-14)\n  Ranger (01-11)\n  Taurus (00-19)\n  Taurus X (08-09)\n  Thunderbird (03-06)\n  Windstar (01-03)\nMazda\n  B-Series (01-10)\n  Tribute (05-11)","vehicles":[{"make":"Ford","model":"Crown Victoria","startYear":2003,"endYear":2011},{"make":"Ford","model":"E-Series/Econoline/Club Wagon Van","startYear":2008,"endYear":2019},{"make":"Ford","model":"Edge","startYear":2007,"endYear":2015},{"make":"Ford","model":"Escape","startYear":2005,"endYear":2012},{"make":"Ford","model":"Escape Hybrid","startYear":2007,"endYear":2012},{"make":"Ford","model":"Expedition","startYear":2003,"endYear":2017},{"make":"Ford","model":"Explorer","startYear":2000,"endYear":2015},{"make":"Ford","model":"Explorer Sport","startYear":2000,"endYear":2003},{"make":"Ford","model":"Explorer Sport Trac","startYear":2001,"endYear":2010},{"make":"Ford","model":"F-Series/F150/F250 Light Duty Pickup","startYear":2004,"endYear":2014},{"make":"Ford","model":"F-Series/F250/F350/F450/F550 Super Duty Pickup","startYear":2008,"endYear":2017},{"make":"Ford","model":"Five Hundred","startYear":2005,"endYear":2007},{"make":"Ford","model":"Flex","startYear":2009,"endYear":2019},{"make":"Ford","model":"Focus","startYear":2006,"endYear":2011},{"make":"Ford","model":"Freestar","startYear":2004,"endYear":2007},{"make":"Ford","model":"Freestyle","startYear":2005,"endYear":2007},{"make":"Ford","model":"Fusion","startYear":2006,"endYear":2012},{"make":"Ford","model":"Fusion Hybrid","startYear":2010,"endYear":2012},{"make":"Ford","model":"Mustang","startYear":2005,"endYear":2014},{"make":"Ford","model":"Ranger","startYear":2001,"endYear":2011},{"make":"Ford","model":"Taurus","startYear":2000,"endYear":2019},{"make":"Ford","model":"Taurus X","startYear":2008,"endYear":2009},{"make":"Ford","model":"Thunderbird","startYear":2003,"endYear":2006},{"make":"Ford","model":"Windstar","startYear":2001,"endYear":2003},{"make":"Mazda","model":"B-Series","startYear":2001,"endYear":2010},{"make":"Mazda","model":"Tribute","startYear":2005,"endYear":2011},{"make":"Ford","model":"Crown Victoria","startYear":2003,"endYear":2010},{"make":"Ford","model":"E-Series/Econoline/Club Wagon Van","startYear":2008,"endYear":2010},{"make":"Ford","model":"Edge","startYear":2007,"endYear":2010},{"make":"Ford","model":"Escape","startYear":2005,"endYear":2010},{"make":"Ford","model":"Escape Hybrid","startYear":2007,"endYear":2010},{"make":"Ford","model":"Expedition","startYear":2003,"endYear":2010},{"make":"Ford","model":"Explorer","startYear":2000,"endYear":2010},{"make":"Ford","model":"F-Series/F150/F250 Light Duty Pickup","startYear":2004,"endYear":2009},{"make":"Ford","model":"F-Series/F250/F350/F450/F550 Super Duty Pickup","startYear":2008,"endYear":2010},{"make":"Ford","model":"Flex","startYear":2009,"endYear":2010},{"make":"Ford","model":"Focus","startYear":2006,"endYear":2010},{"make":"Ford","model":"Fusion","startYear":2006,"endYear":2010},{"make":"Ford","model":"Fusion Hybrid","startYear":2010,"endYear":2010},{"make":"Ford","model":"Mustang","startYear":2005,"endYear":2010},{"make":"Ford","model":"Ranger","startYear":2001,"endYear":2010},{"make":"Ford","model":"Taurus","startYear":2000,"endYear":2010},{"make":"Mercury","model":"Grand Marquis","startYear":2003,"endYear":2010},{"make":"Mercury","model":"Marauder","startYear":2003,"endYear":2004},{"make":"Mercury","model":"Mariner","startYear":2005,"endYear":2010},{"make":"Mercury","model":"Mariner Hybrid","startYear":2008,"endYear":2010},{"make":"Mercury","model":"Milan","startYear":2006,"endYear":2010},{"make":"Mercury","model":"Milan Hybrid","startYear":2010,"endYear":2010},{"make":"Mercury","model":"Montego","startYear":2005,"endYear":2007},{"make":"Mercury","model":"Monterey","startYear":2004,"endYear":2007},{"make":"Mercury","model":"Mountaineer","startYear":2000,"endYear":2010},{"make":"Mercury","model":"Sable","startYear":2000,"endYear":2005},{"make":"Lincoln","model":"LS","startYear":2003,"endYear":2006},{"make":"Lincoln","model":"MKX","startYear":2007,"endYear":2010},{"make":"Lincoln","model":"MKZ","startYear":2007,"endYear":2010},{"make":"Lincoln","model":"Mark LT","startYear":2006,"endYear":2008},{"make":"Lincoln","model":"Navigator","startYear":2004,"endYear":2004},{"make":"Lincoln","model":"Town Car","startYear":2003,"endYear":2011},{"make":"Lincoln","model":"Zephyr","startYear":2006,"endYear":2006}],"emergencyPN":null,"keyway":"H75","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Ford logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":15.99,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["43161","40161","40162","40165"]},{"priceA":12.95,"priceB":null,"oem":null,"pn":"H91","fccid":"H91","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"TI 4D 63","originalMake":"Ford/Lincoln/Mercury","vehiclesRaw":"Ford Transit Connect (10\u201313)","vehicles":[{"make":"Ford","model":"Transit Connect","startYear":2010,"endYear":2013}],"emergencyPN":null,"keyway":"Tibbe 6 Cut","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Keyline logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":12.95,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["42073"]},{"priceA":7.75,"priceB":null,"oem":null,"pn":"JAG2","fccid":"JAG2","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"TI 4D 40","originalMake":"Ford/Lincoln/Mercury","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"Tibbe 6 Cut","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":7.75,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":[]},{"vehiclesRaw":null,"logo":null,"priceB":null,"emergencyPN":null,"distributorPrices":{"KeylessRide":{"priceA":15.95,"priceB":null,"oem":null,"emergency":null,"shell":null}},"emergencyPrice":null,"frequency":null,"fccid":"H92","stockQty":0,"keyway":"H75","notes":null,"keyType":"Chip Key","buttons":null,"pn":"H92","battery":null,"inStock":"Yes","shellPN":null,"originalMake":"Ford/Lincoln/Mercury/Mazda","priceA":15.95,"shellPrice":null,"vehicles":[{"make":"Mercury","model":"Grand Marquis","startYear":2003,"endYear":2011},{"make":"Mercury","model":"Marauder","startYear":2003,"endYear":2004},{"make":"Mercury","model":"Mariner","startYear":2005,"endYear":2011},{"make":"Mercury","model":"Mariner Hybrid","startYear":2008,"endYear":2011},{"make":"Mercury","model":"Milan","startYear":2006,"endYear":2011},{"make":"Mercury","model":"Milan Hybrid","startYear":2010,"endYear":2011},{"make":"Mercury","model":"Montego","startYear":2005,"endYear":2007},{"make":"Mercury","model":"Monterey","startYear":2004,"endYear":2007},{"make":"Mercury","model":"Mountaineer","startYear":2000,"endYear":2010},{"make":"Mercury","model":"Sable","startYear":2000,"endYear":2005},{"make":"Lincoln","model":"Aviator","startYear":2003,"endYear":2005},{"make":"Lincoln","model":"LS","startYear":2003,"endYear":2006},{"make":"Lincoln","model":"MKS","startYear":2010,"endYear":2010},{"make":"Lincoln","model":"MKX","startYear":2007,"endYear":2010},{"make":"Lincoln","model":"MKZ","startYear":2007,"endYear":2017},{"make":"Lincoln","model":"Mark LT","startYear":2006,"endYear":2008},{"make":"Lincoln","model":"Navigator","startYear":2003,"endYear":2017},{"make":"Lincoln","model":"Town Car","startYear":2003,"endYear":2011},{"make":"Lincoln","model":"Zephyr","startYear":2006,"endYear":2006},{"make":"Ford","model":"Crown Victoria","startYear":2011,"endYear":2011},{"make":"Ford","model":"E-Series/Econoline/Club Wagon Van","startYear":2011,"endYear":2019},{"make":"Ford","model":"Edge","startYear":2011,"endYear":2015},{"make":"Ford","model":"Escape","startYear":2011,"endYear":2012},{"make":"Ford","model":"Escape Hybrid","startYear":2011,"endYear":2012},{"make":"Ford","model":"Expedition","startYear":2011,"endYear":2017},{"make":"Ford","model":"Explorer","startYear":2011,"endYear":2015},{"make":"Ford","model":"F-Series/F150/F250 Light Duty Pickup","startYear":2010,"endYear":2014},{"make":"Ford","model":"F-Series/F250/F350/F450/F550 Super Duty Pickup","startYear":2011,"endYear":2017},{"make":"Ford","model":"Flex","startYear":2011,"endYear":2019},{"make":"Ford","model":"Focus","startYear":2011,"endYear":2011},{"make":"Ford","model":"Fusion","startYear":2011,"endYear":2012},{"make":"Ford","model":"Fusion Hybrid","startYear":2011,"endYear":2012},{"make":"Ford","model":"Mustang","startYear":2011,"endYear":2014},{"make":"Ford","model":"Ranger","startYear":2011,"endYear":2011},{"make":"Ford","model":"Taurus","startYear":2011,"endYear":2019},{"make":"Mercury","model":"Grand Marquis","startYear":2011,"endYear":2011},{"make":"Mercury","model":"Mariner","startYear":2011,"endYear":2011},{"make":"Mercury","model":"Mariner Hybrid","startYear":2011,"endYear":2011},{"make":"Mercury","model":"Milan","startYear":2011,"endYear":2011},{"make":"Mercury","model":"Milan Hybrid","startYear":2011,"endYear":2011}],"oem":null,"chip":"TI 4D 63 - 80-bit","mergedPNs":["40166","40167","40187","42101","43160","48066"]},{"priceA":"$10.95","priceB":null,"oem":null,"pn":"H94","fccid":"H94","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"TI 4D 63 - 80-bit","originalMake":"Ford/Lincoln/Mercury","vehiclesRaw":"Ford C-Max (13\u201318), Escape (13\u201319), Fiesta (11\u201319), Focus (12\u201319), Transit Connect (13\u201319), Transit Van (15\u201321), Transit Wagon (15\u201321)","vehicles":[{"make":"Ford","model":"C-Max","startYear":2013,"endYear":2018},{"make":"Ford","model":"Escape","startYear":2013,"endYear":2019},{"make":"Ford","model":"Fiesta","startYear":2011,"endYear":2019},{"make":"Ford","model":"Focus","startYear":2012,"endYear":2019},{"make":"Ford","model":"Transit Connect","startYear":2013,"endYear":2019},{"make":"Ford","model":"Transit Van","startYear":2015,"endYear":2021},{"make":"Ford","model":"Transit Wagon","startYear":2015,"endYear":2021}],"emergencyPN":null,"keyway":"HU101","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$10.95","priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["42074"]},{"priceA":"$27.95","priceB":null,"oem":null,"pn":"H128","fccid":"H128","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"HITAG Pro","originalMake":"Ford/Lincoln/Mercury","vehiclesRaw":"Ford Bronco Sport (21\u201323), Escape (20\u201323), Expedition (18\u201324), Explorer (16\u201323), F-Series/F150/F250 Light Duty Pickup (15\u201320), F-Series/F250/F350/F450/F550 Super Duty Pickup (17\u201325), Fusion (13\u201316), Fusion Hybrid (13\u201316), Transit Connect (19\u201323)","vehicles":[{"make":"Ford","model":"Bronco Sport","startYear":2021,"endYear":2023},{"make":"Ford","model":"Escape","startYear":2020,"endYear":2023},{"make":"Ford","model":"Expedition","startYear":2018,"endYear":2024},{"make":"Ford","model":"Explorer","startYear":2016,"endYear":2023},{"make":"Ford","model":"F-Series/F150/F250 Light Duty Pickup","startYear":2015,"endYear":2020},{"make":"Ford","model":"F-Series/F250/F350/F450/F550 Super Duty Pickup","startYear":2017,"endYear":2025},{"make":"Ford","model":"Fusion","startYear":2013,"endYear":2016},{"make":"Ford","model":"Fusion Hybrid","startYear":2013,"endYear":2016},{"make":"Ford","model":"Transit Connect","startYear":2019,"endYear":2023},{"make":"Ford","model":"E-Series Super Duty","startYear":2024,"endYear":2025},{"make":"Ford","model":"E-Series/Econoline/Club Wagon Van","startYear":2021,"endYear":2024},{"make":"Ford","model":"Maverick","startYear":2022,"endYear":2024},{"make":"Ford","model":"Ranger","startYear":2019,"endYear":2023},{"make":"Ford","model":"E-Transit","startYear":2022,"endYear":2023},{"make":"Ford","model":"Transit Van","startYear":2020,"endYear":2025},{"make":"Ford","model":"Transit Wagon","startYear":2020,"endYear":2024},{"make":"Ford","model":"EcoSport","startYear":2018,"endYear":2023},{"make":"Ford","model":"F-Series/F150/F250 Light Duty Pickup","startYear":2021,"endYear":2024}],"emergencyPN":null,"keyway":"HU101","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Ford logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$27.95","priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["42190","42176","42177","42184"]},{"priceA":"$139","priceB":"$79","oem":null,"pn":5013,"fccid":"SY5HIFGE04","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"HITAG 3","originalMake":"Genesis","vehiclesRaw":"Genesis G80 (17\u201319)","vehicles":[{"make":"Genesis","model":"G80","startYear":2017,"endYear":2019}],"emergencyPN":42684,"keyway":"KK12","emergencyPrice":"$12.95","shellPN":null,"shellPrice":null,"logo":"Genesis logo","frequency":"433.92 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$139","priceB":"$79","oem":null,"emergency":"$12.95","shell":null}}},{"priceA":"$119","priceB":"$79","oem":null,"pn":5026,"fccid":"SY5HIFGE04","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"HITAG 3","originalMake":"Genesis","vehiclesRaw":"Genesis G90 (17\u201322)","vehicles":[{"make":"Genesis","model":"G90","startYear":2017,"endYear":2022}],"emergencyPN":42681,"keyway":"LXP90","emergencyPrice":"$34.99","shellPN":null,"shellPrice":null,"logo":"Genesis logo","frequency":"433.92 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$119","priceB":"$79","oem":null,"emergency":"$34.99","shell":null}}},{"priceA":"$104","priceB":"$54","oem":null,"pn":8589,"fccid":"TQ8-FOB-4F16","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"HITAG 3 PCF7920 MANCHESTER","originalMake":"Genesis","vehiclesRaw":"Genesis G70 (19\u201320)","vehicles":[{"make":"Genesis","model":"G70","startYear":2019,"endYear":2020}],"emergencyPN":42661,"keyway":"KK12","emergencyPrice":"$14.95","shellPN":null,"shellPrice":null,"logo":null,"frequency":"433.92 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$104","priceB":"$54","oem":null,"emergency":"$14.95","shell":null}}},{"priceA":"$139","priceB":null,"oem":null,"pn":5333,"fccid":"TQ8-FOB-4F35","keyType":"Proximity","buttons":"8 Button: L, U, P, H, RSPA-F, RSPA-R, HTL (Lock, Unlock, Panic, Hatch, RSPA Front/Rear, Head & Tail Lights)","inStock":"Yes","chip":"HITAG 3","originalMake":"Genesis","vehiclesRaw":"Genesis GV80 (21\u201323)","vehicles":[{"make":"Genesis","model":"GV80","startYear":2021,"endYear":2023}],"emergencyPN":40168,"keyway":"KK12","emergencyPrice":"$14.95","shellPN":null,"shellPrice":null,"logo":"Genesis logo","frequency":"433.92 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$139","priceB":null,"oem":null,"emergency":"$14.95","shell":null}}},{"priceA":"$119","priceB":null,"oem":null,"pn":5289,"fccid":"TQ8-FOB-4F35","keyType":"Proximity","buttons":"8 Button: L, U, P, T, RS, SR, RSPA, HTL (Lock, Unlock, Panic, Trunk, Remote Start, Sunroof, RSPA, Head & Tail Lights)","inStock":"Yes","chip":"HITAG 3","originalMake":"Genesis","vehiclesRaw":"Genesis G80 (20\u201322)","vehicles":[{"make":"Genesis","model":"G80","startYear":2020,"endYear":2022}],"emergencyPN":40168,"keyway":"KK12","emergencyPrice":"$14.95","shellPN":null,"shellPrice":null,"logo":"Genesis logo","frequency":"433.92 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$119","priceB":null,"oem":null,"emergency":"$14.95","shell":null}}},{"priceA":"$119","priceB":null,"oem":null,"pn":5217,"fccid":"TQ8-FOB-4F36","keyType":"Proximity","buttons":"6 Button: L, U, P, T, RS, HTL (Lock, Unlock, Panic, Trunk, Remote Start, Head & Tail Lights)","inStock":"Yes","chip":"HITAG 3","originalMake":"Genesis","vehiclesRaw":"Genesis G80 (20\u201322)","vehicles":[{"make":"Genesis","model":"G80","startYear":2020,"endYear":2022}],"emergencyPN":40168,"keyway":"KK12","emergencyPrice":"$14.95","shellPN":null,"shellPrice":null,"logo":"Genesis logo","frequency":"433.92 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$119","priceB":null,"oem":null,"emergency":"$14.95","shell":null}}},{"priceA":"$139","priceB":null,"oem":null,"pn":5202,"fccid":"TQ8-FOB-4F36","keyType":"Proximity","buttons":"6 Button: L, U, P, H, RS, HTL (Lock, Unlock, Panic, Hatch, Remote Start, Head & Tail Lights)","inStock":"Yes","chip":"HITAG 3","originalMake":"Genesis","vehiclesRaw":"Genesis GV80 (21\u201324)","vehicles":[{"make":"Genesis","model":"GV80","startYear":2021,"endYear":2024}],"emergencyPN":40168,"keyway":"KK12","emergencyPrice":"$14.95","shellPN":null,"shellPrice":null,"logo":"Genesis logo","frequency":"433.92 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$139","priceB":null,"oem":null,"emergency":"$14.95","shell":null}}},{"priceA":"$94","priceB":null,"oem":null,"pn":5064,"fccid":"HYQ1EA","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"GMC Acadia (17\u201320), Terrain (18\u201324)","vehicles":[{"make":"GMC","model":"Acadia","startYear":2017,"endYear":2020},{"make":"GMC","model":"Terrain","startYear":2018,"endYear":2024}],"emergencyPN":40177,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":null,"shellPrice":null,"logo":"GMC logo","frequency":"433.92 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$94","priceB":null,"oem":null,"emergency":"$7.95","shell":null}}},{"priceA":"$74","priceB":null,"oem":null,"pn":7540,"fccid":"HYQ1EA","keyType":"Proximity","buttons":"5 Button: L, U, P, TG, RS (Lock, Unlock, Panic, Tailgate, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Chevrolet Silverado (19\u201320)","vehicles":[{"make":"Chevrolet","model":"Silverado","startYear":2019,"endYear":2020}],"emergencyPN":40177,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":null,"shellPrice":null,"logo":"Chevrolet logo","frequency":"433.92 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$74","priceB":null,"oem":null,"emergency":"$7.95","shell":null}}},{"priceA":"$69","priceB":null,"oem":null,"pn":9822,"fccid":"HYQ1EA","keyType":"Proximity","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"GMC Acadia (17\u201320), Terrain (18\u201324)","vehicles":[{"make":"GMC","model":"Acadia","startYear":2017,"endYear":2020},{"make":"GMC","model":"Terrain","startYear":2018,"endYear":2024}],"emergencyPN":40177,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":null,"shellPrice":null,"logo":"GMC logo","frequency":"433.92 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$69","priceB":null,"oem":null,"emergency":"$7.95","shell":null}}},{"priceA":"$89","priceB":"$49","oem":null,"pn":9448,"fccid":"HYQ1AA","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"GMC Terrain (18\u201320)","vehicles":[{"make":"GMC","model":"Terrain","startYear":2018,"endYear":2020}],"emergencyPN":40177,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":null,"shellPrice":null,"logo":"GMC logo","frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$89","priceB":"$49","oem":null,"emergency":"$7.95","shell":null}}},{"priceA":"$74","priceB":"$49","oem":null,"pn":9447,"fccid":"HYQ1AA","keyType":"Proximity","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"GMC Terrain (18\u201324)","vehicles":[{"make":"GMC","model":"Terrain","startYear":2018,"endYear":2024}],"emergencyPN":40177,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":null,"shellPrice":null,"logo":"GMC logo","frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$74","priceB":"$49","oem":null,"emergency":"$7.95","shell":null}}},{"priceA":"$69","priceB":null,"oem":null,"pn":5066,"fccid":"HYQ1AA","keyType":"Proximity","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"GMC Terrain (18\u201320)","vehicles":[{"make":"GMC","model":"Terrain","startYear":2018,"endYear":2020}],"emergencyPN":40177,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":null,"shellPrice":null,"logo":null,"frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$69","priceB":null,"oem":null,"emergency":"$7.95","shell":null}}},{"priceA":"$114","priceB":null,"oem":null,"pn":8581,"fccid":"HYQ1AA","keyType":"Proximity","buttons":"6 Button: L, U, P, H, RG, RS (Lock, Unlock, Panic, Hatch, Rear Glass, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"GMC Yukon (15\u201320)","vehicles":[{"make":"GMC","model":"Yukon","startYear":2015,"endYear":2020}],"emergencyPN":40177,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":808570,"shellPrice":"$18.95","logo":null,"frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$114","priceB":null,"oem":null,"emergency":"$7.95","shell":"$18.95"}}},{"priceA":"$79","priceB":"$49","oem":null,"pn":8570,"fccid":"HYQ1AA","keyType":"Proximity","buttons":"6 Button: L, U, P, H, RG, RS (Lock, Unlock, Panic, Hatch, Rear Glass, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Chevrolet Suburban (15\u201320), Tahoe (15\u201320)","vehicles":[{"make":"Chevrolet","model":"Suburban","startYear":2015,"endYear":2020},{"make":"Chevrolet","model":"Tahoe","startYear":2015,"endYear":2020}],"emergencyPN":40177,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":808570,"shellPrice":"$18.95","logo":null,"frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$79","priceB":"$49","oem":null,"emergency":"$7.95","shell":"$18.95"}}},{"priceA":"$74","priceB":"$59","oem":null,"pn":6001,"fccid":"HYQ4AA","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Chevrolet Equinox (18\u201321), Sonic (17\u201320), Spark (16\u201320)","vehicles":[{"make":"Chevrolet","model":"Equinox","startYear":2018,"endYear":2021},{"make":"Chevrolet","model":"Sonic","startYear":2017,"endYear":2020},{"make":"Chevrolet","model":"Spark","startYear":2016,"endYear":2020}],"emergencyPN":40156,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":null,"shellPrice":null,"logo":"Chevrolet logo","frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$74","priceB":"$59","oem":null,"emergency":"$7.95","shell":null}}},{"priceA":"$94","priceB":null,"oem":null,"pn":5138,"fccid":"HYQ4AA","keyType":"Proximity","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Chevrolet Bolt EV (17\u201321), Equinox (18\u201321), Sonic (17\u201320), Trax (17\u201320), Volt (16)","vehicles":[{"make":"Chevrolet","model":"Bolt EV","startYear":2017,"endYear":2021},{"make":"Chevrolet","model":"Equinox","startYear":2018,"endYear":2021},{"make":"Chevrolet","model":"Sonic","startYear":2017,"endYear":2020},{"make":"Chevrolet","model":"Trax","startYear":2017,"endYear":2020},{"make":"Chevrolet","model":"Volt","startYear":2016,"endYear":2016}],"emergencyPN":40156,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":null,"shellPrice":null,"logo":"Chevrolet logo","frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$94","priceB":null,"oem":null,"emergency":"$7.95","shell":null}}},{"priceA":"$104","priceB":"$59","oem":null,"pn":5058,"fccid":"HYQ4AA","keyType":"Proximity","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Chevrolet Equinox (18\u201321)","vehicles":[{"make":"Chevrolet","model":"Equinox","startYear":2018,"endYear":2021}],"emergencyPN":40156,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":null,"shellPrice":null,"logo":"Chevrolet logo","frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$104","priceB":"$59","oem":null,"emergency":"$7.95","shell":null}}},{"priceA":"$67","priceB":null,"oem":null,"pn":5132,"fccid":"HYQ4AA","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Buick Encore (17\u201320)","vehicles":[{"make":"Buick","model":"Encore","startYear":2017,"endYear":2020}],"emergencyPN":40154,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":null,"shellPrice":null,"logo":"Buick logo","frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$67","priceB":null,"oem":null,"emergency":"$7.95","shell":null}}},{"priceA":"$84","priceB":null,"oem":null,"pn":5131,"fccid":"HYQ4AA","keyType":"Proximity","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Buick Encore (17\u201320)","vehicles":[{"make":"Buick","model":"Encore","startYear":2017,"endYear":2020}],"emergencyPN":40154,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":null,"shellPrice":null,"logo":"Buick logo","frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$84","priceB":null,"oem":null,"emergency":"$7.95","shell":null}}},{"priceA":"$59","priceB":"$44","oem":null,"pn":6084,"fccid":"HYQ4EA","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Chevrolet Camaro (16\u201320), Cruze (16\u201319), Malibu (16\u201320)","vehicles":[{"make":"Chevrolet","model":"Camaro","startYear":2016,"endYear":2020},{"make":"Chevrolet","model":"Cruze","startYear":2016,"endYear":2019},{"make":"Chevrolet","model":"Malibu","startYear":2016,"endYear":2020}],"emergencyPN":40156,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":null,"shellPrice":null,"logo":null,"frequency":"433.92 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$59","priceB":"$44","oem":null,"emergency":"$7.95","shell":null}}},{"priceA":"$84","priceB":null,"oem":null,"pn":5087,"fccid":"HYQ4EA","keyType":"Proximity","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Buick Enclave (18\u201319)","vehicles":[{"make":"Buick","model":"Enclave","startYear":2018,"endYear":2019}],"emergencyPN":40154,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":null,"shellPrice":null,"logo":"Buick logo","frequency":"433.92 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$84","priceB":null,"oem":null,"emergency":"$7.95","shell":null}}},{"priceA":"$89","priceB":null,"oem":null,"pn":8602,"fccid":"HYQ2AB","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Cadillac SRX (15\u201316)","vehicles":[{"make":"Cadillac","startYear":2015,"model":"SRX","endYear":2017}],"emergencyPN":40178,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":null,"shellPrice":null,"logo":"Cadillac logo","frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$89","priceB":null,"oem":null,"emergency":"$7.95","shell":null}}},{"priceA":"$74","priceB":null,"oem":null,"pn":8599,"fccid":"HYQ2AB","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Cadillac ATS (15\u201319)","vehicles":[{"make":"Cadillac","model":"ATS","startYear":2015,"endYear":2019}],"emergencyPN":40178,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":null,"shellPrice":null,"logo":"Cadillac logo","frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$74","priceB":null,"oem":null,"emergency":"$7.95","shell":null}}},{"priceA":"$79","priceB":null,"oem":null,"pn":8598,"fccid":"HYQ2AB","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Cadillac ATS (15\u201319), ATS-V (16\u201319), CTS (15\u201319), CTS-V (16\u201319), XTS (16\u201319)","vehicles":[{"model":"ATS","endYear":2019,"make":"Cadillac","startYear":2015},{"startYear":2014,"model":"CTS","make":"Cadillac","endYear":2019},{"endYear":2019,"startYear":2016,"make":"Cadillac","model":"CTS-V"},{"endYear":2019,"make":"Cadillac","model":"XTS","startYear":2016}],"emergencyPN":40178,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":808601,"shellPrice":"$14.95","logo":"Cadillac logo","frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$79","priceB":null,"oem":null,"emergency":"$7.95","shell":"$14.95"}}},{"priceA":"$84","priceB":"$49","oem":null,"pn":8621,"fccid":"HYQ2AB","keyType":"Proximity","buttons":"6 Button: L, U, P, H, RG, RS (Lock, Unlock, Panic, Hatch, Rear Glass, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Cadillac Escalade (15\u201320)","vehicles":[{"make":"Cadillac","model":"Escalade","startYear":2015,"endYear":2020}],"emergencyPN":40178,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":null,"shellPrice":null,"logo":"Cadillac logo","frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$84","priceB":"$49","oem":null,"emergency":"$7.95","shell":null}}},{"priceA":"$109","priceB":null,"oem":null,"pn":5470,"fccid":"HYQ2EB","keyType":"Proximity","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Cadillac XT4 (19), XT5 (17\u201320), XT6 (20)","vehicles":[{"codeSeries":[{"series":"V0001-V5718","years":"2019-2019"}],"make":"Cadillac","endYear":2020,"startYear":2019,"model":"XT4"},{"codeSeries":[{"series":"V0001-V5718","years":"2017-2019"}],"endYear":2019,"startYear":2017,"model":"XT5","make":"Cadillac"},{"startYear":2020,"model":"XT6","endYear":2021,"make":"Cadillac","codeSeries":[{"years":"2020-2020","series":"V0001-V5718"}]}],"emergencyPN":40178,"keyway":"HU100","emergencyPrice":"$7.95","shellPN":null,"shellPrice":null,"logo":"Cadillac logo","frequency":"433.92 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$109","priceB":null,"oem":null,"emergency":"$7.95","shell":null}}},{"priceA":"$139","priceB":null,"oem":null,"pn":8603,"fccid":"NBGG09C04","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Chevrolet Corvette (15\u201319)","vehicles":[{"make":"Chevrolet","model":"Corvette","startYear":2015,"endYear":2019}],"emergencyPN":8073,"keyway":"HU100","emergencyPrice":"$6.95","shellPN":null,"shellPrice":null,"logo":"Corvette logo","frequency":"433.92 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$139","priceB":null,"oem":null,"emergency":"$6.95","shell":null}}},{"priceA":"$29.95","priceB":null,"oem":null,"pn":8258,"fccid":"P4O9MK74946931, OHT05918179","keyType":"PEPS Flip Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Chevrolet Cruze (12\u201316)","vehicles":[{"make":"Chevrolet","model":"Cruze","startYear":2012,"endYear":2016}],"emergencyPN":7639,"keyway":"HU100","emergencyPrice":"$13.95","shellPN":null,"shellPrice":null,"logo":"Chevrolet logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$29.95","priceB":null,"oem":null,"emergency":"$13.95","shell":null}}},{"priceA":"$39","priceB":null,"oem":null,"pn":9875,"fccid":"V2T01080514, OHT05918179","keyType":"PEPS Flip Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Buick Allure (10\u201311), LaCrosse (10\u201316), Regal (12\u201317), Verano (12\u201317)","vehicles":[{"make":"Buick","model":"Allure","startYear":2010,"endYear":2011},{"make":"Buick","model":"LaCrosse","startYear":2010,"endYear":2016},{"make":"Buick","model":"Regal","startYear":2012,"endYear":2017},{"make":"Buick","model":"Verano","startYear":2012,"endYear":2017}],"emergencyPN":7639,"keyway":"HU100","emergencyPrice":"$13.95","shellPN":null,"shellPrice":null,"logo":"Buick logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$39","priceB":null,"oem":null,"emergency":"$13.95","shell":null}}},{"priceA":"$44","priceB":null,"oem":null,"pn":8429,"fccid":"V2T01060514, P4O9MK74946931, OHT05918179","keyType":"PEPS Flip Key","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Chevrolet Cruze (12\u201316), Impala (14\u201320), Malibu (13\u201316), SS (14\u201317)","vehicles":[{"make":"Chevrolet","model":"Cruze","startYear":2012,"endYear":2016},{"make":"Chevrolet","model":"Impala","startYear":2014,"endYear":2020},{"make":"Chevrolet","model":"Malibu","startYear":2013,"endYear":2016},{"make":"Chevrolet","model":"SS","startYear":2014,"endYear":2017}],"emergencyPN":7639,"keyway":"HU100","emergencyPrice":"$13.95","shellPN":809986,"shellPrice":"$6.95","logo":"Chevrolet logo","frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$44","priceB":null,"oem":null,"emergency":"$13.95","shell":"$6.95"}}},{"priceA":"$37","priceB":null,"oem":null,"pn":9992,"fccid":"OHT05918179","keyType":"PEPS Flip Key","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Buick Allure (10\u201311), LaCrosse (10\u201316), Regal (12\u201317), Verano (12\u201317)","vehicles":[{"make":"Buick","model":"Allure","startYear":2010,"endYear":2011},{"make":"Buick","model":"LaCrosse","startYear":2010,"endYear":2016},{"make":"Buick","model":"Regal","startYear":2012,"endYear":2017},{"make":"Buick","model":"Verano","startYear":2012,"endYear":2017}],"emergencyPN":7639,"keyway":"HU100","emergencyPrice":"$13.95","shellPN":809986,"shellPrice":"$6.95","logo":"Buick logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$37","priceB":null,"oem":null,"emergency":"$13.95","shell":"$6.95"}}},{"priceA":"$84","priceB":null,"oem":null,"pn":8391,"fccid":"AVL-B01T1AC","keyType":"Flip Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Buick Encore (13\u201316)","vehicles":[{"endYear":2016,"make":"Buick","model":"Encore","startYear":2014}],"emergencyPN":7639,"keyway":"HU100","emergencyPrice":"$13.95","shellPN":808037,"shellPrice":null,"logo":"Buick logo","frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$84","priceB":null,"oem":null,"emergency":"$13.95","shell":null}}},{"priceA":"$26.95","priceB":"$21.95","oem":null,"pn":8037,"fccid":"OHT01060512","keyType":"Flip Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Chevrolet Equinox (10\u201317), Sonic (12\u201317)","vehicles":[{"make":"Chevrolet","model":"Equinox","startYear":2010,"endYear":2017},{"make":"Chevrolet","model":"Sonic","startYear":2012,"endYear":2017}],"emergencyPN":7639,"keyway":"HU100","emergencyPrice":"$13.95","shellPN":808037,"shellPrice":"$10.95","logo":"Chevrolet logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$26.95","priceB":"$21.95","oem":null,"emergency":"$13.95","shell":"$10.95"}}},{"priceA":"$39","priceB":"$21.95","oem":"$17.95","pn":8101,"fccid":"V2T0106512, OHT01060512","keyType":"Flip Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Buick Encore (14\u201316), LaCrosse (10\u201316), Regal (11\u201317), Verano (12\u201317)","vehicles":[{"make":"Buick","model":"Encore","startYear":2014,"endYear":2016},{"make":"Buick","model":"LaCrosse","startYear":2010,"endYear":2016},{"make":"Buick","model":"Regal","startYear":2011,"endYear":2017},{"make":"Buick","model":"Verano","startYear":2012,"endYear":2017}],"emergencyPN":7639,"keyway":"HU100","emergencyPrice":"$13.95","shellPN":809985,"shellPrice":"$6.95","logo":"Buick logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$39","priceB":"$21.95","oem":"$17.95","emergency":"$13.95","shell":"$6.95"}}},{"vehiclesRaw":"Chevrolet Impala (14\u201318), Sonic (12\u201318)","logo":"Chevrolet logo","priceB":"$18.95","emergencyPN":7639,"distributorPrices":{"KeylessRide":{"priceA":"$29.99","priceB":"$18.95","oem":"$17.95","emergency":"$13.95","shell":"$6.95"}},"emergencyPrice":"$13.95","frequency":"314.9 MHz","fccid":"KR55WK50073","stockQty":0,"keyway":"HU100","notes":null,"keyType":"Flip Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","pn":8305,"battery":"2032 x1","inStock":"Yes","shellPN":809985,"originalMake":"GM","priceA":"$29.99","shellPrice":"$6.95","vehicles":[{"make":"Chevrolet","model":"Impala","startYear":2014,"endYear":2018},{"make":"Chevrolet","model":"Sonic","startYear":2012,"endYear":2018}],"oem":"$17.95","chip":"PH 46"},{"vehiclesRaw":"Chevrolet Cruze (11\u201312), Sonic (12\u201316)","logo":"Chevrolet logo","priceB":"$21.95","emergencyPN":7639,"distributorPrices":{"KeylessRide":{"priceA":"$49","priceB":"$21.95","oem":null,"emergency":"$13.95","shell":null}},"emergencyPrice":"$13.95","frequency":"314.9 MHz","fccid":"KR55WK50073","stockQty":0,"keyway":"HU100","notes":null,"keyType":"Flip Key","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","pn":8348,"battery":"2032 x1","inStock":"Yes","shellPN":808388,"originalMake":"GM","priceA":"$49","shellPrice":null,"vehicles":[{"make":"Chevrolet","model":"Cruze","startYear":2011,"endYear":2012},{"make":"Chevrolet","model":"Sonic","startYear":2012,"endYear":2016}],"oem":null,"chip":"PH 46"},{"priceA":"$44","priceB":null,"oem":null,"pn":5598,"fccid":"KR55WK50073","keyType":"Flip Key","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Buick Cascada (16\u201319)","vehicles":[{"make":"Buick","model":"Cascada","startYear":2016,"endYear":2019}],"emergencyPN":7639,"keyway":"HU100","emergencyPrice":"$13.95","shellPN":809986,"shellPrice":"$6.95","logo":"Buick logo","frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$44","priceB":null,"oem":null,"emergency":"$13.95","shell":"$6.95"}}},{"vehiclesRaw":"Chevrolet Impala (14\u201318), Sonic (12\u201318)","logo":"Chevrolet logo","priceB":"$18.95","emergencyPN":7639,"distributorPrices":{"KeylessRide":{"priceA":"$29.99","priceB":"$18.95","oem":null,"emergency":"$13.95","shell":"$6.95"}},"emergencyPrice":"$13.95","frequency":"314.9 MHz","fccid":"KR55WK50073","stockQty":0,"keyway":"HU100","notes":null,"keyType":"Flip Key","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","pn":8239,"battery":"2032 x1","inStock":"Yes","shellPN":809986,"originalMake":"GM","priceA":"$29.99","shellPrice":"$6.95","vehicles":[{"make":"Chevrolet","model":"Impala","startYear":2014,"endYear":2018},{"make":"Chevrolet","model":"Sonic","startYear":2012,"endYear":2018}],"oem":null,"chip":"PH 46"},{"priceA":"$49","priceB":"$21.95","oem":"$17.95","pn":9958,"fccid":"OHT01060512, V2T0106512","keyType":"Flip Key","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Buick Allure (10\u201311), Encore (14\u201316), LaCrosse (10\u201316), Regal (11\u201317), Verano (12\u201317)","vehicles":[{"make":"Buick","model":"Allure","startYear":2010,"endYear":2011},{"make":"Buick","model":"Encore","startYear":2014,"endYear":2016},{"make":"Buick","model":"LaCrosse","startYear":2010,"endYear":2016},{"make":"Buick","model":"Regal","startYear":2011,"endYear":2017},{"make":"Buick","model":"Verano","startYear":2012,"endYear":2017}],"emergencyPN":7639,"keyway":"HU100","emergencyPrice":"$13.95","shellPN":809986,"shellPrice":"$6.95","logo":"Buick logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$49","priceB":"$21.95","oem":"$17.95","emergency":"$13.95","shell":"$6.95"}}},{"priceA":"$39","priceB":"$18.95","oem":"$17.95","pn":9984,"fccid":"P4O9MK74946931, OHT01060512","keyType":"Flip Key","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"GMC Terrain (10\u201318)","vehicles":[{"make":"GMC","model":"Terrain","startYear":2010,"endYear":2018}],"emergencyPN":7639,"keyway":"HU100","emergencyPrice":"$13.95","shellPN":809986,"shellPrice":"$6.95","logo":"GMC logo","frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$39","priceB":"$18.95","oem":"$17.95","emergency":"$13.95","shell":"$6.95"}}},{"priceA":"$39","priceB":"$29","oem":null,"pn":8440,"fccid":"M3N-32337100","keyType":"Remote Only","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Chevrolet Colorado (15\u201322), Silverado (14\u201319), Silverado (23); GMC Canyon (15\u201322), Sierra (14\u201319)","vehicles":[{"make":"Chevrolet","model":"Colorado","startYear":2015,"endYear":2022},{"make":"Chevrolet","model":"Silverado","startYear":2014,"endYear":2019},{"make":"Chevrolet","model":"Silverado","startYear":2023,"endYear":2023},{"make":"GMC","model":"Canyon","startYear":2015,"endYear":2022},{"make":"GMC","model":"Sierra","startYear":2014,"endYear":2019}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$39","priceB":"$29","oem":null,"emergency":null,"shell":null}}},{"priceA":"$109","priceB":"$49","oem":null,"pn":8453,"fccid":"M3N-32337100","keyType":"Remote Only","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Chevrolet Colorado (15\u201322), Silverado (14\u201319), Silverado (23)","vehicles":[{"make":"Chevrolet","model":"Colorado","startYear":2015,"endYear":2022},{"make":"Chevrolet","model":"Silverado","startYear":2014,"endYear":2019},{"make":"Chevrolet","model":"Silverado","startYear":2023,"endYear":2023}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":808441,"shellPrice":null,"logo":"Chevrolet logo","frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$109","priceB":"$49","oem":null,"emergency":null,"shell":null}}},{"priceA":"$104","priceB":"$49","oem":null,"pn":8960,"fccid":"M3N-32337100","keyType":"Remote Only","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"GMC Canyon (15\u201322), Sierra (14\u201319)","vehicles":[{"make":"GMC","model":"Canyon","startYear":2015,"endYear":2022},{"make":"GMC","model":"Sierra","startYear":2014,"endYear":2019}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":808441,"shellPrice":null,"logo":"GMC logo","frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$104","priceB":"$49","oem":null,"emergency":null,"shell":null}}},{"priceA":"$79","priceB":"$49","oem":null,"pn":8441,"fccid":"M3N-32337100","keyType":"Remote Only","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Chevrolet Colorado (15\u201322), Silverado (14\u201319), Silverado (23); GMC Canyon (15\u201322), Sierra (14\u201319)","vehicles":[{"make":"Chevrolet","model":"Colorado","startYear":2015,"endYear":2022},{"make":"Chevrolet","model":"Silverado","startYear":2014,"endYear":2019},{"make":"Chevrolet","model":"Silverado","startYear":2023,"endYear":2023},{"make":"GMC","model":"Canyon","startYear":2015,"endYear":2022},{"make":"GMC","model":"Sierra","startYear":2014,"endYear":2019}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":808441,"shellPrice":null,"logo":null,"frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$79","priceB":"$49","oem":null,"emergency":null,"shell":null}}},{"priceA":"$104","priceB":null,"oem":null,"pn":8492,"fccid":"M3N-32337100","keyType":"Remote Only","buttons":"6 Button: L, U, P, H, G, RS (Lock, Unlock, Panic, Hatch, Gate, Remote Start)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"GMC Yukon (15\u201320)","vehicles":[{"make":"GMC","model":"Yukon","startYear":2015,"endYear":2020}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GMC logo","frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$104","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$39","priceB":null,"oem":null,"pn":8493,"fccid":"M3N-32337100","keyType":"Remote Only","buttons":"6 Button: L, U, P, H, G, RS (Lock, Unlock, Panic, Hatch, Gate, Remote Start)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Chevrolet Suburban (15\u201320), Tahoe (15\u201320)","vehicles":[{"make":"Chevrolet","model":"Suburban","startYear":2015,"endYear":2020},{"make":"Chevrolet","model":"Tahoe","startYear":2015,"endYear":2020}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Chevrolet logo","frequency":"314.9 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$39","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$54","priceB":"$29","oem":null,"pn":8312,"fccid":"OUC60221","keyType":"Remote Only","buttons":"4 Button: L, U, P, G (Lock, Unlock, Panic, Gate)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Buick Enclave (14\u201317); Chevrolet Suburban (14), Tahoe (14), Traverse (14\u201317); GMC Acadia (14\u201317), Yukon (14)","vehicles":[{"make":"Buick","model":"Enclave","startYear":2014,"endYear":2017},{"make":"Chevrolet","model":"Suburban","startYear":2014,"endYear":2014},{"make":"Chevrolet","model":"Tahoe","startYear":2014,"endYear":2014},{"make":"Chevrolet","model":"Traverse","startYear":2014,"endYear":2017},{"make":"GMC","model":"Acadia","startYear":2014,"endYear":2017},{"make":"GMC","model":"Yukon","startYear":2014,"endYear":2014}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809725,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$54","priceB":"$29","oem":null,"emergency":null,"shell":null}}},{"priceA":"$47","priceB":"$34","oem":"$12.95","pn":8125,"fccid":"OUC60221","keyType":"Remote Only","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Buick Enclave (14\u201317); Chevrolet Traverse (14\u201317); GMC Acadia (14\u201317)","vehicles":[{"make":"Buick","model":"Enclave","startYear":2014,"endYear":2017},{"make":"Chevrolet","model":"Traverse","startYear":2014,"endYear":2017},{"make":"GMC","model":"Acadia","startYear":2014,"endYear":2017}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":808108,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$47","priceB":"$34","oem":"$12.95","emergency":null,"shell":null}}},{"priceA":"$44","priceB":null,"oem":null,"pn":8315,"fccid":"OUC60221","keyType":"Remote Only","buttons":"5 Button: L, U, P, V, RS (Lock, Unlock, Panic, Vent, Remote Start)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Chevrolet Express (08\u201324); GMC Savana (08\u201324)","vehicles":[{"make":"Chevrolet","model":"Express","startYear":2008,"endYear":2024},{"make":"GMC","model":"Savana","startYear":2008,"endYear":2024}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$44","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$44","priceB":"$34","oem":"$12.95","pn":8110,"fccid":"OUC60221","keyType":"Remote Only","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Buick Enclave (14\u201317); Chevrolet Captiva Sport (14\u201315), Suburban (14), Tahoe (14), Traverse (14\u201317); GMC Acadia (14\u201317), Sierra (13\u201314), Yukon (14)","vehicles":[{"make":"Buick","model":"Enclave","startYear":2014,"endYear":2017},{"make":"Chevrolet","model":"Captiva Sport","startYear":2014,"endYear":2015},{"make":"Chevrolet","model":"Suburban","startYear":2014,"endYear":2014},{"make":"Chevrolet","model":"Tahoe","startYear":2014,"endYear":2014},{"make":"Chevrolet","model":"Traverse","startYear":2014,"endYear":2017},{"make":"GMC","model":"Acadia","startYear":2014,"endYear":2017},{"make":"GMC","model":"Sierra","startYear":2013,"endYear":2014},{"make":"GMC","model":"Yukon","startYear":2014,"endYear":2014}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809728,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$44","priceB":"$34","oem":"$12.95","emergency":null,"shell":null}}},{"priceA":"$44","priceB":"$34","oem":"$12.95","pn":9728,"fccid":"OUC60270","keyType":"Remote Only","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Buick Enclave (08\u201313); Cadillac Escalade (07\u201308), Escalade ESV (07\u201308), Escalade EXT (07); Chevrolet Avalanche (07\u201313), Captiva Sport (12\u201313), Equinox (07\u201309), Express (08\u201324), Silverado (07\u201314), Suburban (07\u201313), Tahoe (07\u201313), Traverse (09\u201313); GMC Acadia (07\u201313), Savana (08\u201324), Sierra (07\u201312), Yukon (07\u201313); Hummer H2 (08\u201309); Pontiac Torrent (07\u201309); Saturn Outlook (07\u201310), Vue (08\u201310); Suzuki XL-7 (07\u201309)","vehicles":[{"make":"Buick","model":"Enclave","startYear":2008,"endYear":2013},{"make":"Cadillac","model":"Escalade","startYear":2007,"endYear":2008},{"make":"Cadillac","model":"Escalade ESV","startYear":2007,"endYear":2008},{"make":"Cadillac","model":"Escalade EXT","startYear":2007,"endYear":2007},{"make":"Chevrolet","model":"Avalanche","startYear":2007,"endYear":2013},{"make":"Chevrolet","model":"Captiva Sport","startYear":2012,"endYear":2013},{"make":"Chevrolet","model":"Equinox","startYear":2007,"endYear":2009},{"make":"Chevrolet","model":"Express","startYear":2008,"endYear":2024},{"make":"Chevrolet","model":"Silverado","startYear":2007,"endYear":2014},{"make":"Chevrolet","model":"Suburban","startYear":2007,"endYear":2013},{"make":"Chevrolet","model":"Tahoe","startYear":2007,"endYear":2013},{"make":"Chevrolet","model":"Traverse","startYear":2009,"endYear":2013},{"make":"GMC","model":"Acadia","startYear":2007,"endYear":2013},{"make":"GMC","model":"Savana","startYear":2008,"endYear":2024},{"make":"GMC","model":"Sierra","startYear":2007,"endYear":2012},{"make":"GMC","model":"Yukon","startYear":2007,"endYear":2013},{"make":"Hummer","model":"H2","startYear":2008,"endYear":2009},{"make":"Pontiac","model":"Torrent","startYear":2007,"endYear":2009},{"make":"Saturn","model":"Outlook","startYear":2007,"endYear":2010},{"make":"Saturn","model":"Vue","startYear":2008,"endYear":2010},{"make":"Saturn","model":"Suzuki XL-7","startYear":2007,"endYear":2009}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809728,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$44","priceB":"$34","oem":"$12.95","emergency":null,"shell":null}}},{"priceA":"$44","priceB":"$34","oem":"$12.95","pn":9731,"fccid":"OUC60270","keyType":"Remote Only","buttons":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Buick Enclave (08\u201313); Cadillac Escalade (07\u201308), Escalade ESV (07\u201308), Escalade EXT (07); Chevrolet Avalanche (07\u201313), Captiva Sport (12\u201313), Equinox (07\u201309), Express (08\u201324), Silverado (07\u201314), Suburban (07\u201313), Tahoe (07\u201313), Traverse (09\u201313); GMC Acadia (07\u201313), Savana (08\u201324), Sierra (07\u201312), Yukon (07\u201313); Hummer H2 (08\u201309); Pontiac Torrent (07\u201309); Saturn Outlook (07\u201310), Vue (08\u201310); Suzuki XL-7 (07\u201309)","vehicles":[{"make":"Buick","model":"Enclave","startYear":2008,"endYear":2013},{"make":"Cadillac","model":"Escalade","startYear":2007,"endYear":2008},{"make":"Cadillac","model":"Escalade ESV","startYear":2007,"endYear":2008},{"make":"Cadillac","model":"Escalade EXT","startYear":2007,"endYear":2007},{"make":"Chevrolet","model":"Avalanche","startYear":2007,"endYear":2013},{"make":"Chevrolet","model":"Captiva Sport","startYear":2012,"endYear":2013},{"make":"Chevrolet","model":"Equinox","startYear":2007,"endYear":2009},{"make":"Chevrolet","model":"Express","startYear":2008,"endYear":2024},{"make":"Chevrolet","model":"Silverado","startYear":2007,"endYear":2014},{"make":"Chevrolet","model":"Suburban","startYear":2007,"endYear":2013},{"make":"Chevrolet","model":"Tahoe","startYear":2007,"endYear":2013},{"make":"Chevrolet","model":"Traverse","startYear":2009,"endYear":2013},{"make":"GMC","model":"Acadia","startYear":2007,"endYear":2013},{"make":"GMC","model":"Savana","startYear":2008,"endYear":2024},{"make":"GMC","model":"Sierra","startYear":2007,"endYear":2012},{"make":"GMC","model":"Yukon","startYear":2007,"endYear":2013},{"make":"Hummer","model":"H2","startYear":2008,"endYear":2009},{"make":"Pontiac","model":"Torrent","startYear":2007,"endYear":2009},{"make":"Saturn","model":"Outlook","startYear":2007,"endYear":2010},{"make":"Saturn","model":"Vue","startYear":2008,"endYear":2010},{"make":"Saturn","model":"Suzuki XL-7","startYear":2007,"endYear":2009}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809731,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$44","priceB":"$34","oem":"$12.95","emergency":null,"shell":null}}},{"priceA":"$43.49","priceB":"$29","oem":"$12.95","pn":9583,"fccid":"OUC60270","keyType":"Remote Only","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Buick Lucerne (06\u201311); Cadillac DTS (06\u201307); Chevrolet Impala (06\u201316), Monte Carlo (06\u201307)","vehicles":[{"make":"Buick","model":"Lucerne","startYear":2006,"endYear":2011},{"make":"Cadillac","model":"DTS","startYear":2006,"endYear":2007},{"make":"Chevrolet","model":"Impala","startYear":2006,"endYear":2016},{"make":"Chevrolet","model":"Monte Carlo","startYear":2006,"endYear":2007}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":808108,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$43.49","priceB":"$29","oem":"$12.95","emergency":null,"shell":null}}},{"priceA":"$39","priceB":"$29","oem":"$12.95","pn":9574,"fccid":"OUC60270","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Buick Lucerne (06\u201311); Cadillac DTS (06\u201307); Chevrolet Impala (06\u201316), Monte Carlo (06\u201307)","vehicles":[{"make":"Buick","model":"Lucerne","startYear":2006,"endYear":2011},{"make":"Cadillac","model":"DTS","startYear":2006,"endYear":2007},{"make":"Chevrolet","model":"Impala","startYear":2006,"endYear":2016},{"make":"Chevrolet","model":"Monte Carlo","startYear":2006,"endYear":2007}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809574,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$39","priceB":"$29","oem":"$12.95","emergency":null,"shell":null}}},{"vehiclesRaw":"Buick Allure (05\u201309), LaCrosse (07\u201309); Chevrolet Cobalt (07\u201310), HHR (08\u201311), Malibu (06\u201312), Malibu Maxx (06\u201307); Pontiac G5 (07\u201310), G6 (06\u201310), Grand Prix (07\u201308), Solstice (07\u201309); Saturn Aura (07\u201309), Sky (07\u201310)","logo":null,"priceB":"$29","emergencyPN":null,"distributorPrices":{"KeylessRide":{"priceA":"$39","priceB":"$29","oem":null,"emergency":null,"shell":null}},"emergencyPrice":null,"frequency":"315 MHz","fccid":"KOBGT04A","stockQty":0,"keyway":null,"notes":null,"keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","pn":9622,"battery":"2032 x1","inStock":"No","shellPN":809357,"originalMake":"GM","priceA":"$39","shellPrice":null,"vehicles":[{"startYear":2005,"make":"Buick","endYear":2009,"model":"Allure"},{"startYear":2005,"model":"LaCrosse","endYear":2009,"make":"Buick"},{"startYear":2007,"endYear":2010,"make":"Chevrolet","model":"Cobalt"},{"startYear":2008,"model":"HHR","endYear":2011,"make":"Chevrolet"},{"model":"Malibu","startYear":2006,"endYear":2012,"make":"Chevrolet"},{"endYear":2007,"startYear":2006,"make":"Chevrolet","model":"Malibu Maxx"},{"startYear":2007,"model":"G5","endYear":2010,"make":"Pontiac"},{"model":"G6","startYear":2006,"make":"Pontiac","endYear":2010},{"make":"Pontiac","model":"Grand Prix","endYear":2008,"startYear":2007},{"startYear":2007,"make":"Pontiac","model":"Solstice","endYear":2009},{"make":"Saturn","model":"Aura","endYear":2009,"startYear":2007},{"model":"Sky","startYear":2007,"make":"Saturn","endYear":2010}],"oem":null,"chip":null},{"vehiclesRaw":"Buick Allure (05\u201309), LaCrosse (05\u201309); Chevrolet Cobalt (07\u201310), HHR (08\u201311), Malibu (04\u201312), Malibu Maxx (04\u201307); Pontiac G5 (07\u201310), G6 (05\u201310), Grand Prix (05\u201308); Saturn Aura (07\u201309), Sky (07\u201310)","logo":null,"priceB":"$34","emergencyPN":null,"distributorPrices":{"KeylessRide":{"priceA":"$54","priceB":"$34","oem":null,"emergency":null,"shell":null}},"emergencyPrice":null,"frequency":"315 MHz","fccid":"KOBGT04A","stockQty":0,"keyway":null,"notes":null,"keyType":"Remote Only","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","pn":9375,"battery":"2032 x1","inStock":"No","shellPN":809375,"originalMake":"GM","priceA":"$54","shellPrice":null,"vehicles":[{"make":"Buick","model":"Allure","startYear":2005,"endYear":2009},{"make":"Buick","model":"LaCrosse","startYear":2005,"endYear":2009},{"make":"Chevrolet","model":"Cobalt","startYear":2007,"endYear":2010},{"make":"Chevrolet","model":"HHR","startYear":2008,"endYear":2011},{"make":"Chevrolet","model":"Malibu","startYear":2004,"endYear":2012},{"make":"Chevrolet","model":"Malibu Maxx","startYear":2004,"endYear":2007},{"make":"Pontiac","model":"G5","startYear":2007,"endYear":2010},{"make":"Pontiac","model":"G6","startYear":2005,"endYear":2010},{"make":"Pontiac","model":"Grand Prix","startYear":2005,"endYear":2008},{"make":"Saturn","model":"Aura","startYear":2007,"endYear":2009},{"make":"Saturn","model":"Sky","startYear":2007,"endYear":2010}],"oem":null,"chip":null},{"vehiclesRaw":"Buick Rainier (04\u201305); Chevrolet TrailBlazer (02\u201305), TrailBlazer EXT (02\u201305); GMC Envoy (02\u201304), Envoy XL (02\u201304); Isuzu Ascender (03\u201305); Oldsmobile Bravada (02\u201304); Saab 9-7X (05\u201308)","logo":null,"priceB":"$18","emergencyPN":null,"distributorPrices":{"KeylessRide":{"priceA":"$26","priceB":"$18","oem":null,"emergency":null,"shell":null}},"emergencyPrice":null,"frequency":"315 MHz","fccid":"MYT3X6898B","stockQty":0,"keyway":null,"notes":null,"keyType":"Remote Only","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","pn":9131,"battery":"2032 x1","inStock":"No","shellPN":null,"originalMake":"GM","priceA":"$26","shellPrice":null,"vehicles":[{"make":"Buick","model":"Rainier","startYear":2004,"endYear":2005},{"make":"Chevrolet","model":"TrailBlazer","startYear":2002,"endYear":2005},{"make":"Chevrolet","model":"TrailBlazer EXT","startYear":2002,"endYear":2005},{"make":"GMC","model":"Envoy","startYear":2002,"endYear":2004},{"make":"GMC","model":"Envoy XL","startYear":2002,"endYear":2004},{"make":"GMC","model":"Isuzu Ascender","startYear":2003,"endYear":2005},{"make":"Oldsmobile","model":"Bravada","startYear":2002,"endYear":2004},{"make":"Oldsmobile","model":"Saab 9-7X","startYear":2005,"endYear":2008}],"oem":"Memory #1","chip":null},{"vehiclesRaw":"Buick Rainier (04\u201305); Chevrolet TrailBlazer (02\u201305), TrailBlazer EXT (02\u201305); GMC Envoy (02\u201304), Envoy XL (02\u201304); Isuzu Ascender (03\u201305); Oldsmobile Bravada (02\u201304)","logo":null,"priceB":"$18","emergencyPN":null,"distributorPrices":{"KeylessRide":{"priceA":"$26","priceB":"$18","oem":null,"emergency":null,"shell":null}},"emergencyPrice":null,"frequency":"315 MHz","fccid":"MYT3X6898B","stockQty":0,"keyway":null,"notes":null,"keyType":"Remote Only","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","pn":9130,"battery":"2032 x1","inStock":"No","shellPN":null,"originalMake":"GM","priceA":"$26","shellPrice":null,"vehicles":[{"make":"Buick","model":"Rainier","startYear":2004,"endYear":2005},{"make":"Chevrolet","model":"TrailBlazer","startYear":2002,"endYear":2005},{"make":"Chevrolet","model":"TrailBlazer EXT","startYear":2002,"endYear":2005},{"make":"GMC","model":"Envoy","startYear":2002,"endYear":2004},{"make":"GMC","model":"Envoy XL","startYear":2002,"endYear":2004},{"make":"GMC","model":"Isuzu Ascender","startYear":2003,"endYear":2005},{"make":"Oldsmobile","model":"Bravada","startYear":2002,"endYear":2004}],"oem":"Memory #2","chip":null},{"priceA":"$58","priceB":"$29","oem":null,"pn":6050,"fccid":"L2C0005T","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Chevrolet Cavalier (00\u201305), Malibu (01); Oldsmobile Alero (01); Pontiac Grand Am (01), Sunfire (00\u201305); Saturn S Series (00\u201302), Vue (02)","vehicles":[{"make":"Chevrolet","model":"Cavalier","startYear":2000,"endYear":2005},{"make":"Chevrolet","model":"Malibu","startYear":2001,"endYear":2001},{"make":"Oldsmobile","model":"Alero","startYear":2001,"endYear":2001},{"make":"Pontiac","model":"Grand Am","startYear":2001,"endYear":2001},{"make":"Pontiac","model":"Sunfire","startYear":2000,"endYear":2005},{"make":"Saturn","model":"S Series","startYear":2000,"endYear":2002},{"make":"Saturn","model":"Vue","startYear":2002,"endYear":2002}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":806050,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$58","priceB":"$29","oem":null,"emergency":null,"shell":null}}},{"priceA":"$54","priceB":"$17.95","oem":null,"pn":6071,"fccid":"L2C0007T","keyType":"Remote Only","buttons":"2 Button: L, U (Lock, Unlock)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Chevrolet Venture (01\u201305); Oldsmobile Silhouette (01\u201304); Pontiac Montana (01\u201305)","vehicles":[{"make":"Chevrolet","model":"Venture","startYear":2001,"endYear":2005},{"make":"Oldsmobile","model":"Silhouette","startYear":2001,"endYear":2004},{"make":"Pontiac","model":"Montana","startYear":2001,"endYear":2005}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$54","priceB":"$17.95","oem":null,"emergency":null,"shell":null}}},{"priceA":"$39","priceB":"$24.95","oem":null,"pn":6072,"fccid":"L2C0007T","keyType":"Remote Only","buttons":"3 Button: L, U, PSD (Lock, Unlock, Power Sliding Door)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Chevrolet Venture (01\u201305); Oldsmobile Silhouette (01\u201304); Pontiac Montana (01\u201305)","vehicles":[{"make":"Chevrolet","model":"Venture","startYear":2001,"endYear":2005},{"make":"Oldsmobile","model":"Silhouette","startYear":2001,"endYear":2004},{"make":"Pontiac","model":"Montana","startYear":2001,"endYear":2005}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$39","priceB":"$24.95","oem":null,"emergency":null,"shell":null}}},{"priceA":"$39","priceB":"$14.95","oem":null,"pn":6070,"fccid":"L2C0007T","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Buick Century (01\u201305), Regal (01\u201304); Oldsmobile Intrigue (01\u201302); Pontiac Grand Prix (01\u201303)","vehicles":[{"make":"Buick","model":"Century","startYear":2001,"endYear":2005},{"make":"Buick","model":"Regal","startYear":2001,"endYear":2004},{"make":"Oldsmobile","model":"Intrigue","startYear":2001,"endYear":2002},{"make":"Pontiac","model":"Grand Prix","startYear":2001,"endYear":2003}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":806070,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$39","priceB":"$14.95","oem":null,"emergency":null,"shell":null}}},{"priceA":"$58","priceB":"$19.95","oem":null,"pn":5150,"fccid":"ABO0204T","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Buick Century (97\u201300), Regal (97\u201300); Oldsmobile Intrigue (98\u201300); Pontiac Grand Prix (97\u201300)","vehicles":[{"make":"Buick","model":"Century","startYear":1997,"endYear":2000},{"make":"Buick","model":"Regal","startYear":1997,"endYear":2000},{"make":"Oldsmobile","model":"Intrigue","startYear":1998,"endYear":2000},{"make":"Pontiac","model":"Grand Prix","startYear":1997,"endYear":2000}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":805150,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$58","priceB":"$19.95","oem":null,"emergency":null,"shell":null}}},{"priceA":"$68","priceB":null,"oem":null,"pn":9354,"fccid":"N5F736566-A","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Saturn Ion (03\u201307)","vehicles":[{"make":"Saturn","model":"Ion","startYear":2003,"endYear":2007}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":806061,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2016 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$68","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$59","priceB":"$21","oem":null,"pn":6100,"fccid":"LHJ009","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Saturn L Series (00\u201303)","vehicles":[{"make":"Saturn","model":"L Series","startYear":2000,"endYear":2003}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"314.9-315.1 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$59","priceB":"$21","oem":null,"emergency":null,"shell":null}}},{"priceA":"$84","priceB":"$14.95","oem":null,"pn":9269,"fccid":"LHJ011","keyType":"Remote Only","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Cadillac Escalade (03\u201306), Escalade EXT (03\u201306); Chevrolet Avalanche (03\u201306), Equinox (05\u201306), SSR (03), Silverado (03\u201307), Suburban (03\u201306), Tahoe (03\u201306); GMC Sierra (03\u201307), Yukon (03\u201306); Hummer H1 (03), H2 (03\u201307); Pontiac Torrent (06); Saturn Vue (04\u201307)","vehicles":[{"make":"Cadillac","model":"Escalade","startYear":2003,"endYear":2006},{"make":"Cadillac","model":"Escalade EXT","startYear":2003,"endYear":2006},{"make":"Chevrolet","model":"Avalanche","startYear":2003,"endYear":2006},{"make":"Chevrolet","model":"Equinox","startYear":2005,"endYear":2006},{"make":"Chevrolet","model":"SSR","startYear":2003,"endYear":2003},{"make":"Chevrolet","model":"Silverado","startYear":2003,"endYear":2007},{"make":"Chevrolet","model":"Suburban","startYear":2003,"endYear":2006},{"make":"Chevrolet","model":"Tahoe","startYear":2003,"endYear":2006},{"make":"GMC","model":"Sierra","startYear":2003,"endYear":2007},{"make":"GMC","model":"Yukon","startYear":2003,"endYear":2006},{"make":"Hummer","model":"H1","startYear":2003,"endYear":2003},{"make":"Hummer","model":"H2","startYear":2003,"endYear":2007},{"make":"Pontiac","model":"Torrent","startYear":2006,"endYear":2006},{"make":"Saturn","model":"Vue","startYear":2004,"endYear":2007}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809189,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$84","priceB":"$14.95","oem":null,"emergency":null,"shell":null}}},{"priceA":"$84","priceB":"$29","oem":null,"pn":5892,"fccid":"KOBLEAR1XT","keyType":"Remote Only","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Cadillac Escalade (02); Chevrolet Avalanche (02), S10 (01\u201304), Silverado (01\u201302), Suburban (01\u201302), Tahoe (01\u201302); GMC Sierra (01\u201302), Sonoma (01\u201304), Yukon (01\u201302)","vehicles":[{"make":"Cadillac","model":"Escalade","startYear":2002,"endYear":2002},{"make":"Chevrolet","model":"Avalanche","startYear":2002,"endYear":2002},{"make":"Chevrolet","model":"S10","startYear":2001,"endYear":2004},{"make":"Chevrolet","model":"Silverado","startYear":2001,"endYear":2002},{"make":"Chevrolet","model":"Suburban","startYear":2001,"endYear":2002},{"make":"Chevrolet","model":"Tahoe","startYear":2001,"endYear":2002},{"make":"GMC","model":"Sierra","startYear":2001,"endYear":2002},{"make":"GMC","model":"Sonoma","startYear":2001,"endYear":2004},{"make":"GMC","model":"Yukon","startYear":2001,"endYear":2002}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":805892,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$84","priceB":"$29","oem":null,"emergency":null,"shell":null}}},{"priceA":"$63","priceB":null,"oem":null,"pn":5900,"fccid":"KOBUT1BT","keyType":"Remote Only","buttons":"4 Button: L, U, P, RS2X (Lock, Unlock, Panic, Remote Start 2X)","inStock":"No","chip":null,"originalMake":"GM","vehiclesRaw":"Chevrolet Astro (00\u201301), Blazer (98\u201301); GMC Envoy (98\u201300), Jimmy (98\u201301), Safari (00\u201301); Oldsmobile Bravada (98\u201301)","vehicles":[{"make":"Chevrolet","model":"Astro","startYear":2000,"endYear":2001},{"make":"Chevrolet","model":"Blazer","startYear":1998,"endYear":2001},{"make":"GMC","model":"Envoy","startYear":1998,"endYear":2000},{"make":"GMC","model":"Jimmy","startYear":1998,"endYear":2001},{"make":"GMC","model":"Safari","startYear":2000,"endYear":2001},{"make":"Oldsmobile","model":"Bravada","startYear":1998,"endYear":2001}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":805900,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$63","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$59","priceB":"$9.95","oem":null,"pn":8107,"fccid":"VQQRK960NAT","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"No","originalMake":"GM","vehiclesRaw":"Chevrolet Aveo (09\u201311)","vehicles":[{"make":"Chevrolet","model":"Aveo","startYear":2009,"endYear":2011}],"emergencyPN":null,"keyway":"DW04RAP","emergencyPrice":null,"shellPN":808107,"shellPrice":null,"logo":"Chevrolet logo","frequency":"315 MHz","battery":"1620 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$59","priceB":"$9.95","oem":null,"emergency":null,"shell":null}}},{"priceA":"$52","priceB":"$12.95","oem":null,"pn":8092,"fccid":"VQQRK960NAT","keyType":"Remote Head Key","buttons":"3 Button: L, U, T (Lock, Unlock, Trunk)","inStock":"Yes","chip":"No","originalMake":"GM","vehiclesRaw":"Chevrolet Aveo (10\u201311)","vehicles":[{"make":"Chevrolet","model":"Aveo","startYear":2010,"endYear":2011}],"emergencyPN":null,"keyway":"DW04RAP","emergencyPrice":null,"shellPN":808107,"shellPrice":null,"logo":"Chevrolet logo","frequency":"315 MHz","battery":"1620 x1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$52","priceB":"$12.95","oem":null,"emergency":null,"shell":null}}},{"priceA":25,"priceB":null,"oem":null,"pn":45582,"fccid":"TPX3","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"TPX3","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B106","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":null,"battery":null,"notes":"Clonable chip","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":25,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$10.95","priceB":null,"oem":null,"pn":"B115","fccid":"B115","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"M 48 Magic II","originalMake":"GM","vehiclesRaw":"Cadillac SRX (04\u201307)","vehicles":[{"make":"Cadillac","model":"SRX","startYear":2004,"endYear":2007}],"emergencyPN":null,"keyway":"B106","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"PK3+","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$10.95","priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["48045"]},{"priceA":5.99,"priceB":null,"oem":null,"pn":"PT04","fccid":"PT04","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"M 13","originalMake":"GM","vehiclesRaw":null,"vehicles":[{"make":"Buick","model":"Allure","startYear":2005,"endYear":2009},{"make":"Buick","model":"LaCrosse","startYear":2005,"endYear":2009},{"make":"Chevrolet","model":"Uplander","startYear":2005,"endYear":2006},{"make":"Pontiac","model":"Grand Prix","startYear":2004,"endYear":2008},{"make":"Pontiac","model":"Saab 9-7X","startYear":2005,"endYear":2008},{"make":"Saturn","model":"Relay","startYear":2005,"endYear":2007},{"make":"Buick","model":"Terraza","startYear":2005,"endYear":2006}],"emergencyPN":null,"keyway":"B106","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Pontiac logo","frequency":null,"battery":null,"notes":"PK3","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":5.99,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["42829","40230","42828","42824","48030"]},{"vehiclesRaw":"Buick\n  LeSabre (00-05)\n  Rendezvous (02-07)\nCadillac\n  DeVille (00-05)\n  Seville (98-04)\nOldsmobile\n  Aurora (01-03)\nPontiac\n  Aztek (01-05)\n  Bonneville (00-05)\n  Montana SV6 (07-09)","logo":"GM logo","priceB":null,"emergencyPN":null,"distributorPrices":{"KeylessRide":{"priceA":14.49,"priceB":null,"oem":null,"emergency":null,"shell":null}},"emergencyPrice":null,"frequency":null,"fccid":"B99","stockQty":0,"keyway":"B86","notes":"PK3","keyType":"Chip Key","buttons":null,"pn":"B99","battery":null,"inStock":"Yes","shellPN":null,"originalMake":"GM","priceA":14.49,"shellPrice":null,"vehicles":[{"make":"Buick","model":"LeSabre","startYear":2000,"endYear":2005},{"make":"Buick","model":"Rendezvous","startYear":2002,"endYear":2007},{"make":"Cadillac","model":"DeVille","startYear":2000,"endYear":2005},{"make":"Cadillac","model":"Seville","startYear":1998,"endYear":2004},{"make":"Oldsmobile","model":"Aurora","startYear":2001,"endYear":2003},{"make":"Pontiac","model":"Aztek","startYear":2001,"endYear":2005},{"make":"Pontiac","model":"Bonneville","startYear":2000,"endYear":2005},{"make":"Pontiac","model":"Montana SV6","startYear":2007,"endYear":2009},{"make":"Buick","model":"Terraza","startYear":2006,"endYear":2007}],"oem":null,"chip":"M 13","mergedPNs":["40179","40181","40182","40183","48035","42975","42135"]},{"priceA":6.99,"priceB":null,"oem":null,"pn":"B97","fccid":"B97","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"T5","originalMake":"GM","vehiclesRaw":null,"vehicles":[{"endYear":2005,"codeSeries":[{"years":"1997-2002","series":"1-1988"},{"years":"2002-2005","series":"H0001-H3988"}],"model":"Park Avenue","make":"Buick","startYear":1997},{"model":"Terraza","codeSeries":[{"series":"G0000-G3631","years":"2005-2006"}],"make":"Buick","endYear":2006,"startYear":2005},{"codeSeries":[{"years":"2005-2006","series":"S000A-S999K"}],"make":"Chevrolet","startYear":2005,"endYear":2006,"model":"Uplander"},{"codeSeries":[{"years":"1999-1999","series":"AA00-7T51"},{"series":"S000A-S999K","years":"2000-2005"}],"startYear":1999,"model":"Venture","make":"Chevrolet","endYear":2005},{"make":"Oldsmobile","endYear":2004,"startYear":1999,"model":"Silhouette","codeSeries":[{"years":"1999-2004","series":"S000A-S999K"}]},{"startYear":1999,"endYear":2004,"codeSeries":[{"years":"1999-2004","series":"S000A-S999K"}],"model":"Montana","make":"Pontiac"},{"codeSeries":[{"series":"S000A-S999K","years":"2005-2007"}],"startYear":2005,"make":"Saturn","endYear":2007,"model":"Relay"},{"startYear":1999,"model":"Transport","endYear":1999,"codeSeries":[{"series":"AA00-7T51","years":"1999-1999"}],"make":"Pontiac"}],"emergencyPN":null,"keyway":"B86","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Keyline logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.99,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["48040","40170","40174"]},{"priceA":37,"priceB":null,"oem":null,"pn":"B100","fccid":"B100","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"M 48 Magic II","originalMake":"GM","vehiclesRaw":"2008 - 2012 Chevrolet Colorado\n2008 - 2012 GMC Canyon\n2008 - 2009 Hummer H3\n2019 - 2020 Subaru Ascent\n2014 - 2019 Subaru Forester\n2012 - 2019 Subaru Impreza\n2015 - 2019 Subaru Legacy\n2015 - 2019 Subaru Outback\n2015 - 2018 Subaru STI\n2015 - 2019 Subaru WRX\n2013 - 2019 Subaru XV Crosstrek","vehicles":[{"codeSeries":[{"series":"70000-75928","years":"2004-2012"}],"startYear":2004,"make":"Chevrolet","model":"Colorado","endYear":2012},{"model":"Canyon","make":"GMC","startYear":2004,"codeSeries":[{"years":"2004-2012","series":"70000-75928"}],"endYear":2012}],"emergencyPN":null,"keyway":"B110","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"3+ stamp","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":37,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":[]},{"priceA":6.75,"priceB":null,"oem":null,"pn":"B103","fccid":"B103","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"T5","originalMake":"GM","vehiclesRaw":null,"vehicles":[{"make":"Pontiac","model":"Grand Prix","startYear":2000,"endYear":2003}],"emergencyPN":null,"keyway":"B92","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":"Tiny key","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.75,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["40175"]},{"priceA":2.99,"priceB":null,"oem":null,"pn":"B111","fccid":"B111","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":null,"vehicles":[{"endYear":2017,"codeSeries":[{"years":"2007-2017","series":"G0000-G3631"}],"make":"Buick","model":"Enclave","startYear":2007},{"make":"Buick","startYear":2006,"codeSeries":[{"years":"2006-2011","series":"G0000-G3631"}],"model":"Lucerne","endYear":2011},{"startYear":2008,"make":"Cadillac","endYear":2013,"model":"CTS","codeSeries":[{"years":"2008-2013","series":"G0000-G3631"}]},{"model":"CTS-V","endYear":2013,"startYear":2008,"make":"Cadillac","codeSeries":[{"series":"G0000-G3631","years":"2008-2013"}]},{"model":"DTS","codeSeries":[{"series":"G0000-G3631","years":"2006-2011"}],"make":"Cadillac","startYear":2006,"endYear":2011},{"endYear":2014,"model":"Escalade","startYear":2007,"make":"Cadillac","codeSeries":[{"years":"2007-2014","series":"G0000-G3631"}]},{"model":"Escalade ESV","endYear":2009,"startYear":2007,"codeSeries":[{"years":"2007-2009","series":"G0000-G3631"}],"make":"Cadillac"},{"codeSeries":[{"series":"G0000-G3631","years":"2007-2014"}],"startYear":2007,"model":"SRX","endYear":2014,"make":"Cadillac"},{"endYear":2011,"codeSeries":[{"years":"2004-2011","series":"G0000-G3631"}],"model":"STS","make":"Cadillac","startYear":2004},{"startYear":2007,"endYear":2013,"model":"Avalanche","codeSeries":[{"years":"2007-2013","series":"G0000-G3631"}],"make":"Chevrolet"},{"make":"Chevrolet","endYear":2010,"startYear":2006,"model":"Cobalt","codeSeries":[{"series":"G0000-G3631","years":"2006-2010"}]},{"make":"Chevrolet","codeSeries":[{"years":"2007-2009","series":"G0000-G3631"}],"endYear":2009,"model":"Equinox","startYear":2007},{"make":"Chevrolet","codeSeries":[{"years":"2008-2014","series":"G0000-G3631"}],"startYear":2008,"model":"Express","endYear":2014},{"codeSeries":[{"years":"2006-2011","series":"G0000-G3631"}],"make":"Chevrolet","model":"HHR","startYear":2006,"endYear":2011},{"endYear":2013,"model":"Impala","startYear":2006,"codeSeries":[{"years":"2006-2013","series":"G0000-G3631"}],"make":"Chevrolet"},{"model":"Malibu","endYear":2013,"make":"Chevrolet","codeSeries":[{"series":"G0000-G3631","years":"2004-2013"}],"startYear":2004},{"make":"Chevrolet","endYear":2013,"model":"Malibu Maxx","startYear":2004},{"model":"Monte Carlo","make":"Chevrolet","startYear":2006,"endYear":2007,"codeSeries":[{"years":"2006-2007","series":"G0000-G3631"}]},{"make":"Chevrolet","model":"Silverado","codeSeries":[{"series":"G0000-G3631","years":"2007-2014"}],"endYear":2014,"startYear":2007},{"codeSeries":[{"years":"2007-2014","series":"G0000-G3631"}],"endYear":2014,"startYear":2007,"make":"Chevrolet","model":"Suburban"},{"codeSeries":[{"series":"G0000-G3631","years":"2007-2014"}],"model":"Tahoe","make":"Chevrolet","endYear":2014,"startYear":2007},{"codeSeries":[{"series":"G0000-G3631","years":"2009-2017"}],"startYear":2009,"make":"Chevrolet","endYear":2017,"model":"Traverse"},{"model":"Acadia","endYear":2017,"make":"GMC","codeSeries":[{"series":"G0000-G3631","years":"2007-2017"}],"startYear":2007},{"endYear":2014,"model":"Savana","codeSeries":[{"years":"2008-2014","series":"G0000-G3631"}],"startYear":2008,"make":"GMC"},{"make":"GMC","model":"Sierra","startYear":2007,"codeSeries":[{"series":"G0000-G3631","years":"2007-2013"}],"endYear":2013},{"endYear":2014,"startYear":2007,"make":"GMC","model":"Yukon","codeSeries":[{"years":"2007-2014","series":"G0000-G3631"}]},{"codeSeries":[{"years":"2008-2009","series":"S000A-S999K"}],"make":"Hummer","model":"H2","startYear":2008,"endYear":2009},{"model":"G5","make":"Pontiac","endYear":2010,"codeSeries":[{"series":"G0000-G3631","years":"2007-2010"}],"startYear":2007},{"startYear":2005,"model":"G6","codeSeries":[{"years":"2007-2010","series":"G0000-G3631"}],"make":"Pontiac","endYear":2010},{"make":"Pontiac","model":"Solstice","startYear":2006,"codeSeries":[{"years":"2006-2009","series":"G0000-G3631"}],"endYear":2009},{"make":"Pontiac","startYear":2007,"endYear":2009,"model":"Torrent","codeSeries":[{"series":"G0000-G3631","years":"2007-2009"}]},{"make":"Saturn","codeSeries":[{"series":"G0000-G3631","years":"2007-2010"}],"model":"Aura","endYear":2010,"startYear":2007},{"model":"Outlook","make":"Saturn","endYear":2010,"startYear":2007,"codeSeries":[{"years":"2007-2010","series":"G0000-G3631"}]},{"startYear":2007,"model":"Sky","make":"Saturn","endYear":2010,"codeSeries":[{"years":"2007-2010","series":"G0000-G3631"}]},{"codeSeries":[{"series":"G0000-G3631","years":"2007-2009"}],"model":"XL-7","endYear":2009,"startYear":2007,"make":"Suzuki"}],"emergencyPN":null,"keyway":"B106","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Ilco logo","frequency":null,"battery":null,"notes":"Circle+","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":2.99,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["42763","42764","42769","42793","42759","48025","42948","42949","42953"]},{"priceA":"$12.95","priceB":null,"oem":null,"pn":"B112","fccid":"B112","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"M 48 Magic II","originalMake":"GM","vehiclesRaw":"Cadillac CTS (03\u201307), CTS-V (04\u201307)","vehicles":[{"make":"Cadillac","model":"CTS","startYear":2003,"endYear":2007},{"make":"Cadillac","model":"CTS-V","startYear":2004,"endYear":2007}],"emergencyPN":null,"keyway":"B96/B102","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"PK3+","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$12.95","priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":[]},{"priceA":"$27.95","priceB":null,"oem":null,"pn":"B114","fccid":"B114","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Chevrolet Aveo (09\u201311)","vehicles":[{"make":"Chevrolet","model":"Aveo","startYear":2009,"endYear":2011}],"emergencyPN":null,"keyway":"DW04RAP","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Chevrolet logo","frequency":null,"battery":null,"notes":"Circle+","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$27.95","priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":[]},{"vehiclesRaw":"Chevrolet Spark (13\u201316)","logo":"Chevrolet logo","priceB":null,"emergencyPN":null,"distributorPrices":{"KeylessRide":{"priceA":"$29","priceB":null,"oem":null,"emergency":null,"shell":null}},"emergencyPrice":null,"frequency":null,"fccid":"B114R","stockQty":0,"keyway":"DW04/DW05","notes":"Circle+","keyType":"Chip Key","buttons":null,"pn":"B114R","battery":null,"inStock":"Yes","shellPN":null,"originalMake":"GM","priceA":"$29","shellPrice":null,"vehicles":[{"make":"Chevrolet","model":"Spark","startYear":2013,"endYear":2016},{"make":"Chevrolet","model":"Captiva Sport","startYear":2012,"endYear":2015},{"make":"Saturn","model":"Vue","startYear":2008,"endYear":2010}],"oem":null,"chip":"PH 46","mergedPNs":["48175","42137","42138"]},{"priceA":59,"priceB":null,"oem":null,"pn":"B119","fccid":"B119","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":"Chevrolet\n  Spark (18)","vehicles":[{"make":"Chevrolet","model":"Spark","startYear":2018,"endYear":2018},{"make":"Chevrolet","model":"Camaro","startYear":2010,"endYear":2014},{"make":"Chevrolet","model":"Colorado","startYear":2015,"endYear":2022},{"make":"Chevrolet","model":"Sonic","startYear":2012,"endYear":2020},{"make":"Chevrolet","model":"Spark","startYear":2019,"endYear":2022},{"make":"GMC","model":"Sierra","startYear":2021,"endYear":2023},{"startYear":2016,"model":"Cascada","endYear":2019,"make":"Buick"},{"endYear":2022,"make":"Buick","model":"Encore","startYear":2014},{"startYear":2010,"endYear":2016,"model":"LaCrosse","make":"Buick"},{"make":"Buick","endYear":2017,"startYear":2011,"model":"Regal"},{"make":"Buick","model":"Verano","endYear":2017,"startYear":2012},{"endYear":2016,"make":"Chevrolet","startYear":2010,"model":"Camaro"},{"make":"Chevrolet","endYear":2017,"model":"Caprice","startYear":2014},{"model":"Cruze","make":"Chevrolet","endYear":2019,"startYear":2011},{"endYear":2017,"startYear":2010,"model":"Equinox","make":"Chevrolet"},{"model":"Impala","endYear":2018,"startYear":2014,"make":"Chevrolet"},{"endYear":2016,"startYear":2013,"model":"Malibu","make":"Chevrolet"},{"model":"Silverado","endYear":2023,"make":"Chevrolet","startYear":2014},{"endYear":2022,"make":"Chevrolet","model":"Spark","startYear":2016},{"make":"Chevrolet","endYear":2020,"model":"Suburban","startYear":2015},{"make":"Chevrolet","startYear":2015,"model":"Tahoe","endYear":2020},{"endYear":2022,"startYear":2015,"model":"Trax","make":"Chevrolet"},{"model":"Canyon","make":"GMC","startYear":2015,"endYear":2022},{"model":"Sierra","make":"GMC","endYear":2023,"startYear":2014},{"make":"GMC","model":"Terrain","endYear":2018,"startYear":2010},{"startYear":2015,"model":"Yukon","make":"GMC","endYear":2020},{"make":"GMC","model":"Sierra","startYear":2014,"endYear":2020},{"make":"GMC","model":"Yukon","startYear":2015,"endYear":2019}],"emergencyPN":null,"keyway":"HU100","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Chevrolet logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":59,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["40319","40322","47033","47034","40308"]},{"priceA":13.49,"priceB":null,"oem":null,"pn":"B120","fccid":"B120","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"PH 46","originalMake":"GM","vehiclesRaw":null,"vehicles":[{"make":"Chevrolet","model":"Express","startYear":2015,"endYear":2024},{"make":"GMC","model":"Savana","startYear":2015,"endYear":2024}],"emergencyPN":null,"keyway":"HU100","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"Circle+","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":13.49,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["40316","40147","40329"]},{"priceA":7.75,"priceB":null,"oem":null,"pn":"DWO4","fccid":"DWO4","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"T5","originalMake":"GM","vehiclesRaw":null,"vehicles":[{"make":"Chevrolet","model":"Aveo","startYear":2004,"endYear":2011}],"emergencyPN":null,"keyway":"DW04RAP","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":7.75,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["48202","42958"]},{"priceA":7.75,"priceB":null,"oem":null,"pn":"DWO5R","fccid":"DWO5R","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"T5","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"DW05","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":7.75,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":[]},{"priceA":7.75,"priceB":null,"oem":null,"pn":"DWO5","fccid":"DWO5","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"T5","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"DW05","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":7.75,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":[]},{"priceA":7.75,"priceB":null,"oem":null,"pn":48212,"fccid":"HU46","keyType":"Chip Key","buttons":null,"inStock":"Yes","chip":"T5","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B61","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":"Removable chip sleeve","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":7.75,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.95,"priceB":null,"oem":null,"pn":40011,"fccid":null,"keyType":"VATS Single-Sided","buttons":null,"inStock":"Yes","chip":"VATS #1","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B62","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #1 - OHMS low 0.386 , nominal 0.402 , high 0.438","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.95,"priceB":null,"oem":null,"pn":40012,"fccid":null,"keyType":"VATS Single-Sided","buttons":null,"inStock":"Yes","chip":"VATS #2","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B62","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #2 - OHMS low 0.502 , nominal 0.523 , high 0.564","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.95,"priceB":null,"oem":null,"pn":40013,"fccid":null,"keyType":"VATS Single-Sided","buttons":null,"inStock":"Yes","chip":"VATS #3","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B62","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #3 - OHMS low 0.654 , nominal 0.681 , high 0.728","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.95,"priceB":null,"oem":null,"pn":40014,"fccid":null,"keyType":"VATS Single-Sided","buttons":null,"inStock":"Yes","chip":"VATS #4","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B62","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #4 - OHMS low 0.852 , nominal 0.887 , high 0.942","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.95,"priceB":null,"oem":null,"pn":40015,"fccid":null,"keyType":"VATS Single-Sided","buttons":null,"inStock":"Yes","chip":"VATS #5","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B62","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #5 - OHMS low 1.085 , nominal 1.130 , high 1.195","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.95,"priceB":null,"oem":null,"pn":40016,"fccid":null,"keyType":"VATS Single-Sided","buttons":null,"inStock":"Yes","chip":"VATS #6","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B62","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #6 - OHMS low 1.411 , nominal 1.470 , high 1.549","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.95,"priceB":null,"oem":null,"pn":40017,"fccid":null,"keyType":"VATS Single-Sided","buttons":null,"inStock":"Yes","chip":"VATS #7","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B62","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #7 - OHMS low 1.795 , nominal 1.870 , high 1.965","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.95,"priceB":null,"oem":null,"pn":40018,"fccid":null,"keyType":"VATS Single-Sided","buttons":null,"inStock":"Yes","chip":"VATS #8","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B62","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #8 - OHMS low 2.275 , nominal 2.370 , high 2.485","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.95,"priceB":null,"oem":null,"pn":40019,"fccid":null,"keyType":"VATS Single-Sided","buttons":null,"inStock":"Yes","chip":"VATS #9","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B62","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #9 - OHMS low 2.890 , nominal 3.010 , high 3.150","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.95,"priceB":null,"oem":null,"pn":40020,"fccid":null,"keyType":"VATS Single-Sided","buttons":null,"inStock":"Yes","chip":"VATS #10","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B62","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #10 - OHMS low 3.590 , nominal 3.740 , high 3.910","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.95,"priceB":null,"oem":null,"pn":40021,"fccid":null,"keyType":"VATS Single-Sided","buttons":null,"inStock":"Yes","chip":"VATS #11","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B62","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #11 - OHMS low 4.560 , nominal 4.750 , high 4.960","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.95,"priceB":null,"oem":null,"pn":40022,"fccid":null,"keyType":"VATS Single-Sided","buttons":null,"inStock":"Yes","chip":"VATS #12","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B62","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #12 - OHMS low 5.798 , nominal 6.040 , high 6.302","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.95,"priceB":null,"oem":null,"pn":40023,"fccid":null,"keyType":"VATS Single-Sided","buttons":null,"inStock":"Yes","chip":"VATS #13","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B62","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #13 - OHMS low 7.200 , nominal 7.500 , high 7.820","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.95,"priceB":null,"oem":null,"pn":40024,"fccid":null,"keyType":"VATS Single-Sided","buttons":null,"inStock":"Yes","chip":"VATS #14","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B62","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #14 - OHMS low 9.149 , nominal 9.530 , high 9.931","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.95,"priceB":null,"oem":null,"pn":40025,"fccid":null,"keyType":"VATS Single-Sided","buttons":null,"inStock":"Yes","chip":"VATS #15","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B62","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #15 - OHMS low 11.238 , nominal 11.801 , high 12.292","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.95,"priceB":null,"oem":null,"pn":40076,"fccid":"B62","keyType":"VATS Single-Sided","buttons":null,"inStock":"Yes","chip":"VATS","originalMake":"GM","vehiclesRaw":"Buick\n  LeSabre (90-99)\n  Park Avenue (91-96)\n  Reatta (90-92)\n  Regal (93-97)\n  Riviera (90-93)\n  Roadmaster (93-96)\n  Roadmaster Estate Wagon (93-96)\nCadillac\n  Allante (89-93)\n  DeVille (90-99)\n  Eldorado (89-02)\n  Fleetwood (90-96)\n  Fleetwood Brougham (93-96)\n  Seville (89-97)\nChevrolet\n  Camaro (86-02)\n  Caprice Classic (95-96)\n  Corvette (86-96)\n  Impala (95-96)\n  Lumina (94-01)\n  Monte Carlo (95-99)\nOldsmobile\n  Cutlass Supreme (94-97)\n  Eighty Eight (92-99)\n  LSS (96-99)\n  Ninety Eight (91-96)\n  Regency (97-99)\n  Toronado (90-92)\nPontiac\n  Bonneville (89-99)\n  Firebird (88-02)\n  Grand Prix (94-96)","vehicles":[{"model":"LeSabre","make":"Buick","endYear":1999,"startYear":1991},{"make":"Buick","startYear":1991,"model":"Park Avenue","endYear":1996},{"startYear":1990,"model":"Reatta","make":"Buick","endYear":1992},{"model":"Regal","endYear":1996,"startYear":1994,"make":"Buick"},{"endYear":1994,"make":"Buick","model":"Riviera","startYear":1992},{"endYear":1996,"model":"Roadmaster","startYear":1994,"make":"Buick"},{"startYear":1989,"make":"Cadillac","endYear":1993,"model":"Allante"},{"endYear":1999,"model":"DeVille","startYear":1991,"make":"Cadillac"},{"startYear":1989,"endYear":2002,"model":"El Dorado","make":"Cadillac"},{"make":"Cadillac","startYear":1989,"model":"Seville","endYear":1990},{"startYear":1986,"make":"Chevrolet","endYear":2002,"model":"Camaro"},{"startYear":1995,"endYear":1996,"make":"Chevrolet","model":"Caprice Classic"},{"startYear":1986,"make":"Chevrolet","model":"Corvette","endYear":1996},{"endYear":1996,"make":"Chevrolet","startYear":1995,"model":"Impala"},{"startYear":1994,"make":"Chevrolet","endYear":2001,"model":"Lumina"},{"model":"Monte Carlo","startYear":1995,"endYear":1999,"make":"Chevrolet"},{"make":"Oldsmobile","startYear":1994,"model":"Cutlass Supreme","endYear":1997},{"startYear":1992,"model":"Eighty Eight","endYear":1999,"make":"Oldsmobile"},{"make":"Oldsmobile","model":"LSS","endYear":1999,"startYear":1996},{"model":"Ninety Eight","endYear":1996,"make":"Oldsmobile","startYear":1991},{"startYear":1997,"endYear":1999,"make":"Oldsmobile","model":"Regency"},{"startYear":1990,"endYear":1992,"model":"Toronado","make":"Oldsmobile"},{"startYear":1989,"model":"Bonneville","endYear":1999,"make":"Pontiac"},{"make":"Pontiac","startYear":1988,"endYear":2002,"model":"Firebird"},{"make":"Pontiac","endYear":1996,"startYear":1994,"model":"Grand Prix"},{"startYear":1993,"model":"Fleetwood","codeSeries":[],"endYear":1996,"make":"Cadillac"},{"endYear":1996,"codeSeries":[],"model":"Brougham","make":"Cadillac","startYear":1993},{"endYear":1996,"make":"Cadillac","model":"Seville","startYear":1991,"codeSeries":[]}],"emergencyPN":null,"keyway":"B62","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.95,"priceB":null,"oem":null,"emergency":null,"shell":null}},"secondaryKeyPartNumber":null,"isVATS":true},{"priceA":6.29,"priceB":null,"oem":null,"pn":40082,"fccid":null,"keyType":"VATS Double-Sided","buttons":null,"inStock":"Yes","chip":"VATS #2","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B86","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS double #2 - OHMS low 0.502 , nominal 0.523 , high 0.564","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.29,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.29,"priceB":null,"oem":null,"pn":40083,"fccid":null,"keyType":"VATS Double-Sided","buttons":null,"inStock":"Yes","chip":"VATS #3","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B86","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS double #3 - OHMS low 0.654 , nominal 0.681 , high 0.728","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.29,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.29,"priceB":null,"oem":null,"pn":40084,"fccid":null,"keyType":"VATS Double-Sided","buttons":null,"inStock":"Yes","chip":"VATS #4","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B86","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS double #4 - OHMS low 0.852 , nominal 0.887 , high 0.942","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.29,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.29,"priceB":null,"oem":null,"pn":40085,"fccid":null,"keyType":"VATS Double-Sided","buttons":null,"inStock":"Yes","chip":"VATS #5","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B86","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS double #5 - OHMS low 1.085 , nominal 1.130 , high 1.195","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.29,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.29,"priceB":null,"oem":null,"pn":40086,"fccid":null,"keyType":"VATS Double-Sided","buttons":null,"inStock":"Yes","chip":"VATS #6","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B86","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS double #6 - OHMS low 1.411 , nominal 1.470 , high 1.549","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.29,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.29,"priceB":null,"oem":null,"pn":40087,"fccid":null,"keyType":"VATS Double-Sided","buttons":null,"inStock":"Yes","chip":"VATS #7","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B86","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #7 - OHMS low 1.795 , nominal 1.870 , high 1.965","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.29,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.29,"priceB":null,"oem":null,"pn":40088,"fccid":null,"keyType":"VATS Double-Sided","buttons":null,"inStock":"Yes","chip":"VATS #8","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B86","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #8 - OHMS low 2.275 , nominal 2.370 , high 2.485","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.29,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.29,"priceB":null,"oem":null,"pn":40089,"fccid":null,"keyType":"VATS Double-Sided","buttons":null,"inStock":"Yes","chip":"VATS #9","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B86","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #9 - OHMS low 2.890 , nominal 3.010 , high 3.150","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.29,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.29,"priceB":null,"oem":null,"pn":40090,"fccid":null,"keyType":"VATS Double-Sided","buttons":null,"inStock":"Yes","chip":"VATS #10","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B86","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #10 - OHMS low 3.590 , nominal 3.740 , high 3.910","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.29,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.29,"priceB":null,"oem":null,"pn":40091,"fccid":null,"keyType":"VATS Double-Sided","buttons":null,"inStock":"Yes","chip":"VATS #11","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B86","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #11 - OHMS low 4.560 , nominal 4.750 , high 4.960","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.29,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.29,"priceB":null,"oem":null,"pn":40092,"fccid":null,"keyType":"VATS Double-Sided","buttons":null,"inStock":"Yes","chip":"VATS #12","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B86","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #12 - OHMS low 5.798 , nominal 6.040 , high 6.302","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.29,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.29,"priceB":null,"oem":null,"pn":40093,"fccid":null,"keyType":"VATS Double-Sided","buttons":null,"inStock":"Yes","chip":"VATS #13","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B86","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #13 - OHMS low 7.200 , nominal 7.500 , high 7.820","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.29,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.29,"priceB":null,"oem":null,"pn":40094,"fccid":null,"keyType":"VATS Double-Sided","buttons":null,"inStock":"Yes","chip":"VATS #14","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B86","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #14 - OHMS low 9.149 , nominal 9.530 , high 9.931","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.29,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":6.29,"priceB":null,"oem":null,"pn":40095,"fccid":null,"keyType":"VATS Double-Sided","buttons":null,"inStock":"Yes","chip":"VATS #15","originalMake":"GM","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"B86","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"GM logo","frequency":null,"battery":null,"notes":"VATS single #15 - OHMS low 11.238 , nominal 11.801 , high 12.292","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":6.29,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"pn":"42152","fccid":null,"ilco":null,"vehicles":[{"make":"Buick","model":"Century","startYear":1997,"endYear":2005},{"make":"Buick","model":"Regal","startYear":1997,"endYear":2004},{"make":"Buick","model":"Riviera","startYear":1995,"endYear":1999},{"make":"Chevrolet","model":"Corvette","startYear":1997,"endYear":1999},{"make":"Oldsmobile","model":"Aurora","startYear":1995,"endYear":1999}],"keyType":"VATS","keyway":"B86","chip":"VATS","buttons":null,"stockQty":0,"frequency":null,"battery":null,"logo":"Chevrolet logo","emergencyPN":null,"shellPN":null,"notes":"Big Bow","distributorPrices":{"KeylessRide":{"priceA":"$10.95","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"$10.95","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"priceA":"$94","priceB":null,"oem":null,"pn":8269,"fccid":"ACJ932HK1310A","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":null,"chip":"HITAG 3 PCF7920 BIPHASE","originalMake":"Honda","vehiclesRaw":"Honda Accord Coupe (16-18) Honda Accord Sedan (16-17)","vehicles":[{"make":"Honda","model":"Accord Coupe","startYear":2016,"endYear":2018},{"make":"Honda","model":"Accord Sedan","startYear":2016,"endYear":2017}],"emergencyPN":42564,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Honda logo","frequency":"433.92 MHz","battery":"2032","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$94","priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$119","priceB":null,"oem":null,"pn":8271,"fccid":"ACJ932HK1310A","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":null,"chip":"HITAG 3 PCF7920 BIPHASE","originalMake":"Honda","vehiclesRaw":"Honda Accord Coupe (16-18) Honda Accord Sedan (16-17)","vehicles":[{"make":"Honda","model":"Accord Coupe","startYear":2016,"endYear":2018},{"make":"Honda","model":"Accord Sedan","startYear":2016,"endYear":2017}],"emergencyPN":42564,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Honda logo","frequency":"433.92 MHz","battery":"2032","notes":"Memory #1","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$119","priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$119","priceB":null,"oem":null,"pn":8273,"fccid":"ACJ932HK1310A","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":null,"chip":"HITAG 3 PCF7920 BIPHASE","originalMake":"Honda","vehiclesRaw":"Honda Accord Coupe (16-18) Honda Accord Sedan (16-17)","vehicles":[{"make":"Honda","model":"Accord Coupe","startYear":2016,"endYear":2018},{"make":"Honda","model":"Accord Sedan","startYear":2016,"endYear":2017}],"emergencyPN":42564,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Honda logo","frequency":"433.92 MHz","battery":"2032","notes":"Memory #2","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$119","priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$99","priceB":"49","oem":null,"pn":5103,"fccid":"CWTWB1G0090","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"Hitag 3","originalMake":"Honda","vehiclesRaw":"Honda Accord Sedan (18-22) Honda City (18)","vehicles":[{"make":"Honda","model":"Accord Sedan","startYear":2018,"endYear":2022},{"make":"Honda","model":"City","startYear":2018,"endYear":2018}],"emergencyPN":42564,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Honda logo","frequency":"433.92 MHz","battery":"2032","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$99","priceB":"49","oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$234","priceB":null,"oem":null,"pn":5102,"fccid":"KR580399900","keyType":"Proximity","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","inStock":null,"chip":"HITAG 3","originalMake":"Acura","vehiclesRaw":"Acura RDX (16-18)","vehicles":[{"make":"Acura","model":"RDX","startYear":2016,"endYear":2018}],"emergencyPN":40304,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Acura logo","frequency":"923.625-924.6 MHz","battery":"2032","notes":"Memory #2","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$234","priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$244","priceB":null,"oem":null,"pn":8534,"fccid":"KR580399900","keyType":"Proximity","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","inStock":null,"chip":"HITAG 3","originalMake":"Acura","vehiclesRaw":"Acura RDX (16-18)","vehicles":[{"make":"Acura","model":"RDX","startYear":2016,"endYear":2018}],"emergencyPN":40304,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Acura logo","frequency":"923.625-924.6 MHz","battery":"2032","notes":"Memory #1","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$244","priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$94","priceB":"$49","oem":null,"pn":8468,"fccid":"KR5V1X","keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"HITAG 3 PCF7920","originalMake":"Honda","vehiclesRaw":"Honda Fit (18-20) Honda HR-V (16-22)","vehicles":[{"make":"Honda","model":"Fit","startYear":2018,"endYear":2020},{"make":"Honda","model":"HR-V","startYear":2016,"endYear":2022}],"emergencyPN":42564,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Honda logo","frequency":"313.55-314.15 MHz","battery":"2032","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$94","priceB":"$49","oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$94","priceB":null,"oem":null,"pn":8509,"fccid":"KR5V1X","keyType":"Proximity","buttons":"5 Button: L, U, P, PSD2 (Lock, Unlock, Panic, Dual Power Sliding Doors)","inStock":null,"chip":"HITAG 3 PCF7920","originalMake":"Honda","vehiclesRaw":"Honda Odyssey (14-17)","vehicles":[{"make":"Honda","model":"Odyssey","startYear":2014,"endYear":2017}],"emergencyPN":42564,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Honda logo","frequency":"313.55-314.15 MHz","battery":"2032","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$94","priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$142","priceB":null,"oem":null,"pn":8510,"fccid":"KR5V1X","keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"HITAG 3 PCF7920","originalMake":"Acura","vehiclesRaw":"Acura MDX (14-20) Acura RDX (16-18)","vehicles":[{"make":"Acura","model":"MDX","startYear":2014,"endYear":2020},{"make":"Acura","model":"RDX","startYear":2016,"endYear":2018}],"emergencyPN":40304,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Acura logo","frequency":"313.55-314.15 MHz","battery":"2032","notes":"Memory #2","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$142","priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$127","priceB":null,"oem":null,"pn":8511,"fccid":"KR5V1X","keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"HITAG 3 PCF7920","originalMake":"Acura","vehiclesRaw":"Acura MDX (14-20) Acura RDX (16-18)","vehicles":[{"make":"Acura","model":"MDX","startYear":2014,"endYear":2020},{"make":"Acura","model":"RDX","startYear":2016,"endYear":2018}],"emergencyPN":40304,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Acura logo","frequency":"313.55-314.15 MHz","battery":"2032","notes":"Memory #1","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$127","priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$114","priceB":null,"oem":null,"pn":8574,"fccid":"KR5V1X","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"HITAG 3 PCF7920","originalMake":"Honda","vehiclesRaw":"Honda Fit (15-18)","vehicles":[{"make":"Honda","model":"Fit","startYear":2015,"endYear":2018}],"emergencyPN":42564,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Honda logo","frequency":"313.55-314.15 MHz","battery":"2032","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$114","priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$94","priceB":null,"oem":null,"pn":5021,"fccid":"KR5V2X","keyType":"Proximity","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","inStock":null,"chip":"HITAG 3 PCF7920 MANCHESTER","originalMake":"Honda","vehiclesRaw":"Honda Civic (17-21)","vehicles":[{"make":"Honda","model":"Civic","startYear":2017,"endYear":2021}],"emergencyPN":42564,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Honda logo","frequency":"433.66-434.18 MHz","battery":"2032","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$94","priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$119","priceB":"$74","oem":null,"pn":5031,"fccid":"KR5V2X","keyType":"Proximity","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","inStock":null,"chip":"HITAG 3 PCF7920 MANCHESTER","originalMake":"Honda","vehiclesRaw":"Honda CR-V (17-22)","vehicles":[{"make":"Honda","model":"CR-V","startYear":2017,"endYear":2022}],"emergencyPN":42564,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Honda logo","frequency":"433.66-434.18 MHz","battery":"2032","notes":"Memory #1","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$119","priceB":"$74","oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$119","priceB":null,"oem":null,"pn":5032,"fccid":"KR5V2X","keyType":"Proximity","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","inStock":null,"chip":"HITAG 3 PCF7920 Manchester","originalMake":"Honda","vehiclesRaw":"Honda CR-V (17-22)","vehicles":[{"make":"Honda","model":"CR-V","startYear":2017,"endYear":2022}],"emergencyPN":42564,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Honda logo","frequency":"433.66-434.18 MHz","battery":"2032","notes":"Memory #2","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$119","priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$119","priceB":null,"oem":null,"pn":5045,"fccid":"KR5V2X","keyType":"Proximity","buttons":"7 Button: L, U, P, H, PSD2, RS (Lock, Unlock, Panic, Hatch, Dual PSD, Remote Start)","inStock":null,"chip":"HITAG 3 PCF7920 Manchester","originalMake":"Honda","vehiclesRaw":"Honda Odyssey (18-20)","vehicles":[{"make":"Honda","model":"Odyssey","startYear":2018,"endYear":2020}],"emergencyPN":42564,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"433.66-434.18 MHz","battery":"2032","notes":"Memory #1","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$119","priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$119","priceB":null,"oem":null,"pn":5046,"fccid":"KR5V2X","keyType":"Proximity","buttons":"7 Button: L, U, P, H, PSD, RS (Lock, Unlock, Panic, Hatch, PSD, Remote Start)","inStock":null,"chip":"HITAG 3 PCF7920 Manchester","originalMake":"Honda","vehiclesRaw":"Honda Odyssey (18-20)","vehicles":[{"make":"Honda","model":"Odyssey","startYear":2018,"endYear":2020}],"emergencyPN":42564,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"433.66-434.18 MHz","battery":"2032","notes":"Memory #2","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$119","priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":124,"priceB":null,"oem":null,"pn":5072,"fccid":"KR5V2X","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"HITAG 3 PCF7920","originalMake":"Acura/Honda","vehiclesRaw":"Acura ILX (19-20); TLX (18-20)","vehicles":[{"make":"Acura","model":"ILX","startYear":2019,"endYear":2020},{"make":"Acura","model":"TLX","startYear":2018,"endYear":2020}],"emergencyPN":40304,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"433.66-434.18 MHz","battery":"2032","notes":"Memory #1","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":124,"priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":109,"priceB":74,"oem":null,"pn":5073,"fccid":"KR5V2X","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"HITAG 3 PCF7920","originalMake":"Acura/Honda","vehiclesRaw":"Acura ILX (19-20); TLX (18-20)","vehicles":[{"make":"Acura","model":"ILX","startYear":2019,"endYear":2020},{"make":"Acura","model":"TLX","startYear":2018,"endYear":2020}],"emergencyPN":40304,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"433.66-434.18 MHz","battery":"2032","notes":"Memory #2","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":109,"priceB":74,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$74","priceB":null,"oem":null,"pn":5105,"fccid":"KR5V2X","keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"HITAG 3 PCF7920 Manchester","originalMake":"Honda","vehiclesRaw":"Honda Odyssey (18-20)","vehicles":[{"make":"Honda","model":"Odyssey","startYear":2018,"endYear":2020}],"emergencyPN":42564,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"433.66-434.18 MHz","battery":"2032","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$74","priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$99","priceB":null,"oem":null,"pn":9206,"fccid":"KR5V2X","keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"Yes","originalMake":"Honda","vehiclesRaw":"Honda Pilot (16-18)","vehicles":[{"make":"Honda","model":"Pilot","startYear":2016,"endYear":2018}],"emergencyPN":42564,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Honda logo","frequency":"433.66-434.18 MHz","battery":"2032","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$99","priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$69","priceB":"$44","oem":null,"pn":9217,"fccid":"KR5V2X","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":null,"chip":"HITAG 3 PCF7920 MANCHESTER","originalMake":"Honda","vehiclesRaw":"Honda Civic (16-21)","vehicles":[{"make":"Honda","model":"Civic","startYear":2016,"endYear":2021}],"emergencyPN":42564,"keyway":"HO01","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Honda logo","frequency":"433.66-434.18 MHz","battery":"2032","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$69","priceB":"$44","oem":null,"emergency":7.95,"shell":null}}},{"priceA":"$79","priceB":null,"oem":null,"pn":9944,"fccid":"KR55WK49308","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, RG (Lock, Unlock, Panic, Rear Glass)","inStock":null,"chip":"PH 46","originalMake":"Honda","vehiclesRaw":"Honda Pilot (09-15)","vehicles":[{"make":"Honda","model":"Pilot","startYear":2009,"endYear":2015}],"emergencyPN":null,"keyway":"HO01","emergencyPrice":null,"shellPN":809874,"shellPrice":null,"logo":"Honda logo","frequency":"313.85 MHz","battery":"1616","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$79","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$72","priceB":null,"oem":null,"pn":9945,"fccid":"KR55WK49308","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"PH 46","originalMake":"Honda","vehiclesRaw":"Honda Pilot (09-11)","vehicles":[{"make":"Honda","model":"Pilot","startYear":2009,"endYear":2011}],"emergencyPN":null,"keyway":"HO01","emergencyPrice":null,"shellPN":809874,"shellPrice":null,"logo":"Honda logo","frequency":"313.85 MHz","battery":"1616","notes":"Memory #1","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$72","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$79","priceB":null,"oem":null,"pn":9946,"fccid":"KR55WK49308","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"PH 46","originalMake":"Honda","vehiclesRaw":"Honda Pilot (09-11)","vehicles":[{"make":"Honda","model":"Pilot","startYear":2009,"endYear":2011}],"emergencyPN":null,"keyway":"HO01","emergencyPrice":null,"shellPN":809874,"shellPrice":null,"logo":"Honda logo","frequency":"313.85 MHz","battery":"1616","notes":"Memory #2","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$79","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$64","priceB":null,"oem":"$17.95","pn":8077,"fccid":"MLBHLIK-1T","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"PH 46","originalMake":"Honda","vehiclesRaw":"Honda Accord Crosstour (10-11) Honda CR-V (07-12) Honda Crosstour (12)","vehicles":[{"make":"Honda","model":"Accord Crosstour","startYear":2010,"endYear":2011},{"make":"Honda","model":"CR-V","startYear":2007,"endYear":2012},{"make":"Honda","model":"Crosstour","startYear":2012,"endYear":2012}],"emergencyPN":null,"keyway":"HO01","emergencyPrice":null,"shellPN":809566,"shellPrice":"$6.95","logo":"Honda logo","frequency":"313.85 MHz","battery":"1616","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$64","priceB":null,"oem":"$17.95","emergency":null,"shell":"$6.95"}}},{"priceA":"$59","priceB":null,"oem":"$17.95","pn":8176,"fccid":"MLBHLIK-1T","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"PH 46","originalMake":"Honda","vehiclesRaw":"Honda Insight (10-14)","vehicles":[{"make":"Honda","model":"Insight","startYear":2010,"endYear":2014}],"emergencyPN":null,"keyway":"HO01","emergencyPrice":null,"shellPN":809566,"shellPrice":"$6.95","logo":"Honda logo","frequency":"313.85 MHz","battery":"1616","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$59","priceB":null,"oem":"$17.95","emergency":null,"shell":"$6.95"}}},{"priceA":"$64","priceB":null,"oem":"$17.95","pn":8867,"fccid":"MLBHLIK-1T","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"PH 46","originalMake":"Honda","vehiclesRaw":"Honda CR-Z (11-15)","vehicles":[{"make":"Honda","model":"CR-Z","startYear":2011,"endYear":2015}],"emergencyPN":null,"keyway":"HO01","emergencyPrice":null,"shellPN":809566,"shellPrice":"$6.95","logo":"Honda logo","frequency":"313.85 MHz","battery":"1616","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$64","priceB":null,"oem":"$17.95","emergency":null,"shell":"$6.95"}}},{"priceA":"$94","priceB":null,"oem":null,"pn":8605,"fccid":"MLBHLIK6-1T","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"HITAG 3 PCF7961X","originalMake":"Honda","vehiclesRaw":"Honda Fit (15-20)","vehicles":[{"make":"Honda","model":"Fit","startYear":2015,"endYear":2020}],"emergencyPN":null,"keyway":"HO01","emergencyPrice":null,"shellPN":808605,"shellPrice":"$6.95","logo":"Honda logo","frequency":"313.85 MHz","battery":"1620","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$94","priceB":null,"oem":null,"emergency":null,"shell":"$6.95"}}},{"priceA":"$74","priceB":null,"oem":null,"pn":8618,"fccid":"MLBHLIK6-1T","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"HITAG 3 PCF7961X","originalMake":"Honda","vehiclesRaw":"Honda CR-V (15-16) Honda HR-V (16-22)","vehicles":[{"make":"Honda","model":"CR-V","startYear":2015,"endYear":2016},{"make":"Honda","model":"HR-V","startYear":2016,"endYear":2022}],"emergencyPN":null,"keyway":"HO01","emergencyPrice":null,"shellPN":808385,"shellPrice":"$6.95","logo":"Honda logo","frequency":"313.85 MHz","battery":"1620","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$74","priceB":null,"oem":null,"emergency":null,"shell":"$6.95"}}},{"priceA":"$72","priceB":"$37.95","oem":null,"pn":6075,"fccid":"MLBHLIK6-1TA","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"HITAG 3 PCF7961X","originalMake":"Honda","vehiclesRaw":"Honda Accord Coupe (16-17) Honda Accord Sedan (16-17) Honda Civic (16-21)","vehicles":[{"make":"Honda","model":"Accord Coupe","startYear":2016,"endYear":2017},{"make":"Honda","model":"Accord Sedan","startYear":2016,"endYear":2017},{"make":"Honda","model":"Civic","startYear":2016,"endYear":2021}],"emergencyPN":null,"keyway":"HO01","emergencyPrice":null,"shellPN":808385,"shellPrice":"$6.95","logo":"Honda logo","frequency":"433.92 MHz","battery":"1620","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$72","priceB":"$37.95","oem":null,"emergency":null,"shell":"$6.95"}}},{"priceA":"$94","priceB":"$17.95","oem":null,"pn":9566,"fccid":"N5F-S0084A","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"PH 46","originalMake":"Honda","vehiclesRaw":"Honda Civic (06-11) Honda Odyssey (11-17)","vehicles":[{"make":"Honda","model":"Civic","startYear":2006,"endYear":2011},{"make":"Honda","model":"Odyssey","startYear":2011,"endYear":2017}],"emergencyPN":null,"keyway":"HO01","emergencyPrice":null,"shellPN":809566,"shellPrice":"$6.95","logo":"Honda logo","frequency":"313.85 MHz","battery":"1616","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$94","priceB":"$17.95","oem":null,"emergency":null,"shell":"$6.95"}}},{"priceA":"$89","priceB":null,"oem":"$17.95","pn":9564,"fccid":"N5F-S0084A, N5F-A05TAA","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"PH 46","originalMake":"Honda","vehiclesRaw":"Honda Civic (06-11)","vehicles":[{"make":"Honda","model":"Civic","startYear":2006,"endYear":2011}],"emergencyPN":null,"keyway":"HO01","emergencyPrice":null,"shellPN":809874,"shellPrice":null,"logo":"Honda logo","frequency":"313.85 MHz","battery":"1616","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$89","priceB":null,"oem":"$17.95","emergency":null,"shell":null}}},{"priceA":"$97","priceB":null,"oem":"$17.95","pn":9471,"fccid":"OUCG8D-380H-A","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"PH 46","originalMake":"Honda","vehiclesRaw":"Honda Fit (08) Honda Odyssey (05-10) Honda Ridgeline (06-14)","vehicles":[{"make":"Honda","model":"Fit","startYear":2008,"endYear":2008},{"make":"Honda","model":"Odyssey","startYear":2005,"endYear":2010},{"make":"Honda","model":"Ridgeline","startYear":2006,"endYear":2014}],"emergencyPN":null,"keyway":"HO01","emergencyPrice":null,"shellPN":809471,"shellPrice":null,"logo":"Honda logo","frequency":"313.85 MHz FSK","battery":"1616","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$97","priceB":null,"oem":"$17.95","emergency":null,"shell":null}}},{"priceA":"$37","priceB":null,"oem":null,"pn":6370,"fccid":"NHVWB1U521, NHVWB1U523","keyType":"Remote Only","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"No","originalMake":"Honda","vehiclesRaw":"Honda Accord (03-04) Honda Civic (01-03) Honda Element (03-08) Honda Fit (07-08)","vehicles":[{"make":"Honda","model":"Accord","startYear":2003,"endYear":2004},{"make":"Honda","model":"Civic","startYear":2001,"endYear":2003},{"make":"Honda","model":"Element","startYear":2003,"endYear":2008},{"make":"Honda","model":"Fit","startYear":2007,"endYear":2008}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Honda logo","frequency":"433.85-434.00 MHz","battery":"2025","notes":"Replaces OE9310-R-A","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$37","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$109","priceB":"$36.75","oem":null,"pn":9453,"fccid":"OUCG8D-399H-A","keyType":"Remote Only","buttons":"5 Button: L, U, P, PSD2 (Lock, Unlock, Panic, Dual Power Sliding Doors)","inStock":null,"chip":"No","originalMake":"Honda","vehiclesRaw":"Honda Odyssey (05-10)","vehicles":[{"make":"Honda","model":"Odyssey","startYear":2005,"endYear":2010}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809453,"shellPrice":null,"logo":"Honda logo","frequency":"313.8-313.9 MHz","battery":"2025","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$109","priceB":"$36.75","oem":null,"emergency":null,"shell":null}}},{"priceA":"$109","priceB":null,"oem":null,"pn":9475,"fccid":"OUCG8D-399H-A","keyType":"Remote Only","buttons":"6 Button: L, U, P, R, PSD2 (Lock, Unlock, Panic, Rear, Dual Power Sliding Doors)","inStock":null,"chip":"No","originalMake":"Honda","vehiclesRaw":"Honda Odyssey (05-10)","vehicles":[{"make":"Honda","model":"Odyssey","startYear":2005,"endYear":2010}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809975,"shellPrice":null,"logo":"Honda logo","frequency":"313.8-313.9 MHz","battery":"2025","notes":"Memory #1","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$109","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$99","priceB":null,"oem":null,"pn":9476,"fccid":"OUCG8D-399H-A","keyType":"Remote Only","buttons":"6 Button: L, U, P, R, PSD2 (Lock, Unlock, Panic, Rear, Dual Power Sliding Doors)","inStock":null,"chip":"No","originalMake":"Honda","vehiclesRaw":"Honda Odyssey (05-10)","vehicles":[{"make":"Honda","model":"Odyssey","startYear":2005,"endYear":2010}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809975,"shellPrice":null,"logo":"Honda logo","frequency":"313.8-313.9 MHz","battery":"2025","notes":"Memory #2","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$99","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$110","priceB":null,"oem":null,"pn":9975,"fccid":"OUCG8D-399H-A","keyType":"Remote Only","buttons":"6 Button: L, U, P, R, PSD2 (Lock, Unlock, Panic, Rear, Dual Power Sliding Doors)","inStock":null,"chip":"No","originalMake":"Honda","vehiclesRaw":"Honda Odyssey (05-10)","vehicles":[{"make":"Honda","model":"Odyssey","startYear":2005,"endYear":2010}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809975,"shellPrice":null,"logo":"Honda logo","frequency":"313.8-313.9 MHz","battery":"2025","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$110","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$99","priceB":null,"oem":null,"pn":5070,"fccid":"A269ZUA106","keyType":"Remote Only","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"No","originalMake":"Honda","vehiclesRaw":"Honda Civic (99-00)","vehicles":[{"make":"Honda","model":"Civic","startYear":1999,"endYear":2000}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Honda logo","frequency":"433.4-434.4 MHz","battery":"2025","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$99","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$72","priceB":null,"oem":null,"pn":5060,"fccid":"A269ZUA101","keyType":"Remote Only","buttons":"4 Button: L, U, P, OPT (Lock, Unlock, Panic, Option)","inStock":null,"chip":"No","originalMake":"Honda","vehiclesRaw":"Honda Accord (96-02) Honda CR-V (97-00) Honda Civic (96-98) Honda Del Sol (96-97) Honda Insight (00-03) Honda Odyssey (96-04) Honda Pilot (03-04) Honda Prelude (96-02)","vehicles":[{"make":"Honda","model":"Accord","startYear":1996,"endYear":2002},{"make":"Honda","model":"CR-V","startYear":1997,"endYear":2000},{"make":"Honda","model":"Civic","startYear":1996,"endYear":1998},{"make":"Honda","model":"Del Sol","startYear":1996,"endYear":1997},{"make":"Honda","model":"Insight","startYear":2000,"endYear":2003},{"make":"Honda","model":"Odyssey","startYear":1996,"endYear":2004},{"make":"Honda","model":"Pilot","startYear":2003,"endYear":2004},{"make":"Honda","model":"Prelude","startYear":1996,"endYear":2002}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":805000,"shellPrice":null,"logo":"Honda logo","frequency":"433.4-434.4 MHz","battery":"2025","notes":"Dealer/Port Installed; DX and LX Models Only","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$72","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":"$119","priceB":"$44","oem":null,"pn":5950,"fccid":"KOBUTAH2T","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Honda","vehiclesRaw":"Honda Accord (98-02)","vehicles":[{"make":"Honda","model":"Accord","startYear":1998,"endYear":2002}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":805950,"shellPrice":null,"logo":"Honda logo","frequency":"315 MHz","battery":"2025","notes":"For EX Models Only","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$119","priceB":"$44","oem":null,"emergency":null,"shell":null}}},{"priceA":"$179","priceB":null,"oem":null,"pn":5320,"fccid":"CWT72147KA3","keyType":"Remote Only","buttons":"2 Button: L, U (Lock, Unlock)","inStock":null,"chip":"No","originalMake":"Honda","vehiclesRaw":"Honda Prelude (99-02)","vehicles":[{"make":"Honda","model":"Prelude","startYear":1999,"endYear":2002}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Honda logo","frequency":"433.4-434.4 MHz","battery":"2025","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$179","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"pn":"HD106","fccid":"HD106","ilco":null,"vehicles":[{"make":"Acura","model":"Integra","startYear":2000,"endYear":2001},{"make":"Acura","model":"MDX","startYear":2001,"endYear":2006},{"make":"Acura","model":"NSX","startYear":1997,"endYear":2005},{"make":"Acura","model":"RL","startYear":1996,"endYear":2004},{"make":"Acura","model":"RSX","startYear":2002,"endYear":2006},{"make":"Acura","model":"TL","startYear":1999,"endYear":2003},{"make":"Honda","model":"Accord","startYear":1998,"endYear":2002},{"make":"Honda","model":"Civic","startYear":2001,"endYear":2003},{"make":"Honda","model":"Insight","startYear":2000,"endYear":2006},{"make":"Honda","model":"Odyssey","startYear":1998,"endYear":2002},{"make":"Honda","model":"Prelude","startYear":1997,"endYear":2002},{"make":"Honda","model":"S 2000","startYear":2000,"endYear":2003},{"make":"Acura","model":"CL","startYear":1998,"endYear":2003}],"keyType":"Chip Key","keyway":"HD103","chip":"M 13","buttons":null,"stockQty":0,"frequency":null,"battery":null,"logo":null,"emergencyPN":null,"shellPN":null,"notes":null,"distributorPrices":{"KeylessRide":{"priceA":"$14.95","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"$14.95","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"pn":"HD111","fccid":"HD111","ilco":null,"vehicles":[{"make":"Acura","model":"TL","startYear":2004,"endYear":2006},{"make":"Acura","model":"TSX","startYear":2004,"endYear":2008}],"keyType":"Chip Key","keyway":"HD103","chip":"PH 46","buttons":null,"stockQty":0,"frequency":null,"battery":null,"logo":"Strattec logo","emergencyPN":null,"shellPN":null,"notes":null,"distributorPrices":{"KeylessRide":{"priceA":"$15.45","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"$15.45","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"priceA":"$16.99","priceB":null,"oem":null,"pn":"HO01","fccid":null,"keyType":"Chip Key","buttons":null,"inStock":null,"chip":"M 13","originalMake":"Acura/Honda","vehiclesRaw":"Honda CR-V (02-06), Civic (03-05), Element (03-06), Odyssey (03-04), Pilot (03-04), S 2000 (04-05)","vehicles":[{"make":"Honda","model":"CR-V","startYear":2002,"endYear":2006},{"make":"Honda","model":"Civic","startYear":2003,"endYear":2005},{"make":"Honda","model":"Element","startYear":2003,"endYear":2006},{"make":"Honda","model":"Odyssey","startYear":2003,"endYear":2004},{"make":"Honda","model":"Pilot","startYear":2003,"endYear":2004},{"make":"Honda","model":"S 2000","startYear":2004,"endYear":2005}],"emergencyPN":null,"keyway":"HO01","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Strattec logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$16.99","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"pn":"HO03","fccid":"HO03","ilco":null,"vehicles":[{"make":"Honda","model":"Accord","startYear":2003,"endYear":2007},{"make":"Honda","model":"Civic","startYear":2006,"endYear":2013},{"make":"Honda","model":"Element","startYear":2006,"endYear":2011},{"make":"Honda","model":"Fit","startYear":2008,"endYear":2008},{"make":"Honda","model":"Odyssey","startYear":2005,"endYear":2017},{"make":"Honda","model":"Pilot","startYear":2005,"endYear":2008},{"make":"Honda","model":"Ridgeline","startYear":2006,"endYear":2014},{"make":"Acura","model":"TSX","startYear":2009,"endYear":2014},{"make":"Acura","model":"ZDX","startYear":2010,"endYear":2012},{"make":"Acura","model":"MDX","startYear":2007,"endYear":2013},{"make":"Acura","model":"RDX","startYear":2007,"endYear":2012},{"make":"Acura","model":"TL","startYear":2007,"endYear":2014}],"keyType":"Chip Key","keyway":"HO01","chip":"PH 46","buttons":null,"stockQty":0,"frequency":null,"battery":null,"logo":null,"emergencyPN":null,"shellPN":null,"notes":null,"distributorPrices":{"KeylessRide":{"priceA":"$11.95","priceB":null,"oem":null,"emergency":null,"shell":null}},"priceA":"$11.95","priceB":null,"oem":null,"emergencyPrice":null,"shellPrice":null},{"priceA":"$9.99","priceB":null,"oem":null,"pn":"HO05","fccid":null,"keyType":"Chip Key","buttons":null,"inStock":null,"chip":"HITAG 3","originalMake":"Acura/Honda","vehiclesRaw":"Honda Accord Coupe (13-17), Accord Sedan (13-17), CR-V (14-20), Civic (14-21), Crosstour (13-15), Fit (15-20), HR-V (16-22)","vehicles":[{"make":"Honda","model":"Accord Coupe","startYear":2013,"endYear":2017},{"make":"Honda","model":"Accord Sedan","startYear":2013,"endYear":2017},{"make":"Honda","model":"CR-V","startYear":2014,"endYear":2020},{"make":"Honda","model":"Civic","startYear":2014,"endYear":2021},{"make":"Honda","model":"Crosstour","startYear":2013,"endYear":2015},{"make":"Honda","model":"Fit","startYear":2015,"endYear":2020},{"make":"Honda","model":"HR-V","startYear":2016,"endYear":2022}],"emergencyPN":null,"keyway":"HO01","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Honda logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":"$9.99","priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":89,"priceB":64,"oem":null,"pn":5135,"fccid":"TQ8-FOB-4F32, TQ8-FOB-4F19","keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"HITAG 3","originalMake":"Hyundai","vehiclesRaw":"Santa Fe (19-20)","vehicles":[{"make":"Hyundai","model":"Santa Fe","startYear":2019,"endYear":2020}],"emergencyPN":42688,"keyway":"KK12","emergencyPrice":9.95,"shellPN":null,"shellPrice":null,"logo":"Hyundai logo","frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":89,"priceB":64,"oem":null,"emergency":9.95,"shell":null}}},{"priceA":134,"priceB":null,"oem":null,"pn":5083,"fccid":"CQOFD00120","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"H-Chip Master 128-BIT","originalMake":"Hyundai","vehiclesRaw":"Sonata (18-19), Sonata Hybrid (18-19)","vehicles":[{"make":"Hyundai","model":"Sonata","startYear":2018,"endYear":2019},{"make":"Hyundai","model":"Sonata Hybrid","startYear":2018,"endYear":2019}],"emergencyPN":42704,"keyway":"LX Short","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":134,"priceB":null,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":179,"priceB":49,"oem":39,"pn":8003,"fccid":"TQ8-FOB-4F11","keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"HITAG 3","originalMake":"Hyundai","vehiclesRaw":"Tucson (16-18)","vehicles":[{"make":"Hyundai","model":"Tucson","startYear":2016,"endYear":2018}],"emergencyPN":42689,"keyway":"LX Short","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Hyundai logo","frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":179,"priceB":49,"oem":39,"emergency":7.95,"shell":null}}},{"priceA":94,"priceB":59,"oem":null,"pn":5164,"fccid":"TQ8-FOB-4F27","keyType":"Proximity","buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","inStock":null,"chip":"HITAG 3","originalMake":"Hyundai","vehiclesRaw":"Sonata (20-23), Sonata Hybrid (20-23)","vehicles":[{"make":"Hyundai","model":"Sonata","startYear":2020,"endYear":2023},{"make":"Hyundai","model":"Sonata Hybrid","startYear":2020,"endYear":2023}],"emergencyPN":41092,"keyway":"LX Short","emergencyPrice":9.95,"shellPN":null,"shellPrice":null,"logo":"Hyundai logo","frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":94,"priceB":59,"oem":null,"emergency":9.95,"shell":null}}},{"priceA":309,"priceB":null,"oem":null,"pn":8287,"fccid":"SY5DMFNA04","keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"PH 46","originalMake":"Hyundai","vehiclesRaw":"Santa Fe (13-18)","vehicles":[{"make":"Hyundai","model":"Santa Fe","startYear":2013,"endYear":2018}],"emergencyPN":42707,"keyway":"HY18-R","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Hyundai logo","frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":309,"priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":129,"priceB":null,"oem":null,"pn":8659,"fccid":"SY5DMFNA433","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"PH 46","originalMake":"Hyundai","vehiclesRaw":"Azera (15-17)","vehicles":[{"make":"Hyundai","model":"Azera","startYear":2015,"endYear":2017}],"emergencyPN":42697,"keyway":"LX Short","emergencyPrice":8.95,"shellPN":null,"shellPrice":null,"logo":"Hyundai logo","frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":129,"priceB":null,"oem":null,"emergency":8.95,"shell":null}}},{"priceA":169,"priceB":114.75,"oem":null,"pn":7720,"fccid":"TQ8-FOB-4F17","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"HITAG 3","originalMake":"Kia","vehiclesRaw":"Stinger (19-21)","vehicles":[{"make":"Kia","model":"Stinger","startYear":2019,"endYear":2021}],"emergencyPN":42687,"keyway":"KK12","emergencyPrice":11.95,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":169,"priceB":114.75,"oem":null,"emergency":11.95,"shell":null}}},{"priceA":74,"priceB":49,"oem":24.95,"pn":5034,"fccid":"TQ8-FOB-4F08","keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"HITAG 3","originalMake":"Kia","vehiclesRaw":"Niro (17-19), Niro EV (19-20)","vehicles":[{"make":"Kia","model":"Niro","startYear":2017,"endYear":2019},{"make":"Kia","model":"Niro EV","startYear":2019,"endYear":2020}],"emergencyPN":42679,"keyway":"KK12","emergencyPrice":17.99,"shellPN":null,"shellPrice":null,"logo":"KIA logo","frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":74,"priceB":49,"oem":24.95,"emergency":17.99,"shell":null}}},{"priceA":99,"priceB":null,"oem":null,"pn":5036,"fccid":"CQOFN00100","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"H-Chip Master 128-BIT","originalMake":"Kia","vehiclesRaw":"Forte (17-18), Forte5 (17-18)","vehicles":[{"make":"Kia","model":"Forte","startYear":2017,"endYear":2018},{"make":"Kia","model":"Forte5","startYear":2017,"endYear":2018}],"emergencyPN":43060,"keyway":"HY15","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"KIA logo","frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":99,"priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":119,"priceB":59,"oem":null,"pn":6505,"fccid":"SY5YPFGE06","keyType":"Proximity","buttons":"6 Button: L, U, P, H, PSD2 (Lock, Unlock, Panic, Hatch, Dual Power Sliding Doors)","inStock":null,"chip":"HITAG 3 PCF7920 BLANK","originalMake":"Kia","vehiclesRaw":"Sedona (15-21)","vehicles":[{"make":"Kia","model":"Sedona","startYear":2015,"endYear":2021}],"emergencyPN":42701,"keyway":"LX Short","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"KIA logo","frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":119,"priceB":59,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":154,"priceB":null,"oem":null,"pn":8584,"fccid":"SY5KHFNA433","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"PH 46","originalMake":"Kia","vehiclesRaw":"Cadenza (14-16), K900 (15-17)","vehicles":[{"make":"Kia","model":"Cadenza","startYear":2014,"endYear":2016},{"make":"Kia","model":"K900","startYear":2015,"endYear":2017}],"emergencyPN":42708,"keyway":"LX Short","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"KIA logo","frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":154,"priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":94,"priceB":49,"oem":null,"pn":8504,"fccid":"CQOTD00660","keyType":"Flip Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Kia","vehiclesRaw":"Forte (19-21)","vehicles":[{"make":"Kia","model":"Forte","startYear":2019,"endYear":2021}],"emergencyPN":7180,"keyway":"KK12","emergencyPrice":17.95,"shellPN":null,"shellPrice":null,"logo":"KIA logo","frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":94,"priceB":49,"oem":null,"emergency":17.95,"shell":null}}},{"priceA":84,"priceB":null,"oem":null,"pn":6510,"fccid":"OSLOKA-450T","keyType":"Flip Key","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"No","originalMake":"Hyundai","vehiclesRaw":"Kona (18-21)","vehicles":[{"make":"Hyundai","model":"Kona","startYear":2018,"endYear":2021}],"emergencyPN":7580,"keyway":"KK12","emergencyPrice":10.95,"shellPN":null,"shellPrice":null,"logo":"Hyundai logo","frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":84,"priceB":null,"oem":null,"emergency":10.95,"shell":null}}},{"priceA":199,"priceB":49,"oem":null,"pn":7840,"fccid":"TQ8-RKE-4F39","keyType":"Flip Key","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"No","originalMake":"Hyundai","vehiclesRaw":"Santa Fe (19-23)","vehicles":[{"make":"Hyundai","model":"Santa Fe","startYear":2019,"endYear":2023}],"emergencyPN":7580,"keyway":"KK12","emergencyPrice":10.95,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":199,"priceB":49,"oem":null,"emergency":10.95,"shell":null}}},{"priceA":34.95,"priceB":17.95,"oem":null,"pn":5057,"fccid":"TQ8-RKE-4F25, TQ8-RKE-4F16","keyType":"Flip Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Hyundai","vehiclesRaw":"Sonata (18-19)","vehicles":[{"make":"Hyundai","model":"Sonata","startYear":2018,"endYear":2019}],"emergencyPN":7628,"keyway":"LX Short","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Hyundai logo","frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":34.95,"priceB":17.95,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":139,"priceB":64,"oem":12.95,"pn":8288,"fccid":"TQ8-RKE-3F04","keyType":"Flip Key","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"No","originalMake":"Hyundai","vehiclesRaw":"Santa Fe (13-16)","vehicles":[{"make":"Hyundai","model":"Santa Fe","startYear":2013,"endYear":2016}],"emergencyPN":7650,"keyway":"HY18-R","emergencyPrice":15,"shellPN":null,"shellPrice":null,"logo":"Hyundai logo","frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":139,"priceB":64,"oem":12.95,"emergency":15,"shell":null}}},{"priceA":34.95,"priceB":17.95,"oem":null,"pn":8624,"fccid":"TQ8-RKE-4F16, TQ8-RKE-4F25","keyType":"Flip Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Hyundai","vehiclesRaw":"Sonata (15-17)","vehicles":[{"make":"Hyundai","model":"Sonata","startYear":2015,"endYear":2017}],"emergencyPN":7657,"keyway":"LX Short","emergencyPrice":7.99,"shellPN":null,"shellPrice":null,"logo":"Hyundai logo","frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":34.95,"priceB":17.95,"oem":null,"emergency":7.99,"shell":null}}},{"priceA":49,"priceB":29.95,"oem":null,"pn":8554,"fccid":"TQ8-RKE-3F05","keyType":"Flip Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Kia","vehiclesRaw":"Rio (14-17)","vehicles":[{"make":"Kia","model":"Rio","startYear":2014,"endYear":2017}],"emergencyPN":7656,"keyway":"LX Short","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"KIA logo","frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":49,"priceB":29.95,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":75,"priceB":39,"oem":null,"pn":5003,"fccid":"SY5JFRGE04","keyType":"Flip Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Kia","vehiclesRaw":"Optima (15-20)","vehicles":[{"make":"Kia","model":"Optima","startYear":2015,"endYear":2020}],"emergencyPN":7629,"keyway":"KK12","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"KIA logo","frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":75,"priceB":39,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":144,"priceB":null,"oem":null,"pn":8498,"fccid":"OSLOKA-875T, OSLOKA-910T","keyType":"Flip Key","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"No","originalMake":"Kia","vehiclesRaw":"Soul (14-19)","vehicles":[{"make":"Kia","model":"Soul","startYear":2014,"endYear":2019}],"emergencyPN":7656,"keyway":"LX Short","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"KIA logo","frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":144,"priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":24.95,"priceB":null,"oem":null,"pn":9626,"fccid":"OSLOKA-310T","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Kia","vehiclesRaw":"Optima (06-10)","vehicles":[{"make":"Kia","model":"Optima","startYear":2006,"endYear":2010}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"KIA logo","frequency":"313.85 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":24.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":44,"priceB":29,"oem":null,"pn":9551,"fccid":"OSLOKA-310T","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Hyundai","vehiclesRaw":"Elantra (07-11), Sonata (06-10)","vehicles":[{"make":"Hyundai","model":"Elantra","startYear":2007,"endYear":2011},{"make":"Hyundai","model":"Sonata","startYear":2006,"endYear":2010}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Hyundai logo","frequency":"313.85 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":44,"priceB":29,"oem":null,"emergency":null,"shell":null}}},{"priceA":44,"priceB":29,"oem":null,"pn":8133,"fccid":"OSLOKA-360T","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Hyundai","vehiclesRaw":"Elantra (11-16), Elantra Coupe (13-14)","vehicles":[{"make":"Hyundai","model":"Elantra","startYear":2011,"endYear":2016},{"make":"Hyundai","model":"Elantra Coupe","startYear":2013,"endYear":2014}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Hyundai logo","frequency":"313.85 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":44,"priceB":29,"oem":null,"emergency":null,"shell":null}}},{"priceA":137,"priceB":44,"oem":null,"pn":5581,"fccid":"OSLOKA-423T","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Hyundai","vehiclesRaw":"Elantra (17-20)","vehicles":[{"make":"Hyundai","model":"Elantra","startYear":2017,"endYear":2020}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":137,"priceB":44,"oem":null,"emergency":null,"shell":null}}},{"priceA":26,"priceB":17.95,"oem":null,"pn":9523,"fccid":"OSLOKA-630T","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Kia","vehiclesRaw":"Spectra (05-06)","vehicles":[{"make":"Kia","model":"Spectra","startYear":2005,"endYear":2006}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"KIA logo","frequency":"313.85 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":26,"priceB":17.95,"oem":null,"emergency":null,"shell":null}}},{"priceA":24,"priceB":14.95,"oem":null,"pn":9733,"fccid":"OSLOKA-674T","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Kia","vehiclesRaw":"Spectra (07)","vehicles":[{"make":"Kia","model":"Spectra","startYear":2007,"endYear":2007}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"KIA logo","frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":24,"priceB":14.95,"oem":null,"emergency":null,"shell":null}}},{"priceA":26,"priceB":14.95,"oem":null,"pn":9850,"fccid":"OSOKA-674T, OKA-674T","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Kia","vehiclesRaw":"Spectra (08-09)","vehicles":[{"make":"Kia","model":"Spectra","startYear":2008,"endYear":2009}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"KIA logo","frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":26,"priceB":14.95,"oem":null,"emergency":null,"shell":null}}},{"priceA":39,"priceB":29,"oem":null,"pn":9773,"fccid":"PLNHM-T011","keyType":"Remote Only","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"No","originalMake":"Kia","vehiclesRaw":"Rondo (07-10)","vehicles":[{"make":"Kia","model":"Rondo","startYear":2007,"endYear":2010}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"KIA logo","frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":39,"priceB":29,"oem":null,"emergency":null,"shell":null}}},{"priceA":21.95,"priceB":9.95,"oem":null,"pn":8540,"fccid":"TQ8-RKE-4F14","keyType":"Remote Only","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"No","originalMake":"Hyundai","vehiclesRaw":"Accent (14-17), Elantra (20)","vehicles":[{"make":"Hyundai","model":"Accent","startYear":2014,"endYear":2017},{"make":"Hyundai","model":"Elantra","startYear":2020,"endYear":2020}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Hyundai logo","frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":21.95,"priceB":9.95,"oem":null,"emergency":null,"shell":null}}},{"priceA":124,"priceB":null,"oem":null,"pn":8019,"fccid":"PINHA-T008","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Kia","vehiclesRaw":"Forte (09-13), Forte Koup (12-13)","vehicles":[{"make":"Kia","model":"Forte","startYear":2009,"endYear":2013},{"make":"Kia","model":"Forte Koup","startYear":2012,"endYear":2013}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"KIA logo","frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":124,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":44,"priceB":29,"oem":null,"pn":9904,"fccid":"SV3HMTX","keyType":"Remote Only","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"No","originalMake":"Kia","vehiclesRaw":"Borrego (09-11)","vehicles":[{"make":"Kia","model":"Borrego","startYear":2009,"endYear":2011}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809904,"shellPrice":9.95,"logo":"KIA logo","frequency":"315 MHz","battery":"2025 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":44,"priceB":29,"oem":null,"emergency":null,"shell":9.95}}},{"priceA":24.95,"priceB":14.95,"oem":null,"pn":9396,"fccid":"KR55WY8404","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Kia","vehiclesRaw":"Amanti (04-06)","vehicles":[{"make":"Kia","model":"Amanti","startYear":2004,"endYear":2006}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"KIA logo","frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":24.95,"priceB":14.95,"oem":null,"emergency":null,"shell":null}}},{"priceA":94,"priceB":19.95,"oem":null,"pn":8089,"fccid":"SV3-VQTXNA13","keyType":"Remote Only","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"No","originalMake":"Kia","vehiclesRaw":"Sedona (14)","vehicles":[{"make":"Kia","model":"Sedona","startYear":2014,"endYear":2014}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"KIA logo","frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":94,"priceB":19.95,"oem":null,"emergency":null,"shell":null}}},{"priceA":99,"priceB":null,"oem":null,"pn":8372,"fccid":"WAZSKE13D01","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"HITAG Pro","originalMake":"Mazda","vehiclesRaw":"3 (14-18), CX-3 (16-20), CX-5 (13-19), CX-9 (16-19)","vehicles":[{"make":"Mazda","model":"CX-3","startYear":2016,"endYear":2020},{"make":"Mazda","model":"CX-5","startYear":2013,"endYear":2019},{"make":"Mazda","model":"CX-9","startYear":2016,"endYear":2019}],"emergencyPN":42089,"keyway":"MZ31","emergencyPrice":8.95,"shellPN":null,"shellPrice":null,"logo":"Mazda logo","frequency":"315 MHz","battery":"2025 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":99,"priceB":null,"oem":null,"emergency":8.95,"shell":null}}},{"priceA":79,"priceB":null,"oem":null,"pn":8007,"fccid":"WAZSKE13D01","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"HITAG Pro","originalMake":"Mazda","vehiclesRaw":"3 (14-18), 6 (14-19), MX-5 Miata (16-19)","vehicles":[{"make":"Mazda","model":"MX-5 Miata","startYear":2016,"endYear":2019}],"emergencyPN":42089,"keyway":"MZ31","emergencyPrice":8.95,"shellPN":null,"shellPrice":null,"logo":"Mazda logo","frequency":"315 MHz","battery":"2025 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":79,"priceB":null,"oem":null,"emergency":8.95,"shell":null}}},{"priceA":149,"priceB":null,"oem":null,"pn":5167,"fccid":"WAZSKE13D03","keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"HITAG Pro","originalMake":"Mazda","vehiclesRaw":"CX-5 (20-25), CX-9 (20-23)","vehicles":[{"make":"Mazda","model":"CX-5","startYear":2020,"endYear":2025},{"make":"Mazda","model":"CX-9","startYear":2020,"endYear":2023}],"emergencyPN":42183,"keyway":"MZ31","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":149,"priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":129,"priceB":null,"oem":null,"pn":5166,"fccid":"WAZSKE13D03","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"HITAG Pro","originalMake":"Mazda","vehiclesRaw":"CX-3 (21), CX-5 (20-25), CX-9 (20-23)","vehicles":[{"make":"Mazda","model":"CX-3","startYear":2021,"endYear":2021},{"make":"Mazda","model":"CX-5","startYear":2020,"endYear":2025},{"make":"Mazda","model":"CX-9","startYear":2020,"endYear":2023}],"emergencyPN":42183,"keyway":"MZ31","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Mazda logo","frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":129,"priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":219,"priceB":null,"oem":null,"pn":5285,"fccid":"WAZSKE13D03","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"HITAG Pro","originalMake":"Mazda","vehiclesRaw":"6 (21), MX-5 Miata (21-23)","vehicles":[{"make":"Mazda","model":"MX-5 Miata","startYear":2021,"endYear":2023}],"emergencyPN":42183,"keyway":"MZ31","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":219,"priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":199,"priceB":null,"oem":null,"pn":5157,"fccid":"WAZSKE11D01","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"Yes","originalMake":"Mazda","vehiclesRaw":"3 (19-25), CX-30 (20-25), CX-70 (25), CX-90 (24-25), MX-30 (23), MX-5 Miata (24)","vehicles":[{"make":"Mazda","model":"CX-30","startYear":2020,"endYear":2025},{"make":"Mazda","model":"CX-70","startYear":2025,"endYear":2025},{"make":"Mazda","model":"CX-90","startYear":2024,"endYear":2025},{"make":"Mazda","model":"MX-30","startYear":2023,"endYear":2023},{"make":"Mazda","model":"MX-5 Miata","startYear":2024,"endYear":2024}],"emergencyPN":42183,"keyway":"MZ31","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Mazda logo","frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":199,"priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":149,"priceB":null,"oem":null,"pn":5158,"fccid":"WAZSKE11D01","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"Yes","originalMake":"Mazda","vehiclesRaw":"3 (19-25), MX-5 Miata (24)","vehicles":[{"make":"Mazda","model":"MX-5 Miata","startYear":2024,"endYear":2024}],"emergencyPN":42183,"keyway":"MZ31","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Mazda logo","frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":149,"priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":34,"priceB":21,"oem":null,"pn":9500,"fccid":"KPU41788","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Mazda","vehiclesRaw":"6 (06-08), Mazdaspeed6 (06-07), RX-8 (09-11)","vehicles":[{"make":"Mazda","model":"Mazdaspeed6","startYear":2006,"endYear":2007},{"make":"Mazda","model":"RX-8","startYear":2009,"endYear":2011}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"313.8 MHz","battery":"1620 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":34,"priceB":21,"oem":null,"emergency":null,"shell":null}}},{"priceA":34,"priceB":17.95,"oem":null,"pn":9587,"fccid":"BGBX1T478SKE125-01","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Mazda","vehiclesRaw":"3 (10-13), 6 (10-13), MX-5 Miata (05-15)","vehicles":[{"make":"Mazda","model":"MX-5 Miata","startYear":2005,"endYear":2015}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"1620 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":34,"priceB":17.95,"oem":null,"emergency":null,"shell":null}}},{"priceA":32,"priceB":21,"oem":null,"pn":9409,"fccid":"KPU41846","keyType":"Remote Only","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"No","originalMake":"Mazda","vehiclesRaw":"3 (04-06), 6 (03-05)","vehicles":[],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809813,"shellPrice":6.95,"logo":null,"frequency":"313.8 MHz","battery":"2025 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":32,"priceB":21,"oem":null,"emergency":null,"shell":6.95}}},{"priceA":129,"priceB":79,"oem":null,"pn":8487,"fccid":"OUC644M-KEY-N","keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"PH 46","originalMake":"Mitsubishi","vehiclesRaw":"Outlander (14-20)","vehicles":[{"make":"Mitsubishi","model":"Outlander","startYear":2014,"endYear":2020}],"emergencyPN":42007,"keyway":"MIT3","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Mitsubishi logo","frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":129,"priceB":79,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":194,"priceB":null,"oem":null,"pn":8597,"fccid":"OUC003M","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"HITAG 3","originalMake":"Mitsubishi","vehiclesRaw":"Mirage (15), Mirage G4 (17-19)","vehicles":[{"make":"Mitsubishi","model":"Mirage","startYear":2015,"endYear":2015},{"make":"Mitsubishi","model":"Mirage G4","startYear":2017,"endYear":2019}],"emergencyPN":42007,"keyway":"MIT3","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":194,"priceB":null,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":184,"priceB":null,"oem":null,"pn":8284,"fccid":"OUCJ166N","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"PH 46","originalMake":"Mitsubishi","vehiclesRaw":"Mirage (17-24), Mirage G4 (17-24)","vehicles":[{"make":"Mitsubishi","model":"Mirage","startYear":2017,"endYear":2024},{"make":"Mitsubishi","model":"Mirage G4","startYear":2017,"endYear":2024}],"emergencyPN":null,"keyway":"MIT3","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Mitsubishi logo","frequency":"315 MHz","battery":"1620 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":184,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":192,"priceB":null,"oem":null,"pn":9645,"fccid":"OUCJ166N","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"PH 46","originalMake":"Mitsubishi","vehiclesRaw":"Lancer (16-17)","vehicles":[{"make":"Mitsubishi","model":"Lancer","startYear":2016,"endYear":2017}],"emergencyPN":null,"keyway":"MIT3","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Mitsubishi logo","frequency":"315 MHz","battery":"1620 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":192,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":159,"priceB":null,"oem":null,"pn":9880,"fccid":"OUCG8D-625M-A","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"PH 46","originalMake":"Mitsubishi","vehiclesRaw":"Lancer Sportback (10-14), Outlander (07-17), Outlander Sport (11-16)","vehicles":[{"make":"Mitsubishi","model":"Lancer Sportback","startYear":2010,"endYear":2014},{"make":"Mitsubishi","model":"Outlander","startYear":2007,"endYear":2017},{"make":"Mitsubishi","model":"Outlander Sport","startYear":2011,"endYear":2016}],"emergencyPN":null,"keyway":"MIT3","emergencyPrice":null,"shellPN":809880,"shellPrice":6.95,"logo":"Mitsubishi logo","frequency":"315 MHz","battery":"1620 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":159,"priceB":null,"oem":null,"emergency":null,"shell":6.95}}},{"priceA":129,"priceB":null,"oem":null,"pn":9881,"fccid":"OUCG8D-625M-A","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"PH 46","originalMake":"Mitsubishi","vehiclesRaw":"Lancer (07-16), Lancer Evolution (08-15)","vehicles":[{"make":"Mitsubishi","model":"Lancer","startYear":2007,"endYear":2016},{"make":"Mitsubishi","model":"Lancer Evolution","startYear":2008,"endYear":2015}],"emergencyPN":null,"keyway":"MIT3","emergencyPrice":null,"shellPN":819732,"shellPrice":null,"logo":"Mitsubishi logo","frequency":"315 MHz","battery":"1620 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":129,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":24,"priceB":14.95,"oem":null,"pn":5670,"fccid":"HYQ12ABA","keyType":"Remote Only","buttons":"2 Button: L, U (Lock, Unlock)","inStock":null,"chip":"No","originalMake":"Mitsubishi","vehiclesRaw":"Chrysler Sebring Coupe (01), Dodge Stratus Coupe (01), Mitsubishi Eclipse (00-01), Galant (99-01)","vehicles":[{"make":"Chrysler","model":"Sebring Coupe","startYear":2001,"endYear":2001},{"make":"Dodge","model":"Stratus Coupe","startYear":2001,"endYear":2001},{"make":"Mitsubishi","model":"Eclipse","startYear":2000,"endYear":2001},{"make":"Mitsubishi","model":"Galant","startYear":1999,"endYear":2001}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"314.35 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":24,"priceB":14.95,"oem":null,"emergency":null,"shell":null}}},{"priceA":29,"priceB":14.95,"oem":null,"pn":9101,"fccid":"OUCG8D-525M-A","keyType":"Remote Only","buttons":"3 Button: L, U, T (Lock, Unlock, Trunk)","inStock":null,"chip":"No","originalMake":"Mitsubishi","vehiclesRaw":"Eclipse (02-05), Galant (02-05), Lancer (03-04), Lancer Evolution (03-06)","vehicles":[{"make":"Mitsubishi","model":"Eclipse","startYear":2002,"endYear":2005},{"make":"Mitsubishi","model":"Galant","startYear":2002,"endYear":2005},{"make":"Mitsubishi","model":"Lancer","startYear":2003,"endYear":2004},{"make":"Mitsubishi","model":"Lancer Evolution","startYear":2003,"endYear":2006}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809355,"shellPrice":null,"logo":null,"frequency":"313.85 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":29,"priceB":14.95,"oem":null,"emergency":null,"shell":null}}},{"priceA":29,"priceB":17.95,"oem":null,"pn":8021,"fccid":"CWTWB1U751","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"PH 46","originalMake":"Infiniti/Nissan","vehiclesRaw":"Cube (11-14), Juke (11-14), NV (13-19), Versa Sedan (12-13)","vehicles":[{"make":"Nissan","model":"Cube","startYear":2011,"endYear":2014},{"make":"Nissan","model":"Juke","startYear":2011,"endYear":2014},{"make":"Nissan","model":"NV","startYear":2013,"endYear":2019},{"make":"Nissan","model":"Versa Sedan","startYear":2012,"endYear":2013}],"emergencyPN":7642,"keyway":"DA34","emergencyPrice":8.99,"shellPN":null,"shellPrice":null,"logo":"Nissan logo","frequency":"315 MHz","battery":"1620 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":29,"priceB":17.95,"oem":null,"emergency":8.99,"shell":null}}},{"priceA":24.95,"priceB":9.95,"oem":null,"pn":8234,"fccid":"CWTWB1U751","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"No","originalMake":"Infiniti/Nissan","vehiclesRaw":"Versa Note (14-19), Versa Sedan (12-13)","vehicles":[{"make":"Nissan","model":"Versa Note","startYear":2014,"endYear":2019},{"make":"Nissan","model":"Versa Sedan","startYear":2012,"endYear":2013}],"emergencyPN":7642,"keyway":"DA34","emergencyPrice":8.99,"shellPN":null,"shellPrice":null,"logo":"Nissan logo","frequency":"315 MHz","battery":"1620 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":24.95,"priceB":9.95,"oem":null,"emergency":8.99,"shell":null}}},{"priceA":24.95,"priceB":9.95,"oem":null,"pn":8481,"fccid":"CWTWB1U816, CWTWB1U751","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"No","originalMake":"Infiniti/Nissan","vehiclesRaw":"Versa Sedan (14-19)","vehicles":[{"make":"Nissan","model":"Versa Sedan","startYear":2014,"endYear":2019}],"emergencyPN":7642,"keyway":"DA34","emergencyPrice":8.99,"shellPN":null,"shellPrice":null,"logo":"Nissan logo","frequency":"315 MHz","battery":"1620 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":24.95,"priceB":9.95,"oem":null,"emergency":8.99,"shell":null}}},{"priceA":59,"priceB":null,"oem":14.95,"pn":9139,"fccid":"KBRASTU15, CWTWB1U733, CWTWB1U821","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Infiniti/Nissan","vehiclesRaw":"Infiniti: G35 Coupe (03-06), G35 Sedan (03-06), I35 (02-04), QX56 (04-06); Nissan: 350Z (03-09), Altima (02-06), Maxima (02-06), Versa Sedan (07-08)","vehicles":[{"make":"Infiniti","model":"G35 Coupe","startYear":2003,"endYear":2006},{"make":"Infiniti","model":"G35 Sedan","startYear":2003,"endYear":2006},{"make":"Infiniti","model":"I35","startYear":2002,"endYear":2004},{"make":"Infiniti","model":"QX56","startYear":2004,"endYear":2006},{"make":"Nissan","model":"350Z","startYear":2003,"endYear":2009},{"make":"Nissan","model":"Altima","startYear":2002,"endYear":2006},{"make":"Nissan","model":"Maxima","startYear":2002,"endYear":2006},{"make":"Nissan","model":"Versa Sedan","startYear":2007,"endYear":2008}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809139,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2025 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":59,"priceB":null,"oem":14.95,"emergency":null,"shell":null}}},{"priceA":109,"priceB":null,"oem":null,"pn":42957,"fccid":null,"keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4C","originalMake":"Infiniti/Nissan","vehiclesRaw":"Q45 (97-01)","vehicles":[{"make":"Infiniti","model":"Q45","startYear":1997,"endYear":2001}],"emergencyPN":null,"keyway":"DA34","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Infiniti logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":109,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":29.95,"priceB":null,"oem":null,"pn":42956,"fccid":null,"keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4D 60","originalMake":"Infiniti/Nissan","vehiclesRaw":"Altima (00-04), Frontier (02-04), Maxima (00-03), Pathfinder (99-04), Sentra (00-06), Xterra (02-04)","vehicles":[{"make":"Nissan","model":"Altima","startYear":2000,"endYear":2004},{"make":"Nissan","model":"Frontier","startYear":2002,"endYear":2004},{"make":"Nissan","model":"Maxima","startYear":2000,"endYear":2003},{"make":"Nissan","model":"Pathfinder","startYear":1999,"endYear":2004},{"make":"Nissan","model":"Sentra","startYear":2000,"endYear":2006},{"make":"Nissan","model":"Xterra","startYear":2002,"endYear":2004}],"emergencyPN":null,"keyway":"DA34","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Nissan logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":29.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":7.99,"priceB":null,"oem":null,"pn":42105,"fccid":null,"keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4D 60","originalMake":"Infiniti/Nissan","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"DA34","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Strattec logo","frequency":null,"battery":null,"notes":"Replaces: AM40215-K-A","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":7.99,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":9.99,"priceB":null,"oem":null,"pn":40220,"fccid":null,"keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4D 60","originalMake":"Infiniti/Nissan","vehiclesRaw":"G20 (00-02), I30 (00-01), I35 (02-04), QX4 (99-03)","vehicles":[{"make":"Infiniti","model":"G20","startYear":2000,"endYear":2002},{"make":"Infiniti","model":"I30","startYear":2000,"endYear":2001},{"make":"Infiniti","model":"I35","startYear":2002,"endYear":2004},{"make":"Infiniti","model":"QX4","startYear":1999,"endYear":2003}],"emergencyPN":null,"keyway":"DA34","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Strattec logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":9.99,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":47.99,"priceB":null,"oem":null,"pn":42049,"fccid":null,"keyType":"Chip Key","buttons":null,"inStock":null,"chip":"PH 46","originalMake":"Infiniti/Nissan","vehiclesRaw":"Altima (05-06), Armada (05-15), Cube (09-14), Frontier (05-19), Maxima (04-06), NV (12-15), Pathfinder (05-12), Quest (04-10), Rogue (08-15), Sentra (07-19), Titan (04-17), Versa Hatchback (07-12), Versa Sedan (07-19), Xterra (05-15)","vehicles":[{"make":"Nissan","model":"Altima","startYear":2005,"endYear":2006},{"make":"Nissan","model":"Armada","startYear":2005,"endYear":2015},{"make":"Nissan","model":"Cube","startYear":2009,"endYear":2014},{"make":"Nissan","model":"Frontier","startYear":2005,"endYear":2019},{"make":"Nissan","model":"Maxima","startYear":2004,"endYear":2006},{"make":"Nissan","model":"NV","startYear":2012,"endYear":2015},{"make":"Nissan","model":"Pathfinder","startYear":2005,"endYear":2012},{"make":"Nissan","model":"Quest","startYear":2004,"endYear":2010},{"make":"Nissan","model":"Rogue","startYear":2008,"endYear":2015},{"make":"Nissan","model":"Sentra","startYear":2007,"endYear":2019},{"make":"Nissan","model":"Titan","startYear":2004,"endYear":2017},{"make":"Nissan","model":"Versa Hatchback","startYear":2007,"endYear":2012},{"make":"Nissan","model":"Versa Sedan","startYear":2007,"endYear":2019},{"make":"Nissan","model":"Xterra","startYear":2005,"endYear":2015}],"emergencyPN":null,"keyway":"DA34","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Nissan logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":47.99,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":7.49,"priceB":null,"oem":null,"pn":40263,"fccid":null,"keyType":"Chip Key","buttons":null,"inStock":null,"chip":"PH 46","originalMake":"Chevrolet","vehiclesRaw":"City Express (15-18)","vehicles":[{"make":"Chevrolet","model":"City Express","startYear":2015,"endYear":2018}],"emergencyPN":null,"keyway":"DA34","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":null,"battery":null,"notes":"Replaces: AM40216-K-A","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":7.49,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":169,"priceB":null,"oem":null,"pn":5055,"fccid":"HYQ14AHK","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"H-Chip Master 128-BIT","originalMake":"Subaru","vehiclesRaw":"Ascent (19-22), BRZ (22-23), Crosstrek (18-23), Forester (19-24), Impreza (17-23), Legacy (18-19), Outback (18-23), WRX (19-22)","vehicles":[{"make":"Subaru","model":"Ascent","startYear":2019,"endYear":2022},{"make":"Subaru","model":"BRZ","startYear":2022,"endYear":2023},{"make":"Subaru","model":"Crosstrek","startYear":2018,"endYear":2023},{"make":"Subaru","model":"Forester","startYear":2019,"endYear":2024},{"make":"Subaru","model":"Impreza","startYear":2017,"endYear":2023},{"make":"Subaru","model":"Legacy","startYear":2018,"endYear":2019},{"make":"Subaru","model":"Outback","startYear":2018,"endYear":2023},{"make":"Subaru","model":"WRX","startYear":2019,"endYear":2022}],"emergencyPN":40312,"keyway":"TOY40S","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Subaru logo","frequency":"433.92 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":169,"priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":174,"priceB":null,"oem":null,"pn":8612,"fccid":"HYQ14AHC","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"TI 4D 67 Toyota Master 40-BIT","originalMake":"Subaru","vehiclesRaw":"BRZ (15-20), Crosstrek (16-17), Forester (16-18), Impreza (15-17), Legacy (15-17), Outback (15-17), WRX (16-18), XV Crosstrek (15)","vehicles":[{"make":"Subaru","model":"BRZ","startYear":2015,"endYear":2020},{"make":"Subaru","model":"Crosstrek","startYear":2016,"endYear":2017},{"make":"Subaru","model":"Forester","startYear":2016,"endYear":2018},{"make":"Subaru","model":"Impreza","startYear":2015,"endYear":2017},{"make":"Subaru","model":"Legacy","startYear":2015,"endYear":2017},{"make":"Subaru","model":"Outback","startYear":2015,"endYear":2017},{"make":"Subaru","model":"WRX","startYear":2016,"endYear":2018},{"make":"Subaru","model":"XV Crosstrek","startYear":2015,"endYear":2015}],"emergencyPN":40312,"keyway":"TOY40S","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Subaru logo","frequency":"314.35 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":174,"priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":119,"priceB":null,"oem":null,"pn":8098,"fccid":"CWTWB1U811","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"TI 4D 60-80bit-Subaru-PW17","originalMake":"Subaru","vehiclesRaw":"Crosstrek (16-17), Forester (14-18), Impreza (11-16), Legacy (15-17), Outback (15-17), WRX (15-19), XV Crosstrek (13-15)","vehicles":[{"make":"Subaru","model":"Crosstrek","startYear":2016,"endYear":2017},{"make":"Subaru","model":"Forester","startYear":2014,"endYear":2018},{"make":"Subaru","model":"Impreza","startYear":2011,"endYear":2016},{"make":"Subaru","model":"Legacy","startYear":2015,"endYear":2017},{"make":"Subaru","model":"Outback","startYear":2015,"endYear":2017},{"make":"Subaru","model":"WRX","startYear":2015,"endYear":2019},{"make":"Subaru","model":"XV Crosstrek","startYear":2013,"endYear":2015}],"emergencyPN":null,"keyway":"B110","emergencyPrice":null,"shellPN":808285,"shellPrice":7.95,"logo":"Subaru logo","frequency":"315 MHz","battery":"1620 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":119,"priceB":null,"oem":null,"emergency":null,"shell":7.95}}},{"priceA":144,"priceB":null,"oem":null,"pn":5038,"fccid":"HYQ12BBY","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"TI 4D 60","originalMake":"Subaru","vehiclesRaw":"BRZ (15-20)","vehicles":[{"make":"Subaru","model":"BRZ","startYear":2015,"endYear":2020}],"emergencyPN":null,"keyway":"TR47","emergencyPrice":null,"shellPN":809748,"shellPrice":6.95,"logo":"Subaru logo","frequency":"314.35 MHz","battery":"2016 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":144,"priceB":null,"oem":null,"emergency":null,"shell":6.95}}},{"priceA":79,"priceB":null,"oem":null,"pn":9455,"fccid":"NHVWB1U711","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Subaru","vehiclesRaw":"B9 Tribeca (06-07), Forester (09-10), Legacy (05-07), Outback (05-07), Tribeca (13)","vehicles":[{"make":"Subaru","model":"B9 Tribeca","startYear":2006,"endYear":2007},{"make":"Subaru","model":"Forester","startYear":2009,"endYear":2010},{"make":"Subaru","model":"Legacy","startYear":2005,"endYear":2007},{"make":"Subaru","model":"Outback","startYear":2005,"endYear":2007},{"make":"Subaru","model":"Tribeca","startYear":2013,"endYear":2013}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809455,"shellPrice":null,"logo":null,"frequency":"433.92 MHz","battery":"2025 qty 1","notes":"Replaces: OE9401-R-A","stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":79,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":162,"priceB":null,"oem":null,"pn":9603,"fccid":"NHVWB1U711","keyType":"Remote Only","buttons":"2 Button: L, U (Lock, Unlock)","inStock":null,"chip":"No","originalMake":"Subaru","vehiclesRaw":"Baja (06), Forester (06-08), Impreza (06-07)","vehicles":[{"make":"Subaru","model":"Baja","startYear":2006,"endYear":2006},{"make":"Subaru","model":"Forester","startYear":2006,"endYear":2008},{"make":"Subaru","model":"Impreza","startYear":2006,"endYear":2007}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809603,"shellPrice":null,"logo":"Subaru logo","frequency":"433.92 MHz","battery":"2025 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":162,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":169,"priceB":null,"oem":null,"pn":8016,"fccid":"NHVWB1U711","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Subaru","vehiclesRaw":"Forester (10-13), Impreza (10-13)","vehicles":[{"make":"Subaru","model":"Forester","startYear":2010,"endYear":2013},{"make":"Subaru","model":"Impreza","startYear":2010,"endYear":2013}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809455,"shellPrice":null,"logo":null,"frequency":"433.92 MHz","battery":"2025 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":169,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":194,"priceB":null,"oem":null,"pn":9924,"fccid":"NHVWB1U711","keyType":"Remote Only","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"No","originalMake":"Subaru","vehiclesRaw":"Impreza (08-09)","vehicles":[{"make":"Subaru","model":"Impreza","startYear":2008,"endYear":2009}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809455,"shellPrice":null,"logo":null,"frequency":"433.92 MHz","battery":"2025 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":194,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":54,"priceB":null,"oem":null,"pn":40302,"fccid":null,"keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4D 60-80bit-Subaru-PW17","originalMake":"Subaru","vehiclesRaw":"Crosstrek (16-17), Forester (14-18), Impreza (15-16), Legacy (15-19), Outback (15-19), WRX (15-21)","vehicles":[{"make":"Subaru","model":"Crosstrek","startYear":2016,"endYear":2017},{"make":"Subaru","model":"Forester","startYear":2014,"endYear":2018},{"make":"Subaru","model":"Impreza","startYear":2015,"endYear":2016},{"make":"Subaru","model":"Legacy","startYear":2015,"endYear":2019},{"make":"Subaru","model":"Outback","startYear":2015,"endYear":2019},{"make":"Subaru","model":"WRX","startYear":2015,"endYear":2021}],"emergencyPN":null,"keyway":"B110","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Subaru logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":54,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":12.95,"priceB":null,"oem":null,"pn":42771,"fccid":null,"keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4D 60","originalMake":"Subaru","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"DA34","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":12.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":44,"priceB":null,"oem":null,"pn":42774,"fccid":null,"keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4D 62","originalMake":"Subaru","vehiclesRaw":"B9 Tribeca (06-07), Legacy (05-10), Outback (05-06), Tribeca (08-12)","vehicles":[{"make":"Subaru","model":"B9 Tribeca","startYear":2006,"endYear":2007},{"make":"Subaru","model":"Legacy","startYear":2005,"endYear":2010},{"make":"Subaru","model":"Outback","startYear":2005,"endYear":2006},{"make":"Subaru","model":"Tribeca","startYear":2008,"endYear":2012}],"emergencyPN":null,"keyway":"DA34","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Subaru logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":44,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":11.25,"priceB":null,"oem":null,"pn":48180,"fccid":null,"keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4D 62 PW:FF Subaru","originalMake":"Subaru","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"SUB2","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":11.25,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":119,"priceB":null,"oem":null,"pn":42777,"fccid":null,"keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4D 62 PW:FF Subaru","originalMake":"Subaru","vehiclesRaw":"Forester (09-10), Impreza (08-10)","vehicles":[{"make":"Subaru","model":"Forester","startYear":2009,"endYear":2010},{"make":"Subaru","model":"Impreza","startYear":2008,"endYear":2010}],"emergencyPN":null,"keyway":"SUB2","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Subaru logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":119,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":9.95,"priceB":null,"oem":null,"pn":42901,"fccid":null,"keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4D 60-40bit-Subaru-PW17","originalMake":"Subaru","vehiclesRaw":"Forester (11-13), Impreza (10-14), Legacy (10-14), Outback (10-14)","vehicles":[{"make":"Subaru","model":"Forester","startYear":2011,"endYear":2013},{"make":"Subaru","model":"Impreza","startYear":2010,"endYear":2014},{"make":"Subaru","model":"Legacy","startYear":2010,"endYear":2014},{"make":"Subaru","model":"Outback","startYear":2010,"endYear":2014}],"emergencyPN":null,"keyway":"SUB2","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":9.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":109,"priceB":null,"oem":null,"pn":42778,"fccid":null,"keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4D 60-40bit-Subaru-PW17","originalMake":"Subaru","vehiclesRaw":"Forester (11-13), Legacy (10-14), Outback (10-14)","vehicles":[{"make":"Subaru","model":"Forester","startYear":2011,"endYear":2013},{"make":"Subaru","model":"Legacy","startYear":2010,"endYear":2014},{"make":"Subaru","model":"Outback","startYear":2010,"endYear":2014}],"emergencyPN":null,"keyway":"SUB2","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Subaru logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":109,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":159,"priceB":null,"oem":null,"pn":8276,"fccid":"HYQ14FBF","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Lexus: UX 200 (19-21)","vehicles":[{"make":"Lexus","model":"UX 200","startYear":2019,"endYear":2021}],"emergencyPN":42196,"keyway":"TOY40S","emergencyPrice":11.95,"shellPN":null,"shellPrice":null,"logo":"Lexus logo","frequency":"312.1-314.35 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":159,"priceB":null,"oem":null,"emergency":11.95,"shell":null}}},{"priceA":154,"priceB":null,"oem":null,"pn":5044,"fccid":"HYQ14FBF","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Lexus: LC 500 (18-20), LC 500h (18-20)","vehicles":[{"make":"Lexus","model":"LC 500","startYear":2018,"endYear":2020},{"make":"Lexus","model":"LC 500h","startYear":2018,"endYear":2020}],"emergencyPN":42196,"keyway":"TOY40S","emergencyPrice":11.95,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"312.1-314.35 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":154,"priceB":null,"oem":null,"emergency":11.95,"shell":null}}},{"priceA":164,"priceB":null,"oem":null,"pn":5108,"fccid":"HYQ14FBF","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Lexus: LS 500h (18-21)","vehicles":[{"make":"Lexus","model":"LS 500h","startYear":2018,"endYear":2021}],"emergencyPN":42198,"keyway":"TOY40S","emergencyPrice":36,"shellPN":null,"shellPrice":null,"logo":"Blue Lexus logo","frequency":"312.1-314.35 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":164,"priceB":null,"oem":null,"emergency":36,"shell":null}}},{"priceA":159,"priceB":null,"oem":null,"pn":8279,"fccid":"HYQ14FBF","keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":"Yes","chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Lexus: UX 200 (19-21)","vehicles":[{"make":"Lexus","model":"UX 200","startYear":2019,"endYear":2021}],"emergencyPN":42196,"keyway":"TOY40S","emergencyPrice":11.95,"shellPN":null,"shellPrice":null,"logo":"Lexus logo","frequency":"314.35 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":159,"priceB":null,"oem":null,"emergency":11.95,"shell":null}}},{"priceA":149,"priceB":94,"oem":null,"pn":5016,"fccid":"HYQ14FBA","keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":"Yes","chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Lexus: LX 570 (16-20), NX 200t (16-18), NX 300 (18-20), NX 300h (16-20)","vehicles":[{"make":"Lexus","model":"LX 570","startYear":2016,"endYear":2020},{"make":"Lexus","model":"NX 200t","startYear":2016,"endYear":2018},{"make":"Lexus","model":"NX 300","startYear":2018,"endYear":2020},{"make":"Lexus","model":"NX 300h","startYear":2016,"endYear":2020}],"emergencyPN":8360,"keyway":"TOY40S","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"312.1-314.35 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":149,"priceB":94,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":149,"priceB":null,"oem":null,"pn":8651,"fccid":"HYQ14FBA","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Lexus: RC F (15-16)","vehicles":[{"make":"Lexus","model":"RC F","startYear":2015,"endYear":2016}],"emergencyPN":8360,"keyway":"TOY40S","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Lexus logo","frequency":"312.1-314.35 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":149,"priceB":null,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":289,"priceB":null,"oem":null,"pn":8297,"fccid":"HYQ14ACX","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"4D 67 Smart Card Toyota & Lexus","originalMake":"Lexus/Toyota","vehiclesRaw":"Lexus: LS 460 (13-17), LS 600hL (13-16)","vehicles":[{"make":"Lexus","model":"LS 460","startYear":2013,"endYear":2017},{"make":"Lexus","model":"LS 600hL","startYear":2013,"endYear":2016}],"emergencyPN":8383,"keyway":"TOY40S","emergencyPrice":7.95,"shellPN":null,"shellPrice":null,"logo":"Lexus logo","frequency":"314.35 MHz","battery":"1632 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":289,"priceB":null,"oem":null,"emergency":7.95,"shell":null}}},{"priceA":129,"priceB":94,"oem":null,"pn":8218,"fccid":"HYQ14ACX","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"4D 67 Smart Card Toyota & Lexus","originalMake":"Lexus/Toyota","vehiclesRaw":"Lexus: CT 200h (11-17)","vehicles":[{"make":"Lexus","model":"CT 200h","startYear":2011,"endYear":2017}],"emergencyPN":9959,"keyway":"LX Short","emergencyPrice":7.95,"shellPN":808218,"shellPrice":17.99,"logo":"Lexus logo","frequency":"314.35 MHz","battery":"1632 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":129,"priceB":94,"oem":null,"emergency":7.95,"shell":17.99}}},{"priceA":149,"priceB":null,"oem":null,"pn":8056,"fccid":"HYQ14ACX","keyType":"Proximity","buttons":"4 Button: L, U, P, RG (Lock, Unlock, Panic, Rear Glass)","inStock":"Yes","chip":"4D 67 Smart Card Toyota & Lexus","originalMake":"Lexus/Toyota","vehiclesRaw":"Lexus: GX 460 (10-19)","vehicles":[{"make":"Lexus","model":"GX 460","startYear":2010,"endYear":2019}],"emergencyPN":9959,"keyway":"LX Short","emergencyPrice":7.95,"shellPN":808013,"shellPrice":17.99,"logo":"Lexus logo","frequency":"314.35 MHz","battery":"1632 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":149,"priceB":null,"oem":null,"emergency":7.95,"shell":17.99}}},{"priceA":144,"priceB":89,"oem":null,"pn":8329,"fccid":"HYQ14ACX","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"4D 67 Smart Card Toyota & Lexus","originalMake":"Lexus/Toyota","vehiclesRaw":"Scion: tC (13-16)","vehicles":[{"make":"Scion","model":"tC","startYear":2013,"endYear":2016}],"emergencyPN":9770,"keyway":"LX Short","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Scion logo","frequency":"314.35 MHz","battery":"1632 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":144,"priceB":89,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":179,"priceB":null,"oem":null,"pn":8194,"fccid":"WAZSKE13D01","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"HITAG Pro","originalMake":"Lexus/Toyota","vehiclesRaw":"Scion: iA (16)","vehicles":[{"make":"Scion","model":"iA","startYear":2016,"endYear":2016}],"emergencyPN":42089,"keyway":"MZ31","emergencyPrice":8.95,"shellPN":null,"shellPrice":null,"logo":"Scion logo","frequency":"315 MHz","battery":"2025 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":179,"priceB":null,"oem":null,"emergency":8.95,"shell":null}}},{"priceA":265,"priceB":89,"oem":null,"pn":8488,"fccid":"HYQ14ACX","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"4D 67 Smart Card Toyota & Lexus","originalMake":"Lexus/Toyota","vehiclesRaw":"Scion: FR-S (13-16)","vehicles":[{"make":"Scion","model":"FR-S","startYear":2013,"endYear":2016}],"emergencyPN":9770,"keyway":"LX Short","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Scion logo","frequency":"314.35 MHz","battery":"1632 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":265,"priceB":89,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":174,"priceB":null,"oem":null,"pn":5114,"fccid":"HYQ14FBA","keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":"Yes","chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: Land Cruiser (18-19)","vehicles":[{"make":"Toyota","model":"Land Cruiser","startYear":2018,"endYear":2019}],"emergencyPN":42197,"keyway":"TOY40S","emergencyPrice":28,"shellPN":null,"shellPrice":null,"logo":"Land Cruiser logo","frequency":"312.1-314.35 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":174,"priceB":null,"oem":null,"emergency":28,"shell":null}}},{"priceA":154,"priceB":null,"oem":null,"pn":5047,"fccid":"MOZBR1ET","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: C-HR (18-20)","vehicles":[{"make":"Toyota","model":"C-HR","startYear":2018,"endYear":2020}],"emergencyPN":9899,"keyway":"TOY40S","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"C-HR logo","frequency":"312.1-314.35 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":154,"priceB":null,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":149,"priceB":null,"oem":null,"pn":5028,"fccid":"HYQ14FBE","keyType":"Proximity","buttons":"4 Button: L, U, P, AC (Lock, Unlock, Panic, Air Conditioning)","inStock":"Yes","chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: Prius Prime (17-21)","vehicles":[{"make":"Toyota","model":"Prius Prime","startYear":2017,"endYear":2021}],"emergencyPN":9899,"keyway":"TOY40S","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Toyota Prius Prime logo","frequency":"312.1-314.35 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":149,"priceB":null,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":169,"priceB":null,"oem":null,"pn":5063,"fccid":"HYQ14FLA","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: Camry (18-24)","vehicles":[{"make":"Toyota","model":"Camry","startYear":2018,"endYear":2024}],"emergencyPN":9899,"keyway":"TOY40S","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Blue Toyota Camry logo","frequency":"312.1-314.35 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":169,"priceB":null,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":169,"priceB":null,"oem":null,"pn":5112,"fccid":"HYQ14FBE","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: Avalon (19-20)","vehicles":[{"make":"Toyota","model":"Avalon","startYear":2019,"endYear":2020}],"emergencyPN":9899,"keyway":"TOY40S","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Toyota Avalon logo","frequency":"312.1-314.35 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":169,"priceB":null,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":149,"priceB":null,"oem":null,"pn":8282,"fccid":"HYQ14FBA","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: Prius c (12-19), Prius v (17), RAV4 (15-18)","vehicles":[{"make":"Toyota","model":"Prius c","startYear":2012,"endYear":2019},{"make":"Toyota","model":"Prius v","startYear":2017,"endYear":2017},{"make":"Toyota","model":"RAV4","startYear":2015,"endYear":2018}],"emergencyPN":8881,"keyway":"TOY40S","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Toyota logo","frequency":"312.1-314.35 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":149,"priceB":null,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":169,"priceB":null,"oem":null,"pn":5357,"fccid":"HYQ14FBC","keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":"Yes","chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: RAV4 (19-22)","vehicles":[{"make":"Toyota","model":"RAV4","startYear":2019,"endYear":2022}],"emergencyPN":9899,"keyway":"TOY40S","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"RAV4 logo","frequency":"312.1-314.35 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":169,"priceB":null,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":149,"priceB":94,"oem":null,"pn":8422,"fccid":"HYQ14FBA","keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":"Yes","chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: RAV4 (13-18)","vehicles":[{"make":"Toyota","model":"RAV4","startYear":2013,"endYear":2018}],"emergencyPN":8881,"keyway":"TOY40S","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Toyota logo","frequency":"312.1-314.35 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":149,"priceB":94,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":157,"priceB":89,"oem":null,"pn":9810,"fccid":"HYQ14ACX","keyType":"Proximity","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"4D 67 Smart Card Toyota & Lexus","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: Prius (10-15), Prius v (12-16)","vehicles":[{"make":"Toyota","model":"Prius","startYear":2010,"endYear":2015},{"make":"Toyota","model":"Prius v","startYear":2012,"endYear":2016}],"emergencyPN":9770,"keyway":"LX Short","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Toyota logo","frequency":"314.35 MHz","battery":"1632 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":157,"priceB":89,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":149,"priceB":null,"oem":null,"pn":8082,"fccid":"HYQ14ACX","keyType":"Proximity","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":"Yes","chip":"4D 67 Smart Card Toyota & Lexus","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: Venza (10-16)","vehicles":[{"make":"Toyota","model":"Venza","startYear":2010,"endYear":2016}],"emergencyPN":9770,"keyway":"LX Short","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Toyota logo","frequency":"314.35 MHz","battery":"1632 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":149,"priceB":null,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":159,"priceB":null,"oem":null,"pn":8186,"fccid":"HYQ14ADR","keyType":"Proximity","buttons":"6 Button: L, U, P, R, PSD2 (Lock, Unlock, Panic, Rear, Dual Power Sliding Doors)","inStock":"Yes","chip":"4D 67 Smart Card Toyota & Lexus","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: Sienna (11-20)","vehicles":[{"make":"Toyota","model":"Sienna","startYear":2011,"endYear":2020}],"emergencyPN":8187,"keyway":"TOY40S","emergencyPrice":6.95,"shellPN":null,"shellPrice":null,"logo":"Toyota logo","frequency":"314.35 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":159,"priceB":null,"oem":null,"emergency":6.95,"shell":null}}},{"priceA":184,"priceB":null,"oem":null,"pn":8699,"fccid":"WAZSKE13D01","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"HITAG Pro","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: Yaris (19-20), Yaris iA (17-18)","vehicles":[{"make":"Toyota","model":"Yaris","startYear":2019,"endYear":2020},{"make":"Toyota","model":"Yaris iA","startYear":2017,"endYear":2018}],"emergencyPN":42089,"keyway":"MZ31","emergencyPrice":8.95,"shellPN":null,"shellPrice":null,"logo":"Toyota logo","frequency":"315 MHz","battery":"2025 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":184,"priceB":null,"oem":null,"emergency":8.95,"shell":null}}},{"priceA":149,"priceB":null,"oem":null,"pn":5012,"fccid":"HYQ12BFB, HYQ12BFA","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: Corolla iM (17-18)","vehicles":[{"make":"Toyota","model":"Corolla iM","startYear":2017,"endYear":2018}],"emergencyPN":7670,"keyway":"LX Short","emergencyPrice":"Discontinued","shellPN":null,"shellPrice":null,"logo":"Toyota logo","frequency":"314.35 MHz","battery":"1620 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":149,"priceB":null,"oem":null,"emergency":"Discontinued","shell":null}}},{"priceA":135,"priceB":null,"oem":null,"pn":8533,"fccid":"HYQ12BFA","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":"Yes","chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Scion: iM (16)","vehicles":[{"make":"Scion","model":"iM","startYear":2016,"endYear":2016}],"emergencyPN":7670,"keyway":"LX Short","emergencyPrice":"Discontinued","shellPN":null,"shellPrice":null,"logo":"Scion logo","frequency":"312.1-314.35 MHz","battery":"1620 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":135,"priceB":null,"oem":null,"emergency":"Discontinued","shell":null}}},{"priceA":129,"priceB":59,"oem":null,"pn":5106,"fccid":"HYQ12BGF, HYQ12BFB","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":"Yes","chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: 4Runner (22), Camry (18-24), Corolla (21-25)","vehicles":[{"make":"Toyota","model":"4Runner","startYear":2022,"endYear":2022},{"make":"Toyota","model":"Camry","startYear":2018,"endYear":2024},{"make":"Toyota","model":"Corolla","startYear":2021,"endYear":2025}],"emergencyPN":7626,"keyway":"LX Short","emergencyPrice":"Discontinued","shellPN":null,"shellPrice":null,"logo":"Toyota logo","frequency":"312.1-314.35 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":129,"priceB":59,"oem":null,"emergency":"Discontinued","shell":null}}},{"priceA":129,"priceB":54,"oem":null,"pn":6503,"fccid":"HYQ12BDP, HYQ12BEL","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: Tacoma (16-21)","vehicles":[{"make":"Toyota","model":"Tacoma","startYear":2016,"endYear":2021}],"emergencyPN":null,"keyway":"TR47","emergencyPrice":null,"shellPN":808871,"shellPrice":6.95,"logo":"Toyota logo","frequency":"312.1-314.35 MHz","battery":"2016 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":129,"priceB":54,"oem":null,"emergency":null,"shell":6.95}}},{"vehiclesRaw":"Toyota: Prius c (12-18)","logo":"Toyota logo","priceB":49,"emergencyPN":null,"distributorPrices":{"KeylessRide":{"priceA":94,"priceB":49,"oem":null,"emergency":null,"shell":6.95}},"emergencyPrice":null,"frequency":"312.1-314.35 MHz","fccid":"HYQ12BDM","stockQty":0,"keyway":"TR47","notes":null,"keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","pn":8373,"battery":"2016 qty 1","inStock":null,"shellPN":808871,"originalMake":"Lexus/Toyota","priceA":94,"shellPrice":6.95,"vehicles":[{"make":"Toyota","model":"Prius c","startYear":2012,"endYear":2018}],"oem":null,"chip":"No"},{"priceA":134,"priceB":null,"oem":null,"pn":8457,"fccid":"MOZB52TH","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"TI 4D 67 Master G 80-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Scion: iQ (13-15), tC (13-16), xD (13)","vehicles":[{"make":"Scion","model":"iQ","startYear":2013,"endYear":2015},{"make":"Scion","model":"tC","startYear":2013,"endYear":2016},{"make":"Scion","model":"xD","startYear":2013,"endYear":2013}],"emergencyPN":null,"keyway":"TR47","emergencyPrice":null,"shellPN":808871,"shellPrice":6.95,"logo":"Scion logo","frequency":"314.35 MHz ASK","battery":"2016 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":134,"priceB":null,"oem":null,"emergency":null,"shell":6.95}}},{"vehiclesRaw":"Toyota: Corolla (14-19)","logo":"Toyota logo","priceB":47.95,"emergencyPN":null,"distributorPrices":{"KeylessRide":{"priceA":94,"priceB":47.95,"oem":null,"emergency":null,"shell":6.95}},"emergencyPrice":null,"frequency":"312.1-314.35 MHz","fccid":"HYQ12BEL","stockQty":0,"keyway":"TR47","notes":null,"keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","pn":8477,"battery":"2016 qty 1","inStock":null,"shellPN":808477,"originalMake":"Lexus/Toyota","priceA":94,"shellPrice":6.95,"vehicles":[{"make":"Toyota","model":"Corolla","startYear":2014,"endYear":2019}],"oem":null,"chip":"Yes, H-Chip Master 128-BIT"},{"vehiclesRaw":"Toyota: Camry (15-17)","logo":"Toyota logo","priceB":49,"emergencyPN":null,"distributorPrices":{"KeylessRide":{"priceA":94,"priceB":49,"oem":null,"emergency":null,"shell":6.95}},"emergencyPrice":null,"frequency":"312.1-314.35 MHz","fccid":"HYQ12BDM","stockQty":0,"keyway":"TR47","notes":null,"keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","pn":8626,"battery":"2016 qty 1","inStock":null,"shellPN":808477,"originalMake":"Lexus/Toyota","priceA":94,"shellPrice":6.95,"vehicles":[{"make":"Toyota","model":"Camry","startYear":2015,"endYear":2017}],"oem":null,"chip":"Yes, H-Chip Master 128-BIT"},{"priceA":89,"priceB":17.95,"oem":null,"pn":8061,"fccid":"GQ4-29T","keyType":"Remote Head Key","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"TI 4D 67 Master G 80-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: Venza (10-16)","vehicles":[{"make":"Toyota","model":"Venza","startYear":2010,"endYear":2016}],"emergencyPN":null,"keyway":"TR47","emergencyPrice":null,"shellPN":809593,"shellPrice":6.95,"logo":"Toyota logo","frequency":"315 MHz","battery":"2025 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":89,"priceB":17.95,"oem":null,"emergency":null,"shell":6.95}}},{"priceA":89,"priceB":17.95,"oem":null,"pn":8062,"fccid":"GQ4-29T","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","inStock":null,"chip":"TI 4D 67 Master G 80-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: Venza (10-16)","vehicles":[{"make":"Toyota","model":"Venza","startYear":2010,"endYear":2016}],"emergencyPN":null,"keyway":"TR47","emergencyPrice":null,"shellPN":809748,"shellPrice":6.95,"logo":"Toyota logo","frequency":"315 MHz","battery":"2025 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":89,"priceB":17.95,"oem":null,"emergency":null,"shell":6.95}}},{"priceA":74,"priceB":24.95,"oem":null,"pn":8093,"fccid":"GQ4-29T","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"TI 4D 67 Master G 80-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: Corolla (10-13)","vehicles":[{"make":"Toyota","model":"Corolla","startYear":2010,"endYear":2013}],"emergencyPN":null,"keyway":"TR47","emergencyPrice":null,"shellPN":809748,"shellPrice":6.95,"logo":"Toyota logo","frequency":"315 MHz","battery":"2025 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":74,"priceB":24.95,"oem":null,"emergency":null,"shell":6.95}}},{"priceA":74,"priceB":24.95,"oem":null,"pn":9940,"fccid":"GQ4-29T","keyType":"Remote Head Key","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","inStock":null,"chip":"Yes, TI 4D 67 Toyota Master 40-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota Avalon (08-12); Corolla (09-10); Matrix (09-10)","vehicles":[{"make":"Toyota","model":"Avalon","startYear":2008,"endYear":2012},{"make":"Toyota","model":"Corolla","startYear":2009,"endYear":2010},{"make":"Toyota","model":"Matrix","startYear":2009,"endYear":2010}],"emergencyPN":null,"keyway":"TR47","emergencyPrice":null,"shellPN":"AM809748-SH-A","shellPrice":6.95,"logo":"Toyota logo","frequency":"315 MHz","battery":"2025 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":74,"priceB":24.95,"oem":null,"emergency":null,"shell":6.95}}},{"priceA":84,"priceB":39,"oem":14.95,"pn":9367,"fccid":"GQ43VT20T","keyType":"Remote Only","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","inStock":null,"chip":"No","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: Highlander (08-13), Sequoia (08-18), Sienna (04-20), Tacoma (05-15), Tundra (07-18)","vehicles":[{"make":"Toyota","model":"Highlander","startYear":2008,"endYear":2013},{"make":"Toyota","model":"Sequoia","startYear":2008,"endYear":2018},{"make":"Toyota","model":"Sienna","startYear":2004,"endYear":2020},{"make":"Toyota","model":"Tacoma","startYear":2005,"endYear":2015},{"make":"Toyota","model":"Tundra","startYear":2007,"endYear":2018}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809367,"shellPrice":7.95,"logo":"Toyota logo","frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":84,"priceB":39,"oem":14.95,"emergency":null,"shell":7.95}}},{"priceA":99,"priceB":39,"oem":null,"pn":9368,"fccid":"GQ43VT20T","keyType":"Remote Only","buttons":"4 Button: L, U, P, PSD (Lock, Unlock, Panic, Power Sliding Door)","inStock":null,"chip":"No","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: Sienna (04-16)","vehicles":[{"make":"Toyota","model":"Sienna","startYear":2004,"endYear":2016}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809366,"shellPrice":7.95,"logo":"Toyota logo","frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":99,"priceB":39,"oem":null,"emergency":null,"shell":7.95}}},{"priceA":34,"priceB":21.95,"oem":null,"pn":9319,"fccid":"GQ43VT14T","keyType":"Remote Only","buttons":"3 Button: L, U, H (Lock, Unlock, Hatch)","inStock":null,"chip":"No","originalMake":"Lexus/Toyota","vehiclesRaw":"Pontiac: Vibe (03-08)","vehicles":[{"make":"Pontiac","model":"Vibe","startYear":2003,"endYear":2008}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":34,"priceB":21.95,"oem":null,"emergency":null,"shell":null}}},{"priceA":75,"priceB":39,"oem":11.95,"pn":9775,"fccid":"GQ43VT20T","keyType":"Remote Only","buttons":"5 Button: L, U, P, PSD2 (Lock, Unlock, Panic, Dual Power Sliding Doors)","inStock":null,"chip":"No","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: Sienna (04-20)","vehicles":[{"make":"Toyota","model":"Sienna","startYear":2004,"endYear":2020}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809775,"shellPrice":6.95,"logo":"Toyota logo","frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":75,"priceB":39,"oem":11.95,"emergency":null,"shell":6.95}}},{"priceA":115,"priceB":39,"oem":11.95,"pn":9383,"fccid":"GQ43VT20T","keyType":"Remote Only","buttons":"6 Button: L, U, P, R, PSD2 (Lock, Unlock, Panic, Rear, Dual Power Sliding Doors)","inStock":null,"chip":"No","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota: Sienna (04-20)","vehicles":[{"make":"Toyota","model":"Sienna","startYear":2004,"endYear":2020}],"emergencyPN":null,"keyway":null,"emergencyPrice":null,"shellPN":809383,"shellPrice":6.95,"logo":"Toyota logo","frequency":"315 MHz","battery":"2032 qty 1","notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":115,"priceB":39,"oem":11.95,"emergency":null,"shell":6.95}}},{"priceA":20.95,"priceB":null,"oem":null,"pn":45556,"fccid":"TPX1","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TPX1","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota\n\n1999 - 2002 4 RUNNER\n1998 - 2002 CAMRY\n2001 - 2003 HIGHLANDER\n1998 - 2002 LANDCRUSIER\n2001 - 2005 MR2 SPIDER\n2001 - 2003 PRIUS\n2000 - 2003 RAV 4\n2000 - 2002 SEQUOIA\n1998 - 2003 SIENNA\n1998 - 2003 SOLARA\n\nLexus\n\n1998 - 2003 ES300\n1998 - 2005 GS300\n1998 - 2000 GS400\n2001 - 2005 GS430\n2001 - 2005 IS300\n1997 - 2000 LS400\n1998 - 2002 LX470\n1999 - 2003 RX300\n1998 - 2000 SC300\n1998 - 2000 SC400","vehicles":[],"emergencyPN":null,"keyway":"TR47","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":20.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":20.95,"priceB":null,"oem":null,"pn":45558,"fccid":"TPX1","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TPX1","originalMake":"Lexus/Toyota","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"LXP90","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":20.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":20.95,"priceB":null,"oem":null,"pn":45561,"fccid":"TPX1","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TPX1","originalMake":"Lexus/Toyota","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"LX Short","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":20.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":20.95,"priceB":null,"oem":null,"pn":48287,"fccid":"TPX1","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TPX1","originalMake":"Lexus/Toyota","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"TR40","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":20.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":20.95,"priceB":null,"oem":null,"pn":48288,"fccid":"TPX1","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TPX1","originalMake":"Lexus/Toyota","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"TR56","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":20.95,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":25,"priceB":null,"oem":null,"pn":45562,"fccid":"TPX2","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TPX2","originalMake":"Lexus/Toyota","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"LX Medium","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":25,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":25,"priceB":null,"oem":null,"pn":45559,"fccid":"TPX2","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TPX2","originalMake":"Lexus/Toyota","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"LXP90","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":25,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":25,"priceB":null,"oem":null,"pn":45557,"fccid":"TPX2","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TPX2","originalMake":"Lexus/Toyota","vehiclesRaw":"Lexus\n\n2004 - 2006 - ES 330\n2003 - 2009 - GX470\n2001 - 2006 - LS430\n2004 - 2006 - RX330\n2007 - 2009 - RX350\n2006 - 2008 - RX400H\n2002 - 2009 - SC430\n\nToyota\n\n2003 - 2010 - 4RUNNER\n2005 - 2009 - AVALON\n2003 - 2010 - CAMRY\n2004 - 2010 - COROLLA\n2004 - 2009 - HIGHLANDER\n2003 - 2008 - LANDCRUSIER\n2004 - 2010 - MATRIX\n2006 - 2009 - RAV 4\n2003 - 2009 - SEQUOIA\n2004 - 2009 - SIENNA\n1999 - 2009 - SOLARA\n2005 - 2009 - TACOMA\n2007 - 2009 - TUNDRA","vehicles":[],"emergencyPN":null,"keyway":"TR47","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":25,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":25,"priceB":null,"oem":null,"pn":48258,"fccid":"TPX2","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TPX2","originalMake":"Lexus/Toyota","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"LX Short","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":25,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":49,"priceB":null,"oem":null,"pn":48516,"fccid":"TK60","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TK60","originalMake":"Lexus/Toyota","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"TR47","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Keyline logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":49,"priceB":null,"oem":null,"emergency":null,"shell":null}}},{"priceA":10.95,"priceB":null,"oem":null,"pn":"TOY40BT4","fccid":"TOY40BT4","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4C","originalMake":"Lexus/Toyota","vehiclesRaw":"Lexus ES 300 (98-01), LS 400 (97), LX 470 (98-00), SC 300 (98-00), SC 400 (98-00)","vehicles":[{"make":"Lexus","model":"ES 300","startYear":1998,"endYear":2001},{"make":"Lexus","model":"LS 400","startYear":1997,"endYear":1997},{"make":"Lexus","model":"LX 470","startYear":1998,"endYear":2000},{"make":"Lexus","model":"SC 300","startYear":1998,"endYear":2000},{"make":"Lexus","model":"SC 400","startYear":1998,"endYear":2000}],"emergencyPN":null,"keyway":"LXP90","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"TOY40BT4","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":10.95,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["43119","48135","42950"]},{"priceA":10.95,"priceB":null,"oem":null,"pn":"TOY48BT4","fccid":"TOY48BT4","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4C","originalMake":"Lexus/Toyota","vehiclesRaw":"Lexus ES 300 (02-03), GS 300 (98-05), GS 400 (98-00), GS 430 (01-05), IS 300 (01-05), LS 400 (98-00), LX 470 (01-02), RX 300 (98-03)","vehicles":[{"make":"Lexus","model":"ES 300","startYear":2002,"endYear":2003},{"make":"Lexus","model":"GS 300","startYear":1998,"endYear":2005},{"make":"Lexus","model":"GS 400","startYear":1998,"endYear":2000},{"make":"Lexus","model":"GS 430","startYear":2001,"endYear":2005},{"make":"Lexus","model":"IS 300","startYear":2001,"endYear":2005},{"make":"Lexus","model":"LS 400","startYear":1998,"endYear":2000},{"make":"Lexus","model":"LX 470","startYear":2001,"endYear":2002},{"make":"Lexus","model":"RX 300","startYear":1998,"endYear":2003}],"emergencyPN":null,"keyway":"LX Short","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":10.95,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["42117","43008","48130"]},{"priceA":8.95,"priceB":null,"oem":null,"pn":"TOY48H-PT","fccid":"TOY48H-PT","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota 4Runner (22), Camry (18-24), Corolla (20-23), RAV4 (19-23)","vehicles":[{"make":"Toyota","model":"4Runner","startYear":2022,"endYear":2022},{"make":"Toyota","model":"Camry","startYear":2018,"endYear":2024},{"make":"Toyota","model":"Corolla","startYear":2020,"endYear":2023},{"make":"Toyota","model":"RAV4","startYear":2019,"endYear":2023}],"emergencyPN":null,"keyway":"LX Short","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":8.95,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["41996"]},{"priceA":8.95,"priceB":null,"oem":null,"pn":"TOY50-PT-M","fccid":"TOY50-PT-M","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4D 68","originalMake":"Lexus/Toyota","vehiclesRaw":"Lexus ES 330 (04-06), GX 470 (03-09), LS 430 (01-06), LX 470 (03-06), RX 330 (04-06), RX 350 (07-09), SC 430 (02-10)","vehicles":[{"make":"Lexus","model":"ES 330","startYear":2004,"endYear":2006},{"make":"Lexus","model":"GX 470","startYear":2003,"endYear":2009},{"make":"Lexus","model":"LS 430","startYear":2001,"endYear":2006},{"make":"Lexus","model":"LX 470","startYear":2003,"endYear":2006},{"make":"Lexus","model":"RX 330","startYear":2004,"endYear":2006},{"make":"Lexus","model":"RX 350","startYear":2007,"endYear":2009},{"make":"Lexus","model":"SC 430","startYear":2002,"endYear":2010}],"emergencyPN":null,"keyway":"LX Short","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":8.95,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["43113","42114","41341","48249"]},{"priceA":34.99,"priceB":null,"oem":null,"pn":"TOY57-PT","fccid":"TOY57-PT","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4C","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota\n  MR2 Spyder (00-05)","vehicles":[{"make":"Toyota","model":"MR2 Spyder","startYear":2000,"endYear":2005}],"emergencyPN":null,"keyway":"TR40","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Toyota logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":34.99,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":[]},{"priceA":14,"priceB":null,"oem":null,"pn":"TOY44D","fccid":"TOY44D","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4D 67 Toyota Master 40-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Pontiac\n  Vibe (08-10)\nScion\n  tC (05-10)\n  xB (08-13)\nToyota\n  4Runner (03-09)\n  Avalon (05-12)\n  Camry (03-11)\n  Camry Solara (04-08)\n  Corolla (05-10)\n  FJ Cruiser (07-09)\n  Highlander (04-10)\n  Land Cruiser (03-07)\n  Matrix (05-11)\n  RAV4 (04-11)\n  Sequoia (08-10)\n  Sienna (04-10)\n  Tacoma (05-10)\n  Tundra (07-10)\n  Venza (09)\n  Yaris (06-11)","vehicles":[{"make":"Pontiac","model":"Vibe","startYear":2008,"endYear":2010},{"make":"Scion","model":"tC","startYear":2005,"endYear":2010},{"make":"Scion","model":"xB","startYear":2008,"endYear":2013},{"make":"Toyota","model":"4Runner","startYear":2003,"endYear":2009},{"make":"Toyota","model":"Avalon","startYear":2005,"endYear":2012},{"make":"Toyota","model":"Camry","startYear":2003,"endYear":2011},{"make":"Toyota","model":"Camry Solara","startYear":2004,"endYear":2008},{"make":"Toyota","model":"Corolla","startYear":2005,"endYear":2010},{"make":"Toyota","model":"FJ Cruiser","startYear":2007,"endYear":2009},{"make":"Toyota","model":"Highlander","startYear":2004,"endYear":2010},{"make":"Toyota","model":"Land Cruiser","startYear":2003,"endYear":2007},{"make":"Toyota","model":"Matrix","startYear":2005,"endYear":2011},{"make":"Toyota","model":"RAV4","startYear":2004,"endYear":2011},{"make":"Toyota","model":"Sequoia","startYear":2008,"endYear":2010},{"make":"Toyota","model":"Sienna","startYear":2004,"endYear":2010},{"make":"Toyota","model":"Tacoma","startYear":2005,"endYear":2010},{"make":"Toyota","model":"Tundra","startYear":2007,"endYear":2010},{"make":"Toyota","model":"Venza","startYear":2009,"endYear":2009},{"make":"Toyota","model":"Yaris","startYear":2006,"endYear":2011},{"make":"Toyota","model":"Highlander","startYear":2010,"endYear":2010},{"make":"Toyota","model":"RAV4","startYear":2006,"endYear":2011}],"emergencyPN":null,"keyway":"TR47","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":null,"frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":14,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["48170","43005","42005","42035","42040","42015","43006","42008"]},{"priceA":7.49,"priceB":null,"oem":null,"pn":"TOY44G","fccid":"TOY44G","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4D 67 Master G 80-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Scion\n  iQ (11-15)\n  tC (11-16)\n  xB (11-13)\n  xD (11-13)\nToyota\n  Camry (11-17)\n  Corolla (10-13)\n  FJ Cruiser (10-14)\n  Highlander (10-13)\n  Matrix (10-14)\n  RAV4 (10-12)\n  Sequoia (11-15)\n  Sienna (11-15)\n  Tacoma (11-15)\n  Tundra (10-18)\n  Venza (10-16)","vehicles":[{"make":"Scion","model":"iQ","startYear":2011,"endYear":2015},{"make":"Scion","model":"tC","startYear":2011,"endYear":2016},{"make":"Scion","model":"xB","startYear":2011,"endYear":2013},{"make":"Scion","model":"xD","startYear":2011,"endYear":2013},{"make":"Toyota","model":"Camry","startYear":2011,"endYear":2017},{"make":"Toyota","model":"Corolla","startYear":2010,"endYear":2013},{"make":"Toyota","model":"FJ Cruiser","startYear":2010,"endYear":2014},{"make":"Toyota","model":"Highlander","startYear":2010,"endYear":2013},{"make":"Toyota","model":"Matrix","startYear":2010,"endYear":2014},{"make":"Toyota","model":"RAV4","startYear":2010,"endYear":2012},{"make":"Toyota","model":"Sequoia","startYear":2011,"endYear":2015},{"make":"Toyota","model":"Sienna","startYear":2011,"endYear":2015},{"make":"Toyota","model":"Tacoma","startYear":2011,"endYear":2015},{"make":"Toyota","model":"Tundra","startYear":2010,"endYear":2018},{"make":"Toyota","model":"Venza","startYear":2010,"endYear":2016},{"make":"Toyota","model":"4Runner","startYear":2010,"endYear":2019},{"make":"Toyota","model":"Prius c","startYear":2012,"endYear":2015},{"make":"Toyota","model":"Yaris","startYear":2011,"endYear":2016},{"make":"Scion","model":"FR-S","startYear":2013,"endYear":2016}],"emergencyPN":null,"keyway":"TR47","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":7.49,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["42014","42013","42084","41998","41993","42009"]},{"priceA":46,"priceB":null,"oem":null,"pn":"TOY44H","fccid":"TOY44H","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"H-Chip Master 128-BIT","originalMake":"Lexus/Toyota","vehiclesRaw":"Toyota- 4Runner (20-21), Camry (14-17), Corolla (14-19), Highlander (14-19), Prius c (15-19), RAV4 (13-18), Sequoia (15-19), Sienna (15-20), Tacoma (16-23), Tundra (18-21), Yaris (15-18)","vehicles":[{"make":"Toyota","model":"4Runner","startYear":2020,"endYear":2021},{"make":"Toyota","model":"Camry","startYear":2014,"endYear":2017},{"make":"Toyota","model":"Corolla","startYear":2014,"endYear":2019},{"make":"Toyota","model":"Highlander","startYear":2014,"endYear":2019},{"make":"Toyota","model":"Prius c","startYear":2015,"endYear":2019},{"make":"Toyota","model":"RAV4","startYear":2013,"endYear":2018},{"make":"Toyota","model":"Sequoia","startYear":2015,"endYear":2019},{"make":"Toyota","model":"Sienna","startYear":2015,"endYear":2020},{"make":"Toyota","model":"Tacoma","startYear":2016,"endYear":2023},{"make":"Toyota","model":"Tundra","startYear":2018,"endYear":2021},{"make":"Toyota","model":"Yaris","startYear":2015,"endYear":2018}],"emergencyPN":null,"keyway":"TR47","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"Toyota logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":46,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":["48172","42180","42018"]},{"vehiclesRaw":"Toyota\n  4Runner (99-02)\n  Avalon (98-04)\n  Camry (98-06)\n  Camry Solara (99-03)\n  Highlander (01-03)\n  Land Cruiser (98-02)\n  Prius (01-03)\n  Sequoia (01-02)\n  Sienna (98-03)","logo":"JMA logo","priceB":null,"emergencyPN":null,"distributorPrices":{"KeylessRide":{"priceA":6.95,"priceB":null,"oem":null,"emergency":null,"shell":null}},"emergencyPrice":null,"frequency":null,"fccid":"TOY43AT4","stockQty":0,"keyway":"TR47","notes":null,"keyType":"Chip Key","buttons":null,"pn":"TOY43AT4","battery":null,"inStock":null,"shellPN":null,"originalMake":"Lexus/Toyota","priceA":6.95,"shellPrice":null,"vehicles":[{"make":"Toyota","model":"4Runner","startYear":1999,"endYear":2002},{"make":"Toyota","model":"Avalon","startYear":1998,"endYear":2004},{"make":"Toyota","model":"Camry","startYear":1998,"endYear":2006},{"make":"Toyota","model":"Camry Solara","startYear":1999,"endYear":2003},{"make":"Toyota","model":"Highlander","startYear":2001,"endYear":2003},{"make":"Toyota","model":"Land Cruiser","startYear":1998,"endYear":2002},{"make":"Toyota","model":"Prius","startYear":2001,"endYear":2003},{"make":"Toyota","model":"Sequoia","startYear":2001,"endYear":2002},{"make":"Toyota","model":"Sienna","startYear":1998,"endYear":2003}],"oem":null,"chip":"TI 4C","mergedPNs":["42065","42020"]},{"priceA":9.49,"priceB":null,"oem":null,"pn":"TOY57","fccid":"TOY57","keyType":"Chip Key","buttons":null,"inStock":null,"chip":"TI 4C","originalMake":"Lexus/Toyota","vehiclesRaw":null,"vehicles":[],"emergencyPN":null,"keyway":"TR40","emergencyPrice":null,"shellPN":null,"shellPrice":null,"logo":"JMA logo","frequency":null,"battery":null,"notes":null,"stockQty":0,"distributorPrices":{"KeylessRide":{"priceA":9.49,"priceB":null,"oem":null,"emergency":null,"shell":null}},"mergedPNs":[]},{"vehicles":[],"fccid":"Y159","chip":null,"notes":null,"buttons":null,"frequency":null,"keyType":null,"pn":"Y159","keyway":"Y159"},{"vehicles":[{"make":"Buick","endYear":1993,"startYear":1993,"model":"Skylark"}],"buttons":null,"keyway":"B84","keyType":"Non-Chip Key","isVATS":false,"pn":"B84","chip":null,"fccid":"B84","notes":"B68 is a sister key. B68 will work for B84 but B84 will not work for B68.","frequency":null,"dualKeyRole":"ignition"},{"keyway":"B86","notes":"Might work with B86 and B89","chip":null,"isVATS":false,"buttons":null,"frequency":null,"vehicles":[{"endYear":2005,"make":"Buick","startYear":1997,"codeSeries":null,"model":"Century"},{"codeSeries":null,"startYear":1997,"make":"Buick","endYear":2004,"model":"Regal"},{"model":"Riviera","make":"Buick","startYear":1995,"endYear":1999,"codeSeries":null},{"codeSeries":null,"startYear":1995,"endYear":2000,"model":"Aurora","make":"Oldsmobile"}],"pn":"B85","keyType":"Non-Chip Key","fccid":"B85","dualKeyRole":"door"},{"vehicles":[{"codeSeries":"Z0001-Z6000","endYear":2021,"make":"Buick","startYear":2020,"model":"Enclave"},{"model":"Regal","startYear":2018,"endYear":2020,"make":"Buick","codeSeries":"Z0001-Z6000"},{"codeSeries":[],"startYear":2017,"make":"Buick","model":"LaCrosse","endYear":2020}],"fccid":"HYQ4EA","frequency":"433.92 MHz","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","chip":"PH 46","pn":"8551","keyway":"HU100","isVATS":false,"keyType":"Proximity","notes":null},{"keyway":"HO01","vehicles":[{"endYear":2021,"startYear":2019,"make":"Acura","model":"RDX"}],"fccid":"KR5T21","chip":"Hitag 3","keyType":"Proximity","addedDate":"2026-02-07T03:47:22.209Z","isCustom":true,"pn":"5268","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"433.66-434.18 MHz"},{"pn":"B62","dualKeyRole":"ignition","buttons":null,"keyType":"VATS Single-Sided","chip":"VATS","vehicles":[{"endYear":1992,"model":"Reatta","make":"Buick","startYear":1990},{"model":"Regal","make":"Buick","endYear":1996,"startYear":1994},{"make":"Buick","endYear":1994,"model":"Riviera","startYear":1992},{"make":"Buick","endYear":1996,"startYear":1994,"model":"Roadmaster"},{"make":"Cadillac","endYear":1993,"startYear":1989,"model":"Allante"},{"model":"Allante","make":"Cadillac","startYear":1987,"endYear":1988},{"endYear":1996,"model":"Brougham","startYear":1993,"make":"Cadillac"},{"codeSeries":[],"model":"Concours","startYear":1990,"make":"Cadillac","endYear":1990},{"codeSeries":[],"endYear":1999,"model":"Concours","make":"Cadillac","startYear":1991},{"endYear":1999,"startYear":1991,"make":"Cadillac","model":"DeVille"},{"model":"El Dorado","startYear":1991,"make":"Cadillac","endYear":2003},{"make":"Cadillac","model":"El Dorado","endYear":1990,"startYear":1989},{"endYear":1990,"make":"Cadillac","startYear":1989,"model":"Seville","codeSeries":[]},{"startYear":1991,"codeSeries":[],"model":"Seville","make":"Cadillac","endYear":1996}],"keyway":"B62","fccid":"B62","isCustom":true,"addedDate":"2026-02-07T04:32:57.351Z","frequency":null},{"fccid":"B51","emergencyPN":null,"buttons":null,"keyType":"Non-Chip Key","keyway":"B67","notes":null,"isCustom":true,"isVATS":false,"chip":null,"dualKeyRole":"door","pn":"B51","battery":null,"secondaryKeyPartNumber":null,"addedDate":"2026-02-07T04:38:55.840Z","vehicles":[{"startYear":1990,"endYear":1992,"make":"Buick","model":"Reatta"},{"startYear":1987,"endYear":1990,"model":"Brougham","make":"Cadillac"},{"codeSeries":[],"endYear":1990,"make":"Cadillac","model":"Fleetwood","startYear":1987},{"endYear":1987,"model":"Cimarron","codeSeries":[],"startYear":1987,"make":"Cadillac"},{"startYear":1987,"make":"Cadillac","codeSeries":[],"endYear":1989,"model":"Concours"},{"model":"Concours","endYear":1990,"make":"Cadillac","codeSeries":[],"startYear":1990},{"endYear":1990,"model":"El Dorado","startYear":1989,"make":"Cadillac"},{"codeSeries":[],"endYear":1988,"make":"Cadillac","startYear":1987,"model":"Seville"},{"endYear":1990,"startYear":1989,"make":"Cadillac","model":"Seville","codeSeries":[]}],"frequency":null},{"dualKeyRole":"door","fccid":"B62","frequency":null,"isCustom":true,"vehicles":[{"startYear":1994,"make":"Buick","endYear":1996,"model":"Regal"}],"keyway":"B62","addedDate":"2026-02-07T04:43:32.720Z","chip":"VATS","keyType":null,"pn":"B79","buttons":null},{"buttons":null,"dualKeyRole":"ignition","keyType":null,"chip":"VATS","addedDate":"2026-02-07T04:46:53.917Z","frequency":null,"isCustom":true,"vehicles":[{"make":"Buick","startYear":1997,"endYear":2004,"model":"Regal"},{"make":"Buick","endYear":1999,"model":"Riviera","startYear":1995},{"startYear":1995,"make":"Buick","model":"Riviera","endYear":1999}],"keyway":"B82","pn":"B82","fccid":"B82"},{"chip":null,"addedDate":"2026-02-07T05:04:09.986Z","buttons":null,"vehicles":[{"make":"Buick","startYear":2005,"model":"Signia","endYear":2007,"codeSeries":[{"series":"G0000-G3631","years":"2005-2007"}]},{"codeSeries":[{"years":"2005-2005","series":"G0000-G3631"}],"make":"Chevrolet","startYear":2005,"endYear":2005,"model":"Cobalt"}],"keyType":"Non-Chip Key","fccid":"B106","isCustom":true,"frequency":null,"keyway":"B106","pn":"B106"},{"keyType":"Non-Chip Key","addedDate":"2026-02-07T05:09:03.208Z","keyway":"B68","dualKeyRole":"ignition","pn":"B68","chip":null,"vehicles":[{"model":"Skylark","endYear":1992,"startYear":1992,"make":"Buick"}],"buttons":null,"isCustom":true,"fccid":"B68","frequency":null},{"keyType":"Non-Chip Key","isCustom":true,"frequency":null,"fccid":"B86","buttons":null,"addedDate":"2026-02-07T05:12:56.919Z","dualKeyRole":"ignition","chip":null,"keyway":"B86","pn":"B86","vehicles":[{"endYear":1994,"startYear":1994,"make":"Buick","model":"Skylark"}]},{"chip":null,"keyType":"Non-Chip Key","keyway":"B86","vehicles":[{"model":"Skylark","make":"Buick","startYear":1995,"endYear":1998}],"frequency":null,"addedDate":"2026-02-07T05:14:45.873Z","buttons":null,"pn":"B89","isCustom":true,"fccid":"B89"},{"addedDate":"2026-02-08T02:52:23.580Z","vehicles":[{"model":"Allante","make":"Cadillac","endYear":1993,"startYear":1989},{"startYear":1987,"make":"Cadillac","model":"Allante","endYear":1988},{"model":"Allante","startYear":1987,"make":"Cadillac","endYear":1988}],"keyType":"VATS Single-Sided","frequency":null,"chip":"VATS","keyway":"B62","buttons":null,"pn":"B59","isCustom":true,"dualKeyRole":"door","fccid":"B62"},{"addedDate":"2026-02-09T16:06:47.055Z","notes":null,"frequency":"314.95 MHz","vehicles":[{"make":"Cadillac","endYear":2014,"model":"SRX","startYear":2010,"codeSeries":"Z0001-Z6000"}],"isVATS":false,"isCustom":true,"chip":"PH 46","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","fccid":"NBG009768T","keyType":"Proximity","pn":"8185","keyway":"HU100"},{"chip":"PH 46","keyway":"HU100","fccid":"NBG009768T","isVATS":false,"pn":"8426","frequency":"314.95 MHz","keyType":"Proximity","notes":null,"isCustom":true,"addedDate":"2026-02-09T16:17:02.928Z","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","vehicles":[{"model":"ATS","startYear":2013,"endYear":2014,"codeSeries":"Z0001-Z6000","make":"Cadillac"}]},{"isVATS":false,"keyway":"HU100","pn":"8026","vehicles":[{"endYear":2014,"codeSeries":"Z0001-Z6000","make":"Cadillac","startYear":2010,"model":"SRX"},{"model":"ELR","codeSeries":"Z0001-Z6000","endYear":2016,"startYear":2015,"make":"Cadillac"}],"isCustom":true,"addedDate":"2026-02-09T16:25:31.334Z","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","fccid":"NBG009768T, NBGG093UCC","keyType":"Proximity","chip":"PH 46","notes":"Cadillac ELR year ranges vary from resource. ILCO says 2014-2017 while KR and others say 2015-2016.","frequency":"314.95 MHz"},{"buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","addedDate":"2026-02-09T16:39:28.654Z","notes":"ILCO mentions the same OEM# for ELR 2014-2017 but KR has 2014 and 2015-2016 separated.","keyType":"Proximity","fccid":"NBG009768T, NBGG093UCC","frequency":"314.95 MHz","isVATS":false,"keyway":"HU100","chip":"PH 46","pn":"8290","vehicles":[{"startYear":2013,"make":"Cadillac","codeSeries":"Z0001-Z6000","endYear":2014,"model":"ATS"},{"startYear":2014,"endYear":2017,"codeSeries":"Z0001-Z6000","make":"Cadillac","model":"ELR"},{"codeSeries":"Z0001-Z6000","startYear":2013,"make":"Cadillac","model":"XTS","endYear":2017}],"isCustom":true},{"addedDate":"2026-02-09T17:43:38.592Z","keyway":"B63","pn":"B50","isCustom":true,"keyType":"Non-Chip Key","chip":null,"dualKeyRole":"ignition","frequency":null,"buttons":null,"vehicles":[{"model":"Brougham","startYear":1987,"make":"Cadillac","endYear":1990},{"model":"Fleetwood","endYear":1990,"make":"Cadillac","codeSeries":[],"startYear":1987},{"startYear":1987,"make":"Cadillac","codeSeries":[],"model":"Cimarron","endYear":1987},{"codeSeries":[],"endYear":1989,"startYear":1987,"make":"Cadillac","model":"Concours"},{"startYear":1987,"make":"Cadillac","model":"Seville","endYear":1988,"codeSeries":[]}],"fccid":"B50"},{"addedDate":"2026-02-09T18:04:18.984Z","frequency":null,"isCustom":true,"pn":"48239","buttons":null,"fccid":"HU46T2","keyType":"Chip Key","vehicles":[{"make":"Cadillac","model":"Catera","startYear":1997,"endYear":2001}],"chip":"PH 40 GM","keyway":"B61"},{"addedDate":"2026-02-09T18:49:08.175Z","isVATS":false,"fccid":"M3N5WY7777A","frequency":"315 MHz","keyType":"Proximity","chip":"PH 46","vehicles":[{"endYear":2014,"codeSeries":null,"make":"Cadillac","startYear":2008,"model":"CTS"},{"model":"STS","endYear":2011,"codeSeries":null,"startYear":2008,"make":"Cadillac"}],"keyway":"B106","notes":null,"buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","pn":"9841","isCustom":true},{"isVATS":false,"buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","chip":"PH 46","fccid":"HYQ2EB","keyType":"Proximity","notes":null,"isCustom":true,"vehicles":[{"make":"Cadillac","model":"ATS","startYear":2019,"endYear":2019,"codeSeries":"V0001-V5718"},{"endYear":2019,"startYear":2018,"codeSeries":"V0001-V5718","model":"CTS","make":"Cadillac"},{"model":"CT6","endYear":2020,"codeSeries":"V0001-V5718","make":"Cadillac","startYear":2016}],"pn":"5022","frequency":"433.92 MHz","addedDate":"2026-02-09T18:54:55.422Z","keyway":"HU100"},{"isCustom":true,"keyType":"Non-Chip Key","pn":"B102","addedDate":"2026-02-09T19:48:57.978Z","buttons":null,"frequency":"315 MHz","chip":null,"fccid":"B102","vehicles":[{"startYear":2000,"make":"Cadillac","model":"Escalade","endYear":2006}],"keyway":"B96/B102"},{"isCustom":true,"chip":null,"keyway":"B91","buttons":null,"keyType":"Non-Chip Key","fccid":"B91","vehicles":[{"startYear":1991,"model":"Escalade","endYear":1991,"make":"Cadillac"}],"frequency":null,"addedDate":"2026-02-09T19:50:32.041Z","pn":"B91"},{"addedDate":"2026-02-09T20:29:07.703Z","chip":"PH 46","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","frequency":"433.92 MHz","pn":"5172","isVATS":false,"fccid":"HYQ2ES","keyType":"Proximity","keyway":"HU100","isCustom":true,"vehicles":[{"endYear":2021,"startYear":2020,"make":"Cadillac","codeSeries":"V0001-V5718","model":"XT4"},{"endYear":2021,"codeSeries":"V0001-V5718","model":"XT5","startYear":2020,"make":"Cadillac"},{"endYear":2021,"startYear":2020,"model":"XT6","make":"Cadillac","codeSeries":"V0001-V5718"}],"notes":null},{"addedDate":"2026-02-09T20:47:39.772Z","chip":null,"isVATS":false,"frequency":null,"pn":"HY13","buttons":null,"fccid":"HY13","isCustom":true,"keyType":"Non-Chip Key","keyway":"HY13","notes":null,"vehicles":[{"endYear":2005,"startYear":1995,"make":"Hyundai","codeSeries":"R0001-R1000","model":"Accent"}]},{"addedDate":"2026-02-09T20:51:34.470Z","notes":null,"vehicles":[{"model":"Elantra","codeSeries":[{"years":"1996-2010","series":"T1-T1000"}],"startYear":1996,"endYear":2010,"make":"Hyundai"},{"endYear":2009,"make":"Kia","codeSeries":null,"startYear":2006,"model":"Rondo"},{"make":"Hyundai","codeSeries":"T1-T1000","model":"Accent","endYear":2005,"startYear":2000},{"make":"Hyundai","endYear":2009,"startYear":1996,"model":"Tiburon","codeSeries":[{"series":"T1-T1000","years":"1996-2009"}]},{"make":"Hyundai","codeSeries":[{"series":"V1-V1200","years":"2005-2010"}],"model":"Tucson","startYear":2005,"endYear":2010},{"endYear":2009,"model":"Spectra","codeSeries":[{"series":"V1-V1200","years":"2005-2009"}],"make":"Kia","startYear":2005},{"endYear":2008,"codeSeries":[{"years":"2005-2008","series":"V1-V1200"}],"model":"Sportage","startYear":2005,"make":"Kia"}],"frequency":null,"keyType":"Non-Chip Key","pn":"HY14","chip":null,"isVATS":false,"buttons":null,"fccid":"HY14","keyway":"HY14","isCustom":true},{"chip":null,"addedDate":"2026-02-09T20:58:26.517Z","buttons":null,"frequency":null,"keyway":"HY16","notes":null,"pn":"HY16","isCustom":true,"keyType":"Non-Chip Key","isVATS":false,"fccid":"HY16","vehicles":[{"model":"Accent","codeSeries":"V1-V1200","endYear":2011,"make":"Hyundai","startYear":2006},{"startYear":2006,"codeSeries":"V1-V1200","model":"Rio","make":"Kia","endYear":2010}]},{"isVATS":false,"notes":null,"buttons":null,"pn":"HY18","isCustom":true,"keyway":"HY18-R","keyType":"Non-Chip Key","frequency":null,"fccid":"HY18","chip":null,"addedDate":"2026-02-09T21:03:06.290Z","vehicles":[{"endYear":2017,"startYear":2012,"codeSeries":"T1001-T3500","model":"Accent","make":"Hyundai"},{"codeSeries":"C1001-C3500","endYear":2020,"make":"Kia","model":"Sorento","startYear":2015},{"make":"Hyundai","codeSeries":[{"series":"C1001-C3500","years":"2013-2018"}],"model":"Santa Fe","endYear":2018,"startYear":2013}]},{"frequency":null,"notes":null,"vehicles":[{"model":"Accent","codeSeries":"H1-H2500","startYear":2018,"endYear":2021,"make":"Hyundai"},{"startYear":2017,"endYear":2019,"model":"Elantra","make":"Hyundai","codeSeries":"B0001-B3000"},{"endYear":2022,"model":"Kona","codeSeries":"B0001-B3000","make":"Hyundai","startYear":2018},{"make":"Hyundai","startYear":2020,"endYear":2021,"codeSeries":"S1-S2500","model":"Santa Fe"},{"codeSeries":"B0001-B3000","model":"Veloster","make":"Hyundai","endYear":2020,"startYear":2018},{"codeSeries":"D1-D3000","model":"Forte","startYear":2019,"make":"Kia","endYear":2021},{"startYear":2017,"codeSeries":"D1-D3000","endYear":2020,"make":"Kia","model":"Optima"},{"endYear":2020,"codeSeries":"D1-D3000","model":"Rio","startYear":2018,"make":"Kia"},{"startYear":2021,"endYear":2021,"codeSeries":"D1-D3000","model":"Sportage","make":"Kia"}],"keyway":"KK12","fccid":"KK12","isVATS":false,"buttons":null,"chip":null,"isCustom":true,"addedDate":"2026-02-09T21:11:53.631Z","pn":"KK12","keyType":"Non-Chip Key"},{"pn":"H75","fccid":"H75","frequency":null,"keyType":"Non-Chip Key","notes":null,"buttons":null,"chip":null,"keyway":"H75","vehicles":[{"make":"Ford","model":"6000","endYear":1999,"codeSeries":null,"startYear":1996},{"codeSeries":null,"make":"Ford","startYear":1996,"endYear":1999,"model":"9000"},{"model":"Aerostar","startYear":1997,"endYear":1997,"make":"Ford","codeSeries":"1-1706X"},{"endYear":1997,"model":"Bronco","make":"Ford","startYear":1997,"codeSeries":"1-1706X"},{"endYear":1999,"make":"Ford","model":"CF7000","codeSeries":null,"startYear":1996},{"startYear":1997,"model":"Cobra","codeSeries":"1-1706X","make":"Ford","endYear":1997},{"startYear":1997,"codeSeries":"1-1706X","make":"Ford","model":"Crown Victoria","endYear":1997},{"codeSeries":"1-1706X","model":"E-Series/Econoline/Club Wagon Van","endYear":2006,"make":"Ford","startYear":1996},{"endYear":1998,"make":"Ford","codeSeries":"1-1706X","model":"Explorer","startYear":1996},{"make":"Ford","codeSeries":"1-1706X","startYear":1996,"endYear":1998,"model":"Explorer Sport"},{"codeSeries":"1-1706X","endYear":1998,"model":"F-Series/F150/F250 Light Duty Pickup","startYear":1996,"make":"Ford"},{"startYear":1996,"model":"Ranger","codeSeries":"1-1706X","make":"Ford","endYear":1998},{"model":"Taurus","codeSeries":"1-1706X","make":"Ford","startYear":1996,"endYear":1997},{"codeSeries":"1-1706X","make":"Ford","endYear":1997,"model":"Windstar","startYear":1996},{"startYear":1997,"endYear":1997,"model":"Continental","make":"Lincoln","codeSeries":"1-1706X"},{"codeSeries":"1-1706X","endYear":1997,"make":"Lincoln","startYear":1997,"model":"Town Car"},{"model":"B-Series","endYear":1997,"codeSeries":"1-1706X","make":"Mazda","startYear":1996},{"make":"Mercury","startYear":1997,"model":"Cougar","codeSeries":"1-1706X","endYear":1998},{"make":"Mercury","startYear":1997,"endYear":1997,"codeSeries":"1-1706X","model":"Grand Marquis"},{"startYear":1997,"codeSeries":"1-1706X","model":"Mountaineer","make":"Mercury","endYear":1997},{"make":"Mercury","startYear":1996,"codeSeries":"1-1706X","model":"Villager","endYear":2002},{"startYear":2005,"model":"Ranger","codeSeries":"1-1706X","endYear":2005,"make":"Ford"}],"isVATS":false},{"pn":"HU101","addedDate":"2026-02-10T15:43:48.819Z","fccid":"HU101","keyType":"Non-Chip Key","buttons":null,"isCustom":true,"notes":null,"frequency":null,"chip":null,"keyway":"HU101","isVATS":false,"vehicles":[]},{"addedDate":"2026-02-10T15:45:22.446Z","fccid":"DA34","vehicles":[],"isVATS":false,"pn":"DA34","chip":null,"buttons":null,"keyway":"DA34","keyType":"Non-Chip Key","notes":null,"isCustom":true,"frequency":null},{"isVATS":false,"chip":null,"keyway":"HU100","keyType":"Non-Chip Key","vehicles":[],"notes":null,"buttons":null,"frequency":null,"addedDate":"2026-02-10T15:48:47.591Z","isCustom":true,"fccid":"HU100","pn":"HU100"},{"chip":null,"isCustom":true,"buttons":null,"addedDate":"2026-02-10T15:50:18.221Z","isVATS":false,"pn":"Y157","vehicles":[],"keyway":"Y159","notes":null,"keyType":"Non-Chip Key","fccid":"Y157","frequency":null},{"keyType":"Non-Chip Key","keyway":"HY15","isCustom":true,"addedDate":"2026-02-10T15:56:09.869Z","buttons":null,"pn":"HY15","chip":null,"isVATS":false,"notes":null,"frequency":null,"fccid":"HY15","vehicles":[]},{"addedDate":"2026-02-10T15:56:55.363Z","fccid":"HY12","pn":"HY12","chip":null,"isCustom":true,"buttons":null,"vehicles":[],"keyway":"HY12","isVATS":false,"notes":null,"keyType":"Non-Chip Key","frequency":null},{"buttons":null,"keyType":"Non-Chip Key","pn":"HY17","chip":null,"vehicles":[],"isCustom":true,"addedDate":"2026-02-10T15:58:49.371Z","keyway":"HY17","frequency":null,"fccid":"HY17","notes":null,"isVATS":false},{"pn":"KK1","frequency":null,"keyway":"KK1","buttons":null,"notes":null,"chip":null,"vehicles":[],"keyType":"Non-Chip Key","fccid":"KK1","addedDate":"2026-02-10T16:00:00.657Z","isCustom":true,"isVATS":false},{"keyway":"KK2","vehicles":[],"frequency":null,"isVATS":false,"pn":"KK2","notes":null,"isCustom":true,"chip":null,"addedDate":"2026-02-10T16:00:28.637Z","keyType":"Non-Chip Key","fccid":"KK2","buttons":null},{"pn":"KK3","addedDate":"2026-02-10T16:02:10.113Z","chip":null,"keyType":"Non-Chip Key","fccid":"KK3","frequency":null,"isVATS":false,"notes":null,"isCustom":true,"buttons":null,"vehicles":[{"startYear":2001,"endYear":2005,"codeSeries":null,"make":"Kia","model":"Rio"},{"startYear":1998,"endYear":2004,"codeSeries":null,"model":"Sephia","make":"Kia"},{"endYear":2004,"codeSeries":null,"model":"Spectra","startYear":1998,"make":"Kia"}],"keyway":"KK3"},{"isVATS":false,"fccid":"KK4","pn":"KK4","keyType":"Non-Chip Key","frequency":null,"keyway":"KK4","notes":null,"vehicles":[],"addedDate":"2026-02-10T16:02:45.109Z","isCustom":true,"chip":null,"buttons":null},{"buttons":null,"addedDate":"2026-02-10T16:03:22.749Z","vehicles":[],"isCustom":true,"isVATS":false,"chip":null,"fccid":"KK5","pn":"KK5","notes":null,"keyType":"Non-Chip Key","frequency":null,"keyway":"KK5"},{"addedDate":"2026-02-10T16:04:04.251Z","vehicles":[],"frequency":null,"isVATS":false,"keyway":"KK8","notes":null,"pn":"KK8","keyType":"Non-Chip Key","chip":null,"isCustom":true,"fccid":"KK8","buttons":null},{"chip":null,"vehicles":[],"notes":null,"pn":"KK10","buttons":null,"frequency":null,"keyway":"KK10","isCustom":true,"fccid":"KK10","isVATS":false,"keyType":"Non-Chip Key","addedDate":"2026-02-10T16:06:42.146Z"}];

// ===================== DEFAULT VENDORS =====================
const DEFAULT_VENDORS = [
    { name: 'Keyless Ride', type: 'distributor', default: true },
    { name: 'Banner Solutions', type: 'distributor', default: true },
    { name: 'Hans Johnsen', type: 'distributor', default: true },
    { name: 'IML', type: 'distributor', default: true },
    { name: 'Keyless-City', type: 'distributor', default: true },
    { name: 'UHS Hardware', type: 'online', default: true },
    { name: 'American Key Supply', type: 'online', default: true },
    { name: 'Locksmith Keyless', type: 'online', default: true }
];

// ===================== STATE =====================
let filteredKeys = [];
let currentKeyIdx = null;
let stockData = {};
let lishiData = {"HY20":{"tool":"HY20","direction":"CW"},"HY20R":{"direction":"CW","tool":"HY20R"},"B106":{"direction":"CW","tool":"B111"},"KK10":{"tool":"K5","direction":"CW"},"Y164":{"direction":"CW","tool":"CY24"},"HY17":{"tool":"HY17(HYN15)","direction":"CW"},"HU162":{"direction":"CW","tool":"HU162 10 CUT"},"KK3":{"direction":"CW","tool":"KIA3R"},"Toyota TOY43AT":{"tool":"TOY43AT IGNITION","direction":"CW"},"Mercedes HU58":{"tool":"HU58","direction":"CW"},"DW04RAP":{"direction":"CW","tool":"DW05"},"HU43":{"direction":"CW","tool":"HU43"},"Hyundai HY17":{"direction":"CW","tool":"HY17(HYN15)"},"SIP22":{"direction":"CW","tool":"SIP22"},"KY14":{"direction":"CW","tool":"KY14"},"B108":{"tool":"TOY43R","direction":"CW"},"HO01":{"direction":"CW","tool":"HON66"},"Mitsubishi MIT11":{"tool":"MIT11R","direction":"CW"},"DW05R":{"tool":"DW04R","direction":"CW"},"MIT11":{"direction":"CW","tool":"MIT11"},"Y159":{"direction":"CW","tool":"CY24"},"DA34":{"direction":"CW","tool":"NSN14"},"Mercedes HU39":{"direction":"CW","tool":"HU39"},"HYN15":{"direction":"CW","tool":"HY17(HYN15)"},"B119":{"direction":"CW","tool":"HU100V3(10 CUT)"},"HU198":{"tool":"HU198","direction":"CW"},"KK4":{"tool":"KIA3R","direction":"CW"},"BMW HU92":{"tool":"HU92 SINGLE LIFTER","direction":"CW"},"GM B / GM37":{"direction":"CW","tool":"B106/GM37"},"MIT8":{"direction":"CW","tool":"MIT8"},"HU101":{"tool":"HU101","direction":"CW"},"B96/B102":{"direction":"CW","tool":"GM39"},"GM45":{"direction":"CW","tool":"GM45"},"TOY43R":{"tool":"TOY43R","direction":"CW"},"HD103":{"tool":"HON58R","direction":"CW"},"GM HU100":{"direction":"CW","tool":"HU100R"},"Honda HON58":{"tool":"HON58R","direction":"CW"},"HYN11":{"tool":"HYN11","direction":"CW"},"HU66":{"tool":"HU66 SINGLE LIFTER","direction":"CW"},"LX Medium":{"direction":"CW","tool":"TOY48 SHORT"},"DW04":{"direction":"CW","tool":"DW05"},"DA31":{"tool":"NSN11","direction":"CW"},"LXP90":{"direction":"CW","tool":"TOY40 LONG"},"VAG HU66":{"direction":"CW","tool":"HU66 SINGLE LIFTER"},"TR47":{"tool":"TOY43AT IGNITION","direction":"CW"},"Honda HON66":{"tool":"HON66","direction":"CW"},"S48":{"direction":"CW","tool":"HU39"},"DW04R":{"direction":"CW","tool":"DW04R"},"H75":{"tool":"FO38","direction":"CW"},"Hyundai HY16":{"direction":"CW","tool":"HY16"},"Fiat SIP22":{"tool":"SIP22","direction":"CW"},"HYN14R":{"direction":"CW","tool":"HYN14R (HY15)"},"VAG HU162":{"direction":"CW","tool":"HU162 IGNITION"},"K9":{"tool":"K9","direction":"CW"},"MIT3":{"tool":"MIT11","direction":"CW"},"HU92":{"direction":"CW","tool":"HU92 TWIN LIFTER"},"MZ27":{"direction":"CW","tool":"MAZ24"},"GM":{"tool":"GM39","direction":"CW"},"B61":{"tool":"HU46","direction":"CW"},"KIA3R":{"direction":"CW","tool":"KIA3R"},"B120":{"tool":"HU100V3(10 CUT)","direction":"CW"},"KK12":{"direction":"CW","tool":"KIA 2018"},"B110":{"tool":"TOY43R","direction":"CW"},"HU46":{"tool":"HU46","direction":"CW"},"KK8":{"direction":"CW","tool":"KY14"},"K5":{"tool":"K5","direction":"CW"},"Toyota TOY48":{"direction":"CW","tool":"TOY48 SHORT"},"HU100":{"tool":"HU100V3(8 CUT)","direction":"CW"},"Y157":{"direction":"CW","tool":"CY24"},"DW05":{"tool":"DW05","direction":"CW"},"Toyota TOY43":{"tool":"TOY43","direction":"CW"},"HYN6":{"direction":"CW","tool":"HYN11"},"HU39":{"tool":"HU39","direction":"CW"},"HY15":{"direction":"CW","tool":"HYN14R (HY15)"},"MZ31":{"tool":"MAZ24","direction":"CW"},"DW04/DW05":{"tool":"DW05","direction":"CW"},"LX Short":{"direction":"CW","tool":"TOY48 SHORT"}};
let lishiVehicleData = {"Buick|Allure|2005|2009":{"lastConfirmedBy":null,"lastConfirmed":null,"secondaryKeyPN":null,"confirmCount":0,"lastEdited":"2026-02-05T20:59:45.735Z","notes":"PK3 System","codeSeries":[],"lastEditedBy":"Unknown","direction":null},"Cadillac|CTS|2008|2014":{"multipleKeys":false,"frequency":"","keyType":"","lastConfirmed":"2026-01-29T20:09:19.821Z","keyBlank":"","confirmCount":1,"ignition_chip":"","door_chip":"","direction":"CW","ignition_buttons":"","ignition_fccid":"","codeSeries":[{"series":"G0000-G3631","years":"2008-2014"}],"battery":"","lastEditedBy":"Ricky Arguelles","lastEdited":"2026-02-09T18:32:02.977Z","notes":"","door_keyway":"","door_fccid":"","secondaryKeyPN":null,"ignition_keyway":"","ignition_frequency":"","keyway":"B106","chip":"PH 46","fccid":"B111","buttons":""},"Dodge|Ram Pickup|2002|2005":{"confirmCount":0,"lastConfirmedBy":null,"notes":"","lastEdited":"2026-02-03T18:40:48.396Z","lastConfirmed":null,"lastEditedBy":"Ricky Arguelles","direction":"CCW"},"Buick|Century|1997|2005":{"notes":"","battery":"","door_codeSeries":[{"series":"AA00-7T51","years":"1997-1999"},{"years":"2000-2005","series":"S000A-S999K"}],"multipleKeys":true,"ignition_codeSeries":[{"years":"1997-1999","series":"AA00-7T51"},{"years":"2000-2005","series":"S000A-S999K"}],"secondaryKeyPN":null,"ignition_keyBlank":"B82","ignition_chip":"VATS","ignition_keyway":"B82","door_keyBlank":"B85","codeSeries":[{"years":"1997-1999","series":"AA00-7T51"},{"series":"S000A-S999K","years":"2000-2005"}],"door_fccid":"B86","fccid":"","keyway":"","differentCodeSeries":true,"chip":"","ignition_fccid":"B82","lastEdited":"2026-02-06T22:54:01.943Z","lastConfirmed":null,"door_chip":"VATS","keyType":"","door_keyway":"B86","ignition_buttons":"","buttons":"","lastEditedBy":"Ricky Arguelles","confirmCount":0,"frequency":"","direction":null,"lastConfirmedBy":null,"ignition_frequency":""},"Buick|Regal|1997|2004":{"confirmCount":0,"door_keyway":"B86","keyType":"","differentCodeSeries":true,"door_fccid":"B85","lastEditedBy":"Ricky Arguelles","ignition_chip":"VATS","notes":"","ignition_keyBlank":"B82","secondaryKeyPN":null,"chip":"","lastConfirmedBy":null,"door_keyBlank":"B85","buttons":"","battery":"","ignition_frequency":"","lastConfirmed":null,"ignition_codeSeries":[{"years":"1997-1999","series":"AA00-7T51"},{"years":"2000-2004","series":"S000A-S999K"}],"lastEdited":"2026-02-07T04:46:53.916Z","multipleKeys":true,"ignition_buttons":"","ignition_keyway":"B82","door_codeSeries":[{"years":"1997-1999","series":"AA00-7T51"},{"series":"S000A-S999K","years":"2000-2004"}],"direction":null,"door_chip":"VATS","fccid":"","ignition_fccid":"B82","keyway":"","codeSeries":[],"frequency":""},"Buick|Riviera|1995|2000":{"confirmCount":0,"lastConfirmed":null,"direction":null,"notes":"","lastConfirmedBy":null},"Oldsmobile|Aurora|1995|2000":{"confirmCount":0,"direction":null,"lastConfirmed":null,"lastConfirmedBy":null,"notes":""},"Buick|Century|1991|1996":{"lastConfirmedBy":null,"fccid":"","ignition_keyBlank":"B44","differentCodeSeries":true,"secondaryKeyPN":null,"codeSeries":[{"years":"1991-1996","series":"J"},{"years":"1991-1996","series":"K"},{"series":"L","years":"1991-1996"},{"years":"1991-1996","series":"M"}],"chip":"","door_keyBlank":"B45","battery":"","lastConfirmed":null,"door_codeSeries":[{"series":"L","years":"1991-1996"},{"series":"M","years":"1991-1996"}],"confirmCount":0,"ignition_codeSeries":[{"series":"J","years":"1991-1996"},{"series":"K","years":"1991-1996"}],"door_fccid":"B45","ignition_chip":"","door_chip":"","ignition_keyway":"B77","lastEditedBy":"Ricky Arguelles","ignition_frequency":"","lastEdited":"2026-02-06T18:46:09.654Z","door_keyway":"B79","keyType":"Non-Chip Key","keyway":"","multipleKeys":true,"direction":null,"frequency":"","ignition_buttons":"","buttons":"","notes":"J, K for ignition\nL, M for Door/Trunk/GB","ignition_fccid":"B44"},"Buick|LeSabre|1991|1999":{"confirmCount":0,"notes":"","battery":"","door_chip":"","codeSeries":[],"door_keyway":"B79","secondaryKeyPN":null,"direction":null,"lastEditedBy":"Ricky Arguelles","keyway":"","lastConfirmed":null,"differentCodeSeries":true,"frequency":"","lastEdited":"2026-02-07T00:27:05.504Z","door_fccid":"B45","chip":"","fccid":"","ignition_keyway":"B62","ignition_chip":"VATS","ignition_buttons":"","ignition_keyBlank":"B62","buttons":"","door_codeSeries":[{"series":"L","years":"1991-1999"},{"years":"1991-1999","series":"M"}],"ignition_fccid":"B62","door_keyBlank":"B45","keyType":"","multipleKeys":true,"ignition_codeSeries":[{"years":"1991-1999","series":"J"},{"years":"1991-1999","series":"K"}],"ignition_frequency":"","lastConfirmedBy":null},"Buick|Enclave|2007|2017":{"ignition_fccid":"","lastEdited":"2026-02-06T22:55:42.824Z","battery":"","notes":"","buttons":"","lastConfirmedBy":null,"direction":null,"secondaryKeyPN":null,"ignition_chip":"","door_chip":"","multipleKeys":false,"ignition_frequency":"","ignition_keyway":"","keyway":"B106","lastConfirmed":null,"door_keyway":"","codeSeries":[{"series":"G0000-G3631","years":"2007-2017"}],"ignition_buttons":"","door_fccid":"","frequency":"","keyType":"","fccid":"B111","confirmCount":0,"chip":"PH 46","lastEditedBy":"Ricky Arguelles"},"Buick|Enclave|2020|2021":{"lastConfirmed":null,"lastConfirmedBy":null,"notes":"","direction":null,"confirmCount":0,"codeSeries":[{"years":"2020-2021","series":"Z0001-Z6000"}]},"Buick|Regal|2018|2020":{"lastConfirmed":null,"notes":"","lastConfirmedBy":null,"codeSeries":[{"years":"2018-2020","series":"Z0001-Z6000"}],"direction":null,"confirmCount":0},"Buick|Encore|2014|2016":{"codeSeries":[{"years":"2014-2016","series":"Z0001-Z6000"}],"buttons":"","ignition_frequency":"","secondaryKeyPN":null,"chip":"PH 46","lastEdited":"2026-02-06T23:40:16.867Z","confirmCount":0,"door_fccid":"","battery":"","door_chip":"","fccid":"","ignition_fccid":"","ignition_keyway":"","frequency":"","ignition_chip":"","ignition_buttons":"","multipleKeys":false,"keyway":"HU100","door_keyway":"","lastConfirmed":null,"lastEditedBy":"Ricky Arguelles","notes":"","keyType":"","direction":null,"lastConfirmedBy":null},"Buick|Encore|2014|2022":{"secondaryKeyPN":null,"ignition_buttons":"","lastConfirmed":null,"fccid":"B119","keyway":"HU100","lastEditedBy":"Ricky Arguelles","multipleKeys":false,"buttons":"","confirmCount":0,"frequency":"","door_keyway":"","chip":"PH 46","lastEdited":"2026-02-06T23:40:26.615Z","ignition_chip":"","door_fccid":"","direction":null,"keyType":"","ignition_frequency":"","codeSeries":[{"series":"Z0001-Z6000","years":"2014-2022"}],"lastConfirmedBy":null,"notes":"","ignition_fccid":"","battery":"","door_chip":"","ignition_keyway":""},"Buick|LaCrosse|2005|2009":{"ignition_frequency":"","door_chip":"","confirmCount":0,"door_fccid":"","lastEdited":"2026-02-07T00:20:38.547Z","multipleKeys":false,"ignition_buttons":"","direction":null,"codeSeries":[{"series":"G0000-G3631","years":"2005-2009"}],"ignition_fccid":"","lastConfirmed":null,"buttons":"","lastEditedBy":"Ricky Arguelles","keyType":"","door_keyway":"","fccid":"","keyway":"B106","ignition_keyway":"","chip":"M 13","lastConfirmedBy":null,"battery":"","frequency":"315 MHz","notes":"","secondaryKeyPN":null,"ignition_chip":""},"Buick|LaCrosse|2010|2016":{"ignition_chip":"","door_fccid":"","codeSeries":[{"series":"Z0001-Z6000","years":"2010-2016"}],"lastEditedBy":"Ricky Arguelles","lastConfirmed":null,"confirmCount":0,"chip":"PH 46","lastEdited":"2026-02-07T00:22:16.839Z","door_chip":"","keyType":"","ignition_buttons":"","frequency":"315 MHz","battery":"","ignition_fccid":"","multipleKeys":false,"fccid":"","notes":"","ignition_frequency":"","ignition_keyway":"","door_keyway":"","secondaryKeyPN":null,"lastConfirmedBy":null,"keyway":"HU100","buttons":"","direction":null},"Buick|LeSabre|2000|2005":{"door_chip":"","frequency":"","chip":"M 13","ignition_buttons":"","buttons":"","ignition_frequency":"","door_keyway":"","confirmCount":0,"keyType":"","lastConfirmedBy":null,"lastEditedBy":"Ricky Arguelles","keyway":"B86","ignition_keyway":"","ignition_fccid":"","direction":null,"notes":"","fccid":"B99","secondaryKeyPN":null,"battery":"","ignition_chip":"","codeSeries":[{"years":"2000-2005","series":"O5000-O6999"}],"door_fccid":"","lastConfirmed":null,"multipleKeys":false,"lastEdited":"2026-02-07T00:29:16.569Z"},"Buick|Lucerne|2006|2011":{"buttons":"","frequency":"315 MHz","multipleKeys":false,"lastEditedBy":"Ricky Arguelles","keyway":"B106","chip":"PH 46","door_keyway":"","secondaryKeyPN":null,"door_chip":"","keyType":"","lastConfirmedBy":null,"lastConfirmed":null,"battery":"","ignition_chip":"","fccid":"","confirmCount":0,"door_fccid":"","ignition_keyway":"","lastEdited":"2026-02-07T00:29:57.604Z","ignition_fccid":"","ignition_frequency":"","codeSeries":[{"series":"G0000-G3631","years":"2006-2011"}],"direction":null,"ignition_buttons":"","notes":""},"Buick|Park Avenue|1991|1996":{"direction":null,"ignition_fccid":"B62","ignition_buttons":"","fccid":"","multipleKeys":true,"ignition_codeSeries":[{"series":"J","years":"1991-1996"},{"years":"1991-1996","series":"K"}],"lastEditedBy":"Ricky Arguelles","codeSeries":[],"ignition_frequency":"","door_codeSeries":[{"years":"1991-1996","series":"L"},{"series":"M","years":"1991-1996"}],"differentCodeSeries":true,"lastEdited":"2026-02-07T01:18:37.469Z","ignition_chip":"VATS","lastConfirmed":null,"frequency":"","door_keyBlank":"B45","confirmCount":0,"ignition_keyBlank":"B62","buttons":"","ignition_keyway":"B62","keyType":"VATS Single-Sided","chip":"","keyway":"","door_keyway":"B79","notes":"","secondaryKeyPN":null,"lastConfirmedBy":null,"door_fccid":"B45","battery":"","door_chip":""},"Buick|Park Avenue|1997|2005":{"ignition_chip":"","ignition_keyway":"","door_chip":"","codeSeries":[{"years":"1997-2002","series":"1-1988"},{"series":"H0001-H3988","years":"2003-2005"}],"lastConfirmedBy":null,"lastEditedBy":"Ricky Arguelles","direction":null,"ignition_buttons":"","fccid":"B97","keyBlank":"40170","ignition_fccid":"","battery":"","door_fccid":"","keyway":"B89","door_keyway":"","keyType":"","multipleKeys":false,"ignition_frequency":"","lastEdited":"2026-02-07T01:20:21.090Z","frequency":"","notes":"","buttons":"","lastConfirmed":null,"chip":"M 13","confirmCount":0,"secondaryKeyPN":null},"Buick|Rainier|2003|2007":{"ignition_chip":"","lastEditedBy":"Ricky Arguelles","ignition_frequency":"","fccid":"B99","ignition_keyway":"","keyType":"Chip Key","door_fccid":"","confirmCount":0,"door_chip":"","buttons":"","notes":"","secondaryKeyPN":null,"lastConfirmed":null,"ignition_fccid":"","lastEdited":"2026-02-07T01:23:57.390Z","lastConfirmedBy":null,"battery":"","door_keyway":"","keyBlank":"B99","codeSeries":[{"series":"H0001-H3988","years":"2003-2004"},{"series":"S000A-S999K","years":"2005-2007"}],"direction":null,"chip":"M 13","frequency":"","multipleKeys":false,"ignition_buttons":"","keyway":"B86"},"Cadillac|CTS|2002|2003":{"confirmCount":0,"battery":"","fccid":"B99","ignition_chip":"","buttons":"","notes":"","lastEditedBy":"Ricky Arguelles","keyBlank":"B99","ignition_keyway":"","door_chip":"","ignition_fccid":"","direction":null,"keyType":"Chip Key","lastConfirmedBy":null,"multipleKeys":false,"door_keyway":"","ignition_frequency":"","lastEdited":"2026-02-09T18:30:51.467Z","chip":"M 13","keyway":"B86","lastConfirmed":null,"secondaryKeyPN":null,"door_fccid":"","frequency":"","ignition_buttons":"","codeSeries":[{"series":"H0001-H3988","years":"2002-2003"}]},"Ford|Taurus|1996|1997":{"notes":"","codeSeries":[{"years":"1996-1997","series":"1-1706X"}],"confirmCount":0,"direction":null,"lastConfirmed":null,"lastConfirmedBy":null},"Ford|Aerostar|1997|1997":{"codeSeries":[{"years":"1997-1997","series":"1-1706X"}],"lastConfirmedBy":null,"confirmCount":0,"direction":null,"notes":"","lastConfirmed":null},"Acura|RLX|2014|2015":{"door_keyway":"","ignition_fccid":"","keyType":"","buttons":"","keyBlank":"","battery":"","fccid":"ACJ932HK1210A","ignition_chip":"","ignition_frequency":"","ignition_keyway":"","confirmCount":0,"lastConfirmed":null,"multipleKeys":false,"door_fccid":"","door_chip":"","lastEditedBy":"Ricky Arguelles","codeSeries":[{"series":"K001-N718","years":"2014-2015"}],"secondaryKeyPN":null,"keyway":"HO01","frequency":"313.85 MHz","ignition_buttons":"","notes":"","lastConfirmedBy":null,"chip":"HITAG 3","lastEdited":"2026-02-07T03:59:12.705Z","direction":null},"Cadillac|Allante|1987|1988":{"door_codeSeries":[{"series":"1-500","years":"1987-1988"}],"ignition_fccid":"B62","direction":null,"battery":"","ignition_keyBlank":"B62","codeSeries":[],"keyway":"","door_keyway":"B59","lastEditedBy":"Ricky Arguelles","lastConfirmedBy":null,"chip":"","lastEdited":"2026-02-08T02:55:41.377Z","door_fccid":"B59","door_chip":"","ignition_codeSeries":[{"series":"NPSU","years":"1987-1988"}],"buttons":"","ignition_buttons":"","ignition_chip":"","frequency":"","notes":"","ignition_frequency":"","secondaryKeyPN":null,"confirmCount":0,"ignition_keyway":"B62","fccid":"","keyType":"Non-Chip Key","multipleKeys":true,"differentCodeSeries":true,"door_keyBlank":"B59","lastConfirmed":null},"Buick|Reatta|1990|1992":{"notes":"","door_chip":"","door_keyway":"B67","door_fccid":"B51","direction":null,"door_codeSeries":[{"years":"1990-1992","series":"NPSU"}],"lastEditedBy":"Ricky Arguelles","ignition_keyway":"B62","secondaryKeyPN":null,"keyType":"","keyway":"","lastConfirmedBy":null,"codeSeries":[],"fccid":"","ignition_chip":"VATS","buttons":"","battery":"","ignition_keyBlank":"B62","lastEdited":"2026-02-07T04:38:55.838Z","ignition_fccid":"B62","frequency":"","door_keyBlank":"B51","ignition_codeSeries":[{"years":"1990-1992","series":"ABNP"}],"ignition_buttons":"","chip":"","lastConfirmed":null,"confirmCount":0,"differentCodeSeries":true,"ignition_frequency":"","multipleKeys":true},"Buick|Roadmaster|1994|1996":{"buttons":"","ignition_keyBlank":"B62","secondaryKeyPN":null,"frequency":"","lastConfirmedBy":null,"door_codeSeries":[{"years":"1994-1996","series":"L"},{"series":"M","years":"1994-1996"}],"ignition_codeSeries":[{"years":"1994-1996","series":"J"},{"series":"K","years":"1994-1996"}],"ignition_keyway":"B62","door_chip":"","chip":"","confirmCount":0,"battery":"","lastConfirmed":null,"door_keyway":"B79","keyway":"","keyType":"VATS Single-Sided","differentCodeSeries":true,"notes":"","door_fccid":"B45","ignition_fccid":"B62","ignition_buttons":"","fccid":"","ignition_chip":"VATS","direction":null,"lastEdited":"2026-02-07T05:01:48.726Z","codeSeries":[],"lastEditedBy":"Ricky Arguelles","ignition_frequency":"","multipleKeys":true,"door_keyBlank":"B45"},"Cadillac|Seville|1991|1996":{"codeSeries":[],"door_fccid":"B45","buttons":"","ignition_fccid":"B62","keyway":"","ignition_buttons":"","direction":null,"notes":"","door_codeSeries":[{"series":"L","years":"1991-1996"},{"series":"M","years":"1991-1996"}],"door_keyBlank":"B45","ignition_chip":"VATS","ignition_codeSeries":[{"years":"1991-1996","series":"J"},{"series":"K","years":"1991-1996"}],"door_keyway":"B79","battery":"","ignition_keyBlank":"B62","ignition_frequency":"","lastEdited":"2026-02-09T20:07:34.450Z","lastEditedBy":"Ricky Arguelles","fccid":"","secondaryKeyPN":null,"frequency":"","lastConfirmed":null,"confirmCount":0,"chip":"","differentCodeSeries":true,"door_chip":"","ignition_keyway":"B62","multipleKeys":true,"lastConfirmedBy":null,"keyType":""},"Cadillac|Escalade|2015|2020":{"keyway":"HU100","direction":null,"lastEditedBy":"Ricky Arguelles","lastConfirmed":null,"ignition_keyway":"","ignition_fccid":"","fccid":"HYQ2AB","ignition_frequency":"","door_fccid":"","battery":"","lastEdited":"2026-02-09T19:51:27.728Z","ignition_chip":"","door_chip":"","frequency":"314.9 MHz","keyType":"","multipleKeys":false,"confirmCount":0,"door_keyway":"","secondaryKeyPN":null,"keyBlank":"8621","codeSeries":[{"years":"2015-2020","series":"V0001-V5718"}],"chip":"PH 46","ignition_buttons":"","lastConfirmedBy":null,"notes":"","buttons":""},"Cadillac|Seville|1987|1988":{"multipleKeys":true,"door_keyway":"B67","lastEdited":"2026-02-09T20:00:29.419Z","lastConfirmedBy":null,"buttons":"","fccid":"","codeSeries":[],"ignition_buttons":"","door_keyBlank":"B51","keyway":"","door_chip":"","ignition_codeSeries":[{"years":"1987-1988","series":"A"},{"series":"B","years":"1987-1988"}],"lastConfirmed":null,"frequency":"","keyType":"","confirmCount":0,"door_codeSeries":[{"series":"N","years":"1987-1988"},{"years":"1987-1988","series":"P"}],"door_fccid":"B51","differentCodeSeries":true,"ignition_keyBlank":"B50","direction":null,"ignition_fccid":"B50","chip":"","ignition_chip":"","secondaryKeyPN":null,"battery":"","lastEditedBy":"Ricky Arguelles","ignition_keyway":"B63","ignition_frequency":"","notes":""},"Cadillac|SRX|2015|2016":{"ignition_frequency":"","codeSeries":[{"series":"V0001-V5718","years":"2015-2016"}],"ignition_keyway":"","confirmCount":0,"secondaryKeyPN":null,"notes":"","lastEditedBy":"Ricky Arguelles","direction":null,"ignition_chip":"","ignition_fccid":"","keyBlank":"8602","fccid":"HYQ2AB","door_chip":"","ignition_buttons":"","lastConfirmedBy":null,"door_keyway":"","lastConfirmed":null,"keyType":"Proximity","battery":"","chip":"PH 46","buttons":"","lastEdited":"2026-02-09T20:14:48.004Z","frequency":"314.9 MHz","multipleKeys":false,"keyway":"HU100","door_fccid":""},"Cadillac|El Dorado|1989|1990":{"fccid":"","keyway":"","ignition_keyBlank":"B62","lastConfirmedBy":null,"door_fccid":"B51","ignition_fccid":"B62","lastEditedBy":"Ricky Arguelles","door_codeSeries":[],"chip":"","door_chip":"","ignition_codeSeries":[],"ignition_frequency":"","codeSeries":[{"series":"ABCD","years":"1989-1990"}],"direction":null,"ignition_buttons":"","multipleKeys":true,"differentCodeSeries":false,"buttons":"","lastEdited":"2026-02-09T19:22:23.371Z","door_keyway":"B67","keyType":"VATS Single-Sided","battery":"","frequency":"","confirmCount":0,"ignition_keyway":"B62","ignition_chip":"VATS","lastConfirmed":null,"notes":"","door_keyBlank":"B51","secondaryKeyPN":null},"Acura|CL|1998|2003":{"lastEditedBy":"Ricky Arguelles","ignition_chip":"","lastConfirmedBy":null,"door_keyway":"","codeSeries":[{"years":"1998-2003","series":"5001-8442"}],"secondaryKeyPN":null,"keyway":"HD103","ignition_buttons":"","lastConfirmed":null,"door_fccid":"","ignition_keyway":"","lastEdited":"2026-02-07T03:08:07.615Z","multipleKeys":false,"frequency":"","fccid":"HD106","ignition_frequency":"","battery":"","buttons":"","keyType":"Chip Key","keyBlank":"HD106","chip":"M 13","ignition_fccid":"","door_chip":"","notes":"","direction":null,"confirmCount":0},"Acura|TSX|2004|2008":{"secondaryKeyPN":null,"keyway":"HD103","keyBlank":"HD111","frequency":"","door_fccid":"","multipleKeys":false,"ignition_keyway":"","ignition_fccid":"","chip":"PH 46","lastEdited":"2026-02-07T04:16:34.804Z","ignition_frequency":"","codeSeries":[{"years":"2004-2008","series":"5001-8442"}],"fccid":"HD111","keyType":"","battery":"","confirmCount":0,"lastConfirmedBy":null,"lastEditedBy":"Ricky Arguelles","door_chip":"","lastConfirmed":null,"direction":null,"ignition_buttons":"","buttons":"","notes":"","door_keyway":"","ignition_chip":""},"Acura|Integra|1984|1989":{"door_keyway":"","notes":"","lastConfirmed":null,"direction":null,"multipleKeys":false,"door_fccid":"","frequency":"","ignition_chip":"","lastConfirmedBy":null,"lastEdited":"2026-02-07T03:12:23.293Z","battery":"","buttons":"","keyBlank":"HD92","chip":"","ignition_frequency":"","keyway":"HD103","door_chip":"","ignition_buttons":"","keyType":"","codeSeries":[{"years":"1984-1989","series":"3001-4481"}],"ignition_keyway":"","fccid":"HD92","secondaryKeyPN":null,"confirmCount":0,"ignition_fccid":"","lastEditedBy":"Ricky Arguelles"},"Acura|ZDX|2010|2013":{"door_chip":"","keyway":"HO01","direction":null,"lastConfirmed":null,"ignition_frequency":"","battery":"","door_keyway":"","door_fccid":"","frequency":"313.85 MHz","codeSeries":[{"series":"K001-N718","years":"2010-2013"}],"ignition_fccid":"","ignition_keyway":"","multipleKeys":false,"ignition_chip":"","lastConfirmedBy":null,"confirmCount":0,"keyType":"","fccid":"M3N5WY8145","ignition_buttons":"","lastEdited":"2026-02-07T04:18:48.655Z","lastEditedBy":"Ricky Arguelles","keyBlank":"","notes":"","chip":"PH 46","buttons":"","secondaryKeyPN":null},"Cadillac|ATS|2013|2014":{"confirmCount":0,"lastConfirmed":null,"lastConfirmedBy":null,"direction":null,"codeSeries":[{"years":"2013-2014","series":"Z0001-Z6000"}],"notes":""},"Acura|Vigor|1992|1994":{"door_fccid":"","fccid":"HD101","lastConfirmed":null,"confirmCount":0,"buttons":"","door_chip":"","lastConfirmedBy":null,"codeSeries":[{"years":"1992-1994","series":"3001-4481"}],"keyway":"HD92","lastEditedBy":"Ricky Arguelles","secondaryKeyPN":null,"notes":"","battery":"","ignition_fccid":"","lastEdited":"2026-02-07T04:17:43.480Z","chip":"","ignition_chip":"","ignition_buttons":"","door_keyway":"","direction":null,"ignition_frequency":"","keyBlank":"HD101","ignition_keyway":"","frequency":"","multipleKeys":false,"keyType":""},"Cadillac|XT4|2020|2021":{"lastConfirmed":null,"lastConfirmedBy":null,"codeSeries":[{"years":"2020-2021","series":"V0001-V5718"}],"direction":null,"notes":"","confirmCount":0},"Cadillac|XT4|2019|2019":{"codeSeries":[{"series":"V0001-V5718","years":"2019-2019"}],"keyway":"HU100","lastConfirmed":null,"multipleKeys":false,"lastConfirmedBy":null,"ignition_frequency":"","door_chip":"","fccid":"HYQ2EB","lastEdited":"2026-02-09T20:26:52.766Z","ignition_fccid":"","frequency":"433.92 MHz","door_fccid":"","lastEditedBy":"Ricky Arguelles","notes":"","keyType":"","ignition_buttons":"","buttons":"","confirmCount":0,"battery":"","direction":null,"chip":"PH 46","secondaryKeyPN":null,"ignition_chip":"","door_keyway":"","keyBlank":"5470","ignition_keyway":""},"Acura|TLX|2018|2020":{"ignition_fccid":"","multipleKeys":false,"keyType":"","ignition_chip":"","lastConfirmed":null,"confirmCount":0,"secondaryKeyPN":null,"frequency":"433.66-434.18 MHz","ignition_frequency":"","battery":"","door_keyway":"","lastEdited":"2026-02-07T04:08:35.251Z","notes":"","ignition_buttons":"","fccid":"KR5V2X","codeSeries":[{"years":"2018-2020","series":"K001-N718"}],"ignition_keyway":"","chip":"HITAG 3 PCF7920","door_fccid":"","keyBlank":"","lastEditedBy":"Ricky Arguelles","keyway":"HO01","direction":null,"buttons":"","lastConfirmedBy":null,"door_chip":""},"Buick|Regal|2012|2017":{"ignition_frequency":"","battery":"","keyway":"HU100","direction":null,"lastConfirmed":null,"ignition_keyway":"","ignition_fccid":"","lastConfirmedBy":null,"keyBlank":"","lastEditedBy":"Ricky Arguelles","secondaryKeyPN":null,"keyType":"","notes":"","chip":"PH 46","buttons":"","confirmCount":0,"lastEdited":"2026-02-07T04:48:09.386Z","codeSeries":[{"years":"2012-2017","series":"Z0001-Z6000"}],"frequency":"315 MHz","door_fccid":"","ignition_chip":"","door_chip":"","door_keyway":"","fccid":"","ignition_buttons":"","multipleKeys":false},"Acura|Legend|1986|1990":{"confirmCount":0,"keyBlank":"HD92","codeSeries":[{"years":"1986-1990","series":"3001-4481"}],"door_fccid":"","lastEdited":"2026-02-07T03:13:37.043Z","battery":"","door_chip":"","direction":null,"lastConfirmed":null,"fccid":"HD92","notes":"","frequency":"","multipleKeys":false,"keyway":"HD103","chip":"","lastConfirmedBy":null,"ignition_keyway":"","ignition_fccid":"","ignition_buttons":"","buttons":"","secondaryKeyPN":null,"keyType":"","ignition_frequency":"","ignition_chip":"","door_keyway":"","lastEditedBy":"Ricky Arguelles"},"Cadillac|XTS|2013|2017":{"lastConfirmed":null,"direction":null,"notes":"","confirmCount":0,"codeSeries":[{"series":"Z0001-Z6000","years":"2013-2017"}],"lastConfirmedBy":null},"Cadillac|STS|2008|2011":{"lastEditedBy":"Ricky Arguelles","secondaryKeyPN":null,"keyBlank":"9841","battery":"","fccid":"M3N5WY7777A","ignition_chip":"","ignition_keyway":"","multipleKeys":false,"lastConfirmedBy":null,"door_keyway":"","buttons":"","frequency":"315","notes":"","lastEdited":"2026-02-09T20:22:06.988Z","door_chip":"","keyType":"","keyway":"B106","lastConfirmed":null,"codeSeries":[{"years":"2008-2011","series":"G0000-G3631"}],"confirmCount":0,"ignition_fccid":"","ignition_buttons":"","direction":null,"chip":"PH 46","ignition_frequency":"","door_fccid":""},"Hyundai|Veloster|2018|2020":{"lastConfirmed":null,"codeSeries":[{"years":"2018-2020","series":"B0001-B3000"}],"confirmCount":0,"lastConfirmedBy":null,"notes":"","direction":null},"Ford|Crown Victoria|1997|1997":{"notes":"","lastConfirmedBy":null,"lastConfirmed":null,"confirmCount":0,"direction":null,"codeSeries":[{"years":"1997-1997","series":"1-1706X"}]},"Acura|RDX|2013|2015":{"door_keyway":"","ignition_buttons":"","secondaryKeyPN":null,"fccid":"KR5434760","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","lastConfirmedBy":null,"chip":"PH 46","keyBlank":"Custom","keyType":"Proximity","notes":"","door_chip":"","ignition_chip":"","direction":null,"lastEdited":"2026-02-07T03:24:21.046Z","multipleKeys":false,"ignition_keyway":"","lastConfirmed":null,"ignition_frequency":"","ignition_fccid":"","battery":"","confirmCount":0,"frequency":"313.85 MHz","lastEditedBy":"Ricky Arguelles","keyway":"HO01","codeSeries":[{"years":"2013-2015","series":"K001-N718"}],"door_fccid":""},"Cadillac|XT5|2017|2019":{"ignition_fccid":"","door_fccid":"","keyBlank":"5470","ignition_buttons":"","keyType":"","direction":null,"ignition_keyway":"","ignition_frequency":"","chip":"PH 46","notes":"","lastConfirmed":null,"codeSeries":[{"years":"2017-2019","series":"V0001-V5718"}],"ignition_chip":"","battery":"","door_keyway":"","confirmCount":0,"lastEdited":"2026-02-09T20:34:25.626Z","frequency":"433.92 MHz","fccid":"HYQ2EB","lastEditedBy":"Ricky Arguelles","buttons":"","secondaryKeyPN":null,"lastConfirmedBy":null,"door_chip":"","multipleKeys":false,"keyway":"HU100"},"Cadillac|Brougham|1987|1990":{"lastConfirmedBy":null,"confirmCount":0,"door_chip":"","multipleKeys":true,"ignition_keyway":"B63","battery":"","keyType":"Non-Chip Key","lastEditedBy":"Ricky Arguelles","door_keyway":"B67","buttons":"","keyway":"","differentCodeSeries":true,"secondaryKeyPN":null,"ignition_keyBlank":"B50","ignition_chip":"","codeSeries":[],"door_codeSeries":[{"years":"1987-1990","series":"NPSU"}],"fccid":"","chip":"","door_fccid":"B67","door_keyBlank":"B51","ignition_frequency":"","lastConfirmed":null,"direction":null,"lastEdited":"2026-02-09T17:43:38.589Z","ignition_codeSeries":[{"series":"ABNP","years":"1987-1990"}],"notes":"","ignition_fccid":"B50","frequency":"","ignition_buttons":""},"Cadillac|Concours|1987|1989":{"fccid":"","chip":"","notes":"","ignition_frequency":"","ignition_buttons":"","lastConfirmed":null,"lastEdited":"2026-02-09T18:17:56.307Z","door_codeSeries":[{"years":"1987-1989","series":"NPSU"}],"secondaryKeyPN":null,"door_keyway":"B67","keyway":"","ignition_keyBlank":"B50","door_chip":"","ignition_codeSeries":[{"years":"1987-1989","series":"ABNP"}],"ignition_fccid":"B50","direction":null,"differentCodeSeries":true,"ignition_keyway":"B63","frequency":"","door_keyBlank":"B51","keyType":"Non-Chip Key","buttons":"","lastEditedBy":"Ricky Arguelles","ignition_chip":"","battery":"","confirmCount":0,"lastConfirmedBy":null,"door_fccid":"B51","multipleKeys":true,"codeSeries":[]},"Hyundai|Accent|1995|2005":{"codeSeries":[{"series":"R0001-R1000","years":"1995-2005"}],"direction":null,"lastConfirmedBy":null,"confirmCount":0,"lastConfirmed":null,"notes":""},"Kia|Forte|2019|2021":{"confirmCount":0,"codeSeries":[{"series":"D1-D3000","years":"2019-2021"}],"lastConfirmedBy":null,"lastConfirmed":null,"notes":"","direction":null},"Cadillac|XTS|2016|2019":{"ignition_chip":"","confirmCount":0,"ignition_buttons":"","fccid":"HYQ2AB","lastConfirmedBy":null,"notes":"","direction":null,"lastConfirmed":null,"lastEdited":"2026-02-09T20:40:31.322Z","ignition_keyway":"","frequency":"314.9 MHz","codeSeries":[{"years":"2016-2019","series":"Z0001-Z6000"}],"door_fccid":"","lastEditedBy":"Ricky Arguelles","keyType":"","ignition_frequency":"","ignition_fccid":"","keyBlank":"8598","battery":"","chip":"PH 46","multipleKeys":false,"door_keyway":"","secondaryKeyPN":null,"keyway":"HU100","buttons":"","door_chip":""},"Cadillac|SRX|2004|2006":{"lastEditedBy":"Ricky Arguelles","battery":"","ignition_fccid":"","lastConfirmedBy":null,"keyType":"","notes":"","ignition_chip":"","direction":null,"secondaryKeyPN":null,"codeSeries":[{"series":"G0000-G3631","years":"2004-2006"}],"ignition_frequency":"","frequency":"","door_keyway":"","buttons":"","fccid":"B115","confirmCount":0,"door_chip":"","ignition_keyway":"","lastConfirmed":null,"lastEdited":"2026-02-09T20:10:16.838Z","keyway":"B106","door_fccid":"","keyBlank":"40262","chip":"M 48 Magic II","multipleKeys":false,"ignition_buttons":""},"Kia|Optima|2017|2020":{"codeSeries":[{"years":"2017-2020","series":"D1-D3000"}],"direction":null,"notes":"","confirmCount":0,"lastConfirmed":null,"lastConfirmedBy":null},"Lincoln|Town Car|1997|1997":{"lastConfirmed":null,"notes":"","confirmCount":0,"direction":null,"lastConfirmedBy":null,"codeSeries":[{"series":"1-1706X","years":"1997-1997"}]},"Kia|Sportage|2005|2009":{"notes":"","lastConfirmedBy":null,"confirmCount":0,"lastConfirmed":null,"direction":null},"Cadillac|Concours|1991|1999":{"ignition_fccid":"B62","multipleKeys":true,"lastEditedBy":"Ricky Arguelles","ignition_buttons":"","ignition_keyBlank":"B62","ignition_keyway":"B62","ignition_frequency":"","secondaryKeyPN":null,"direction":null,"differentCodeSeries":true,"fccid":"","codeSeries":[],"buttons":"","door_keyBlank":"B45","chip":"","door_keyway":"B79","keyway":"","lastConfirmedBy":null,"ignition_chip":"VATS","lastEdited":"2026-02-09T18:21:14.787Z","door_codeSeries":[{"years":"1991-1999","series":"L"},{"series":"M","years":"1991-1999"}],"frequency":"","keyType":"","lastConfirmed":null,"ignition_codeSeries":[{"series":"J","years":"1991-1999"},{"years":"1991-1999","series":"K"}],"door_fccid":"B45","battery":"","door_chip":"","confirmCount":0,"notes":""},"Kia|Sorento|2015|2020":{"direction":null,"confirmCount":0,"notes":"","codeSeries":[{"series":"C1001-C3500","years":"2015-2020"}],"lastConfirmedBy":null,"lastConfirmed":null},"Buick|Rendezvous|2002|2007":{"battery":"","buttons":"","ignition_chip":"","door_keyway":"","notes":"","secondaryKeyPN":null,"lastEdited":"2026-02-07T04:51:32.630Z","lastConfirmed":null,"chip":"M 13","direction":null,"fccid":"B99","ignition_keyway":"","keyway":"B86","door_fccid":"","ignition_frequency":"","multipleKeys":false,"frequency":"","keyBlank":"40180","lastEditedBy":"Ricky Arguelles","ignition_buttons":"","confirmCount":0,"keyType":"","codeSeries":[{"series":"H0001-H3988","years":"2002-2007"}],"ignition_fccid":"","door_chip":"","lastConfirmedBy":null},"Acura|ILX|2016|2022":{"keyway":"HO01","ignition_chip":"","door_chip":"","buttons":"","multipleKeys":false,"lastConfirmed":null,"chip":"HITAG 3","keyType":"","lastEditedBy":"Ricky Arguelles","lastEdited":"2026-02-07T03:11:18.955Z","door_fccid":"","door_keyway":"","ignition_keyway":"","fccid":"KR580399900","confirmCount":0,"secondaryKeyPN":null,"codeSeries":[{"series":"K001-N718","years":"2016-2022"}],"ignition_frequency":"","lastConfirmedBy":null,"battery":"","direction":null,"keyBlank":"","ignition_fccid":"","frequency":"923.625-924.6 MHz","ignition_buttons":"","notes":""},"Buick|Verano|2012|2017":{"keyway":"HU100","door_fccid":"","door_chip":"","door_keyway":"","battery":"","frequency":"315 MHz","keyBlank":"","lastEdited":"2026-02-07T05:33:16.642Z","buttons":"","codeSeries":[{"series":"Z0001-Z6000","years":"2012-2017"}],"lastConfirmedBy":null,"notes":"","ignition_chip":"","ignition_frequency":"","keyType":"","multipleKeys":false,"secondaryKeyPN":null,"chip":"PH 46","ignition_keyway":"","ignition_fccid":"","fccid":"","lastConfirmed":null,"ignition_buttons":"","confirmCount":0,"direction":null,"lastEditedBy":"Ricky Arguelles"},"Hyundai|Accent|2006|2011":{"lastConfirmedBy":null,"codeSeries":[{"years":"2006-2011","series":"V1-V1200"}],"lastConfirmed":null,"confirmCount":0,"direction":null,"notes":""},"Acura|RLX|2016|2019":{"lastEdited":"2026-02-07T03:59:55.017Z","ignition_buttons":"","confirmCount":0,"door_chip":"","ignition_keyway":"","lastConfirmedBy":null,"ignition_chip":"","secondaryKeyPN":null,"notes":"","fccid":"KR5V1X","codeSeries":[{"series":"K001-N718","years":"2016-2019"}],"door_fccid":"","keyType":"","frequency":"313.55-314.15 MHz","keyway":"HO01","battery":"","lastEditedBy":"Ricky Arguelles","direction":null,"ignition_fccid":"","multipleKeys":false,"lastConfirmed":null,"ignition_frequency":"","buttons":"","keyBlank":"","chip":"HITAG 3 PCF7920","door_keyway":""},"Cadillac|Escalade|2007|2014":{"secondaryKeyPN":null,"door_fccid":"","lastConfirmed":null,"lastConfirmedBy":null,"ignition_buttons":"","ignition_keyway":"","keyway":"B106","multipleKeys":false,"ignition_chip":"","keyBlank":"","lastEditedBy":"Ricky Arguelles","fccid":"B111","frequency":"","keyType":"","buttons":"","codeSeries":[{"years":"2007-2014","series":"G0000-G3631"}],"ignition_fccid":"","chip":"PH 46","notes":"","lastEdited":"2026-02-09T19:43:47.169Z","ignition_frequency":"","door_keyway":"","confirmCount":0,"direction":null,"battery":"","door_chip":""},"Hyundai|Tucson|2005|2010":{"notes":"","confirmCount":0,"lastConfirmed":null,"direction":null,"lastConfirmedBy":null},"Lincoln|Continental|1997|1997":{"lastConfirmedBy":null,"direction":null,"codeSeries":[{"series":"1-1706X","years":"1997-1997"}],"lastConfirmed":null,"notes":"","confirmCount":0},"Mercury|Cougar|1997|1998":{"notes":"","confirmCount":0,"codeSeries":[{"series":"1-1706X","years":"1997-1998"}],"direction":null,"lastConfirmedBy":null,"lastConfirmed":null},"Ford|Explorer|1996|1998":{"notes":"","direction":null,"codeSeries":[{"series":"1-1706X","years":"1996-1998"}],"lastConfirmedBy":null,"lastConfirmed":null,"confirmCount":0},"Cadillac|ELR|2014|2017":{"notes":"Cadillac ELR year ranges vary from resource. ILCO says 2014-2017 while KR and others say 2015-2016.","keyBlank":"8290","ignition_chip":"","chip":"PH 46","door_chip":"","lastEditedBy":"Ricky Arguelles","battery":"","ignition_keyway":"","secondaryKeyPN":null,"keyType":"","codeSeries":[{"series":"Z0001-Z6000","years":"2014-2017"}],"fccid":"NBG009768T, NBGG093UCC","buttons":"","multipleKeys":false,"keyway":"HU100","frequency":"314.9","lastConfirmedBy":null,"lastConfirmed":null,"door_fccid":"","ignition_fccid":"","ignition_buttons":"","door_keyway":"","lastEdited":"2026-02-09T19:37:30.354Z","confirmCount":0,"direction":null,"ignition_frequency":""},"Cadillac|ATS|2015|2019":{"lastEdited":"2026-02-08T02:56:53.867Z","ignition_keyway":"","keyBlank":"","ignition_fccid":"","fccid":"HYQ2AB","ignition_buttons":"","buttons":"","frequency":"314.9 MHz","lastEditedBy":"Ricky Arguelles","ignition_frequency":"","keyType":"","lastConfirmed":null,"notes":"","door_fccid":"","confirmCount":0,"ignition_chip":"","door_chip":"","lastConfirmedBy":null,"codeSeries":[{"series":"V0001-V5718","years":"2015-2019"}],"direction":null,"secondaryKeyPN":null,"chip":"PH 46","keyway":"HU100","door_keyway":"","multipleKeys":false,"battery":""},"Cadillac|Catera|1997|2001":{"notes":"","ignition_fccid":"","keyBlank":"48239","secondaryKeyPN":null,"lastEdited":"2026-02-09T18:07:59.452Z","confirmCount":0,"keyType":"","ignition_chip":"","door_keyway":"","door_chip":"","ignition_frequency":"","door_fccid":"","chip":"PH 40 GM","ignition_keyway":"","codeSeries":[{"series":"S1-S2000","years":"1997-1999"},{"series":"H0001-H3988","years":"2000-2001"}],"frequency":"","direction":null,"battery":"","lastConfirmed":null,"lastEditedBy":"Ricky Arguelles","lastConfirmedBy":null,"buttons":"","fccid":"HU46T2","multipleKeys":false,"keyway":"B61","ignition_buttons":""},"Hyundai|Accent|2012|2017":{"lastConfirmed":null,"codeSeries":[{"series":"T1001-T3500","years":"2012-2017"}],"lastConfirmedBy":null,"notes":"","confirmCount":0,"direction":null},"Acura|MDX|2001|2006":{"ignition_buttons":"","ignition_fccid":"","battery":"","secondaryKeyPN":null,"door_chip":"","door_fccid":"","ignition_frequency":"","door_keyway":"","codeSeries":[{"series":"5001-8442","years":"2001-2006"}],"notes":"","keyway":"HD103","keyBlank":"HD106","lastConfirmedBy":null,"direction":null,"lastEdited":"2026-02-07T03:14:33.840Z","lastEditedBy":"Ricky Arguelles","buttons":"","frequency":"","fccid":"HD106","ignition_chip":"","keyType":"","confirmCount":0,"ignition_keyway":"","multipleKeys":false,"lastConfirmed":null,"chip":"M 13"},"Buick|Skylark|1994|1994":{"ignition_keyway":"B86","ignition_keyBlank":"B86","lastEditedBy":"Ricky Arguelles","differentCodeSeries":true,"codeSeries":[],"lastConfirmed":null,"notes":"","ignition_fccid":"B86","frequency":"","lastEdited":"2026-02-07T05:12:56.917Z","fccid":"","door_keyBlank":"B45","buttons":"","ignition_frequency":"","door_codeSeries":[{"series":"L","years":"1994-1994"},{"years":"1994-1994","series":"M"}],"multipleKeys":true,"keyType":"Non-Chip Key","door_chip":"","lastConfirmedBy":null,"ignition_chip":"","door_fccid":"B45","door_keyway":"B79","ignition_buttons":"","confirmCount":0,"chip":"","direction":null,"ignition_codeSeries":[{"series":"AA00-7T51","years":"1994-1994"}],"secondaryKeyPN":null,"keyway":"","battery":""},"Buick|Regal|2011|2017":{"secondaryKeyPN":null,"fccid":"","buttons":"","ignition_frequency":"","keyBlank":"","codeSeries":[{"series":"Z0001-Z6000","years":"2011-2017"}],"chip":"PH 46","ignition_buttons":"","frequency":"315 MHz","lastEdited":"2026-02-07T04:47:38.939Z","lastConfirmed":null,"multipleKeys":false,"ignition_fccid":"","keyway":"HU100","ignition_keyway":"","keyType":"","door_chip":"","door_fccid":"","ignition_chip":"","lastEditedBy":"Ricky Arguelles","direction":null,"notes":"","lastConfirmedBy":null,"door_keyway":"","battery":"","confirmCount":0},"Acura|MDX|2014|2020":{"fccid":"KR5V1X","keyType":"","secondaryKeyPN":null,"chip":"HITAG 3 PCF7920","ignition_chip":"","direction":null,"confirmCount":0,"multipleKeys":false,"battery":"","codeSeries":[{"series":"K001-N718","years":"2014-2020"}],"door_fccid":"","ignition_fccid":"","ignition_keyway":"","door_keyway":"","lastEditedBy":"Ricky Arguelles","keyBlank":"","ignition_buttons":"","lastConfirmed":null,"lastEdited":"2026-02-07T03:15:30.639Z","door_chip":"","ignition_frequency":"","notes":"","frequency":"313.55-314.15 MHz","lastConfirmedBy":null,"buttons":"","keyway":"HO01"},"Acura|Legend|1991|1996":{"codeSeries":[{"years":"1991-1996","series":"3001-4481"}],"direction":null,"multipleKeys":false,"battery":"","lastConfirmedBy":null,"lastEditedBy":"Ricky Arguelles","fccid":"HD101","chip":"","lastEdited":"2026-02-07T03:13:53.921Z","keyType":"","buttons":"","keyway":"HD92","notes":"","ignition_keyway":"","door_chip":"","ignition_frequency":"","ignition_chip":"","door_keyway":"","secondaryKeyPN":null,"ignition_buttons":"","confirmCount":0,"door_fccid":"","frequency":"","ignition_fccid":"","keyBlank":"HD101","lastConfirmed":null},"Cadillac|DTS|2006|2011":{"secondaryKeyPN":null,"ignition_frequency":"","multipleKeys":false,"ignition_buttons":"","direction":null,"door_chip":"","confirmCount":0,"battery":"","lastEdited":"2026-02-09T19:17:53.859Z","keyway":"B106","ignition_fccid":"","buttons":"","lastConfirmedBy":null,"frequency":"","ignition_keyway":"","chip":"PH 46","notes":"","ignition_chip":"","fccid":"B111","door_keyway":"","codeSeries":[{"years":"2006-2011","series":"G0000-G3631"}],"keyBlank":"","lastConfirmed":null,"door_fccid":"","lastEditedBy":"Ricky Arguelles","keyType":""},"Acura|RDX|2019|2021":{"lastConfirmedBy":null,"confirmCount":0,"ignition_buttons":"","door_keyway":"","multipleKeys":false,"ignition_chip":"","keyType":"Proximity","keyway":"HO01","ignition_keyway":"","secondaryKeyPN":null,"chip":"Hitag 3","battery":"2032","lastEditedBy":"Ricky Arguelles","lastEdited":"2026-02-07T03:47:22.208Z","codeSeries":[{"series":"K001-N718","years":"2019-2021"}],"door_chip":"","direction":null,"door_fccid":"","ignition_frequency":"","keyBlank":"5268","frequency":"433.66-434.18 MHz","lastConfirmed":null,"buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","notes":"","ignition_fccid":"","fccid":"KR5T21"},"Cadillac|Brougham|1991|1992":{"ignition_frequency":"","chip":"","ignition_buttons":"","differentCodeSeries":true,"ignition_keyBlank":"B44","ignition_fccid":"B44","battery":"","ignition_keyway":"B77","door_keyBlank":"B45","ignition_chip":"","door_fccid":"B45","codeSeries":[],"direction":null,"confirmCount":0,"secondaryKeyPN":null,"door_chip":"","door_codeSeries":[{"years":"1991-1992","series":"L"},{"years":"1991-1992","series":"M"}],"lastConfirmedBy":null,"keyType":"Non-Chip Key","keyway":"","ignition_codeSeries":[{"series":"J","years":"1991-1992"},{"series":"K","years":"1991-1992"}],"notes":"","door_keyway":"B79","lastEdited":"2026-02-09T16:45:06.855Z","multipleKeys":true,"buttons":"","frequency":"","lastEditedBy":"Ricky Arguelles","lastConfirmed":null,"fccid":""},"Cadillac|DeVille|1991|1999":{"ignition_codeSeries":[{"years":"1991-1999","series":"J"},{"series":"K","years":"1991-1999"}],"lastConfirmed":null,"lastEditedBy":"Ricky Arguelles","direction":null,"keyType":"VATS Single-Sided","fccid":"","confirmCount":0,"buttons":"","lastConfirmedBy":null,"ignition_keyway":"B62","door_codeSeries":[{"years":"1991-1999","series":"L"},{"series":"M","years":"1991-1999"}],"ignition_keyBlank":"B62","door_chip":"","battery":"","multipleKeys":true,"ignition_chip":"VATS","ignition_buttons":"","frequency":"","door_fccid":"B45","ignition_frequency":"","differentCodeSeries":true,"lastEdited":"2026-02-09T19:15:30.529Z","ignition_fccid":"B62","notes":"","chip":"","secondaryKeyPN":null,"keyway":"","door_keyBlank":"B45","door_keyway":"B79","codeSeries":[]},"Cadillac|ELR|2014|2014":{"lastConfirmed":null,"lastConfirmedBy":null,"notes":"","codeSeries":[{"series":"Z0001-Z6000","years":"2014-2014"}],"confirmCount":0,"direction":null},"Cadillac|CTS|2018|2019":{"codeSeries":[{"series":"V0001-V5718","years":"2018-2019"}],"notes":"","confirmCount":0,"lastConfirmed":null,"direction":null,"lastConfirmedBy":null},"Hyundai|Elantra|2017|2019":{"lastConfirmedBy":null,"codeSeries":[{"series":"B0001-B3000","years":"2017-2019"}],"confirmCount":0,"direction":null,"lastConfirmed":null,"notes":""},"Ford|Ranger|2005|2005":{"notes":"","lastConfirmed":null,"codeSeries":[{"series":"1-1706X","years":"2005-2005"}],"direction":null,"lastConfirmedBy":null,"confirmCount":0},"Cadillac|Concours|1990|1990":{"door_fccid":"B51","lastConfirmedBy":null,"ignition_keyBlank":"B62","battery":"","ignition_chip":"VATS","door_chip":"","lastEditedBy":"Ricky Arguelles","ignition_codeSeries":[{"series":"ABVW","years":"1990-1990"}],"chip":"","notes":"","ignition_fccid":"B62","door_keyway":"B67","multipleKeys":true,"ignition_buttons":"","codeSeries":[],"lastEdited":"2026-02-09T18:19:53.342Z","confirmCount":0,"frequency":"","secondaryKeyPN":null,"door_codeSeries":[{"series":"L","years":"1990-1990"},{"series":"MSU","years":"1990-1990"}],"direction":null,"door_keyBlank":"B51","differentCodeSeries":true,"keyway":"","fccid":"","ignition_keyway":"B62","ignition_frequency":"","lastConfirmed":null,"keyType":"VATS Single-Sided","buttons":""},"Buick|Roadmaster|1991|1993":{"ignition_buttons":"","confirmCount":0,"ignition_fccid":"B44","door_keyway":"B79","secondaryKeyPN":null,"battery":"","lastConfirmedBy":null,"fccid":"","ignition_keyway":"B77","ignition_frequency":"","door_codeSeries":[{"years":"1991-1993","series":"L"},{"years":"1991-1993","series":"M"}],"direction":null,"door_chip":"","notes":"","keyway":"","ignition_codeSeries":[{"years":"1991-1993","series":"J"},{"series":"K","years":"1991-1993"}],"door_keyBlank":"B45","ignition_chip":"VATS","lastConfirmed":null,"chip":"","door_fccid":"B45","buttons":"","multipleKeys":true,"lastEditedBy":"Ricky Arguelles","frequency":"","lastEdited":"2026-02-07T04:59:31.719Z","keyType":"","codeSeries":[],"ignition_keyBlank":"B44","differentCodeSeries":true},"Cadillac|Brougham|1993|1996":{"lastConfirmedBy":null,"ignition_frequency":"","ignition_codeSeries":[{"years":"1993-1996","series":"J"},{"years":"1993-1996","series":"K"}],"secondaryKeyPN":null,"direction":null,"frequency":"","door_keyBlank":"B45","keyType":"VATS Single-Sided","lastEdited":"2026-02-09T17:16:20.456Z","lastConfirmed":null,"ignition_keyBlank":"B62","confirmCount":0,"ignition_fccid":"B62","buttons":"","notes":"","codeSeries":[],"chip":"","lastEditedBy":"Ricky Arguelles","battery":"","ignition_buttons":"","fccid":"","door_fccid":"B45","ignition_keyway":"B62","door_codeSeries":[{"series":"L","years":"1993-1996"},{"years":"1993-1996","series":"M"}],"ignition_chip":"VATS","door_chip":"","door_keyway":"B79","keyway":"","multipleKeys":true,"differentCodeSeries":true},"Hyundai|Kona|2018|2022":{"direction":null,"lastConfirmed":null,"lastConfirmedBy":null,"confirmCount":0,"notes":"","codeSeries":[{"years":"2018-2022","series":"B0001-B3000"}]},"Kia|Rio|2001|2005":{"confirmCount":0,"lastConfirmedBy":null,"direction":null,"notes":"","lastConfirmed":null},"Cadillac|CTS|2003|2007":{"keyBlank":"40227","ignition_fccid":"","ignition_buttons":"","chip":"M 48 Magic II","ignition_chip":"","door_fccid":"","lastConfirmedBy":null,"door_keyway":"","notes":"","codeSeries":[{"years":"2003-2007","series":"H0001-H3988"}],"lastEdited":"2026-02-09T18:22:33.884Z","confirmCount":0,"frequency":"","lastEditedBy":"Ricky Arguelles","secondaryKeyPN":null,"keyType":"","fccid":"B112","buttons":"","multipleKeys":false,"battery":"","ignition_frequency":"","keyway":"B96/B102","door_chip":"","lastConfirmed":null,"direction":null,"ignition_keyway":""},"Cadillac|SRX|2010|2014":{"notes":"","lastConfirmedBy":null,"direction":null,"lastConfirmed":null,"confirmCount":0,"codeSeries":[{"series":"Z0001-Z6000","years":"2010-2014"}]},"Ford|Cobra|1997|1997":{"direction":null,"lastConfirmed":null,"notes":"","codeSeries":[{"years":"1997-1997","series":"1-1706X"}],"lastConfirmedBy":null,"confirmCount":0},"Cadillac|Fleetwood|1987|1990":{"ignition_chip":"","keyway":"","lastEdited":"2026-02-09T17:48:49.911Z","buttons":"","differentCodeSeries":true,"door_keyBlank":"B51","lastConfirmedBy":null,"door_keyway":"B67","fccid":"","notes":"","frequency":"","lastEditedBy":"Ricky Arguelles","lastConfirmed":null,"confirmCount":0,"door_fccid":"B51","multipleKeys":true,"chip":"","ignition_keyBlank":"B50","door_chip":"","codeSeries":[],"ignition_keyway":"B63","direction":null,"secondaryKeyPN":null,"ignition_frequency":"","door_codeSeries":[{"years":"1987-1990","series":"NPSU"}],"battery":"","ignition_fccid":"B50","ignition_codeSeries":[{"years":"1987-1990","series":"ABNP"}],"keyType":"","ignition_buttons":""},"Kia|Sportage|2021|2021":{"confirmCount":0,"lastConfirmedBy":null,"direction":null,"notes":"","lastConfirmed":null,"codeSeries":[{"years":"2021-2021","series":"D1-D3000"}]},"Cadillac|Catera|1997|1999":{"buttons":"","keyType":"Chip Key","door_keyway":"","keyway":"B61","lastConfirmed":null,"ignition_fccid":"","secondaryKeyPN":null,"ignition_keyway":"","door_chip":"","multipleKeys":false,"notes":"","fccid":"HU46T2","codeSeries":[{"series":"S1-S2000","years":"1997-1999"},{"series":"H0001-H3988","years":"2000-2001"}],"lastEdited":"2026-02-09T18:05:23.516Z","direction":null,"ignition_frequency":"","frequency":"","keyBlank":"48239","ignition_buttons":"","chip":"PH 40 GM","lastConfirmedBy":null,"battery":"","ignition_chip":"","confirmCount":0,"lastEditedBy":"Ricky Arguelles","door_fccid":""},"Mazda|B-Series|1996|1997":{"lastConfirmedBy":null,"notes":"","direction":null,"confirmCount":0,"lastConfirmed":null,"codeSeries":[{"series":"1-1706X","years":"1996-1997"}]},"Cadillac|XT6|2020|2021":{"notes":"","codeSeries":[{"series":"V0001-V5718","years":"2020-2021"}],"confirmCount":0,"lastConfirmed":null,"direction":null,"lastConfirmedBy":null},"Buick|Regal|1994|1996":{"door_fccid":"B79","frequency":"","door_keyway":"B79","lastConfirmed":null,"ignition_fccid":"B62","confirmCount":0,"ignition_frequency":"","keyType":"","fccid":"","lastConfirmedBy":null,"differentCodeSeries":true,"direction":null,"lastEditedBy":"Ricky Arguelles","buttons":"","ignition_codeSeries":[{"years":"1994-1996","series":"J"},{"series":"K","years":"1994-1996"}],"secondaryKeyPN":null,"keyway":"","lastEdited":"2026-02-07T04:43:32.719Z","multipleKeys":true,"ignition_keyway":"B62","notes":"","door_keyBlank":"B79","door_codeSeries":[{"series":"L","years":"1994-1996"},{"years":"1994-1996","series":"M"}],"ignition_buttons":"","ignition_chip":"VATS","door_chip":"VATS","codeSeries":[],"chip":"","ignition_keyBlank":"B62","battery":""},"Ford|Windstar|1996|1997":{"codeSeries":[{"series":"1-1706X","years":"1996-1997"}],"confirmCount":0,"direction":null,"notes":"","lastConfirmedBy":null,"lastConfirmed":null},"Acura|TLX|2018|2023":{"confirmCount":0,"door_chip":"","direction":null,"keyway":"HO01","keyBlank":"","ignition_frequency":"","notes":"","chip":"HITAG 3","buttons":"","ignition_buttons":"","secondaryKeyPN":null,"codeSeries":[{"series":"K001-N718","years":"2018-2023"}],"ignition_keyway":"","door_fccid":"","keyType":"","lastConfirmed":null,"ignition_fccid":"","fccid":"KR5995364","frequency":"923.625-924.6 MHz","multipleKeys":false,"lastEdited":"2026-02-07T04:09:22.966Z","battery":"","lastConfirmedBy":null,"lastEditedBy":"Ricky Arguelles","ignition_chip":"","door_keyway":""},"Ford|CF7000|1996|1999":{"notes":"","confirmCount":0,"lastConfirmedBy":null,"lastConfirmed":null,"direction":null},"Buick|Riviera|1992|1994":{"differentCodeSeries":true,"ignition_codeSeries":[{"series":"J","years":"1992-1994"},{"years":"1992-1994","series":"K"}],"frequency":"","secondaryKeyPN":null,"ignition_keyway":"B62","fccid":"","lastConfirmed":null,"lastEdited":"2026-02-07T04:54:00.591Z","keyway":"","lastEditedBy":"Ricky Arguelles","door_fccid":"B45","confirmCount":0,"codeSeries":[],"battery":"","multipleKeys":true,"lastConfirmedBy":null,"keyType":"","chip":"","ignition_fccid":"B62","ignition_buttons":"","door_keyBlank":"B45","direction":null,"door_keyway":"B79","door_chip":"","ignition_keyBlank":"B62","buttons":"","ignition_frequency":"","notes":"","ignition_chip":"VATS","door_codeSeries":[{"series":"L","years":"1992-1994"},{"years":"1992-1994","series":"M"}]},"Cadillac|Escalade|2000|2006":{"ignition_frequency":"","direction":null,"lastConfirmedBy":null,"keyway":"B96/B102","keyType":"Non-Chip Key","ignition_chip":"","lastEdited":"2026-02-09T19:50:50.615Z","ignition_keyway":"","multipleKeys":false,"codeSeries":[{"years":"2000-2006","series":"S000A-S999K"}],"lastEditedBy":"Ricky Arguelles","door_chip":"","battery":"","lastConfirmed":null,"door_fccid":"","fccid":"B102","ignition_fccid":"","door_keyway":"","confirmCount":0,"frequency":"315 MHz","ignition_buttons":"","keyBlank":"B102","secondaryKeyPN":null,"buttons":"","notes":"","chip":""},"Acura|RLX|2016|2020":{"lastEditedBy":"Ricky Arguelles","buttons":"","battery":"","keyway":"HO01","ignition_keyway":"","chip":"HITAG 3","door_keyway":"","ignition_chip":"","door_fccid":"","frequency":"923.625-924.6 MHz","lastConfirmedBy":null,"multipleKeys":false,"notes":"","confirmCount":0,"door_chip":"","ignition_fccid":"","keyBlank":"","secondaryKeyPN":null,"lastEdited":"2026-02-07T04:02:56.708Z","lastConfirmed":null,"fccid":"KR580399900","ignition_frequency":"","direction":null,"keyType":"","codeSeries":[{"years":"2016-2020","series":"K001-N718"}],"ignition_buttons":""},"Acura|ILX|2013|2015":{"lastConfirmed":null,"keyType":"","ignition_fccid":"","door_fccid":"","lastEditedBy":"Ricky Arguelles","keyway":"HO01","door_keyway":"","ignition_chip":"","codeSeries":[{"series":"K001-N718","years":"2013-2015"}],"door_chip":"","keyBlank":"","ignition_frequency":"","ignition_buttons":"","lastEdited":"2026-02-07T03:10:39.179Z","direction":null,"battery":"","multipleKeys":false,"fccid":"KR5434760","ignition_keyway":"","secondaryKeyPN":null,"buttons":"","notes":"","frequency":"313.85 MHz","lastConfirmedBy":null,"confirmCount":0,"chip":"PH 46"},"Acura|TSX|2009|2014":{"multipleKeys":false,"notes":"","secondaryKeyPN":null,"buttons":"","fccid":"HO03","ignition_buttons":"","frequency":"","ignition_chip":"","direction":null,"door_chip":"","door_keyway":"","lastEdited":"2026-02-07T04:16:58.152Z","keyway":"HO01","lastConfirmed":null,"codeSeries":[{"years":"2009-2014","series":"K001-N718"}],"battery":"","door_fccid":"","ignition_keyway":"","chip":"PH 46","ignition_frequency":"","keyBlank":"HO03","lastEditedBy":"Ricky Arguelles","lastConfirmedBy":null,"keyType":"","ignition_fccid":"","confirmCount":0},"Acura|RL|1996|2004":{"ignition_frequency":"","lastEdited":"2026-02-07T03:52:23.954Z","chip":"M 13","lastEditedBy":"Ricky Arguelles","door_chip":"","ignition_fccid":"","secondaryKeyPN":null,"notes":"","door_keyway":"","door_fccid":"","multipleKeys":false,"lastConfirmed":null,"keyBlank":"HD106","keyType":"","buttons":"","frequency":"","ignition_chip":"","lastConfirmedBy":null,"battery":"","fccid":"HD106","ignition_buttons":"","keyway":"HD103","ignition_keyway":"","direction":null,"confirmCount":0,"codeSeries":[{"series":"5001-8442","years":"1996-2004"}]},"Cadillac|Seville|1989|1990":{"codeSeries":[],"ignition_fccid":"B62","keyType":"VATS Single-Sided","chip":"","direction":null,"ignition_keyway":"B62","door_codeSeries":[{"years":"1989-1990","series":"C"},{"series":"D","years":"1989-1990"}],"fccid":"","ignition_keyBlank":"B62","ignition_buttons":"","ignition_frequency":"","differentCodeSeries":true,"notes":"","door_chip":"","keyway":"","ignition_codeSeries":[{"years":"1989-1990","series":"A"},{"years":"1989-1990","series":"B"}],"door_keyway":"B67","lastEditedBy":"Ricky Arguelles","buttons":"","door_keyBlank":"B51","lastConfirmed":null,"lastEdited":"2026-02-09T20:03:49.033Z","frequency":"","ignition_chip":"VATS","confirmCount":0,"door_fccid":"B51","lastConfirmedBy":null,"secondaryKeyPN":null,"battery":"","multipleKeys":true},"Ford|Explorer Sport|1996|1998":{"lastConfirmedBy":null,"lastConfirmed":null,"confirmCount":0,"direction":null,"notes":"","codeSeries":[{"series":"1-1706X","years":"1996-1998"}]},"Buick|Skylark|1992|1992":{"ignition_keyway":"B68","ignition_keyBlank":"B68","ignition_frequency":"","keyType":"Non-Chip Key","direction":null,"ignition_codeSeries":[{"years":"1992-1992","series":"J"}],"ignition_fccid":"B68","lastEdited":"2026-02-07T05:09:03.206Z","lastConfirmedBy":null,"door_chip":"","secondaryKeyPN":null,"confirmCount":0,"differentCodeSeries":true,"door_keyBlank":"B45","codeSeries":[],"ignition_buttons":"","door_codeSeries":[{"series":"L","years":"1992-1992"},{"series":"M","years":"1992-1992"}],"buttons":"","ignition_chip":"","battery":"","frequency":"","multipleKeys":true,"fccid":"","lastEditedBy":"Ricky Arguelles","notes":"","door_fccid":"B45","lastConfirmed":null,"chip":"","keyway":"","door_keyway":"B79"},"Buick|Signia|2005|2007":{"multipleKeys":false,"keyway":"B106","door_fccid":"","ignition_keyway":"","buttons":"","codeSeries":[{"series":"G0000-G3631","years":"2005-2007"}],"door_chip":"","notes":"","lastEditedBy":"Ricky Arguelles","frequency":"","keyType":"Non-Chip Key","battery":"","direction":null,"ignition_chip":"","lastEdited":"2026-02-07T05:04:09.985Z","door_keyway":"","secondaryKeyPN":null,"fccid":"B106","ignition_buttons":"","chip":"","keyBlank":"B106","confirmCount":0,"lastConfirmedBy":null,"ignition_fccid":"","lastConfirmed":null,"ignition_frequency":""},"Cadillac|STS|2004|2011":{"door_fccid":"","keyBlank":"","ignition_chip":"","keyway":"B106","ignition_frequency":"","fccid":"B111","confirmCount":0,"secondaryKeyPN":null,"battery":"","direction":null,"ignition_buttons":"","notes":"","door_chip":"","ignition_fccid":"","chip":"PH 46","lastEditedBy":"Ricky Arguelles","lastEdited":"2026-02-09T20:21:21.109Z","door_keyway":"","multipleKeys":false,"keyType":"","codeSeries":[{"years":"2004-2011","series":"G0000-G3631"}],"frequency":"","ignition_keyway":"","buttons":"","lastConfirmed":null,"lastConfirmedBy":null},"Hyundai|Santa Fe|2020|2021":{"codeSeries":[{"years":"2020-2021","series":"S1-S2500"}],"confirmCount":0,"notes":"","lastConfirmed":null,"lastConfirmedBy":null,"direction":null},"Cadillac|DeVille|2000|2005":{"direction":null,"buttons":"","ignition_chip":"","lastEdited":"2026-02-09T19:17:20.078Z","keyway":"B86","battery":"","door_keyway":"","ignition_frequency":"","door_fccid":"","codeSeries":[{"series":"H0001-H3988","years":"2000-2005"}],"keyBlank":"40180","ignition_fccid":"","confirmCount":0,"frequency":"","chip":"M 13","lastEditedBy":"Ricky Arguelles","lastConfirmed":null,"ignition_buttons":"","multipleKeys":false,"door_chip":"","notes":"","secondaryKeyPN":null,"fccid":"B99","lastConfirmedBy":null,"ignition_keyway":"","keyType":""},"Hyundai|Elantra|1996|2010":{"lastConfirmedBy":null,"notes":"","lastConfirmed":null,"direction":null,"confirmCount":0},"Kia|Sephia|1998|2004":{"confirmCount":0,"direction":null,"notes":"","lastConfirmedBy":null,"lastConfirmed":null},"Cadillac|Allante|1989|1993":{"battery":"","ignition_keyway":"B62","lastEdited":"2026-02-08T02:52:23.578Z","differentCodeSeries":true,"ignition_buttons":"","fccid":"","door_chip":"","ignition_frequency":"","codeSeries":[],"door_keyBlank":"B59","door_fccid":"B59","chip":"","ignition_fccid":"B62","keyType":"VATS Single-Sided","door_keyway":"B59","lastConfirmedBy":null,"keyway":"","ignition_keyBlank":"B62","secondaryKeyPN":null,"direction":null,"frequency":"","notes":"","multipleKeys":true,"ignition_chip":"VATS","ignition_codeSeries":[{"years":"1989-1993","series":"ABVW"}],"lastEditedBy":"Ricky Arguelles","buttons":"","confirmCount":0,"lastConfirmed":null,"door_codeSeries":[{"series":"1-500","years":"1989-1993"}]},"Ford|E-Series/Econoline/Club Wagon Van|1996|2006":{"notes":"","direction":null,"lastConfirmed":null,"codeSeries":[{"series":"1-1706X","years":"1996-2006"}],"confirmCount":0,"lastConfirmedBy":null},"Acura|Integra|1990|1999":{"keyType":"","ignition_fccid":"","battery":"","ignition_buttons":"","multipleKeys":false,"ignition_frequency":"","frequency":"","lastEditedBy":"Ricky Arguelles","door_keyway":"","door_fccid":"","buttons":"","direction":null,"chip":"","lastConfirmed":null,"notes":"","ignition_chip":"","door_chip":"","fccid":"HD103","secondaryKeyPN":null,"keyBlank":"HD103","codeSeries":[{"years":"1990-1999","series":"5001-8442"}],"keyway":"HD103","lastConfirmedBy":null,"ignition_keyway":"","lastEdited":"2026-02-07T03:12:41.893Z","confirmCount":0},"Cadillac|El Dorado|1991|2003":{"confirmCount":0,"door_codeSeries":[{"years":"1991-2003","series":"L"},{"years":"1991-2003","series":"M"}],"differentCodeSeries":true,"direction":null,"chip":"","door_chip":"","door_keyway":"B79","lastEditedBy":"Ricky Arguelles","lastEdited":"2026-02-09T19:20:28.501Z","battery":"","keyway":"","lastConfirmed":null,"frequency":"","ignition_buttons":"","secondaryKeyPN":null,"notes":"","ignition_chip":"VATS","door_fccid":"B45","fccid":"","lastConfirmedBy":null,"buttons":"","ignition_frequency":"","ignition_keyBlank":"B62","door_keyBlank":"B45","multipleKeys":true,"ignition_fccid":"B62","ignition_codeSeries":[{"series":"J","years":"1991-2003"},{"series":"K","years":"1991-2003"}],"keyType":"","codeSeries":[],"ignition_keyway":"B62"},"Hyundai|Tiburon|1996|2009":{"direction":null,"lastConfirmed":null,"confirmCount":0,"lastConfirmedBy":null,"notes":""},"Acura|NSX|1991|1996":{"lastConfirmed":null,"lastEditedBy":"Ricky Arguelles","fccid":"HD103","chip":"","buttons":"","keyway":"HD103","direction":null,"ignition_buttons":"","battery":"","multipleKeys":false,"notes":"","ignition_frequency":"","frequency":"","secondaryKeyPN":null,"lastConfirmedBy":null,"ignition_chip":"","ignition_keyway":"","door_chip":"","door_fccid":"","lastEdited":"2026-02-07T03:18:35.006Z","ignition_fccid":"","codeSeries":[{"series":"5001-8442","years":"1991-1996"}],"door_keyway":"","confirmCount":0,"keyType":"Non-Chip Key","keyBlank":"HD103"},"Kia|Spectra|2005|2009":{"notes":"","direction":null,"lastConfirmedBy":null,"lastConfirmed":null,"confirmCount":0},"Mercury|Villager|1996|2002":{"lastConfirmedBy":null,"codeSeries":[{"series":"1-1706X","years":"1996-2002"}],"notes":"","confirmCount":0,"lastConfirmed":null,"direction":null},"Acura|TL|2004|2006":{"codeSeries":[{"years":"2004-2006","series":"5001-8442"}],"confirmCount":0,"battery":"","door_keyway":"","buttons":"","chip":"PH 46","ignition_fccid":"","lastConfirmed":null,"keyType":"","ignition_chip":"","lastEditedBy":"Ricky Arguelles","ignition_buttons":"","keyBlank":"HD111","ignition_frequency":"","ignition_keyway":"","fccid":"HD111","door_fccid":"","secondaryKeyPN":null,"keyway":"HD103","door_chip":"","multipleKeys":false,"frequency":"","lastEdited":"2026-02-07T04:06:20.254Z","lastConfirmedBy":null,"direction":null,"notes":""},"Acura|ILX|2016|2019":{"ignition_fccid":"","secondaryKeyPN":null,"battery":"","door_keyway":"","frequency":"313.55-314.15 MHz","codeSeries":[{"series":"K001-N718","years":"2016-2019"}],"ignition_frequency":"","lastEdited":"2026-02-07T03:11:04.810Z","keyBlank":"","door_chip":"","door_fccid":"","lastConfirmedBy":null,"buttons":"","ignition_chip":"","confirmCount":0,"keyway":"HO01","notes":"","ignition_keyway":"","chip":"HITAG 3 PCF7920","ignition_buttons":"","fccid":"KR5V1X","lastConfirmed":null,"lastEditedBy":"Ricky Arguelles","direction":null,"keyType":"","multipleKeys":false},"Acura|RSX|2002|2006":{"direction":null,"multipleKeys":false,"secondaryKeyPN":null,"confirmCount":0,"door_keyway":"","door_chip":"","ignition_chip":"","ignition_keyway":"","notes":"","keyBlank":"HD106","keyType":"","lastEditedBy":"Ricky Arguelles","buttons":"","ignition_buttons":"","fccid":"HD106","lastConfirmed":null,"battery":"","codeSeries":[{"series":"5001-8442","years":"2002-2006"}],"chip":"M 13","lastEdited":"2026-02-07T04:05:12.664Z","keyway":"HD103","ignition_fccid":"","ignition_frequency":"","door_fccid":"","lastConfirmedBy":null,"frequency":""},"Ford|F-Series/F150/F250 Light Duty Pickup|1996|1998":{"direction":null,"notes":"","codeSeries":[{"series":"1-1706X","years":"1996-1998"}],"lastConfirmedBy":null,"confirmCount":0,"lastConfirmed":null},"Acura|TL|2007|2014":{"door_chip":"","secondaryKeyPN":null,"lastEditedBy":"Ricky Arguelles","ignition_buttons":"","lastConfirmed":null,"battery":"","frequency":"","door_keyway":"","keyway":"HO01","multipleKeys":false,"keyBlank":"HO03","codeSeries":[{"series":"K001-N718","years":"2007-2014"}],"buttons":"","lastEdited":"2026-02-07T04:06:41.305Z","keyType":"","door_fccid":"","ignition_fccid":"","lastConfirmedBy":null,"ignition_keyway":"","direction":null,"fccid":"HO03","notes":"","ignition_chip":"","ignition_frequency":"","chip":"PH 46","confirmCount":0},"Cadillac|Cimarron|1987|1987":{"keyway":"","ignition_codeSeries":[{"series":"ABNP","years":"1987-1987"}],"differentCodeSeries":true,"ignition_frequency":"","codeSeries":[],"lastEditedBy":"Ricky Arguelles","buttons":"","ignition_buttons":"","door_fccid":"B51","ignition_fccid":"B50","ignition_chip":"","lastConfirmed":null,"direction":null,"keyType":"Transponder","chip":"","frequency":"","confirmCount":0,"door_codeSeries":[{"years":"1987-1987","series":"NPSU"}],"multipleKeys":true,"door_keyway":"B67","lastConfirmedBy":null,"notes":"","ignition_keyBlank":"B50","lastEdited":"2026-02-09T18:12:20.104Z","ignition_keyway":"B63","secondaryKeyPN":null,"door_keyBlank":"B51","battery":"","door_chip":"","fccid":""},"Ford|6000|1996|1999":{"notes":"","lastConfirmedBy":null,"lastConfirmed":null,"confirmCount":0,"direction":null},"Kia|Rio|2006|2010":{"lastConfirmedBy":null,"direction":null,"codeSeries":[{"series":"V1-V1200","years":"2006-2010"}],"lastConfirmed":null,"notes":"","confirmCount":0},"Acura|TL|1999|2003":{"door_keyway":"","ignition_fccid":"","confirmCount":0,"door_chip":"","keyway":"HD103","lastConfirmedBy":null,"ignition_frequency":"","ignition_keyway":"","codeSeries":[{"series":"5001-8442","years":"1999-2003"}],"ignition_buttons":"","battery":"","chip":"M 13","notes":"","door_fccid":"","multipleKeys":false,"keyType":"","ignition_chip":"","lastEdited":"2026-02-07T04:05:57.300Z","keyBlank":"HD106","frequency":"","lastEditedBy":"Ricky Arguelles","secondaryKeyPN":null,"direction":null,"buttons":"","fccid":"HD106","lastConfirmed":null},"Mercury|Grand Marquis|1997|1997":{"lastConfirmedBy":null,"codeSeries":[{"series":"1-1706X","years":"1997-1997"}],"notes":"","direction":null,"lastConfirmed":null,"confirmCount":0},"Cadillac|XT5|2021|2021":{"codeSeries":[{"years":"2021-2021","series":"V0001-V5718"}],"lastConfirmedBy":null,"direction":null,"notes":"","confirmCount":0,"lastConfirmed":null},"Acura|RDX|2007|2012":{"ignition_fccid":"","direction":null,"notes":"","chip":"PH 46","fccid":"HO03","buttons":"","keyBlank":"HO03","lastConfirmed":null,"codeSeries":[{"series":"K001-N718","years":"2007-2012"}],"battery":"","ignition_buttons":"","lastEditedBy":"Ricky Arguelles","door_fccid":"","ignition_chip":"","secondaryKeyPN":null,"lastConfirmedBy":null,"door_keyway":"","confirmCount":0,"ignition_frequency":"","keyway":"HO01","multipleKeys":false,"keyType":"","lastEdited":"2026-02-07T03:20:22.940Z","door_chip":"","ignition_keyway":"","frequency":""},"Kia|Spectra|1998|2004":{"lastConfirmed":null,"lastConfirmedBy":null,"notes":"","confirmCount":0,"direction":null},"Mercury|Mountaineer|1997|1997":{"lastConfirmed":null,"lastConfirmedBy":null,"notes":"","confirmCount":0,"direction":null,"codeSeries":[{"years":"1997-1997","series":"1-1706X"}]},"Cadillac|CT6|2016|2020":{"confirmCount":0,"lastConfirmedBy":null,"notes":"","lastConfirmed":null,"direction":null,"codeSeries":[{"series":"V0001-V5718","years":"2016-2020"}]},"Cadillac|CTS|2014|2019":{"lastConfirmedBy":null,"door_fccid":"","lastEdited":"2026-02-09T18:33:20.263Z","frequency":"314.9 MHz","ignition_keyway":"","door_keyway":"","secondaryKeyPN":null,"fccid":"HYQ2AB","keyway":"HU100","confirmCount":0,"codeSeries":[{"series":"V0001-V5718","years":"2014-2019"}],"battery":"","multipleKeys":false,"ignition_frequency":"","lastEditedBy":"Ricky Arguelles","door_chip":"","keyBlank":"8598","lastConfirmed":null,"chip":"PH 46","ignition_chip":"","ignition_fccid":"","ignition_buttons":"","keyType":"","direction":null,"notes":"","buttons":""},"Acura|TL|1995|1998":{"lastEdited":"2026-02-07T04:07:46.630Z","secondaryKeyPN":null,"ignition_buttons":"","lastEditedBy":"Ricky Arguelles","direction":null,"keyBlank":"HD103","keyType":"Non-Chip Key","fccid":"HD103","buttons":"","door_chip":"","keyway":"HD103","multipleKeys":false,"ignition_chip":"","ignition_frequency":"","battery":"","chip":"","lastConfirmedBy":null,"lastConfirmed":null,"notes":"","ignition_keyway":"","confirmCount":0,"codeSeries":[{"years":"1995-1998","series":"5001-8442"}],"door_fccid":"","ignition_fccid":"","frequency":"","door_keyway":""},"Cadillac|XT6|2020|2020":{"door_chip":"","ignition_frequency":"","lastConfirmed":null,"chip":"PH 46","fccid":"HYQ2EB","ignition_chip":"","keyway":"HU100","ignition_buttons":"","codeSeries":[{"series":"V0001-V5718","years":"2020-2021"}],"lastEdited":"2026-02-09T20:38:31.244Z","direction":null,"frequency":"433.92 MHz","multipleKeys":false,"notes":"","buttons":"","ignition_fccid":"","keyType":"","door_fccid":"","confirmCount":0,"battery":"","keyBlank":"5470","secondaryKeyPN":null,"ignition_keyway":"","lastConfirmedBy":null,"door_keyway":"","lastEditedBy":"Ricky Arguelles"},"Hyundai|Santa Fe|2013|2018":{"notes":"","direction":null,"confirmCount":0,"lastConfirmedBy":null,"lastConfirmed":null},"Acura|ZDX|2010|2012":{"battery":"","ignition_buttons":"","notes":"","lastEdited":"2026-02-07T04:18:23.138Z","lastConfirmed":null,"keyType":"","keyBlank":"HO03","door_fccid":"","door_chip":"","direction":null,"codeSeries":[{"years":"2010-2012","series":"K001-N718"}],"lastEditedBy":"Ricky Arguelles","buttons":"","chip":"PH 46","secondaryKeyPN":null,"ignition_frequency":"","frequency":"","multipleKeys":false,"ignition_chip":"","lastConfirmedBy":null,"ignition_keyway":"","confirmCount":0,"fccid":"HO03","keyway":"HO01","door_keyway":"","ignition_fccid":""},"Kia|Rio|2018|2020":{"notes":"","codeSeries":[{"years":"2018-2020","series":"D1-D3000"}],"lastConfirmedBy":null,"lastConfirmed":null,"direction":null,"confirmCount":0},"Cadillac|ATS|2019|2019":{"confirmCount":0,"lastConfirmed":null,"lastConfirmedBy":null,"notes":"","direction":null,"codeSeries":[{"series":"V0001-V5718","years":"2019-2019"}]},"Acura|ILX|2019|2020":{"ignition_chip":"","lastConfirmed":null,"chip":"HITAG 3 PCF7920","keyway":"HO01","ignition_buttons":"","lastEdited":"2026-02-07T03:11:38.227Z","secondaryKeyPN":null,"fccid":"KR5V2X","door_chip":"","ignition_fccid":"","door_fccid":"","multipleKeys":false,"direction":null,"keyType":"","lastEditedBy":"Ricky Arguelles","ignition_keyway":"","door_keyway":"","keyBlank":"","lastConfirmedBy":null,"frequency":"433.66-434.18 MHz","battery":"","notes":"","confirmCount":0,"ignition_frequency":"","codeSeries":[{"series":"K001-N718","years":"2019-2020"}],"buttons":""},"Hyundai|Accent|2018|2021":{"confirmCount":0,"direction":null,"lastConfirmedBy":null,"codeSeries":[{"years":"2018-2021","series":"H1-H2500"}],"notes":"","lastConfirmed":null},"Acura|NSX|1997|2005":{"door_fccid":"","confirmCount":0,"buttons":"","frequency":"","ignition_chip":"","chip":"M 13","fccid":"HD106","door_chip":"","ignition_buttons":"","lastConfirmedBy":null,"battery":"","codeSeries":[{"years":"1997-2005","series":"5001-8442"}],"keyway":"HD103","door_keyway":"","secondaryKeyPN":null,"multipleKeys":false,"keyBlank":"HD106","lastEdited":"2026-02-07T03:16:52.993Z","ignition_frequency":"","ignition_keyway":"","lastConfirmed":null,"notes":"","ignition_fccid":"","lastEditedBy":"Ricky Arguelles","direction":null,"keyType":""},"Buick|Skylark|1995|1998":{"ignition_fccid":"","codeSeries":[{"years":"1995-1998","series":"AA00-7T51"}],"keyType":"Non-Chip Key","chip":"","confirmCount":0,"door_fccid":"","door_keyway":"","ignition_chip":"","lastConfirmed":null,"ignition_frequency":"","ignition_buttons":"","direction":null,"ignition_keyway":"","multipleKeys":false,"lastConfirmedBy":null,"fccid":"B89","buttons":"","battery":"","door_chip":"","keyBlank":"B89","notes":"","secondaryKeyPN":null,"keyway":"B86","frequency":"","lastEdited":"2026-02-07T05:14:45.871Z","lastEditedBy":"Ricky Arguelles"},"Hyundai|Accent|2000|2005":{"confirmCount":0,"codeSeries":[{"series":"T1-T1000","years":"2000-2005"}],"lastConfirmedBy":null,"lastConfirmed":null,"notes":"","direction":null},"Acura|TLX|2015|2017":{"ignition_keyway":"","lastConfirmed":null,"keyway":"HO01","ignition_fccid":"","secondaryKeyPN":null,"buttons":"","fccid":"KR5V1X","multipleKeys":false,"ignition_frequency":"","lastEditedBy":"Ricky Arguelles","codeSeries":[{"series":"K001-N718","years":"2015-2017"}],"direction":null,"door_keyway":"","keyType":"","frequency":"313.55-314.15 MHz","lastEdited":"2026-02-07T04:08:17.637Z","chip":"HITAG 3 PCF7920","battery":"","notes":"","lastConfirmedBy":null,"keyBlank":"","door_chip":"","ignition_buttons":"","ignition_chip":"","door_fccid":"","confirmCount":0},"Cadillac|ELR|2015|2016":{"frequency":"314.9","secondaryKeyPN":null,"ignition_fccid":"","door_keyway":"","notes":"Cadillac ELR year ranges vary from resource. ILCO says 2014-2017 while KR and others say 2015-2016.","ignition_chip":"","door_chip":"","direction":null,"keyway":"HU100","ignition_buttons":"","lastEdited":"2026-02-09T19:37:01.543Z","confirmCount":0,"lastConfirmed":null,"chip":"PH 46","battery":"","lastEditedBy":"Ricky Arguelles","fccid":"NBG009768T, NBGG093UCC","multipleKeys":false,"ignition_frequency":"","buttons":"","keyType":"","keyBlank":"8026","codeSeries":[{"years":"2015-2016","series":"Z0001-Z6000"}],"ignition_keyway":"","door_fccid":"","lastConfirmedBy":null},"Buick|Reatta|1991|1992":{"secondaryKeyPN":null,"chip":"","notes":"","door_codeSeries":[{"years":"1991-1992","series":"L"},{"years":"1991-1992","series":"M"}],"door_fccid":"B45","keyType":"VATS Single-Sided","ignition_frequency":"","ignition_keyway":"B62","direction":null,"ignition_fccid":"B62","confirmCount":0,"lastConfirmedBy":null,"buttons":"","door_chip":"","ignition_codeSeries":[{"years":"1991-1992","series":"J"},{"years":"1991-1992","series":"K"}],"door_keyBlank":"B45","fccid":"","codeSeries":[],"frequency":"","lastConfirmed":null,"ignition_buttons":"","multipleKeys":true,"lastEdited":"2026-02-07T04:32:57.349Z","differentCodeSeries":true,"door_keyway":"B79","keyway":"","ignition_chip":"VATS","ignition_keyBlank":"B62","lastEditedBy":"Ricky Arguelles","battery":""},"Acura|MDX|2007|2013":{"confirmCount":0,"ignition_fccid":"","notes":"","ignition_keyway":"","battery":"","chip":"PH 46","secondaryKeyPN":null,"multipleKeys":false,"frequency":"","door_keyway":"","lastEditedBy":"Ricky Arguelles","lastConfirmed":null,"lastEdited":"2026-02-07T03:14:54.068Z","fccid":"HO03","keyway":"HO01","buttons":"","lastConfirmedBy":null,"ignition_frequency":"","door_chip":"","ignition_chip":"","ignition_buttons":"","codeSeries":[{"series":"K001-N718","years":"2007-2013"}],"door_fccid":"","keyType":"","direction":null,"keyBlank":"HO03"},"Ford|Bronco|1997|1997":{"codeSeries":[{"years":"1997-1997","series":"1-1706X"}],"lastConfirmedBy":null,"direction":null,"lastConfirmed":null,"confirmCount":0,"notes":""},"Buick|Skylark|1993|1993":{"keyway":"","door_chip":"","ignition_keyway":"B84","lastEditedBy":"Ricky Arguelles","keyType":"Non-Chip Key","multipleKeys":true,"door_codeSeries":[{"years":"1993-1993","series":"L"},{"years":"1993-1993","series":"M"}],"secondaryKeyPN":null,"chip":"","lastEdited":"2026-02-07T05:10:38.219Z","door_fccid":"B45","frequency":"","lastConfirmedBy":null,"ignition_codeSeries":[{"series":"J","years":"1993-1993"}],"codeSeries":[],"notes":"","door_keyBlank":"B45","ignition_fccid":"B84","confirmCount":0,"direction":null,"differentCodeSeries":true,"lastConfirmed":null,"ignition_chip":"","battery":"","door_keyway":"B79","ignition_frequency":"","fccid":"","ignition_keyBlank":"B84","buttons":"","ignition_buttons":""},"Ford|9000|1996|1999":{"lastConfirmed":null,"lastConfirmedBy":null,"notes":"","confirmCount":0,"direction":null},"Cadillac|Escalade|1991|1991":{"direction":null,"lastEditedBy":"Ricky Arguelles","keyType":"Non-Chip Key","multipleKeys":false,"lastConfirmedBy":null,"keyBlank":"B91","battery":"","door_keyway":"","confirmCount":0,"ignition_fccid":"","buttons":"","chip":"","ignition_frequency":"","frequency":"","ignition_chip":"","codeSeries":[{"series":"AA00-7T51","years":"1991-1991"}],"fccid":"B91","notes":"","lastEdited":"2026-02-09T19:50:32.040Z","lastConfirmed":null,"ignition_buttons":"","door_chip":"","door_fccid":"","ignition_keyway":"","secondaryKeyPN":null,"keyway":"B91"},"Acura|Integra|2000|2001":{"multipleKeys":false,"lastConfirmedBy":null,"door_chip":"","keyway":"HD103","frequency":"","confirmCount":0,"secondaryKeyPN":null,"ignition_buttons":"","ignition_keyway":"","keyBlank":"HD106","keyType":"","ignition_frequency":"","direction":null,"buttons":"","ignition_chip":"","lastEdited":"2026-02-07T03:12:56.727Z","door_keyway":"","fccid":"HD106","lastEditedBy":"Ricky Arguelles","door_fccid":"","lastConfirmed":null,"chip":"M 13","notes":"","codeSeries":[{"years":"2000-2001","series":"5001-8442"}],"ignition_fccid":"","battery":""},"Kia|Rondo|2006|2009":{"lastConfirmed":null,"lastConfirmedBy":null,"direction":null,"notes":"","confirmCount":0},"Ford|Ranger|1996|1998":{"direction":null,"codeSeries":[{"series":"1-1706X","years":"1996-1998"}],"notes":"","confirmCount":0,"lastConfirmedBy":null,"lastConfirmed":null},"Cadillac|SRX|2007|2009":{"keyBlank":"","door_fccid":"","direction":null,"ignition_keyway":"","lastEditedBy":"Ricky Arguelles","keyType":"","lastConfirmedBy":null,"frequency":"","confirmCount":0,"multipleKeys":false,"buttons":"","codeSeries":[{"series":"G0000-G3631","years":"2007-2009"}],"chip":"PH 46","door_chip":"","fccid":"B111","battery":"","keyway":"B106","ignition_frequency":"","door_keyway":"","ignition_fccid":"","ignition_buttons":"","notes":"","lastConfirmed":null,"lastEdited":"2026-02-09T20:12:17.994Z","ignition_chip":"","secondaryKeyPN":null},"Buick|Riviera|1995|1999":{"lastEdited":"2026-02-07T04:56:06.813Z","keyType":"VATS Double-Sided","secondaryKeyPN":null,"confirmCount":0,"direction":null,"lastConfirmedBy":null,"door_keyBlank":"B85","door_codeSeries":[],"keyway":"","door_fccid":"B85","door_chip":"","lastConfirmed":null,"ignition_chip":"VATS","chip":"","differentCodeSeries":false,"ignition_codeSeries":[],"door_keyway":"B86","ignition_keyBlank":"B82","multipleKeys":true,"ignition_fccid":"B82","lastEditedBy":"Ricky Arguelles","fccid":"","frequency":"","codeSeries":[{"years":"1995-1999","series":"AA00-7T51"}],"notes":"","battery":"","ignition_frequency":"","ignition_keyway":"B82","ignition_buttons":"","buttons":""}};
let lishiInventory = {"KIA3R":{"cutEnd":8,"ignition":false,"keyways":["KIA3R","KK3","KK4"],"keyway_family":"KIA3R","door":true,"codeSeries":["Y2001-3000"],"cutTotal":8,"trunk":true,"notes":"Some KIA Rio models 2001-2005 will use the X269/KK5 keyway (WA/A1001-3040 code series) with only the KIA3 Determinator as a decoding option.","inStock":false,"cutStart":1},"HU162 10 CUT":{"codeSeries":[],"notes":"","keyways":["HU162"],"keyway_family":"HU162","ignition":false,"inStock":false,"cutEnd":10,"cutStart":5,"door":true,"cutTotal":10,"trunk":true},"HONDA-2021":{"keyways":[],"trunk":true,"cutStart":1,"cutEnd":null,"inStock":false,"door":true,"cutTotal":null,"notes":"","codeSeries":["V1-W100"],"keyway_family":"","ignition":false},"HU92 TWIN LIFTER":{"inStock":false,"ignition":true,"cutStart":1,"keyways":["HU92"],"cutTotal":8,"door":true,"codeSeries":["1-8100"],"keyway_family":"HU92","cutEnd":8,"trunk":true,"notes":""},"HU58":{"cutStart":1,"ignition":true,"keyway_family":"Mercedes HU58","door":true,"inStock":true,"cutEnd":12,"keyways":["Mercedes HU58"],"trunk":true,"codeSeries":["BH010001-240999"],"cutTotal":12,"notes":""},"K9":{"ignition":false,"notes":"","cutStart":1,"cutEnd":null,"codeSeries":["B/I/U/X1-2608"],"inStock":false,"trunk":true,"keyway_family":"K9","cutTotal":null,"keyways":["K9"],"door":true},"HU92":{"inStock":false,"cutStart":1,"trunk":true,"cutEnd":null,"door":true,"ignition":true,"cutTotal":8,"keyway_family":"BMW HU92","keyways":["BMW HU92"],"codeSeries":["1-8100"],"notes":""},"GM39":{"inStock":true,"trunk":true,"keyways":["GM","B96/B102"],"keyway_family":"GM","cutTotal":10,"cutEnd":10,"cutStart":3,"ignition":false,"notes":"","codeSeries":["AA00-7T51","S000A-S711K","05001-6999","H0001-H3988","1-2000"],"door":true},"TOY43":{"keyways":["Toyota TOY43","TR47"],"cutTotal":8,"keyway_family":"Toyota TOY43","ignition":false,"notes":"","door":true,"codeSeries":["10001-15000"],"cutEnd":8,"cutStart":1,"trunk":true,"inStock":true},"B106/GM37":{"keyway_family":"B106","codeSeries":["G0000-G3631","05001-6999"],"cutEnd":10,"cutTotal":10,"door":true,"notes":"","inStock":true,"keyways":["B106"],"cutStart":4,"trunk":true,"ignition":true},"TOY43AT IGNITION":{"keyway_family":"Toyota TOY43AT","codeSeries":["50000-69999"],"ignition":true,"notes":"Ignition only","door":false,"cutTotal":10,"inStock":true,"trunk":false,"cutEnd":10,"keyways":["Toyota TOY43AT","TR47"],"cutStart":1},"HY17(HYN15)":{"inStock":false,"codeSeries":["H/M/T1-2500"],"trunk":true,"door":true,"keyways":["Hyundai HY17","HY17","HYN15"],"cutTotal":10,"cutEnd":10,"cutStart":1,"keyway_family":"Hyundai HY17","notes":"","ignition":false},"TOY43R":{"trunk":true,"cutTotal":10,"door":true,"ignition":false,"notes":"","cutStart":3,"inStock":false,"keyways":["B108","B110","TOY43R"],"codeSeries":["70000-75928","32000-39999"],"cutEnd":10,"keyway_family":"B108"},"HU46":{"cutEnd":10,"notes":"","keyway_family":"HU46","cutStart":1,"keyways":["HU46","B61"],"trunk":true,"codeSeries":["S1-S2000","H0001-H3988","S4001-5200"],"ignition":true,"cutTotal":10,"inStock":false,"door":true},"HU198":{"door":true,"notes":"","keyways":["HU198"],"inStock":false,"cutStart":1,"cutTotal":10,"codeSeries":["P1-9710","0020001-0032003","0030001-0031544","Unpublished 90K Series"],"keyway_family":"HU198","trunk":true,"cutEnd":null,"ignition":true},"DW05":{"ignition":false,"inStock":false,"cutEnd":8,"cutTotal":8,"door":true,"cutStart":1,"keyway_family":"DW05","notes":"","trunk":true,"keyways":["DW05","DW04","DW04/DW05","DW04RAP"],"codeSeries":["J/M/T/V1-1200"]},"K5":{"keyways":["KK10","K5"],"cutEnd":null,"notes":"","door":true,"inStock":false,"keyway_family":"KK10","cutTotal":null,"cutStart":1,"ignition":false,"codeSeries":["B/D/G/H/K1-3000","S1-2500"],"trunk":true},"NSN11":{"inStock":true,"codeSeries":["X1-8000"],"ignition":true,"keyway_family":"DA31","cutTotal":8,"trunk":true,"door":true,"notes":"","cutStart":1,"keyways":["DA31"],"cutEnd":8},"SIP22":{"ignition":false,"codeSeries":["DE1-11210"],"keyway_family":"Fiat SIP22","cutTotal":8,"cutStart":1,"trunk":true,"door":true,"cutEnd":8,"inStock":true,"notes":"","keyways":["Fiat SIP22","SIP22"]},"HY20R":{"ignition":false,"cutEnd":8,"cutStart":1,"codeSeries":["C/UM1001-3500"],"inStock":true,"keyway_family":"HY20R","cutTotal":8,"keyways":["HY20R"],"trunk":true,"door":true,"notes":""},"HU162":{"inStock":false,"keyways":["HU162"],"cutStart":1,"door":true,"codeSeries":[],"notes":"","cutEnd":9,"ignition":false,"cutTotal":9,"keyway_family":"HU162","trunk":true},"B111":{"ignition":true,"notes":"","keyway_family":"B106","door":true,"inStock":true,"keyways":["B106"],"cutStart":3,"codeSeries":["G0000-G3631","05001-6999"],"cutEnd":10,"trunk":true,"cutTotal":10},"CY24":{"codeSeries":["L1-3580","M1-2618"],"cutEnd":null,"notes":"","keyways":["Y157","Y159","Y164"],"inStock":true,"door":true,"cutTotal":null,"keyway_family":"Y157","cutStart":1,"trunk":true,"ignition":true},"TOY40 LONG":{"notes":"","ignition":false,"inStock":false,"cutTotal":8,"door":true,"cutStart":1,"cutEnd":8,"trunk":true,"keyways":["LXP90"],"keyway_family":"LXP90","codeSeries":["01-5000"]},"HU43":{"ignition":true,"cutTotal":10,"door":true,"cutEnd":10,"keyway_family":"HU43","codeSeries":["H1-3000"],"trunk":true,"keyways":["HU43"],"notes":"","cutStart":1,"inStock":false},"KY14":{"cutTotal":8,"keyway_family":"KK8","cutStart":1,"notes":"","inStock":false,"ignition":false,"keyways":["KK8","KY14"],"cutEnd":8,"codeSeries":["D/WD1001-3500"],"door":true,"trunk":true},"HU101 V.3":{"cutStart":1,"inStock":true,"door":true,"codeSeries":["10001-11500","11501-13000","1-4000","4000-9000"],"notes":"","cutTotal":null,"ignition":true,"trunk":true,"keyways":["HU101"],"cutEnd":null,"keyway_family":"HU101"},"FO38":{"ignition":true,"keyways":["H75"],"cutStart":1,"cutTotal":8,"door":true,"keyway_family":"H75","cutEnd":8,"notes":"","codeSeries":["1-1706X"],"inStock":true,"trunk":true},"GM45":{"door":true,"cutEnd":8,"keyways":["GM45"],"keyway_family":"GM45","inStock":false,"codeSeries":["60000-62113"],"cutStart":1,"notes":"","trunk":true,"cutTotal":8,"ignition":true},"DW04R":{"codeSeries":["J/M/T/V1-1200"],"cutEnd":8,"ignition":false,"keyway_family":"DW04R","cutStart":1,"trunk":true,"notes":"","door":true,"inStock":false,"keyways":["DW04R","DW05R"],"cutTotal":8},"MAZ24":{"codeSeries":["10100-12283"],"keyway_family":"MZ27","trunk":true,"door":true,"notes":"","ignition":false,"keyways":["MZ27","MZ31"],"cutEnd":10,"inStock":true,"cutStart":1,"cutTotal":10},"MIT11R":{"trunk":true,"keyways":["Mitsubishi MIT11"],"door":true,"ignition":false,"notes":"","keyway_family":"Mitsubishi MIT11","cutTotal":8,"cutEnd":8,"codeSeries":["30010-32009","18100-19617"],"cutStart":1,"inStock":true},"HU66 GENERATION 1 & 2":{"cutEnd":8,"inStock":true,"ignition":true,"door":true,"trunk":true,"keyway_family":"VAG HU66","notes":"","keyways":["VAG HU66","HU66"],"cutStart":1,"cutTotal":8},"MIT11":{"inStock":false,"door":true,"cutEnd":8,"ignition":false,"notes":"","cutTotal":8,"cutStart":1,"keyway_family":"MIT3","trunk":true,"keyways":["MIT3","MIT11"],"codeSeries":["30010-32009","18100-19617"]},"HU92 SINGLE LIFTER":{"door":true,"cutTotal":8,"notes":"","keyway_family":"HU92","cutEnd":null,"ignition":true,"codeSeries":["1-8100"],"keyways":["HU92"],"inStock":false,"cutStart":1,"trunk":true},"HON58R":{"cutEnd":8,"door":true,"keyways":["HD103"],"notes":"","keyway_family":"HD103","inStock":true,"cutTotal":8,"codeSeries":["5001-8442"],"cutStart":1,"ignition":false,"trunk":true},"TOY48 SHORT":{"door":true,"cutStart":1,"keyway_family":"Toyota TOY48","inStock":true,"trunk":true,"codeSeries":["40000-49999"],"keyways":["Toyota TOY48","LX Medium","LX Short","LXP90"],"cutEnd":5,"cutTotal":5,"ignition":true,"notes":""},"HU162 IGNITION":{"cutEnd":9,"keyway_family":"VAG HU162","trunk":false,"cutTotal":9,"notes":"","codeSeries":[],"door":false,"inStock":false,"cutStart":1,"ignition":true,"keyways":["VAG HU162","HU162"]},"CY24R-2021":{"codeSeries":["M1-2618"],"keyways":[],"ignition":true,"cutStart":2,"notes":"","cutEnd":8,"trunk":true,"inStock":false,"door":true,"cutTotal":8,"keyway_family":""},"HY22":{"cutStart":1,"trunk":true,"notes":"","door":true,"cutTotal":null,"keyways":["LXP90"],"ignition":true,"keyway_family":"LXP90","cutEnd":null,"inStock":false,"codeSeries":["E/G/GK/HK/J/K/KE/KG/M1-2500"]},"HU100V3(8 CUT)":{"door":true,"codeSeries":["Z1-6314"],"ignition":true,"trunk":true,"inStock":true,"keyways":["GM HU100","HU100"],"cutEnd":8,"cutStart":1,"notes":"","keyway_family":"GM HU100","cutTotal":8},"HU66 SINGLE LIFTER":{"door":true,"keyway_family":"VAG HU66","codeSeries":["1-8110"],"inStock":true,"cutTotal":8,"cutEnd":8,"notes":"","trunk":true,"keyways":["VAG HU66","HU66"],"cutStart":1,"ignition":true},"HU101":{"door":true,"cutEnd":null,"codeSeries":["10001-11500","11501-13000","1-4000","4000-9000"],"keyways":["HU101"],"inStock":true,"cutTotal":null,"trunk":true,"notes":"","keyway_family":"HU101","ignition":true,"cutStart":1},"MIT8":{"cutStart":1,"codeSeries":["E5000-7679"],"keyways":["MIT8"],"trunk":true,"cutTotal":8,"ignition":false,"keyway_family":"MIT8","notes":"","cutEnd":8,"inStock":false,"door":true},"TOY48":{"notes":"","keyways":["Toyota TOY48","LX Medium","LX Short","LXP90"],"cutEnd":5,"door":true,"ignition":true,"inStock":true,"cutTotal":5,"trunk":true,"cutStart":1,"keyway_family":"Toyota TOY48"},"HYN11":{"trunk":true,"notes":"","keyway_family":"HYN11","codeSeries":["R/T1-100","V1-1200"],"cutTotal":8,"cutEnd":8,"keyways":["HYN11","HYN6"],"inStock":false,"cutStart":1,"door":true,"ignition":false},"HY20":{"keyways":["HY20"],"codeSeries":["T/X1001-3500"],"notes":"","door":true,"cutStart":1,"ignition":false,"cutEnd":8,"inStock":false,"keyway_family":"HY20","cutTotal":8,"trunk":true},"H50":{"ignition":false,"cutStart":1,"inStock":true,"door":true,"cutEnd":5,"trunk":true,"notes":"","keyway_family":"","codeSeries":["FA/FB1-1863"],"cutTotal":5,"keyways":[]},"HU39":{"cutTotal":8,"keyway_family":"Mercedes HU39","cutEnd":8,"trunk":true,"ignition":true,"cutStart":1,"notes":"","keyways":["Mercedes HU39","HU39","S48"],"inStock":false,"door":true,"codeSeries":["10100-12283"]},"HU66 V.3":{"trunk":true,"notes":"","cutTotal":8,"cutStart":1,"door":true,"inStock":true,"ignition":true,"cutEnd":8,"keyway_family":"VAG HU66","keyways":["VAG HU66","HU66"]},"HYN14R (HY15)":{"ignition":false,"door":true,"keyway_family":"HY15","keyways":["HY15","HYN14R"],"inStock":true,"trunk":true,"notes":"","codeSeries":["H/F/M/V1-2500","C/D1001-3500"],"cutEnd":8,"cutTotal":8,"cutStart":1},"HU100R":{"cutEnd":null,"trunk":true,"door":true,"keyway_family":"GM HU100","ignition":true,"notes":"","inStock":false,"cutTotal":8,"codeSeries":["HF-Series"],"cutStart":1,"keyways":["GM HU100"]},"HU66 TWIN LIFTER":{"keyway_family":"VAG HU66","inStock":true,"ignition":true,"keyways":["VAG HU66","HU66"],"codeSeries":["1-8110"],"cutTotal":8,"door":true,"notes":"","trunk":true,"cutEnd":8,"cutStart":1},"HY16":{"cutTotal":10,"keyways":["Hyundai HY16"],"door":true,"keyway_family":"Hyundai HY16","cutStart":3,"trunk":true,"inStock":true,"cutEnd":10,"ignition":false,"notes":"","codeSeries":["V1-1200"]},"KIA 2018":{"ignition":false,"cutStart":1,"keyway_family":"KK12","codeSeries":["B/D/G/H/K1-3000","S1-2500"],"inStock":false,"door":true,"trunk":true,"notes":"","cutTotal":8,"cutEnd":8,"keyways":["KK12"]},"HU100V3(10 CUT)":{"inStock":true,"cutStart":1,"codeSeries":["V0001-V5718"],"door":true,"trunk":true,"ignition":true,"cutEnd":10,"cutTotal":10,"notes":"Does NOT work on ignition. Reads cuts 3-10 only.","keyways":["GM HU100","B119","B120","HU100"],"keyway_family":"GM HU100"},"TOY43AT DR/BT":{"keyway_family":"Toyota TOY43AT","notes":"Door/Boot only - does not work on ignition","cutEnd":10,"keyways":["Toyota TOY43AT","TR47"],"inStock":true,"cutStart":3,"ignition":false,"codeSeries":["50000-69999"],"door":true,"trunk":true,"cutTotal":10},"HON66":{"keyway_family":"HO01","trunk":true,"cutStart":1,"cutTotal":5,"notes":"","ignition":true,"door":true,"keyways":["HO01"],"cutEnd":5,"codeSeries":["K001-N718"],"inStock":true},"H51":{"inStock":true,"ignition":false,"notes":"","door":true,"codeSeries":["FA/FB1-1863"],"trunk":true,"cutEnd":5,"cutStart":1,"keyway_family":"","cutTotal":5,"keyways":[]},"NSN14":{"cutStart":1,"codeSeries":["1-22182","30001-37850","40000-41520"],"trunk":true,"ignition":true,"cutTotal":null,"notes":"","keyways":["DA34"],"keyway_family":"DA34","inStock":true,"door":true,"cutEnd":null}};
let deletedLishiTools = []; // Array of tool names that user has deleted (including master tools)
let customKeyways = []; // Array of user-added keyways that persist even without keys
let customVehicles = [{"notes":"J, K for ignition\nL, M for Door/Trunk/GB","ignition_codeSeries":[{"series":"J","years":"1991-1996"},{"series":"K","years":"1991-1996"}],"frequency":"","keyType":"Non-Chip Key","startYear":1991,"overrideNotes":[],"endYear":1996,"ignition_fccid":"B44","ilcoPartNum":"","door_keyBlank":"B45","buttonFunctions":[],"make":"Buick","ignition_keyBlank":"B44","door_codeSeries":[{"years":"1991-1996","series":"L"},{"years":"1991-1996","series":"M"}],"ignition_buttons":"","door_keyway":"B79","ignition_frequency":"","keystonePartNum":"","createdAt":"2026-02-06T16:26:22.872Z","chip":"","buttons":"","model":"Century","keyway":"","id":"1770395182872","lastEdited":"2026-02-06T18:46:09.654Z","hasOverrides":false,"door_fccid":"B45","dataStatus":"complete","ignition_chip":"","door_chip":"","ignition_keyway":"B77","multipleKeys":true,"yearOverrides":[],"fccid":"","keyBlank":""},{"buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","yearOverrides":[],"keystonePartNum":"","buttonFunctions":[],"model":"Enclave","dataStatus":"partial","startYear":2018,"endYear":2019,"keyway":"HU100","createdAt":"2026-02-06T22:57:25.519Z","frequency":"433.92 MHz","notes":"","ilcoPartNum":"","make":"Buick","hasOverrides":false,"chip":"PH 46","keyType":"Proximity","overrideNotes":[],"keyBlank":"5087","id":"1770418645519","fccid":"HYQ4EA"},{"yearOverrides":[],"multipleKeys":false,"keyBlank":"B99","endYear":2007,"ignition_frequency":"","buttons":"","door_keyway":"","chip":"M 13","notes":"","lastEdited":"2026-02-07T01:23:57.390Z","frequency":"","ignition_fccid":"","door_fccid":"","hasOverrides":false,"buttonFunctions":[],"keyway":"B86","ignition_keyway":"","ilcoPartNum":"","keystonePartNum":"","door_chip":"","ignition_buttons":"","ignition_chip":"","make":"Buick","startYear":2003,"model":"Rainier","keyType":"Chip Key","fccid":"B99","dataStatus":"complete","overrideNotes":[],"id":"1770427390520","createdAt":"2026-02-07T01:23:10.520Z"},{"dataStatus":"partial","ilcoPartNum":"","keyType":"Non-Chip Key","yearOverrides":[],"hasOverrides":true,"keystonePartNum":"","chip":"","make":"Acura","id":"1770433750530","keyBlank":"HD103","overrideNotes":["Overlap verified: Overlaps with [1998-2003]. Verify intentional."],"model":"CL","startYear":1995,"endYear":1998,"createdAt":"2026-02-07T03:09:10.530Z","buttonFunctions":[],"fccid":"HD103","keyway":"HD103","notes":"","frequency":"","buttons":""},{"keyway":"HD103","keystonePartNum":"","ignition_frequency":"","model":"NSX","endYear":1996,"createdAt":"2026-02-07T03:18:21.872Z","buttonFunctions":[],"door_keyway":"","door_chip":"","door_fccid":"","frequency":"","lastEdited":"2026-02-07T03:18:35.006Z","startYear":1991,"keyType":"Non-Chip Key","id":"1770434301872","fccid":"HD103","dataStatus":"complete","overrideNotes":[],"ignition_keyway":"","multipleKeys":false,"ignition_fccid":"","yearOverrides":[],"chip":"","hasOverrides":false,"notes":"","buttons":"","ilcoPartNum":"","ignition_chip":"","make":"Acura","ignition_buttons":"","keyBlank":"HD103"},{"ignition_fccid":"","chip":"PH 46","createdAt":"2026-02-07T03:23:57.582Z","fccid":"KR5434760","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","keyway":"HO01","endYear":2015,"model":"RDX","keyBlank":"","door_fccid":"","yearOverrides":[],"ignition_frequency":"","door_keyway":"","ignition_keyway":"","multipleKeys":false,"id":"1770434637582","door_chip":"","keyType":"Proximity","notes":"","overrideNotes":["Chip mismatch verified: 8351 typically uses HITAG 3 PCF7952. Confirm change."],"frequency":"313.85 MHz","hasOverrides":true,"buttonFunctions":[],"lastEdited":"2026-02-07T03:24:21.046Z","startYear":2013,"dataStatus":"complete","ilcoPartNum":"","make":"Acura","ignition_chip":"","keystonePartNum":"","ignition_buttons":""},{"notes":"","door_chip":"","ignition_buttons":"","keyBlank":"5268","ignition_chip":"","keystonePartNum":"","make":"Acura","keyType":"Proximity","ilcoPartNum":"","multipleKeys":false,"yearOverrides":[],"chip":"Hitag 3","ignition_fccid":"","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","keyway":"HO01","overrideNotes":[],"ignition_frequency":"","ignition_keyway":"","door_keyway":"","dataStatus":"complete","lastEdited":"2026-02-07T03:47:22.208Z","fccid":"KR5T21","buttonFunctions":[],"startYear":2019,"frequency":"433.66-434.18 MHz","createdAt":"2026-02-07T03:32:35.419Z","hasOverrides":false,"door_fccid":"","model":"RDX","endYear":2021,"id":"1770435155419"},{"id":"1770436624422","endYear":2009,"keyway":"HD103","keyBlank":"HD111","hasOverrides":false,"ilcoPartNum":"","dataStatus":"partial","overrideNotes":[],"model":"RL","notes":"","startYear":2005,"frequency":"","yearOverrides":[],"keyType":"Chip Key","buttonFunctions":[],"fccid":"HD111","createdAt":"2026-02-07T03:57:04.422Z","buttons":"","keystonePartNum":"","chip":"PH 46","make":"Acura"},{"fccid":"HD103","door_fccid":"","ignition_chip":"","frequency":"","keyBlank":"HD103","chip":"","lastEdited":"2026-02-07T04:07:46.630Z","keyway":"HD103","multipleKeys":false,"startYear":1995,"endYear":1998,"ignition_frequency":"","notes":"","ilcoPartNum":"","door_chip":"","make":"Acura","ignition_keyway":"","yearOverrides":[],"ignition_buttons":"","overrideNotes":[],"keystonePartNum":"","buttons":"","ignition_fccid":"","id":"1770437253239","createdAt":"2026-02-07T04:07:33.239Z","keyType":"Non-Chip Key","hasOverrides":false,"buttonFunctions":[],"door_keyway":"","dataStatus":"complete","model":"TL"},{"keyBlank":"8551","buttonFunctions":[],"keyway":"HU100","chip":"PH 46","model":"Regal","frequency":"433.92 MHz","notes":"","keyType":"Proximity","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","ilcoPartNum":"","hasOverrides":false,"overrideNotes":[],"make":"Buick","createdAt":"2026-02-07T04:50:29.429Z","dataStatus":"partial","id":"1770439829429","startYear":2018,"yearOverrides":[],"keystonePartNum":"","fccid":"HYQ4EA","endYear":2020},{"chip":"","make":"Buick","endYear":null,"keyType":"","fccid":"","buttons":"","startYear":null,"createdAt":"2026-02-07T05:02:58.011Z","notes":"Placeholder - add year ranges","id":"1770440578011","frequency":"","keyway":"","model":"Signia","dataStatus":"incomplete"},{"dataStatus":"complete","door_keyway":"","keyway":"B106","createdAt":"2026-02-07T05:03:56.884Z","chip":"","buttons":"","ignition_keyway":"","keystonePartNum":"","door_fccid":"","overrideNotes":[],"ilcoPartNum":"","door_chip":"","buttonFunctions":[],"frequency":"","ignition_chip":"","make":"Buick","multipleKeys":false,"id":"1770440636884","notes":"","startYear":2005,"keyBlank":"B106","hasOverrides":false,"endYear":2007,"keyType":"Non-Chip Key","ignition_fccid":"","lastEdited":"2026-02-07T05:04:09.985Z","fccid":"B106","ignition_frequency":"","ignition_buttons":"","yearOverrides":[],"model":"Signia"},{"endYear":null,"model":"Skylark","frequency":"","dataStatus":"incomplete","keyType":"","fccid":"","startYear":null,"id":"1770440696346","make":"Buick","createdAt":"2026-02-07T05:04:56.346Z","chip":"","keyway":"","buttons":"","notes":"Placeholder - add year ranges"},{"ignition_keyway":"B68","hasOverrides":false,"id":"1770440847058","overrideNotes":[],"multipleKeys":true,"door_codeSeries":[{"years":"1992-1992","series":"L"},{"years":"1992-1992","series":"M"}],"model":"Skylark","notes":"","buttonFunctions":[],"keyType":"Non-Chip Key","ignition_buttons":"","fccid":"","frequency":"","keyway":"","make":"Buick","startYear":1992,"dataStatus":"complete","chip":"","ignition_fccid":"B68","door_chip":"","yearOverrides":[],"door_keyBlank":"B45","keyBlank":"B68","ignition_keyBlank":"B68","ilcoPartNum":"","createdAt":"2026-02-07T05:07:27.058Z","ignition_frequency":"","door_fccid":"B45","lastEdited":"2026-02-07T05:09:03.206Z","buttons":"","keystonePartNum":"","ignition_codeSeries":[{"years":"1992-1992","series":"J"}],"door_keyway":"B79","ignition_chip":"","endYear":1992},{"chip":"","id":"1770440968985","ignition_chip":"","notes":"","buttons":"","yearOverrides":[],"overrideNotes":[],"ignition_fccid":"B84","door_keyBlank":"B45","multipleKeys":true,"keyBlank":"","createdAt":"2026-02-07T05:09:28.985Z","ignition_codeSeries":[{"years":"1993-1993","series":"J"}],"ignition_buttons":"","hasOverrides":false,"door_codeSeries":[{"series":"L","years":"1993-1993"},{"series":"M","years":"1993-1993"}],"buttonFunctions":[],"ignition_keyway":"B84","ignition_frequency":"","endYear":1993,"door_chip":"","door_fccid":"B45","model":"Skylark","fccid":"","ilcoPartNum":"","keystonePartNum":"","make":"Buick","lastEdited":"2026-02-07T05:10:38.219Z","dataStatus":"complete","door_keyway":"B79","startYear":1993,"frequency":"","ignition_keyBlank":"B84","keyType":"Non-Chip Key","keyway":""},{"yearOverrides":[],"door_keyway":"B79","chip":"","id":"1770441062353","model":"Skylark","ignition_buttons":"","ignition_keyBlank":"B86","ilcoPartNum":"","overrideNotes":[],"door_chip":"","keyType":"Non-Chip Key","fccid":"","buttons":"","ignition_chip":"","dataStatus":"complete","buttonFunctions":[],"keystonePartNum":"","hasOverrides":false,"createdAt":"2026-02-07T05:11:02.353Z","multipleKeys":true,"ignition_codeSeries":[{"years":"1994-1994","series":"AA00-7T51"}],"keyBlank":"","endYear":1994,"door_keyBlank":"B45","ignition_fccid":"B86","door_codeSeries":[{"years":"1994-1994","series":"L"},{"years":"1994-1994","series":"M"}],"make":"Buick","frequency":"","lastEdited":"2026-02-07T05:12:56.917Z","door_fccid":"B45","notes":"","ignition_keyway":"B86","startYear":1994,"keyway":"","ignition_frequency":""},{"ignition_fccid":"","notes":"","keyBlank":"","endYear":1998,"frequency":"","ilcoPartNum":"","multipleKeys":false,"keyway":"B86","door_keyway":"","ignition_keyway":"","ignition_frequency":"","lastEdited":"2026-02-07T05:14:45.871Z","keystonePartNum":"","dataStatus":"complete","buttonFunctions":[],"hasOverrides":false,"model":"Skylark","id":"1770441195707","chip":"","overrideNotes":[],"door_fccid":"","ignition_buttons":"","keyType":"Non-Chip Key","buttons":"","door_chip":"","ignition_chip":"","startYear":1995,"yearOverrides":[],"fccid":"B89","make":"Buick","createdAt":"2026-02-07T05:13:15.707Z"},{"notes":"","door_codeSeries":[{"years":"1987-1988","series":"1-500"}],"keystonePartNum":"","dataStatus":"complete","keyType":"Non-Chip Key","multipleKeys":true,"keyway":"","ignition_keyBlank":"B62","lastEdited":"2026-02-08T02:55:41.377Z","ignition_fccid":"B62","overrideNotes":[],"ignition_buttons":"","yearOverrides":[],"ignition_frequency":"","chip":"","hasOverrides":false,"id":"1770519230696","model":"Allante","ignition_codeSeries":[{"series":"NPSU","years":"1987-1988"}],"ilcoPartNum":"","make":"Cadillac","fccid":"","createdAt":"2026-02-08T02:53:50.696Z","door_keyway":"B59","buttons":"","door_keyBlank":"B59","frequency":"","ignition_keyway":"B62","endYear":1988,"door_fccid":"B59","door_chip":"","ignition_chip":"","keyBlank":"","startYear":1987,"buttonFunctions":[]},{"door_keyBlank":"B45","fccid":"","endYear":1996,"ignition_chip":"VATS","startYear":1993,"lastEdited":"2026-02-09T17:16:20.457Z","multipleKeys":true,"notes":"","door_keyway":"B79","make":"Cadillac","keyway":"","door_codeSeries":[{"series":"L","years":"1993-1996"},{"series":"M","years":"1993-1996"}],"door_fccid":"B45","ignition_fccid":"B62","overrideNotes":["Overlap verified: Overlaps with [1991-1996]. Verify intentional."],"id":"1770657312966","keyBlank":"","ignition_codeSeries":[{"years":"1993-1996","series":"J"},{"series":"K","years":"1993-1996"}],"chip":"","model":"Brougham","ignition_frequency":"","ignition_keyBlank":"B62","dataStatus":"complete","yearOverrides":[],"buttonFunctions":[],"keystonePartNum":"","door_chip":"","hasOverrides":true,"ilcoPartNum":"","keyType":"VATS Single-Sided","ignition_buttons":"","createdAt":"2026-02-09T17:15:12.966Z","buttons":"","ignition_keyway":"B62","frequency":""},{"overrideNotes":[],"id":"1770658900538","createdAt":"2026-02-09T17:41:40.538Z","door_codeSeries":[{"years":"1987-1990","series":"NPSU"}],"ignition_keyBlank":"B50","dataStatus":"complete","fccid":"","chip":"","lastEdited":"2026-02-09T17:43:38.589Z","frequency":"","multipleKeys":true,"door_keyBlank":"B51","keyway":"","make":"Cadillac","buttonFunctions":[],"buttons":"","hasOverrides":false,"ignition_codeSeries":[{"years":"1987-1990","series":"ABNP"}],"keyType":"Non-Chip Key","ignition_keyway":"B63","yearOverrides":[],"door_keyway":"B67","endYear":1990,"door_chip":"","ignition_fccid":"B50","ignition_chip":"","keystonePartNum":"","ignition_frequency":"","model":"Brougham","keyBlank":"","startYear":1987,"ignition_buttons":"","notes":"","ilcoPartNum":"","door_fccid":"B67"},{"model":"Catera","id":"1770659848080","frequency":"","startYear":null,"fccid":"","endYear":null,"keyway":"","keyType":"","make":"Cadillac","notes":"Placeholder - add year ranges","chip":"","buttons":"","dataStatus":"incomplete","createdAt":"2026-02-09T17:57:28.080Z"},{"door_chip":"","yearOverrides":[],"endYear":1999,"keystonePartNum":"","buttonFunctions":[],"chip":"PH 40 GM","keyBlank":"","model":"Catera","fccid":"HU46T2","door_fccid":"","hasOverrides":false,"startYear":1997,"overrideNotes":[],"notes":"","door_keyway":"","lastEdited":"2026-02-09T18:05:23.516Z","frequency":"","ilcoPartNum":"","make":"Cadillac","id":"1770659924976","dataStatus":"complete","ignition_keyway":"","keyType":"Chip Key","ignition_frequency":"","multipleKeys":false,"ignition_buttons":"","ignition_chip":"","createdAt":"2026-02-09T17:58:44.976Z","keyway":"B61","buttons":"","ignition_fccid":""},{"keyType":"","fccid":"","dataStatus":"incomplete","createdAt":"2026-02-09T18:09:52.131Z","buttons":"","keyway":"","make":"Cadillac","startYear":null,"frequency":"","endYear":null,"id":"1770660592131","chip":"","model":"Cimarron","notes":"Placeholder - add year ranges"},{"multipleKeys":true,"door_chip":"","keystonePartNum":"","door_fccid":"B51","keyway":"","buttons":"","createdAt":"2026-02-09T18:10:07.414Z","fccid":"","hasOverrides":false,"dataStatus":"complete","frequency":"","ignition_frequency":"","notes":"","door_keyway":"B67","door_codeSeries":[{"series":"NPSU","years":"1987-1987"}],"ignition_buttons":"","ignition_chip":"","ignition_keyway":"B63","door_keyBlank":"B51","make":"Cadillac","keyType":"Transponder","ilcoPartNum":"","id":"1770660607414","keyBlank":"","model":"Cimarron","buttonFunctions":[],"endYear":1987,"ignition_codeSeries":[{"years":"1987-1987","series":"ABNP"}],"chip":"","overrideNotes":[],"startYear":1987,"lastEdited":"2026-02-09T18:12:20.105Z","ignition_fccid":"B50","ignition_keyBlank":"B50","yearOverrides":[]},{"door_chip":"","model":"CTS","buttonFunctions":[],"lastEdited":"2026-02-09T18:30:51.467Z","ignition_chip":"","ignition_buttons":"","ignition_fccid":"","ignition_keyway":"","dataStatus":"complete","id":"1770661836288","keyBlank":"B99","ignition_frequency":"","keystonePartNum":"","door_fccid":"","startYear":2002,"overrideNotes":["Overlap verified: Overlaps with [2003-2007]. Verify intentional."],"chip":"M 13","multipleKeys":false,"door_keyway":"","fccid":"B99","frequency":"","keyway":"B86","keyType":"Chip Key","endYear":2003,"buttons":"","hasOverrides":true,"yearOverrides":[],"createdAt":"2026-02-09T18:30:36.288Z","ilcoPartNum":"","notes":"","make":"Cadillac"},{"createdAt":"2026-02-09T19:21:16.078Z","lastEdited":"2026-02-09T19:22:23.371Z","make":"Cadillac","ignition_buttons":"","yearOverrides":[],"multipleKeys":true,"door_fccid":"B51","overrideNotes":[],"keyType":"VATS Single-Sided","buttonFunctions":[],"id":"1770664876078","startYear":1989,"hasOverrides":false,"door_codeSeries":[],"door_keyway":"B67","ignition_frequency":"","ilcoPartNum":"","fccid":"","ignition_keyway":"B62","notes":"","ignition_codeSeries":[],"buttons":"","dataStatus":"complete","model":"El Dorado","door_chip":"","frequency":"","keyway":"","ignition_keyBlank":"B62","keystonePartNum":"","door_keyBlank":"B51","ignition_fccid":"B62","chip":"","ignition_chip":"VATS","keyBlank":"","endYear":1990},{"ignition_keyway":"","startYear":2000,"lastEdited":"2026-02-09T19:50:50.615Z","door_keyway":"","buttonFunctions":[],"keystonePartNum":"","make":"Cadillac","keyBlank":"B102","overrideNotes":[],"hasOverrides":false,"keyway":"B96/B102","ilcoPartNum":"","chip":"","dataStatus":"complete","yearOverrides":[],"ignition_chip":"","ignition_buttons":"","door_chip":"","model":"Escalade","createdAt":"2026-02-09T19:47:12.820Z","multipleKeys":false,"keyType":"Non-Chip Key","ignition_fccid":"","fccid":"B102","door_fccid":"","buttons":"","ignition_frequency":"","frequency":"315 MHz","id":"1770666432820","notes":"","endYear":2006},{"multipleKeys":false,"ilcoPartNum":"","ignition_buttons":"","yearOverrides":[],"keyway":"B91","door_chip":"","ignition_fccid":"","overrideNotes":[],"ignition_frequency":"","dataStatus":"complete","door_fccid":"","make":"Cadillac","model":"Escalade","createdAt":"2026-02-09T19:50:17.560Z","buttons":"","fccid":"B91","lastEdited":"2026-02-09T19:50:32.040Z","ignition_keyway":"","keyBlank":"B91","id":"1770666617560","frequency":"","keystonePartNum":"","startYear":1991,"hasOverrides":false,"door_keyway":"","ignition_chip":"","chip":"","endYear":1991,"buttonFunctions":[],"keyType":"Non-Chip Key","notes":""}];

// Key Relationships - dynamically built from entered data
// Tracks key blank  keyway/chip relationships for auto-population and conflict detection
let keyRelationships = {"5003":{"keyway":"KK12","typicalChip":"No"},"5005":{"keyway":"DA34","typicalChip":"Hitag AES PCF7953M"},"5006":{"typicalChip":"Hitag AES PCF7953M","keyway":"DA34"},"5008":{"typicalChip":"HITAG Pro","keyway":"HU101"},"5009":{"keyway":"HU101","typicalChip":"HITAG Pro"},"5012":{"typicalChip":"H-Chip Master 128-BIT","keyway":"LX Short"},"5013":{"keyway":"KK12","typicalChip":"HITAG 3"},"5016":{"keyway":"TOY40S","typicalChip":"H-Chip Master 128-BIT"},"5019":{"typicalChip":"PH 46","keyway":"DA34"},"5021":{"keyway":"HO01","typicalChip":"HITAG 3 PCF7920 MANCHESTER"},"5022":{"typicalChip":"PH 46","keyway":"HU100"},"5023":{"keyway":"HU101","typicalChip":"Hitag Pro"},"5026":{"typicalChip":"HITAG 3","keyway":"LXP90"},"5027":{"keyway":"DA34","typicalChip":"Hitag AES PCF7953M"},"5028":{"typicalChip":"H-Chip Master 128-BIT","keyway":"TOY40S"},"5029":{"keyway":"DA34","typicalChip":"Hitag AES PCF7953M"},"5031":{"keyway":"HO01","typicalChip":"HITAG 3 PCF7920 MANCHESTER"},"5032":{"typicalChip":"HITAG 3 PCF7920 Manchester","keyway":"HO01"},"5033":{"keyway":"DA34","typicalChip":"Hitag AES PCF7953M"},"5034":{"keyway":"KK12","typicalChip":"HITAG 3"},"5036":{"typicalChip":"H-Chip Master 128-BIT","keyway":"HY15"},"5038":{"typicalChip":"TI 4D 60","keyway":"TR47"},"5039":{"keyway":"HU101","typicalChip":"HITAG Pro"},"5041":{"keyway":"HU101","typicalChip":"HITAG Pro"},"5044":{"typicalChip":"H-Chip Master 128-BIT","keyway":"TOY40S"},"5045":{"keyway":"HO01","typicalChip":"HITAG 3 PCF7920 Manchester"},"5046":{"typicalChip":"HITAG 3 PCF7920 Manchester","keyway":"HO01"},"5047":{"keyway":"TOY40S","typicalChip":"H-Chip Master 128-BIT"},"5055":{"typicalChip":"H-Chip Master 128-BIT","keyway":"TOY40S"},"5057":{"typicalChip":"No","keyway":"LX Short"},"5058":{"typicalChip":"PH 46","keyway":"HU100"},"5060":{"typicalChip":"No"},"5063":{"keyway":"TOY40S","typicalChip":"H-Chip Master 128-BIT"},"5064":{"keyway":"HU100","typicalChip":"PH 46"},"5066":{"keyway":"HU100","typicalChip":"PH 46"},"5068":{"keyway":"SIP22","typicalChip":"Hitag AES PCF7953M"},"5069":{"typicalChip":"Hitag AES PCF7953M","keyway":"SIP22"},"5070":{"typicalChip":"No"},"5072":{"typicalChip":"HITAG 3 PCF7920","keyway":"HO01"},"5073":{"typicalChip":"HITAG 3 PCF7920","keyway":"HO01"},"5074":{"keyway":"HO01","typicalChip":"HITAG 3"},"5075":{"typicalChip":"HITAG 3","keyway":"HO01"},"5083":{"keyway":"LX Short","typicalChip":"H-Chip Master 128-BIT"},"5087":{"keyway":"HU100","typicalChip":"PH 46"},"5095":{"keyway":"DA34","typicalChip":"Hitag AES PCF7953M"},"5102":{"keyway":"HO01","typicalChip":"HITAG 3"},"5103":{"keyway":"HO01","typicalChip":"Hitag 3"},"5105":{"keyway":"HO01","typicalChip":"HITAG 3 PCF7920 Manchester"},"5106":{"keyway":"LX Short","typicalChip":"H-Chip Master 128-BIT"},"5108":{"typicalChip":"H-Chip Master 128-BIT","keyway":"TOY40S"},"5112":{"typicalChip":"H-Chip Master 128-BIT","keyway":"TOY40S"},"5114":{"typicalChip":"H-Chip Master 128-BIT","keyway":"TOY40S"},"5131":{"keyway":"HU100","typicalChip":"PH 46"},"5132":{"typicalChip":"PH 46","keyway":"HU100"},"5135":{"typicalChip":"HITAG 3","keyway":"KK12"},"5138":{"typicalChip":"PH 46","keyway":"HU100"},"5157":{"typicalChip":"Yes","keyway":"MZ31"},"5158":{"keyway":"MZ31","typicalChip":"Yes"},"5164":{"keyway":"LX Short","typicalChip":"HITAG 3"},"5166":{"keyway":"MZ31","typicalChip":"HITAG Pro"},"5167":{"typicalChip":"HITAG Pro","keyway":"MZ31"},"5172":{"keyway":"HU100","typicalChip":"PH 46"},"5182":{"keyway":"Y159","typicalChip":"Hitag AES PCF7953M"},"5186":{"typicalChip":"Hitag AES PCF7953M","keyway":"Y159"},"5202":{"typicalChip":"HITAG 3","keyway":"KK12"},"5217":{"keyway":"KK12","typicalChip":"HITAG 3"},"5268":{"typicalChip":"Hitag 3","keyway":"HO01"},"5285":{"keyway":"MZ31","typicalChip":"HITAG Pro"},"5289":{"typicalChip":"HITAG 3","keyway":"KK12"},"5302":{"keyway":"SIP22","typicalChip":"Hitag AES PCF7939M"},"5303":{"typicalChip":"Hitag AES PCF7939M","keyway":"SIP22"},"5320":{"typicalChip":"No"},"5333":{"keyway":"KK12","typicalChip":"HITAG 3"},"5357":{"typicalChip":"H-Chip Master 128-BIT","keyway":"TOY40S"},"5470":{"keyway":"HU100","typicalChip":"PH 46"},"5581":{"typicalChip":"No"},"5598":{"keyway":"HU100","typicalChip":"PH 46"},"5670":{"typicalChip":"No"},"5950":{"typicalChip":"No"},"6001":{"typicalChip":"PH 46","keyway":"HU100"},"6075":{"typicalChip":"HITAG 3 PCF7961X","keyway":"HO01"},"6079":{"keyway":"DA34","typicalChip":"Hitag AES PCF7953M"},"6084":{"typicalChip":"PH 46","keyway":"HU100"},"6370":{"typicalChip":"No"},"6502":{"typicalChip":"Hitag AES PCF7953M","keyway":"DA34"},"6503":{"keyway":"TR47","typicalChip":"H-Chip Master 128-BIT"},"6505":{"keyway":"LX Short","typicalChip":"HITAG 3 PCF7920 BLANK"},"6508":{"keyway":"DA34","typicalChip":"Hitag AES PCF7953M"},"6510":{"keyway":"KK12","typicalChip":"No"},"6511":{"typicalChip":"Hitag AES PCF7921M","keyway":"DA34"},"7540":{"typicalChip":"PH 46","keyway":"HU100"},"7550":{"keyway":"Y159","typicalChip":"Hitag AES PCF7953M"},"7720":{"keyway":"KK12","typicalChip":"HITAG 3"},"7840":{"keyway":"KK12","typicalChip":"No"},"8003":{"typicalChip":"HITAG 3","keyway":"LX Short"},"8007":{"keyway":"MZ31","typicalChip":"HITAG Pro"},"8016":{"typicalChip":"No"},"8019":{"typicalChip":"No"},"8021":{"typicalChip":"PH 46","keyway":"DA34"},"8026":{"keyway":"HU100","typicalChip":"PH 46"},"8037":{"typicalChip":"PH 46","keyway":"HU100"},"8056":{"keyway":"LX Short","typicalChip":"4D 67 Smart Card Toyota & Lexus"},"8061":{"keyway":"TR47","typicalChip":"TI 4D 67 Master G 80-BIT"},"8062":{"keyway":"TR47","typicalChip":"TI 4D 67 Master G 80-BIT"},"8066":{"typicalChip":"TI 4D 63 - 80-bit","keyway":"H75"},"8067":{"typicalChip":"TI 4D 63 - 80-bit","keyway":"H75"},"8068":{"typicalChip":"TI 4D 63 - 80-bit","keyway":"H75"},"8077":{"keyway":"HO01","typicalChip":"PH 46"},"8082":{"typicalChip":"4D 67 Smart Card Toyota & Lexus","keyway":"LX Short"},"8084":{"typicalChip":"PH 46","keyway":"Y159"},"8089":{"typicalChip":"No"},"8092":{"keyway":"DW04RAP","typicalChip":"No"},"8093":{"typicalChip":"TI 4D 67 Master G 80-BIT","keyway":"TR47"},"8094":{"keyway":"H75","typicalChip":"TI 4D 63 - 80-bit"},"8095":{"typicalChip":"TI 4D 63 - 80-bit","keyway":"H75"},"8096":{"typicalChip":"TI 4D 63 - 80-bit","keyway":"H75"},"8098":{"keyway":"B110","typicalChip":"TI 4D 60-80bit-Subaru-PW17"},"8101":{"typicalChip":"PH 46","keyway":"HU100"},"8107":{"typicalChip":"No","keyway":"DW04RAP"},"8112":{"typicalChip":"PH 46","keyway":"Y159"},"8120":{"typicalChip":"TI 4D 63 - 80-bit"},"8133":{"typicalChip":"No"},"8136":{"keyway":"HU101","typicalChip":"TI 4D 63 - 80-bit"},"8141":{"typicalChip":"No"},"8142":{"keyway":"DA34","typicalChip":"PH 46"},"8144":{"typicalChip":"PH 46","keyway":"Y159"},"8153":{"keyway":"Y159","typicalChip":"PH 46"},"8154":{"typicalChip":"PH 46","keyway":"H75"},"8155":{"typicalChip":"PH 46","keyway":"H75"},"8158":{"keyway":"Y159","typicalChip":"PH 46"},"8160":{"keyway":"HU101","typicalChip":"TI 4D 63 - 80-bit"},"8176":{"typicalChip":"PH 46","keyway":"HO01"},"8181":{"keyway":"Y159","typicalChip":"PH 46"},"8184":{"typicalChip":"PH 46","keyway":"Y159"},"8185":{"typicalChip":"PH 46","keyway":"HU100"},"8186":{"typicalChip":"4D 67 Smart Card Toyota & Lexus","keyway":"TOY40S"},"8191":{"keyway":"Y159","typicalChip":"PH 46"},"8194":{"keyway":"MZ31","typicalChip":"HITAG Pro"},"8196":{"typicalChip":"PH 46","keyway":"Y159"},"8207":{"typicalChip":"PH 46","keyway":"Y159"},"8211":{"typicalChip":"PH 46","keyway":"H75"},"8215":{"keyway":"HO01","typicalChip":"PH 46"},"8216":{"typicalChip":"PH 46","keyway":"HO01"},"8218":{"keyway":"LX Short","typicalChip":"4D 67 Smart Card Toyota & Lexus"},"8228":{"keyway":"Y159","typicalChip":"PH 46"},"8231":{"typicalChip":"PH 46","keyway":"DA34"},"8234":{"typicalChip":"No","keyway":"DA34"},"8239":{"typicalChip":"PH 46","keyway":"HU100"},"8258":{"keyway":"HU100","typicalChip":"PH 46"},"8259":{"typicalChip":"TI 4D 63 - 80-bit","keyway":"H75"},"8269":{"typicalChip":"HITAG 3 PCF7920 BIPHASE","keyway":"HO01"},"8271":{"typicalChip":"HITAG 3 PCF7920 BIPHASE","keyway":"HO01"},"8273":{"typicalChip":"HITAG 3 PCF7920 BIPHASE","keyway":"HO01"},"8276":{"typicalChip":"H-Chip Master 128-BIT","keyway":"TOY40S"},"8279":{"keyway":"TOY40S","typicalChip":"H-Chip Master 128-BIT"},"8282":{"typicalChip":"H-Chip Master 128-BIT","keyway":"TOY40S"},"8284":{"typicalChip":"PH 46","keyway":"MIT3"},"8287":{"keyway":"HY18-R","typicalChip":"PH 46"},"8288":{"typicalChip":"No","keyway":"HY18-R"},"8290":{"keyway":"HU100","typicalChip":"PH 46"},"8291":{"typicalChip":"Hitag AES PCF7953M","keyway":"Y159"},"8293":{"keyway":"Y159","typicalChip":"PH 46"},"8296":{"keyway":"HU101","typicalChip":"HITAG Pro"},"8297":{"keyway":"TOY40S","typicalChip":"4D 67 Smart Card Toyota & Lexus"},"8305":{"typicalChip":"PH 46","keyway":"HU100"},"8308":{"keyway":"DA34","typicalChip":"PH 46"},"8310":{"keyway":"HU101","typicalChip":"TI 4D 63 - 80-bit"},"8329":{"typicalChip":"4D 67 Smart Card Toyota & Lexus","keyway":"LX Short"},"8336":{"typicalChip":"TI 4D 63 - 80-bit","keyway":"H75"},"8348":{"typicalChip":"PH 46","keyway":"HU100"},"8351":{"keyway":"DA34","typicalChip":"HITAG 3 PCF7952"},"8353":{"keyway":"HO01","typicalChip":"PH 46"},"8354":{"keyway":"HO01","typicalChip":"PH 46"},"8372":{"keyway":"MZ31","typicalChip":"HITAG Pro"},"8373":{"typicalChip":"No","keyway":"TR47"},"8376":{"typicalChip":"PH 46","keyway":"DA34"},"8382":{"keyway":"DA34","typicalChip":"PH 46"},"8386":{"keyway":"DA34","typicalChip":"Hitag AES PCF7921M"},"8390":{"keyway":"DA34","typicalChip":"Hitag AES PCF7921M"},"8391":{"keyway":"HU100","typicalChip":"PH 46"},"8392":{"typicalChip":"TI 4D 63 - 80-bit","keyway":"HU101"},"8405":{"typicalChip":"HITAG Pro","keyway":"HU101"},"8406":{"keyway":"Y159","typicalChip":"PH 46 HITAG2"},"8417":{"typicalChip":"PH 46","keyway":"Y159"},"8419":{"typicalChip":"PH 46","keyway":"Y159"},"8422":{"keyway":"TOY40S","typicalChip":"H-Chip Master 128-BIT"},"8424":{"typicalChip":"HITAG Pro","keyway":"HU101"},"8426":{"typicalChip":"PH 46","keyway":"HU100"},"8429":{"keyway":"HU100","typicalChip":"PH 46"},"8445":{"typicalChip":"Hitag AES PCF7953M","keyway":"DA34"},"8447":{"keyway":"DA34","typicalChip":"PH 46"},"8457":{"typicalChip":"TI 4D 67 Master G 80-BIT","keyway":"TR47"},"8468":{"keyway":"HO01","typicalChip":"HITAG 3 PCF7920"},"8477":{"typicalChip":"Yes, H-Chip Master 128-BIT","keyway":"TR47"},"8478":{"typicalChip":"Hitag AES PCF7961M","keyway":"Y159"},"8481":{"keyway":"DA34","typicalChip":"No"},"8486":{"typicalChip":"PH 46","keyway":"Y159"},"8487":{"keyway":"MIT3","typicalChip":"PH 46"},"8488":{"keyway":"LX Short","typicalChip":"4D 67 Smart Card Toyota & Lexus"},"8494":{"typicalChip":"Hitag AES PCF7953M","keyway":"DA34"},"8498":{"keyway":"LX Short","typicalChip":"No"},"8504":{"keyway":"KK12","typicalChip":"No"},"8509":{"keyway":"HO01","typicalChip":"HITAG 3 PCF7920"},"8510":{"keyway":"HO01","typicalChip":"HITAG 3 PCF7920"},"8511":{"keyway":"HO01","typicalChip":"HITAG 3 PCF7920"},"8514":{"keyway":"HO01","typicalChip":"HITAG 3"},"8515":{"keyway":"HO01","typicalChip":"HITAG 3"},"8533":{"keyway":"LX Short","typicalChip":"H-Chip Master 128-BIT"},"8534":{"typicalChip":"HITAG 3","keyway":"HO01"},"8540":{"typicalChip":"No"},"8541":{"typicalChip":"Hitag AES PCF7953M","keyway":"Y159"},"8551":{"keyway":"HU100","typicalChip":"PH 46"},"8554":{"keyway":"LX Short","typicalChip":"No"},"8558":{"typicalChip":"PH 47","keyway":"DA34"},"8565":{"typicalChip":"PH 46 HITAG2","keyway":"Y159"},"8568":{"keyway":"Y159","typicalChip":"Hitag AES PCF7953M"},"8569":{"keyway":"HU101","typicalChip":"TI 4D 63 - 80-bit"},"8570":{"keyway":"HU100","typicalChip":"PH 46"},"8572":{"keyway":"Y159","typicalChip":"Hitag AES PCF7961M"},"8574":{"keyway":"HO01","typicalChip":"HITAG 3 PCF7920"},"8578":{"keyway":"Y159","typicalChip":"Hitag AES PCF7953M"},"8579":{"keyway":"Y159","typicalChip":"Hitag AES PCF7953M"},"8581":{"keyway":"HU100","typicalChip":"PH 46"},"8584":{"keyway":"LX Short","typicalChip":"PH 46"},"8589":{"typicalChip":"HITAG 3 PCF7920 MANCHESTER","keyway":"KK12"},"8597":{"typicalChip":"HITAG 3","keyway":"MIT3"},"8598":{"keyway":"HU100","typicalChip":"PH 46"},"8599":{"typicalChip":"PH 46","keyway":"HU100"},"8602":{"typicalChip":"PH 46","keyway":"HU100"},"8603":{"typicalChip":"PH 46","keyway":"HU100"},"8605":{"typicalChip":"HITAG 3 PCF7961X","keyway":"HO01"},"8607":{"typicalChip":"HITAG 3 PCF7920","keyway":"HO01"},"8612":{"keyway":"TOY40S","typicalChip":"TI 4D 67 Toyota Master 40-BIT"},"8618":{"keyway":"HO01","typicalChip":"HITAG 3 PCF7961X"},"8621":{"keyway":"HU100","typicalChip":"PH 46"},"8622":{"keyway":"HO01","typicalChip":"HITAG 3 PCF7920"},"8624":{"typicalChip":"No","keyway":"LX Short"},"8626":{"keyway":"TR47","typicalChip":"Yes, H-Chip Master 128-BIT"},"8627":{"typicalChip":"HITAG Pro","keyway":"HU101"},"8629":{"typicalChip":"HITAG Pro","keyway":"HU101"},"8643":{"typicalChip":"HITAG Pro","keyway":"HU101"},"8644":{"typicalChip":"HITAG Pro","keyway":"HU101"},"8646":{"keyway":"HU101","typicalChip":"HITAG Pro"},"8651":{"typicalChip":"H-Chip Master 128-BIT","keyway":"TOY40S"},"8659":{"keyway":"LX Short","typicalChip":"PH 46"},"8662":{"typicalChip":"HITAG Pro","keyway":"HU198"},"8672":{"typicalChip":"HITAG 3 PCF7920","keyway":"HO01"},"8674":{"keyway":"HO01","typicalChip":"HITAG 3"},"8675":{"typicalChip":"HITAG 3","keyway":"HO01"},"8676":{"typicalChip":"HITAG 3","keyway":"HO01"},"8699":{"keyway":"MZ31","typicalChip":"HITAG Pro"},"8867":{"typicalChip":"PH 46","keyway":"HO01"},"9008":{"typicalChip":"Hitag AES PCF7939M","keyway":"Y159"},"9009":{"keyway":"Y159","typicalChip":"Hitag AES PCF7939M"},"9027":{"keyway":"Y159","typicalChip":"Hitag AES PCF7939M"},"9101":{"typicalChip":"No"},"9137":{"keyway":"HU101","typicalChip":"HITAG Pro"},"9139":{"typicalChip":"No"},"9206":{"keyway":"HO01","typicalChip":"Yes"},"9217":{"keyway":"HO01","typicalChip":"HITAG 3 PCF7920 MANCHESTER"},"9307":{"typicalChip":"Hitag AES PCF7939M","keyway":"Y159"},"9319":{"typicalChip":"No"},"9358":{"typicalChip":"No"},"9367":{"typicalChip":"No"},"9368":{"typicalChip":"No"},"9380":{"keyway":"Y159","typicalChip":"PH 46"},"9383":{"typicalChip":"No"},"9396":{"typicalChip":"No"},"9409":{"typicalChip":"No"},"9431":{"typicalChip":"PH 46","keyway":"Y159"},"9447":{"keyway":"HU100","typicalChip":"PH 46"},"9448":{"keyway":"HU100","typicalChip":"PH 46"},"9453":{"typicalChip":"No"},"9455":{"typicalChip":"No"},"9471":{"keyway":"HO01","typicalChip":"PH 46"},"9475":{"typicalChip":"No"},"9476":{"typicalChip":"No"},"9500":{"typicalChip":"No"},"9523":{"typicalChip":"No"},"9544":{"typicalChip":"HITAG Pro","keyway":"HU101"},"9551":{"typicalChip":"No"},"9564":{"keyway":"HO01","typicalChip":"PH 46"},"9566":{"typicalChip":"PH 46","keyway":"HO01"},"9575":{"typicalChip":"PH 46","keyway":"Y159"},"9578":{"typicalChip":"PH 46","keyway":"Y159"},"9579":{"typicalChip":"PH 46","keyway":"Y159"},"9584":{"typicalChip":"PH 46","keyway":"Y159"},"9587":{"typicalChip":"No"},"9603":{"typicalChip":"No"},"9626":{"typicalChip":"No"},"9637":{"typicalChip":"HITAG Pro","keyway":"HU101"},"9643":{"keyway":"Y159","typicalChip":"Hitag AES Type 4A"},"9645":{"typicalChip":"PH 46","keyway":"MIT3"},"9646":{"typicalChip":"Hitag AES Type 4A","keyway":"Y159"},"9652":{"keyway":"Y159","typicalChip":"Hitag AES Type 4A"},"9699":{"typicalChip":"Hitag AES PCF7953M","keyway":"DA34"},"9719":{"keyway":"H75","typicalChip":"TI 4D 63"},"9722":{"keyway":"H75","typicalChip":"TI 4D 63"},"9727":{"typicalChip":"TI 4D 63","keyway":"H75"},"9733":{"typicalChip":"No"},"9760":{"typicalChip":"PH 46","keyway":"Y159"},"9773":{"typicalChip":"No"},"9775":{"typicalChip":"No"},"9776":{"keyway":"DA34"},"9810":{"keyway":"LX Short","typicalChip":"4D 67 Smart Card Toyota & Lexus"},"9822":{"typicalChip":"PH 46","keyway":"HU100"},"9841":{"keyway":"B106","typicalChip":"PH 46"},"9848":{"keyway":"Y159","typicalChip":"PH 46"},"9850":{"typicalChip":"No"},"9865":{"typicalChip":"PH 46","keyway":"Y159"},"9875":{"typicalChip":"PH 46","keyway":"HU100"},"9880":{"keyway":"MIT3","typicalChip":"PH 46"},"9881":{"keyway":"MIT3","typicalChip":"PH 46"},"9888":{"keyway":"DA34","typicalChip":"PH 46"},"9894":{"keyway":"DA34","typicalChip":"PH 46"},"9904":{"typicalChip":"No"},"9924":{"typicalChip":"No"},"9940":{"keyway":"TR47","typicalChip":"Yes, TI 4D 67 Toyota Master 40-BIT"},"9944":{"keyway":"HO01","typicalChip":"PH 46"},"9945":{"typicalChip":"PH 46","keyway":"HO01"},"9946":{"typicalChip":"PH 46","keyway":"HO01"},"9947":{"typicalChip":"PH 46","keyway":"DA34"},"9958":{"typicalChip":"PH 46","keyway":"HU100"},"9968":{"keyway":"Y159","typicalChip":"PH 46"},"9975":{"typicalChip":"No"},"9984":{"typicalChip":"PH 46","keyway":"HU100"},"9991":{"keyway":"DA34","typicalChip":"PH 46"},"9992":{"keyway":"HU100","typicalChip":"PH 46"},"40011":{"keyway":"B62","typicalChip":"VATS #1"},"40012":{"keyway":"B62","typicalChip":"VATS #2"},"40013":{"keyway":"B62","typicalChip":"VATS #3"},"40014":{"keyway":"B62","typicalChip":"VATS #4"},"40015":{"typicalChip":"VATS #5","keyway":"B62"},"40016":{"keyway":"B62","typicalChip":"VATS #6"},"40017":{"typicalChip":"VATS #7","keyway":"B62"},"40018":{"keyway":"B62","typicalChip":"VATS #8"},"40019":{"keyway":"B62","typicalChip":"VATS #9"},"40020":{"keyway":"B62","typicalChip":"VATS #10"},"40021":{"keyway":"B62","typicalChip":"VATS #11"},"40022":{"typicalChip":"VATS #12","keyway":"B62"},"40023":{"typicalChip":"VATS #13","keyway":"B62"},"40024":{"keyway":"B62","typicalChip":"VATS #14"},"40025":{"typicalChip":"VATS #15","keyway":"B62"},"40076":{"keyway":"B62","typicalChip":"Generic VATS-S Key"},"40082":{"typicalChip":"VATS #2","keyway":"B86"},"40083":{"typicalChip":"VATS #3","keyway":"B86"},"40084":{"typicalChip":"VATS #4","keyway":"B86"},"40085":{"typicalChip":"VATS #5","keyway":"B86"},"40086":{"typicalChip":"VATS #6","keyway":"B86"},"40087":{"typicalChip":"VATS #7","keyway":"B86"},"40088":{"keyway":"B86","typicalChip":"VATS #8"},"40089":{"typicalChip":"VATS #9","keyway":"B86"},"40090":{"keyway":"B86","typicalChip":"VATS #10"},"40091":{"keyway":"B86","typicalChip":"VATS #11"},"40092":{"keyway":"B86","typicalChip":"VATS #12"},"40093":{"typicalChip":"VATS #13","keyway":"B86"},"40094":{"typicalChip":"VATS #14","keyway":"B86"},"40095":{"keyway":"B86","typicalChip":"VATS #15"},"40146":{"typicalChip":"VATS","keyway":"B86"},"40147":{"typicalChip":"PH 46","keyway":"HU100"},"40150":{"typicalChip":"TI 4C","keyway":"H75"},"40155":{"keyway":"H75","typicalChip":"TI 4C"},"40161":{"keyway":"H75","typicalChip":"TI 4D 63 Valet"},"40162":{"keyway":"H75","typicalChip":"TI 4D 63"},"40165":{"keyway":"H75","typicalChip":"TI 4D 63"},"40166":{"typicalChip":"TI 4D 63 - 80-bit","keyway":"H75"},"40167":{"typicalChip":"TI 4D 63 - 80-bit","keyway":"H75"},"40170":{"typicalChip":"M 13","keyway":"B89"},"40174":{"typicalChip":"M 48","keyway":"B89"},"40175":{"typicalChip":"M 13","keyway":"B92"},"40179":{"keyway":"B86","typicalChip":"M 13"},"40180":{"typicalChip":"M 13","keyway":"B86"},"40181":{"keyway":"B86","typicalChip":"M 13"},"40182":{"keyway":"B86","typicalChip":"M 13"},"40183":{"typicalChip":"M 13","keyway":"B86"},"40186":{"keyway":"H75","typicalChip":"TI 4D 63 - 80-bit"},"40187":{"keyway":"H75","typicalChip":"TI 4D 63 - 80-bit"},"40190":{"typicalChip":"Motorola","keyway":"H75"},"40193":{"keyway":"H75","typicalChip":"TI 4D 63 - 80-bit"},"40195":{"typicalChip":"TI 4D 60","keyway":"H75"},"40196":{"keyway":"H75","typicalChip":"TI 4D 60"},"40200":{"typicalChip":"TI 4C","keyway":"H54/H60"},"40201":{"typicalChip":"TI 4C","keyway":"H54/H60"},"HO01":{"keyway":"HO01","typicalChip":"M 13"},"40211":{"keyway":"Y159","typicalChip":"PH 46"},"40220":{"keyway":"DA34","typicalChip":"TI 4D 60"},"40227":{"typicalChip":"M 48 Magic II","keyway":"B96/B102"},"40230":{"typicalChip":"T5","keyway":"B106"},"40240":{"typicalChip":"TI 4D 64","keyway":"Y159"},"40241":{"typicalChip":"TI 4D 64","keyway":"Y159"},"40245":{"keyway":"Y159","typicalChip":"PH 46"},"40246":{"keyway":"Y159","typicalChip":"PH 46"},"40247":{"typicalChip":"PH 46","keyway":"Y159"},"40248":{"typicalChip":"PH 46","keyway":"Y159"},"40251":{"typicalChip":"PH 46","keyway":"B106"},"40257":{"keyway":"H75","typicalChip":"TI 4C"},"40262":{"keyway":"B106","typicalChip":"M 48 Magic II"},"40263":{"keyway":"DA34","typicalChip":"PH 46"},"40302":{"keyway":"B110","typicalChip":"TI 4D 60-80bit-Subaru-PW17"},"40308":{"keyway":"HU100","typicalChip":"PH 46"},"40315":{"typicalChip":"PH 46","keyway":"HU100"},"40316":{"typicalChip":"PH 46","keyway":"HU100"},"40317":{"typicalChip":"PH 46","keyway":"HU100"},"40319":{"typicalChip":"PH 46","keyway":"HU100"},"40322":{"typicalChip":"PH 46","keyway":"HU100"},"40329":{"keyway":"HU100","typicalChip":"PH 46"},"40334":{"typicalChip":"M 48 Magic II","keyway":"B110"},"41341":{"keyway":"LX Medium","typicalChip":"TI 4D 68"},"41993":{"typicalChip":"TI 4D 60","keyway":"TR47"},"41994":{"typicalChip":"TI 4D 67 Toyota Master 40-BIT","keyway":"TR47"},"41995":{"typicalChip":"H-Chip Master 128-BIT","keyway":"LX Short"},"41996":{"keyway":"LX Short","typicalChip":"H-Chip Master 128-BIT"},"41998":{"keyway":"TR47","typicalChip":"TI 4D 60"},"41999":{"typicalChip":"H-Chip Master 128-BIT","keyway":"TR47"},"42005":{"typicalChip":"TI 4D 67 Toyota Master 40-BIT","keyway":"TR47"},"42008":{"typicalChip":"TI 4D 67 Toyota Valet 40-BIT","keyway":"TR47"},"42009":{"keyway":"TR47","typicalChip":"TI 4D 67 Valet 80-BIT"},"42013":{"keyway":"TR47","typicalChip":"TI 4D 67 Master G 80-BIT"},"42014":{"keyway":"TR47","typicalChip":"TI 4D 67 Master G 80-BIT"},"42015":{"typicalChip":"TI 4D 67 Toyota Master 40-BIT","keyway":"TR47"},"42016":{"keyway":"TR40","typicalChip":"TI 4C"},"42018":{"keyway":"TR47","typicalChip":"H-Chip Master 128-BIT"},"42020":{"typicalChip":"TI 4C","keyway":"TR47"},"42035":{"typicalChip":"TI 4D 67 Toyota Master 40-BIT","keyway":"TR47"},"42040":{"keyway":"TR47","typicalChip":"TI 4D 67 Toyota Master 40-BIT"},"42049":{"typicalChip":"PH 46","keyway":"DA34"},"42055":{"keyway":"Y159","typicalChip":"TI 4D 64"},"42065":{"typicalChip":"TI 4C","keyway":"TR47"},"42067":{"keyway":"DW04RAP","typicalChip":"PH 46"},"42073":{"keyway":"Tibbe 6 Cut","typicalChip":"TI 4D 63"},"42074":{"typicalChip":"TI 4D 63 - 80-bit","keyway":"HU101"},"42084":{"keyway":"TR47","typicalChip":"TI 4D 67 Master G 80-BIT"},"42095":{"keyway":"HU101","typicalChip":"HITAG Pro"},"42101":{"typicalChip":"TI 4D 63 - 80-bit","keyway":"H75"},"42105":{"keyway":"DA34","typicalChip":"TI 4D 60"},"42114":{"keyway":"LX Short","typicalChip":"TI 4D 68"},"42115":{"typicalChip":"TI 4C","keyway":"LX Short"},"42117":{"typicalChip":"TI 4C","keyway":"LX Short"},"42119":{"typicalChip":"TI 4C","keyway":"LXP90"},"42135":{"keyway":"B86","typicalChip":"M 13"},"42137":{"typicalChip":"PH 46","keyway":"DW05"},"42138":{"keyway":"DW05","typicalChip":"PH 46"},"42152":{"keyway":"B86","typicalChip":"VATS"},"42176":{"typicalChip":"HITAG Pro","keyway":"HU101"},"42177":{"typicalChip":"HITAG Pro","keyway":"HU101"},"42180":{"typicalChip":"H-Chip Master 128-BIT","keyway":"TR47"},"42184":{"keyway":"HU198","typicalChip":"HITAG Pro"},"42190":{"keyway":"HU101","typicalChip":"HITAG Pro"},"42373":{"keyway":"Tibbe 6 Cut","typicalChip":"TI 4D 63"},"HO05":{"keyway":"HO01","typicalChip":"HITAG 3"},"42759":{"keyway":"B106","typicalChip":"PH 46"},"42763":{"typicalChip":"PH 46","keyway":"B106"},"42764":{"keyway":"B106","typicalChip":"PH 46"},"42769":{"typicalChip":"PH 46","keyway":"B106"},"42771":{"keyway":"DA34","typicalChip":"TI 4D 60"},"42774":{"typicalChip":"TI 4D 62","keyway":"DA34"},"42777":{"typicalChip":"TI 4D 62 PW:FF Subaru","keyway":"SUB2"},"42778":{"typicalChip":"TI 4D 60-40bit-Subaru-PW17","keyway":"SUB2"},"42793":{"keyway":"B106","typicalChip":"PH 46"},"42796":{"typicalChip":"M 13","keyway":"B106"},"42824":{"typicalChip":"M 13","keyway":"B106"},"42828":{"typicalChip":"M 13","keyway":"B106"},"42829":{"typicalChip":"T5","keyway":"B106"},"42901":{"typicalChip":"TI 4D 60-40bit-Subaru-PW17","keyway":"SUB2"},"42948":{"keyway":"B106","typicalChip":"PH 46"},"42949":{"typicalChip":"PH 46","keyway":"B106"},"42950":{"typicalChip":"TI 4C","keyway":"LXP90"},"42953":{"keyway":"B106","typicalChip":"PH 46"},"42956":{"keyway":"DA34","typicalChip":"TI 4D 60"},"42957":{"typicalChip":"TI 4C","keyway":"DA34"},"42958":{"typicalChip":"M 48","keyway":"DW04RAP"},"42961":{"typicalChip":"PH 46","keyway":"DW04/DW05"},"42975":{"keyway":"B86","typicalChip":"T5"},"43000":{"keyway":"Y159","typicalChip":"PH 46"},"43001":{"typicalChip":"PH 46","keyway":"Y159"},"43005":{"typicalChip":"TI 4D 67 Toyota Master 40-BIT","keyway":"TR47"},"43006":{"keyway":"TR47","typicalChip":"TI 4D 67 Toyota Valet 40-BIT"},"43008":{"keyway":"LX Short","typicalChip":"TI 4C"},"43009":{"keyway":"Y159","typicalChip":"PH 46"},"43113":{"keyway":"LX Medium","typicalChip":"TI 4D 67 Valet 40-BIT"},"43119":{"keyway":"LXP90","typicalChip":"TI 4C"},"43160":{"keyway":"H75","typicalChip":"TI 4D 63 - 80-bit"},"43161":{"keyway":"H75","typicalChip":"TI 4D 63"},"43341":{"keyway":"LX Short","typicalChip":"TI 4D 68"},"45200":{"keyway":"Y159","typicalChip":"TI 4D 64"},"45506":{"keyway":"Y159","typicalChip":"TPX2"},"45513":{"typicalChip":"TPX1","keyway":"H75"},"45514":{"keyway":"H75","typicalChip":"TPX2"},"45516":{"typicalChip":"TPX2","keyway":"H75"},"45522":{"typicalChip":"TI 4D 63 - 80-bit","keyway":"HU101"},"45556":{"typicalChip":"TPX1","keyway":"TR47"},"45557":{"typicalChip":"TPX2","keyway":"TR47"},"45558":{"typicalChip":"TPX1","keyway":"LXP90"},"45559":{"typicalChip":"TPX2","keyway":"LXP90"},"45561":{"typicalChip":"TPX1","keyway":"LX Short"},"45562":{"typicalChip":"TPX2","keyway":"LX Medium"},"45582":{"typicalChip":"TPX3","keyway":"B106"},"45583":{"keyway":"Y159","typicalChip":"TPX3"},"47033":{"keyway":"HU100","typicalChip":"PH 46"},"47034":{"keyway":"HU100","typicalChip":"PH 46"},"48025":{"keyway":"B106","typicalChip":"PH 46"},"48030":{"keyway":"B106","typicalChip":"M 13"},"48035":{"typicalChip":"T5","keyway":"B86"},"48040":{"typicalChip":"T5","keyway":"B86"},"48045":{"keyway":"B106","typicalChip":"M 48"},"48050":{"typicalChip":"PH 46","keyway":"Y159"},"48051":{"typicalChip":"PH 46","keyway":"Y159"},"48055":{"keyway":"Y159","typicalChip":"TI 4D 64"},"48060":{"typicalChip":"TI 4C","keyway":"H54/H60"},"48066":{"keyway":"H75","typicalChip":"TI 4D 63 - 80-bit"},"48070":{"keyway":"H75","typicalChip":"TI 4C"},"48075":{"keyway":"H75","typicalChip":"TI 4D 60"},"48115":{"keyway":"Tibbe 6 Cut","typicalChip":"TI 4D 40"},"48130":{"typicalChip":"TI 4C","keyway":"LX Short"},"48135":{"keyway":"LXP90","typicalChip":"TI 4C"},"48165":{"typicalChip":"T5","keyway":"B92"},"48170":{"keyway":"TR47","typicalChip":"TI 4D 67 Toyota Master 40-BIT"},"48171":{"typicalChip":"TI 4D 67 Master G 80-BIT","keyway":"TR47"},"48172":{"typicalChip":"H-Chip Master 128-BIT","keyway":"TR47"},"48175":{"typicalChip":"PH 46","keyway":"DW05"},"48180":{"typicalChip":"TI 4D 62 PW:FF Subaru","keyway":"SUB2"},"48185":{"typicalChip":"TI 4C","keyway":"TR47"},"48190":{"typicalChip":"TI 4C","keyway":"TR40"},"48201":{"typicalChip":"T5","keyway":"DW04RAP"},"48202":{"typicalChip":"M 48","keyway":"DW04RAP"},"48203":{"keyway":"DW05","typicalChip":"T5"},"48204":{"keyway":"DW05","typicalChip":"T5"},"48212":{"typicalChip":"T5","keyway":"B61"},"48239":{"keyway":"B61","typicalChip":"PH 40 GM"},"48249":{"typicalChip":"TI 4D 68","keyway":"LX Medium"},"48258":{"keyway":"LX Short","typicalChip":"TPX2"},"48286":{"keyway":"S30FDP","typicalChip":"TPX1"},"48287":{"keyway":"TR40","typicalChip":"TPX1"},"48288":{"typicalChip":"TPX1","keyway":"TR56"},"48516":{"typicalChip":"TK60","keyway":"TR47"},"48518":{"keyway":"B86","typicalChip":"T5"},"48522":{"typicalChip":"TK60","keyway":"Y159"},"B44":{"keyway":"B77"},"B45":{"keyway":"B79"},"HD101":{"keyway":"HD92"},"HD92":{"keyway":"HD103"},"HD103":{"keyway":"HD103"},"HD106":{"typicalChip":"M 13","keyway":"HD103"},"HD111":{"typicalChip":"PH 46","keyway":"HD103"},"HO03":{"typicalChip":"PH 46","keyway":"HO01"},"B84":{"keyway":"B84"},"Y159":{"keyway":"Y159"},"H75":{"keyway":"H75"},"HO05":{"keyway":"HO01","typicalChip":"PH 47"},"B85":{"keyway":"B86"},"B99":{"keyway":"B86","typicalChip":"M 13"},"Y160":{"keyway":"Y159","typicalChip":"TI 4D 64"},"Y164":{"keyway":"Y159","typicalChip":"PH 46"},"Y170":{"typicalChip":"PH 46","keyway":"Y159"},"S30FDP":{"keyway":"S30FDP","typicalChip":"TPX1"},"H73":{"keyway":"H54/H60","typicalChip":"TI 4C"},"H72":{"keyway":"H75","typicalChip":"TI 4C"},"H74/H86":{"keyway":"H75","typicalChip":"TI 4D 60"},"H84":{"keyway":"H75","typicalChip":"TI 4D 63 - 80-bit"},"H91":{"typicalChip":"TI 4D 63","keyway":"Tibbe 6 Cut"},"JAG2":{"typicalChip":"TI 4D 40","keyway":"Tibbe 6 Cut"},"H92":{"typicalChip":"TI 4D 63 - 80-bit","keyway":"H75"},"H94":{"keyway":"HU101","typicalChip":"TI 4D 63 - 80-bit"},"H128":{"typicalChip":"HITAG Pro","keyway":"HU101"},"B115":{"keyway":"B106","typicalChip":"M 48 Magic II"},"PT04":{"typicalChip":"M 13","keyway":"B106"},"B97":{"keyway":"B86","typicalChip":"T5"},"B100":{"typicalChip":"M 48 Magic II","keyway":"B110"},"B103":{"typicalChip":"T5","keyway":"B92"},"B111":{"typicalChip":"PH 46","keyway":"B106"},"B112":{"keyway":"B96/B102","typicalChip":"M 48 Magic II"},"B114":{"keyway":"DW04RAP","typicalChip":"PH 46"},"B114R":{"keyway":"DW04/DW05","typicalChip":"PH 46"},"B119":{"keyway":"HU100","typicalChip":"PH 46"},"B120":{"typicalChip":"PH 46","keyway":"HU100"},"DWO4":{"typicalChip":"T5","keyway":"DW04RAP"},"DWO5R":{"keyway":"DW05","typicalChip":"T5"},"DWO5":{"typicalChip":"T5","keyway":"DW05"},"TOY40BT4":{"typicalChip":"TI 4C","keyway":"LXP90"},"TOY48BT4":{"keyway":"LX Short","typicalChip":"TI 4C"},"TOY48H-PT":{"typicalChip":"H-Chip Master 128-BIT","keyway":"LX Short"},"TOY50-PT-M":{"keyway":"LX Short","typicalChip":"TI 4D 68"},"TOY57-PT":{"keyway":"TR40","typicalChip":"TI 4C"},"TOY44D":{"keyway":"TR47","typicalChip":"TI 4D 67 Toyota Master 40-BIT"},"TOY44G":{"typicalChip":"TI 4D 67 Master G 80-BIT","keyway":"TR47"},"TOY44H":{"typicalChip":"H-Chip Master 128-BIT","keyway":"TR47"},"TOY43AT4":{"typicalChip":"TI 4C","keyway":"TR47"},"TOY57":{"typicalChip":"TI 4C","keyway":"TR40"},"B79":{"typicalChip":"VATS","keyway":"B62"},"B68":{"keyway":"B68"},"B51":{"keyway":"B62","typicalChip":"VATS"},"B89":{"keyway":"B86"},"B106":{"keyway":"B106"},"B62":{"keyway":"B62","typicalChip":"VATS"},"B50":{"keyway":"B63"},"B82":{"keyway":"B82","typicalChip":"VATS"},"HY18":{"keyway":"HY18-R"},"B86":{"keyway":"B86"},"HY13":{"keyway":"HY13"},"B102":{"keyway":"B96/B102"},"B91":{"keyway":"B91"},"HY16":{"keyway":"HY16"},"HY14":{"keyway":"HY14"},"B59":{"keyway":"B62","typicalChip":"VATS"},"KK12":{"keyway":"KK12"}};

// FCC ID Relationships - dynamically built from entered data
// Tracks FCC ID  button count/frequency/button functions for auto-population
let fccRelationships = {"KR5TXN7":{"frequency":"433.92 MHz","buttonCount":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)"},"KR5TXN4":{"frequency":"433.92 MHz","buttonCount":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)"},"KR5S180144203":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"315 MHz"},"KR5S180144106":{"frequency":"433.92 MHz","buttonCount":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)"},"KR5S180144014":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"433.92 MHz"},"KR55WK49622":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"315 MHz"},"KBRASTU15, CWTWB1U733, CWTWB1U821":{"frequency":"315 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"CWTWBU729":{"frequency":"315 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"CWTWBU624":{"frequency":"314.975 MHz","buttonCount":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)"},"CWTWB1U840":{"buttonCount":"4 Button: L, U, P, CL (Lock, Unlock, Panic, Charge Lid)","frequency":"314.975 MHz"},"CWTWB1U821":{"frequency":"315 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"CWTWB1U789":{"frequency":"314.975 MHz","buttonCount":"5 Button: L, U, P, PSD2 (Lock, Unlock, Panic, Dual Power Sliding Doors)"},"CWTWB1U787":{"frequency":"433.92 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"CWTWB1U751, CWTWB1U816":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"315 MHz"},"CWTWB1U751":{"frequency":"315 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"CWTWB1U429":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"315-316 MHz"},"CWTWB1G767":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"433.92 MHz"},"M3N5WY8145":{"frequency":"313.85 MHz","buttonCount":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)"},"KR5995364":{"frequency":"923.625-924.6 MHz","buttonCount":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)"},"ACJ932HK1210A":{"frequency":"313.85 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"KR580399900":{"buttonCount":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","frequency":"923.625-924.6 MHz"},"KR5V1X":{"frequency":"313.55-314.15 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"KR5434760":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"313.85 MHz"},"OHT-4882056":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":433.92},"M3N-97395900":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":433.92},"OHT1130261":{"frequency":433.92,"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"GQ4-54T":{"frequency":433.9,"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"M3N-40821302":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":433.9},"M3M-40821302, M3N-XXXXXXXX":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":434.1},"IYZ-C01C":{"buttonCount":"7 Button: L, U, P, + (Lock, Unlock, Panic, +More)","frequency":433.92},"GQ4-53T":{"frequency":433.9,"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"M3N5WY783X":{"frequency":433.92,"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"M3N65981772, M3N5WY72XX":{"frequency":315,"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"OHT692714AA, M3N5WY72XX":{"frequency":315,"buttonCount":"6 Button: L, U, P, T, PSD2 (Lock, Unlock, Panic, Trunk, Dual Power Sliding Doors)"},"OHT692427AA":{"frequency":315,"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"OHT692427AA,OHT692713AA":{"frequency":315,"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"OHT692427AB":{"frequency":315,"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"GQ43VT9T":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":315},"GQ43VT17T":{"frequency":315,"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"GQ43VT5T":{"frequency":315,"buttonCount":"3 Button: L, U, T (Lock, Unlock, Trunk)"},"M3N-A2C93142300":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":314.95},"M3N-A2C931423, M3N-A2C93142300":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":314.95},"M3N-A2C931426, M3N-A2C93142600":{"buttonCount":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","frequency":"902.375-903.425 MHz"},"M3N-A2C931426":{"frequency":"902.375-903.425 MHz","buttonCount":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)"},"M3N-A2C940780":{"frequency":"902.375-903.425 MHz","buttonCount":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)"},"M3N-A2C940780, M3N-A2C94078000":{"frequency":"902.375-903.425 MHz","buttonCount":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)"},"M3N-A2C31243800, A2C87115400":{"frequency":"314.95 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"M3N-A2C31243300":{"buttonCount":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","frequency":"902.375-902.425 MHz"},"M3N5WY8609":{"buttonCount":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","frequency":"315 MHz"},"KR55WK48801":{"buttonCount":"3 Button: L, U, T (Lock, Unlock, Trunk)","frequency":"433.59-434.25 MHz"},"N5F-A08TAA":{"frequency":"314.95 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"N5F-A08TDA":{"buttonCount":"4 Button: L, U, P, RS (Lock, Unlock, Panic, Remote Start)","frequency":"902.375-903.425 MHz"},"OUCD6000022":{"frequency":"315 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"CWTWB1U793":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"315 MHz"},"CWTWB1U722":{"frequency":"315 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"KR55WK47899":{"frequency":"315 MHz","buttonCount":"3 Button: L, U, T (Lock, Unlock, Trunk)"},"CWTWB1U313, CWTWB1U343":{"frequency":"315 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"CWTWB1U322, CWTWB1U331, GQ43VT11T":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"315 MHz"},"CWTWB1U212, CWTWB1U331, GQ43VT11T":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"315 MHz"},"CWTWB1U331, CWTWB1U322, CWTWB1U343":{"frequency":"314.5-315.5 MHz","buttonCount":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)"},"CWTWB1U331, CWTWB1U345":{"frequency":"314.5-315.5 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"GQ43VT4T":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"315 MHz"},"SY5HIFGE04":{"frequency":"433.92 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"TQ8-FOB-4F16":{"frequency":"433.92 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"TQ8-FOB-4F35":{"frequency":"433.92 MHz","buttonCount":"8 Button: L, U, P, H, RSPA-F, RSPA-R, HTL (Lock, Unlock, Panic, Hatch, RSPA Front/Rear, Head & Tail Lights)"},"TQ8-FOB-4F36":{"frequency":"433.92 MHz","buttonCount":"6 Button: L, U, P, T, RS, HTL (Lock, Unlock, Panic, Trunk, Remote Start, Head & Tail Lights)"},"HYQ1EA":{"frequency":"433.92 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"HYQ1AA":{"frequency":"314.9 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"HYQ4AA":{"frequency":"314.9 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"HYQ4EA":{"frequency":"433.92 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"HYQ2AB":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"314.9 MHz"},"HYQ2EB":{"buttonCount":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","frequency":"433.92 MHz"},"NBGG09C04":{"frequency":"433.92 MHz","buttonCount":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)"},"P4O9MK74946931, OHT05918179":{"frequency":"315 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"V2T01080514, OHT05918179":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"315 MHz"},"V2T01060514, P4O9MK74946931, OHT05918179":{"frequency":"314.9 MHz","buttonCount":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)"},"OHT05918179":{"frequency":"315 MHz","buttonCount":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)"},"AVL-B01T1AC":{"frequency":"314.9 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"OHT01060512":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"315 MHz"},"V2T0106512, OHT01060512":{"frequency":"315 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"KR55WK50073":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"314.9 MHz"},"OHT01060512, V2T0106512":{"buttonCount":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","frequency":"315 MHz"},"P4O9MK74946931, OHT01060512":{"buttonCount":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","frequency":"315 MHz"},"M3N-32337100":{"frequency":"314.9 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"OUC60221":{"frequency":"315 MHz","buttonCount":"4 Button: L, U, P, G (Lock, Unlock, Panic, Gate)"},"OUC60270":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"315 MHz"},"KOBGT04A":{"frequency":"315 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"MYT3X6898B":{"frequency":"315 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"L2C0005T":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"315 MHz"},"L2C0007T":{"frequency":"315 MHz","buttonCount":"2 Button: L, U (Lock, Unlock)"},"ABO0204T":{"frequency":"315 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"N5F736566-A":{"frequency":"315 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"LHJ009":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"314.9-315.1 MHz"},"LHJ011":{"frequency":"315 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"KOBLEAR1XT":{"frequency":"315 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"KOBUT1BT":{"buttonCount":"4 Button: L, U, P, RS2X (Lock, Unlock, Panic, Remote Start 2X)","frequency":"315 MHz"},"VQQRK960NAT":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"315 MHz"},"ACJ932HK1310A":{"buttonCount":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","frequency":"433.92 MHz"},"CWTWB1G0090":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"433.92 MHz"},"KR5V2X":{"frequency":"433.66-434.18 MHz","buttonCount":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)"},"KR55WK49308":{"frequency":"313.85 MHz","buttonCount":"4 Button: L, U, P, RG (Lock, Unlock, Panic, Rear Glass)"},"MLBHLIK-1T":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"313.85 MHz"},"MLBHLIK6-1T":{"frequency":"313.85 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"MLBHLIK6-1TA":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"433.92 MHz"},"N5F-S0084A":{"frequency":"313.85 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"N5F-S0084A, N5F-A05TAA":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"313.85 MHz"},"OUCG8D-380H-A":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"313.85 MHz FSK"},"NHVWB1U521, NHVWB1U523":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"433.85-434.00 MHz"},"OUCG8D-399H-A":{"buttonCount":"5 Button: L, U, P, PSD2 (Lock, Unlock, Panic, Dual Power Sliding Doors)","frequency":"313.8-313.9 MHz"},"A269ZUA106":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"433.4-434.4 MHz"},"A269ZUA101":{"buttonCount":"4 Button: L, U, P, OPT (Lock, Unlock, Panic, Option)","frequency":"433.4-434.4 MHz"},"KOBUTAH2T":{"frequency":"315 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"CWT72147KA3":{"frequency":"433.4-434.4 MHz","buttonCount":"2 Button: L, U (Lock, Unlock)"},"TQ8-FOB-4F32, TQ8-FOB-4F19":{"frequency":"433.92 MHz","buttonCount":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)"},"CQOFD00120":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"433.92 MHz"},"TQ8-FOB-4F11":{"buttonCount":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","frequency":"433.92 MHz"},"TQ8-FOB-4F27":{"frequency":"433.92 MHz","buttonCount":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)"},"SY5DMFNA04":{"frequency":"315 MHz","buttonCount":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)"},"SY5DMFNA433":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"433.92 MHz"},"TQ8-FOB-4F17":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"433.92 MHz"},"TQ8-FOB-4F08":{"buttonCount":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","frequency":"433.92 MHz"},"CQOFN00100":{"frequency":"433.92 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"SY5YPFGE06":{"buttonCount":"6 Button: L, U, P, H, PSD2 (Lock, Unlock, Panic, Hatch, Dual Power Sliding Doors)","frequency":"433.92 MHz"},"SY5KHFNA433":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"433.92 MHz"},"CQOTD00660":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"433.92 MHz"},"OSLOKA-450T":{"frequency":"433.92 MHz","buttonCount":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)"},"TQ8-RKE-4F39":{"frequency":"433.92 MHz","buttonCount":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)"},"TQ8-RKE-4F25, TQ8-RKE-4F16":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"433.92 MHz"},"TQ8-RKE-3F04":{"buttonCount":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","frequency":"315 MHz"},"TQ8-RKE-4F16, TQ8-RKE-4F25":{"frequency":"433.92 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"TQ8-RKE-3F05":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"315 MHz"},"SY5JFRGE04":{"frequency":"433.92 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"OSLOKA-875T, OSLOKA-910T":{"buttonCount":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","frequency":"433.92 MHz"},"OSLOKA-310T":{"frequency":"313.85 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"OSLOKA-360T":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"313.85 MHz"},"OSLOKA-423T":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"433.92 MHz"},"OSLOKA-630T":{"frequency":"313.85 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"OSLOKA-674T":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"315 MHz"},"OSOKA-674T, OKA-674T":{"frequency":"315 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"PLNHM-T011":{"buttonCount":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","frequency":"315 MHz"},"TQ8-RKE-4F14":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"433.92 MHz"},"PINHA-T008":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"315 MHz"},"SV3HMTX":{"frequency":"315 MHz","buttonCount":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)"},"KR55WY8404":{"frequency":"315 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"SV3-VQTXNA13":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"315 MHz"},"WAZSKE13D01":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"315 MHz"},"WAZSKE13D03":{"buttonCount":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)","frequency":"315 MHz"},"WAZSKE11D01":{"frequency":"315 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"KPU41788":{"frequency":"313.8 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"BGBX1T478SKE125-01":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"315 MHz"},"KPU41846":{"frequency":"313.8 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"OUC644M-KEY-N":{"frequency":"315 MHz","buttonCount":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)"},"OUC003M":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"315 MHz"},"OUCJ166N":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"315 MHz"},"OUCG8D-625M-A":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"315 MHz"},"HYQ12ABA":{"buttonCount":"2 Button: L, U (Lock, Unlock)","frequency":"314.35 MHz"},"OUCG8D-525M-A":{"frequency":"313.85 MHz","buttonCount":"3 Button: L, U, T (Lock, Unlock, Trunk)"},"CWTWB1U816, CWTWB1U751":{"frequency":"315 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"HYQ14AHK":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"433.92 MHz"},"HYQ14AHC":{"frequency":"314.35 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"CWTWB1U811":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"315 MHz"},"HYQ12BBY":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"314.35 MHz"},"NHVWB1U711":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"433.92 MHz"},"HYQ14FBF":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"312.1-314.35 MHz"},"HYQ14FBA":{"frequency":"312.1-314.35 MHz","buttonCount":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)"},"HYQ14ACX":{"frequency":"314.35 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"MOZBR1ET":{"frequency":"312.1-314.35 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"HYQ14FBE":{"frequency":"312.1-314.35 MHz","buttonCount":"4 Button: L, U, P, AC (Lock, Unlock, Panic, Air Conditioning)"},"HYQ14FLA":{"frequency":"312.1-314.35 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"HYQ14FBC":{"frequency":"312.1-314.35 MHz","buttonCount":"4 Button: L, U, P, H (Lock, Unlock, Panic, Hatch)"},"HYQ14ADR":{"frequency":"314.35 MHz","buttonCount":"6 Button: L, U, P, R, PSD2 (Lock, Unlock, Panic, Rear, Dual Power Sliding Doors)"},"HYQ12BFB, HYQ12BFA":{"frequency":"314.35 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"HYQ12BFA":{"frequency":"312.1-314.35 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"HYQ12BGF, HYQ12BFB":{"frequency":"312.1-314.35 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"HYQ12BDP, HYQ12BEL":{"frequency":"312.1-314.35 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"HYQ12BDM":{"frequency":"312.1-314.35 MHz","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"MOZB52TH":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"314.35 MHz ASK"},"HYQ12BEL":{"frequency":"312.1-314.35 MHz","buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)"},"GQ4-29T":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"315 MHz"},"GQ43VT20T":{"buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)","frequency":"315 MHz"},"GQ43VT14T":{"frequency":"315 MHz","buttonCount":"3 Button: L, U, H (Lock, Unlock, Hatch)"},"NBG009768T":{"frequency":"314.9","buttonCount":"3 Button: L, U, P (Lock, Unlock, Panic)"},"M3N5WY7777A":{"frequency":"315","buttonCount":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)"},"NBG009768T, NBGG093UCC":{"frequency":"314.9","buttonCount":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)"},"B102":{"frequency":"315 MHz"},"KR5T21":{"buttonCount":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"433.66-434.18 MHz"},"HYQ2ES":{"frequency":"433.92 MHz","buttonCount":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)"}};

// Master list of known Lishi tools (pre-populated)
const MASTER_LISHI_TOOLS = {"B106/GM37": {"keyways": ["GM B / GM37"], "keyway_family": "GM B / GM37", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "B111": {"keyways": ["GM Z"], "keyway_family": "GM Z", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "BAOJUN": {"keyways": [], "keyway_family": "", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "BQSB": {"keyways": [], "keyway_family": "", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "BW9MH": {"keyways": [], "keyway_family": "", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "BYD01": {"keyways": ["BYD"], "keyway_family": "BYD", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "BYD01R": {"keyways": ["BYD"], "keyway_family": "BYD", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "CHAANGAN": {"keyways": [], "keyway_family": "", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "CY24": {"keyways": ["Chrysler CY24", "Y157", "Y159", "Y164"], "keyway_family": "Chrysler CY24", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "CY24-CV": {"keyways": ["Chrysler CY24"], "keyway_family": "Chrysler CY24", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "CY24 TRUCK": {"keyways": ["Chrysler CY24"], "keyway_family": "Chrysler CY24", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "DAT12R": {"keyways": ["Datsun DAT12"], "keyway_family": "Datsun DAT12", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "DW04R V.2": {"keyways": ["Peugeot/Citroen DW04"], "keyway_family": "Peugeot/Citroen DW04", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "FO38": {"keyways": ["Ford FO38", "H75"], "keyway_family": "Ford FO38", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "FORD 2017": {"keyways": ["Ford HU101 variant"], "keyway_family": "Ford HU101 variant", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "GM39": {"keyways": ["GM"], "keyway_family": "GM", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "GM45": {"keyways": ["GM"], "keyway_family": "GM", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HAIMA": {"keyways": [], "keyway_family": "", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HON58R": {"keyways": ["Honda HON58"], "keyway_family": "Honda HON58", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HON66": {"keyways": ["Honda HON66"], "keyway_family": "Honda HON66", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HU39": {"keyways": ["Mercedes HU39"], "keyway_family": "Mercedes HU39", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HU43": {"keyways": ["Mercedes HU43"], "keyway_family": "Mercedes HU43", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HU46": {"keyways": ["Mercedes HU46"], "keyway_family": "Mercedes HU46", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HU49": {"keyways": ["Mercedes HU49"], "keyway_family": "Mercedes HU49", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HU58": {"keyways": ["Mercedes HU58"], "keyway_family": "Mercedes HU58", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HU58TL": {"keyways": ["Mercedes HU58"], "keyway_family": "Mercedes HU58", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HU64 V.2": {"keyways": ["Mercedes HU64"], "keyway_family": "Mercedes HU64", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HU66 Generation 1 & 2": {"keyways": ["VAG HU66", "HU66"], "keyway_family": "VAG HU66", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HU66 V.3": {"keyways": ["VAG HU66", "HU66"], "keyway_family": "VAG HU66", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HU71": {"keyways": ["Mercedes HU71"], "keyway_family": "Mercedes HU71", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HU92": {"keyways": ["BMW HU92"], "keyway_family": "BMW HU92", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HU100V3(10 Cut)": {"keyways": ["GM HU100", "B119", "B120"], "keyway_family": "GM HU100", "door": true, "ignition": false, "trunk": true, "cutStart": 3, "cutEnd": 10, "cutTotal": 10, "inStock": false, "notes": "Does NOT work on ignition. Reads cuts 3-10 only."}, "HU100V3(8 Cut)": {"keyways": ["GM HU100"], "keyway_family": "GM HU100", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HU100R V.3": {"keyways": ["GM HU100"], "keyway_family": "GM HU100", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HU101 V.3": {"keyways": ["Ford HU101"], "keyway_family": "Ford HU101", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HU162 (VAG2015)": {"keyways": ["VAG HU162"], "keyway_family": "VAG HU162", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HU162-SC9": {"keyways": ["VAG HU162"], "keyway_family": "VAG HU162", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HU162-SC10 V.3": {"keyways": ["VAG HU162"], "keyway_family": "VAG HU162", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HY16": {"keyways": ["Hyundai HY16"], "keyway_family": "Hyundai HY16", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HY17(HYN15)": {"keyways": ["Hyundai HY17"], "keyway_family": "Hyundai HY17", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HY20": {"keyways": ["Hyundai HY20"], "keyway_family": "Hyundai HY20", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HY22": {"keyways": ["Hyundai HY22"], "keyway_family": "Hyundai HY22", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HYN14(HY15)": {"keyways": ["Hyundai HYN14"], "keyway_family": "Hyundai HYN14", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HYN14R(HY16)": {"keyways": ["Hyundai HYN14"], "keyway_family": "Hyundai HYN14", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HYN22": {"keyways": ["Hyundai HYN22"], "keyway_family": "Hyundai HYN22", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "HYN7R": {"keyways": ["Hyundai HYN7"], "keyway_family": "Hyundai HYN7", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "ICF03": {"keyways": [], "keyway_family": "", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "K5 V.3": {"keyways": [], "keyway_family": "", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "MAZ24R V.2": {"keyways": ["Mazda MAZ24"], "keyway_family": "Mazda MAZ24", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "MIT11R": {"keyways": ["Mitsubishi MIT11"], "keyway_family": "Mitsubishi MIT11", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "MIT8": {"keyways": ["Mitsubishi MIT8"], "keyway_family": "Mitsubishi MIT8", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "MIT9/MIT6": {"keyways": ["Mitsubishi MIT9 / MIT6"], "keyway_family": "Mitsubishi MIT9 / MIT6", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "NE38 V.2 Boot": {"keyways": ["Nissan NE38"], "keyway_family": "Nissan NE38", "door": true, "ignition": false, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": "Boot/Trunk only - does not work on ignition"}, "NE66": {"keyways": ["Nissan NE66"], "keyway_family": "Nissan NE66", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "NE71R V.2": {"keyways": ["Nissan NE71"], "keyway_family": "Nissan NE71", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "NE72": {"keyways": ["Nissan NE72"], "keyway_family": "Nissan NE72", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "NE78": {"keyways": ["Nissan NE78"], "keyway_family": "Nissan NE78", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "NSN14": {"keyways": ["Nissan NSN14", "DA34"], "keyway_family": "Nissan NSN14", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "QIRUI": {"keyways": [], "keyway_family": "", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "SIP22": {"keyways": ["Fiat SIP22"], "keyway_family": "Fiat SIP22", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "SRT2018": {"keyways": ["Dodge SRT"], "keyway_family": "Dodge SRT", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "SX9": {"keyways": ["Citroen SX9"], "keyway_family": "Citroen SX9", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "TOY2": {"keyways": ["Toyota TOY2"], "keyway_family": "Toyota TOY2", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "TOY43": {"keyways": ["Toyota TOY43", "TR47"], "keyway_family": "Toyota TOY43", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "TOY43AT": {"keyways": ["Toyota TOY43AT"], "keyway_family": "Toyota TOY43AT", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "TOY43AT Dr/Bt": {"keyways": ["Toyota TOY43AT"], "keyway_family": "Toyota TOY43AT", "door": true, "ignition": false, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": "Door/Boot only - does not work on ignition"}, "TOY43AT Ignition": {"keyways": ["Toyota TOY43AT"], "keyway_family": "Toyota TOY43AT", "door": false, "ignition": true, "trunk": false, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": "Ignition only"}, "TOY43R": {"keyways": ["Toyota TOY43"], "keyway_family": "Toyota TOY43", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "TOY48": {"keyways": ["Toyota TOY48"], "keyway_family": "Toyota TOY48", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "VA2": {"keyways": ["Peugeot/Citroen VA2"], "keyway_family": "Peugeot/Citroen VA2", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "VA6": {"keyways": ["Peugeot/Citroen VA6"], "keyway_family": "Peugeot/Citroen VA6", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "VAC102": {"keyways": [], "keyway_family": "", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "YM23": {"keyways": ["Yamaha YM23 (auto use)"], "keyway_family": "Yamaha YM23 (auto use)", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}, "ZD30": {"keyways": ["Isuzu ZD30"], "keyway_family": "Isuzu ZD30", "door": true, "ignition": true, "trunk": true, "cutStart": 1, "cutEnd": null, "cutTotal": null, "inStock": false, "notes": ""}};
let vendorPrices = {"5003":{"Keyless Ride":{"priceA":75,"oem":"","emergency":7.95,"shell":"","priceB":39}},"5005":{"Keyless Ride":{"emergency":"","shell":"","priceA":"57","oem":"","priceB":"39"}},"5006":{"Keyless Ride":{"oem":"","shell":"","priceA":"97","priceB":"","emergency":""}},"5008":{"Keyless Ride":{"priceB":"","emergency":"","priceA":"$164","oem":"","shell":""}},"5009":{"Keyless Ride":{"shell":"","emergency":"","priceB":"$69","priceA":"$129","oem":""}},"5012":{"Keyless Ride":{"priceA":149,"priceB":"","emergency":"Discontinued","oem":"","shell":""}},"5013":{"Keyless Ride":{"emergency":"$12.95","priceA":"$139","oem":"","shell":"","priceB":"$79"}},"5016":{"Keyless Ride":{"shell":"","priceB":94,"oem":"","emergency":6.95,"priceA":149}},"5019":{"Keyless Ride":{"shell":"","priceB":"74","emergency":"","priceA":"109","oem":""}},"5021":{"Keyless Ride":{"priceB":"","emergency":7.95,"priceA":"$94","oem":"","shell":""}},"5022":{"Keyless Ride":{"priceA":"104.00","shell":"","oem":"","priceB":"","emergency":""}},"5023":{"Keyless Ride":{"emergency":"","priceB":49,"oem":"","priceA":74,"shell":""}},"5026":{"Keyless Ride":{"priceA":"$119","emergency":"$34.99","shell":"","priceB":"$79","oem":""}},"5027":{"Keyless Ride":{"oem":"","shell":"","priceA":"89","emergency":"","priceB":"59"}},"5028":{"Keyless Ride":{"priceA":149,"priceB":"","oem":"","shell":"","emergency":6.95}},"5029":{"Keyless Ride":{"oem":"","priceA":"59","shell":"","priceB":"44","emergency":"6.95"}},"5031":{"Keyless Ride":{"oem":"","shell":"","emergency":7.95,"priceB":"$74","priceA":"$119"}},"5032":{"Keyless Ride":{"oem":"","priceA":"$119","emergency":7.95,"priceB":"","shell":""}},"5033":{"Keyless Ride":{"shell":"","priceA":"64","emergency":"","oem":"","priceB":"44"}},"5034":{"Keyless Ride":{"shell":"","priceA":74,"oem":24.95,"emergency":17.99,"priceB":49}},"5036":{"Keyless Ride":{"priceA":99,"shell":"","oem":"","emergency":7.95,"priceB":""}},"5038":{"Keyless Ride":{"oem":"","emergency":"","shell":6.95,"priceA":144,"priceB":""}},"5039":{"Keyless Ride":{"priceB":"$59","priceA":"$94","emergency":"","oem":"","shell":""}},"5041":{"Keyless Ride":{"priceB":"$59","priceA":"$79","shell":"","emergency":"","oem":""}},"5044":{"Keyless Ride":{"priceA":154,"emergency":11.95,"oem":"","priceB":"","shell":""}},"5045":{"Keyless Ride":{"shell":"","emergency":7.95,"oem":"","priceB":"","priceA":"$119"}},"5046":{"Keyless Ride":{"shell":"","oem":"","priceB":"","priceA":"$119","emergency":7.95}},"5047":{"Keyless Ride":{"priceB":"","emergency":6.95,"shell":"","oem":"","priceA":154}},"5055":{"Keyless Ride":{"priceB":"","shell":"","priceA":169,"emergency":7.95,"oem":""}},"5057":{"Keyless Ride":{"oem":"","priceA":34.95,"shell":"","priceB":17.95,"emergency":7.95}},"5058":{"Keyless Ride":{"priceB":"$59","oem":"","shell":"","priceA":"$104","emergency":"$7.95"}},"5060":{"Keyless Ride":{"emergency":"","priceA":"$72","priceB":"","oem":"","shell":""}},"5063":{"Keyless Ride":{"priceA":169,"emergency":6.95,"priceB":"","oem":"","shell":""}},"5064":{"Keyless Ride":{"priceA":"$94","shell":"","oem":"","emergency":"$7.95","priceB":""}},"5066":{"Keyless Ride":{"priceB":"","priceA":"$69","shell":"","emergency":"$7.95","oem":""}},"5068":{"Keyless Ride":{"priceB":69,"shell":"","priceA":134,"oem":"","emergency":6.95}},"5069":{"Keyless Ride":{"priceB":59,"priceA":139,"emergency":6.95,"shell":14.95,"oem":""}},"5070":{"Keyless Ride":{"emergency":"","shell":"","priceB":"","priceA":"$99","oem":""}},"5072":{"Keyless Ride":{"emergency":7.95,"shell":"","priceA":124,"priceB":"","oem":""}},"5073":{"Keyless Ride":{"priceB":74,"priceA":109,"emergency":7.95,"shell":"","oem":""}},"5074":{"Keyless Ride":{"emergency":"","shell":"","priceB":"","priceA":"239","oem":""}},"5075":{"Keyless Ride":{"shell":"","priceB":"","emergency":"","priceA":"164","oem":""}},"5083":{"Keyless Ride":{"priceA":134,"priceB":"","emergency":6.95,"shell":"","oem":""}},"5087":{"Keyless Ride":{"shell":"","oem":"","emergency":"$7.95","priceA":"$84","priceB":""}},"5095":{"Keyless Ride":{"priceB":"59","priceA":"89","emergency":"6.95","shell":"","oem":""}},"5102":{"Keyless Ride":{"oem":"","priceB":"","emergency":7.95,"shell":"","priceA":"$234"}},"5103":{"Keyless Ride":{"shell":"","emergency":7.95,"priceB":"49","priceA":"$99","oem":""}},"5105":{"Keyless Ride":{"emergency":7.95,"shell":"","priceB":"","oem":"","priceA":"$74"}},"5106":{"Keyless Ride":{"shell":"","priceA":129,"emergency":"Discontinued","priceB":59,"oem":""}},"5108":{"Keyless Ride":{"oem":"","emergency":36,"shell":"","priceA":164,"priceB":""}},"5112":{"Keyless Ride":{"shell":"","oem":"","priceB":"","priceA":169,"emergency":6.95}},"5114":{"Keyless Ride":{"oem":"","emergency":28,"shell":"","priceB":"","priceA":174}},"5131":{"Keyless Ride":{"priceB":"","priceA":"$84","shell":"","emergency":"$7.95","oem":""}},"5132":{"Keyless Ride":{"emergency":"$7.95","priceA":"$67","oem":"","shell":"","priceB":""}},"5135":{"Keyless Ride":{"priceB":64,"shell":"","oem":"","priceA":89,"emergency":9.95}},"5138":{"Keyless Ride":{"emergency":"$7.95","oem":"","priceB":"","priceA":"$94","shell":""}},"5150":{"Keyless Ride":{"priceA":"$58","priceB":"$19.95","emergency":"","oem":"","shell":""}},"5157":{"Keyless Ride":{"oem":"","priceA":199,"shell":"","priceB":"","emergency":7.95}},"5158":{"Keyless Ride":{"oem":"","priceA":149,"shell":"","priceB":"","emergency":7.95}},"5164":{"Keyless Ride":{"priceA":94,"emergency":9.95,"shell":"","oem":"","priceB":59}},"5166":{"Keyless Ride":{"priceB":"","emergency":7.95,"oem":"","shell":"","priceA":129}},"5167":{"Keyless Ride":{"priceB":"","oem":"","shell":"","emergency":7.95,"priceA":149}},"5172":{"Keyless Ride":{"oem":"","priceB":"","shell":"","emergency":"","priceA":"110.00"}},"5182":{"Keyless Ride":{"oem":"","shell":"","priceA":149,"priceB":"","emergency":6.95}},"5186":{"Keyless Ride":{"priceA":49.95,"shell":"","priceB":44,"oem":"","emergency":6.95}},"5202":{"Keyless Ride":{"oem":"","priceA":"$139","emergency":"$14.95","priceB":"","shell":""}},"5217":{"Keyless Ride":{"priceB":"","shell":"","oem":"","emergency":"$14.95","priceA":"$119"}},"5268":{"Keyless Ride":{"oem":"","priceA":"119","priceB":"79","emergency":"7.95","shell":""}},"5285":{"Keyless Ride":{"shell":"","priceB":"","emergency":7.95,"priceA":219,"oem":""}},"5289":{"Keyless Ride":{"priceA":"$119","shell":"","priceB":"","emergency":"$14.95","oem":""}},"5302":{"Keyless Ride":{"priceB":"","shell":"","priceA":154,"oem":"","emergency":8.95}},"5303":{"Keyless Ride":{"priceA":154,"priceB":"","emergency":8.95,"oem":"","shell":""}},"5320":{"Keyless Ride":{"priceA":"$179","emergency":"","shell":"","oem":"","priceB":""}},"5330":{"Keyless Ride":{"oem":"","priceA":"$19.44","emergency":"","shell":6.95,"priceB":"$14.50"}},"5333":{"Keyless Ride":{"priceA":"$139","emergency":"$14.95","priceB":"","shell":"","oem":""}},"5342":{"Keyless Ride":{"oem":"","emergency":"","priceA":"$17.95","priceB":"$9.95","shell":6.95}},"5350":{"Keyless Ride":{"oem":"","shell":6.95,"priceA":"$19.43","emergency":"","priceB":"$14.95"}},"5357":{"Keyless Ride":{"priceB":"","oem":"","shell":"","emergency":6.95,"priceA":169}},"5470":{"Keyless Ride":{"emergency":"$7.95","oem":"","shell":"","priceB":"","priceA":"$109"}},"5512":{"Keyless Ride":{"emergency":"","shell":6.95,"priceB":12.95,"priceA":19.95,"oem":""}},"5531":{"Keyless Ride":{"priceA":"$59","shell":"","emergency":"","oem":"","priceB":"$17.95"}},"5560":{"Keyless Ride":{"priceB":14.95,"emergency":"","oem":"","priceA":110,"shell":""}},"5581":{"Keyless Ride":{"priceB":44,"priceA":137,"emergency":"","oem":"","shell":""}},"5598":{"Keyless Ride":{"priceA":"$44","oem":"","emergency":"$13.95","shell":"$6.95","priceB":""}},"5670":{"Keyless Ride":{"priceA":24,"oem":"","emergency":"","shell":"","priceB":14.95}},"5892":{"Keyless Ride":{"emergency":"","priceB":"$29","oem":"","priceA":"$84","shell":""}},"5900":{"Keyless Ride":{"priceB":"","oem":"","shell":"","priceA":"$63","emergency":""}},"5950":{"Keyless Ride":{"priceB":"$44","priceA":"$119","shell":"","emergency":"","oem":""}},"6001":{"Keyless Ride":{"emergency":"$7.95","shell":"","oem":"","priceB":"$59","priceA":"$74"}},"6050":{"Keyless Ride":{"oem":"","shell":"","priceA":"$58","emergency":"","priceB":"$29"}},"6070":{"Keyless Ride":{"oem":"","shell":"","priceB":"$14.95","emergency":"","priceA":"$39"}},"6071":{"Keyless Ride":{"priceA":"$54","oem":"","priceB":"$17.95","emergency":"","shell":""}},"6072":{"Keyless Ride":{"shell":"","emergency":"","oem":"","priceB":"$24.95","priceA":"$39"}},"6075":{"Keyless Ride":{"oem":"","shell":"$6.95","emergency":"","priceA":"$72","priceB":"$37.95"}},"6079":{"Keyless Ride":{"emergency":"","oem":"","priceB":"59","priceA":"89","shell":""}},"6084":{"Keyless Ride":{"oem":"","priceA":"$59","priceB":"$44","emergency":"$7.95","shell":""}},"6100":{"Keyless Ride":{"shell":"","priceB":"$21","emergency":"","oem":"","priceA":"$59"}},"6370":{"Keyless Ride":{"emergency":"","shell":"","priceA":"$37","oem":"","priceB":""}},"6502":{"Keyless Ride":{"emergency":"","priceA":"99","shell":"","oem":"","priceB":"59"}},"6503":{"Keyless Ride":{"oem":"","shell":6.95,"emergency":"","priceA":129,"priceB":54}},"6505":{"Keyless Ride":{"priceB":59,"oem":"","shell":"","emergency":7.95,"priceA":119}},"6508":{"Keyless Ride":{"shell":"","priceA":"79","priceB":"","oem":"","emergency":""}},"6510":{"Keyless Ride":{"emergency":10.95,"shell":"","priceB":"","priceA":84,"oem":""}},"6511":{"Keyless Ride":{"emergency":"","oem":"","priceA":"74","shell":"","priceB":""}},"7540":{"Keyless Ride":{"shell":"","oem":"","priceA":"$74","emergency":"$7.95","priceB":""}},"7550":{"Keyless Ride":{"priceB":44,"shell":"","emergency":6.95,"oem":"","priceA":69}},"7720":{"Keyless Ride":{"oem":"","priceB":114.75,"shell":"","emergency":11.95,"priceA":169}},"7840":{"Keyless Ride":{"oem":"","shell":"","emergency":10.95,"priceB":49,"priceA":199}},"8003":{"Keyless Ride":{"oem":39,"shell":"","priceB":49,"priceA":179,"emergency":7.95}},"8007":{"Keyless Ride":{"priceA":79,"emergency":8.95,"shell":"","oem":"","priceB":""}},"8016":{"Keyless Ride":{"priceB":"","shell":"","emergency":"","oem":"","priceA":169}},"8019":{"Keyless Ride":{"emergency":"","priceB":"","shell":"","priceA":124,"oem":""}},"8021":{"Keyless Ride":{"priceB":17.95,"emergency":8.99,"oem":"","shell":"","priceA":29}},"8026":{"Keyless Ride":{"priceB":"59","emergency":"6.95","oem":"","priceA":"89","shell":"12.95"}},"8037":{"Keyless Ride":{"emergency":"$13.95","shell":"$10.95","priceA":"$26.95","priceB":"$21.95","oem":""}},"8056":{"Keyless Ride":{"shell":17.99,"priceA":149,"emergency":7.95,"oem":"","priceB":""}},"8061":{"Keyless Ride":{"oem":"","shell":6.95,"priceB":17.95,"priceA":89,"emergency":""}},"8062":{"Keyless Ride":{"shell":6.95,"priceA":89,"oem":"","priceB":17.95,"emergency":""}},"8066":{"Keyless Ride":{"oem":"$19.95","emergency":"","shell":6.95,"priceA":"$114","priceB":"$54"}},"8067":{"Keyless Ride":{"priceB":"$54","oem":"$19.95","emergency":"","shell":6.95,"priceA":"$124"}},"8068":{"Keyless Ride":{"priceA":"$91","oem":"$19.95","shell":6.95,"priceB":"$54","emergency":""}},"8077":{"Keyless Ride":{"priceB":"","emergency":"","shell":"$6.95","oem":"$17.95","priceA":"$64"}},"8082":{"Keyless Ride":{"priceB":"","priceA":149,"shell":"","oem":"","emergency":6.95}},"8084":{"Keyless Ride":{"priceA":129,"emergency":4.95,"shell":11.95,"oem":"","priceB":59}},"8089":{"Keyless Ride":{"shell":"","emergency":"","priceA":94,"priceB":19.95,"oem":""}},"8092":{"Keyless Ride":{"oem":"","shell":"","priceB":"$12.95","priceA":"$52","emergency":""}},"8093":{"Keyless Ride":{"priceB":24.95,"priceA":74,"emergency":"","shell":6.95,"oem":""}},"8094":{"Keyless Ride":{"shell":6.95,"oem":"","priceA":"$129","priceB":"","emergency":""}},"8095":{"Keyless Ride":{"emergency":"","priceA":"$114","priceB":"$54","oem":"","shell":6.95}},"8096":{"Keyless Ride":{"shell":"","emergency":"","oem":"","priceA":"$118.49","priceB":""}},"8098":{"Keyless Ride":{"priceB":"","oem":"","priceA":119,"emergency":"","shell":7.95}},"8101":{"Keyless Ride":{"oem":"$17.95","shell":"$6.95","priceB":"$21.95","priceA":"$39","emergency":"$13.95"}},"8107":{"Keyless Ride":{"priceA":"$59","emergency":"","priceB":"$9.95","oem":"","shell":""}},"8110":{"Keyless Ride":{"emergency":"","oem":"$12.95","shell":"","priceA":"$44","priceB":"$34"}},"8112":{"Keyless Ride":{"priceB":59,"oem":"","shell":11.95,"emergency":4.95,"priceA":"$109"}},"8120":{"Keyless Ride":{"oem":"","shell":"","priceA":"$64","emergency":"","priceB":"$34.95"}},"8125":{"Keyless Ride":{"priceB":"$34","oem":"$12.95","emergency":"","priceA":"$47","shell":""}},"8133":{"Keyless Ride":{"oem":"","priceA":44,"emergency":"","shell":"","priceB":29}},"8136":{"Keyless Ride":{"emergency":"","priceA":"$74","oem":"","priceB":"$44","shell":""}},"8141":{"Keyless Ride":{"emergency":"","priceA":"29","oem":"","shell":"","priceB":"13.95"}},"8142":{"Keyless Ride":{"oem":"","priceB":"","shell":"","priceA":"110","emergency":""}},"8144":{"Keyless Ride":{"shell":11.95,"emergency":4.95,"priceA":"$109","priceB":59,"oem":12.95}},"8153":{"Keyless Ride":{"priceB":49,"priceA":79,"emergency":6.95,"oem":"","shell":14.95}},"8154":{"Keyless Ride":{"shell":"","priceA":"$109","priceB":"$74","emergency":"","oem":""}},"8155":{"Keyless Ride":{"shell":17.99,"emergency":"","priceB":"$79","oem":"","priceA":"$139"}},"8158":{"Keyless Ride":{"shell":14.95,"priceB":69,"priceA":149,"emergency":6.95,"oem":""}},"8160":{"Keyless Ride":{"oem":"","shell":15.99,"emergency":"","priceB":"$19.95","priceA":"$132"}},"8176":{"Keyless Ride":{"shell":"$6.95","oem":"$17.95","priceB":"","priceA":"$59","emergency":""}},"8181":{"Keyless Ride":{"emergency":4.59,"priceB":59,"priceA":124,"shell":11.95,"oem":""}},"8184":{"Keyless Ride":{"priceA":139,"priceB":74,"emergency":6.95,"shell":"","oem":""}},"8185":{},"8186":{"Keyless Ride":{"priceA":159,"oem":"","shell":"","priceB":"","emergency":6.95}},"8191":{"Keyless Ride":{"oem":"","emergency":6.95,"priceB":69,"priceA":"$89","shell":14.95}},"8194":{"Keyless Ride":{"priceB":"","shell":"","oem":"","priceA":179,"emergency":8.95}},"8196":{"Keyless Ride":{"emergency":6.95,"priceA":149,"priceB":69,"shell":"","oem":""}},"8207":{"Keyless Ride":{"shell":11.95,"priceA":119,"oem":"","priceB":59,"emergency":4.95}},"8211":{"Keyless Ride":{"shell":17.99,"oem":"","priceA":"$117","emergency":"","priceB":"$74"}},"8215":{"Keyless Ride":{"shell":"","priceA":"129","emergency":"","priceB":"","oem":""}},"8216":{"Keyless Ride":{"emergency":"","priceB":"","oem":"","priceA":"129","shell":""}},"8218":{"Keyless Ride":{"priceA":129,"shell":17.99,"priceB":94,"oem":"","emergency":7.95}},"8228":{"Keyless Ride":{"priceA":149,"shell":11.95,"oem":"","priceB":87,"emergency":4.95}},"8231":{"Keyless Ride":{"emergency":"","oem":"","shell":"","priceB":"34","priceA":"59"}},"8234":{"Keyless Ride":{"priceA":24.95,"shell":"","oem":"","emergency":8.99,"priceB":9.95}},"8239":{"Keyless Ride":{"shell":"$6.95","oem":"","priceB":"$18.95","emergency":"$13.95","priceA":"$29.99"}},"8258":{"Keyless Ride":{"oem":"","priceB":"","priceA":"$29.95","emergency":"$13.95","shell":""}},"8259":{"Keyless Ride":{"priceB":"$54","oem":"$17.95","priceA":"$149","shell":"","emergency":""}},"8269":{"Keyless Ride":{"oem":"","priceB":"","emergency":7.95,"shell":"","priceA":"$94"}},"8271":{"Keyless Ride":{"oem":"","shell":"","priceB":"","emergency":7.95,"priceA":"$119"}},"8273":{"Keyless Ride":{"emergency":7.95,"priceB":"","oem":"","shell":"","priceA":"$119"}},"8276":{"Keyless Ride":{"priceB":"","oem":"","shell":"","emergency":11.95,"priceA":159}},"8279":{"Keyless Ride":{"shell":"","oem":"","emergency":11.95,"priceA":159,"priceB":""}},"8282":{"Keyless Ride":{"oem":"","shell":"","priceB":"","emergency":6.95,"priceA":149}},"8284":{"Keyless Ride":{"priceA":184,"oem":"","shell":"","emergency":"","priceB":""}},"8287":{"Keyless Ride":{"emergency":7.95,"priceA":309,"shell":"","priceB":"","oem":""}},"8288":{"Keyless Ride":{"priceA":139,"emergency":15,"oem":12.95,"shell":"","priceB":64}},"8290":{"Keyless Ride":{"priceB":"","emergency":"6.95","priceA":"89","oem":"","shell":""}},"8291":{"Keyless Ride":{"emergency":6.95,"priceB":59,"oem":"","shell":"","priceA":"$79"}},"8293":{"Keyless Ride":{"priceA":"$124","emergency":4.95,"shell":11.95,"oem":"","priceB":74}},"8296":{"Keyless Ride":{"emergency":"","oem":"$18.95","shell":"","priceB":"$49","priceA":"$79"}},"8297":{"Keyless Ride":{"priceA":289,"emergency":7.95,"shell":"","oem":"","priceB":""}},"8305":{"Keyless Ride":{"shell":"$6.95","priceB":"$18.95","oem":"$17.95","emergency":"$13.95","priceA":"$29.99"}},"8308":{"Keyless Ride":{"priceB":"74","oem":"","priceA":"109","shell":"","emergency":""}},"8310":{"Keyless Ride":{"emergency":"","priceB":"$27.95","shell":11.95,"oem":"","priceA":"$124"}},"8312":{"Keyless Ride":{"priceB":"$29","priceA":"$54","oem":"","emergency":"","shell":""}},"8315":{"Keyless Ride":{"shell":"","priceA":"$44","oem":"","emergency":"","priceB":""}},"8329":{"Keyless Ride":{"priceA":144,"shell":"","oem":"","emergency":6.95,"priceB":89}},"8336":{"Keyless Ride":{"shell":6.98,"priceB":"$54","priceA":"$127","emergency":"","oem":""}},"8348":{"Keyless Ride":{"shell":"","oem":"","priceA":"$49","priceB":"$21.95","emergency":"$13.95"}},"8351":{"Keyless Ride":{"priceB":"49","oem":"","shell":"","emergency":"","priceA":"57"}},"8353":{"Keyless Ride":{"shell":"","oem":"","priceB":"","priceA":"179","emergency":""}},"8354":{"Keyless Ride":{"shell":"","priceB":"","oem":"","priceA":"139","emergency":""}},"8372":{"Keyless Ride":{"oem":"","shell":"","emergency":8.95,"priceA":99,"priceB":""}},"8373":{"Keyless Ride":{"shell":6.95,"priceB":49,"oem":"","priceA":94,"emergency":""}},"8376":{"Keyless Ride":{"oem":"","shell":"","priceB":"49","priceA":"74","emergency":""}},"8382":{"Keyless Ride":{"emergency":"","priceA":"24.95","shell":"","priceB":"9.95","oem":""}},"8386":{"Keyless Ride":{"oem":"","emergency":"7.95","shell":"","priceA":"94","priceB":"74"}},"8390":{"Keyless Ride":{"priceA":"155","oem":"","emergency":"7.95","shell":"","priceB":""}},"8391":{"Keyless Ride":{"priceA":"$84","priceB":"","oem":"","shell":"","emergency":"$13.95"}},"8392":{"Keyless Ride":{"priceB":"","emergency":"","shell":17.99,"priceA":"$159","oem":""}},"8405":{"Keyless Ride":{"priceA":"$134","oem":"$44","shell":"","priceB":"$94","emergency":""}},"8406":{"Keyless Ride":{"priceB":"","priceA":94,"emergency":6.95,"oem":"","shell":""}},"8417":{"Keyless Ride":{"priceA":109,"oem":"","emergency":4.95,"shell":11.95,"priceB":74}},"8419":{"Keyless Ride":{"emergency":6.95,"oem":"","priceB":69,"shell":"","priceA":139}},"8422":{"Keyless Ride":{"emergency":6.95,"oem":"","priceB":94,"priceA":149,"shell":""}},"8424":{"Keyless Ride":{"priceB":"","shell":"","priceA":"$159","oem":"","emergency":""}},"8426":{},"8429":{"Keyless Ride":{"priceB":"","emergency":"$13.95","oem":"","shell":"$6.95","priceA":"$44"}},"8440":{"Keyless Ride":{"priceA":"$39","shell":"","oem":"","priceB":"$29","emergency":""}},"8441":{"Keyless Ride":{"priceA":"$79","priceB":"$49","shell":"","emergency":"","oem":""}},"8445":{"Keyless Ride":{"shell":"","emergency":"6.95","oem":"","priceB":"59","priceA":"74"}},"8447":{"Keyless Ride":{"priceA":"174","priceB":"","shell":"","emergency":"","oem":""}},"8453":{"Keyless Ride":{"emergency":"","oem":"","priceA":"$109","shell":"","priceB":"$49"}},"8457":{"Keyless Ride":{"shell":6.95,"priceA":134,"oem":"","emergency":"","priceB":""}},"8468":{"Keyless Ride":{"shell":"","emergency":7.95,"priceB":"$49","oem":"","priceA":"$94"}},"8477":{"Keyless Ride":{"emergency":"","priceA":94,"priceB":47.95,"shell":6.95,"oem":""}},"8478":{"Keyless Ride":{"priceB":49,"emergency":4.95,"priceA":"$119","oem":"","shell":11.95}},"8481":{"Keyless Ride":{"oem":"","priceB":9.95,"shell":"","priceA":24.95,"emergency":8.99}},"8486":{"Keyless Ride":{"shell":11.95,"priceB":49,"priceA":79,"oem":"","emergency":6.95}},"8487":{"Keyless Ride":{"emergency":6.95,"shell":"","oem":"","priceB":79,"priceA":129}},"8488":{"Keyless Ride":{"priceA":265,"emergency":6.95,"shell":"","priceB":89,"oem":""}},"8492":{"Keyless Ride":{"priceA":"$104","shell":"","emergency":"","oem":"","priceB":""}},"8493":{"Keyless Ride":{"priceA":"$39","priceB":"","shell":"","emergency":"","oem":""}},"8494":{"Keyless Ride":{"emergency":"","priceA":"174","priceB":"","oem":"","shell":""}},"8498":{"Keyless Ride":{"oem":"","priceB":"","shell":"","emergency":7.95,"priceA":144}},"8504":{"Keyless Ride":{"emergency":17.95,"oem":"","priceA":94,"priceB":49,"shell":""}},"8509":{"Keyless Ride":{"emergency":7.95,"shell":"","priceA":"$94","priceB":"","oem":""}},"8510":{"Keyless Ride":{"shell":"","priceA":"$142","priceB":"","emergency":7.95,"oem":""}},"8511":{"Keyless Ride":{"priceA":"$127","emergency":7.95,"priceB":"","oem":"","shell":""}},"8514":{"Keyless Ride":{"emergency":"","shell":"","priceB":"","priceA":"389","oem":""}},"8515":{"Keyless Ride":{"priceA":"394","oem":"","shell":"","emergency":"","priceB":""}},"8533":{"Keyless Ride":{"priceA":135,"shell":"","oem":"","priceB":"","emergency":"Discontinued"}},"8534":{"Keyless Ride":{"oem":"","shell":"","emergency":7.95,"priceA":"$244","priceB":""}},"8540":{"Keyless Ride":{"shell":"","priceB":9.95,"priceA":21.95,"oem":"","emergency":""}},"8541":{"Keyless Ride":{"shell":"","oem":"","priceB":"","emergency":6.95,"priceA":"$119"}},"8551":{"Keyless-City":{"priceB":"","priceA":"26.78","oem":"","emergency":"","shell":""},"American Key Supply":{"priceB":"","oem":"","emergency":"","shell":"","priceA":"73.85 Strattec"},"Keyless Ride":{"shell":"","emergency":"7.95","priceA":"89","priceB":"49","oem":""}},"8554":{"Keyless Ride":{"oem":"","emergency":7.95,"priceB":29.95,"shell":"","priceA":49}},"8558":{"Keyless Ride":{"shell":"","emergency":"12.99","oem":"","priceA":"74","priceB":"49"}},"8565":{"Keyless Ride":{"oem":"","priceB":"","emergency":6.95,"shell":"","priceA":159}},"8568":{"Keyless Ride":{"oem":"","shell":"","emergency":6.95,"priceB":59,"priceA":"$79"}},"8569":{"Keyless Ride":{"emergency":"","oem":"","priceA":"$132","shell":6.95,"priceB":"$19.95"}},"8570":{"Keyless Ride":{"oem":"","emergency":"$7.95","priceB":"$49","priceA":"$79","shell":"$18.95"}},"8572":{"Keyless Ride":{"oem":"","emergency":4.95,"shell":11.95,"priceA":"$124","priceB":59}},"8574":{"Keyless Ride":{"priceA":"$114","priceB":"","shell":"","emergency":7.95,"oem":""}},"8578":{"Keyless Ride":{"priceA":149,"priceB":59,"oem":"","shell":"","emergency":6.95}},"8579":{"Keyless Ride":{"priceB":74,"shell":14.95,"priceA":169,"oem":"","emergency":6.95}},"8581":{"Keyless Ride":{"emergency":"$7.95","priceA":"$114","oem":"","shell":"$18.95","priceB":""}},"8584":{"Keyless Ride":{"priceB":"","priceA":154,"emergency":7.95,"shell":"","oem":""}},"8589":{"Keyless Ride":{"oem":"","priceB":"$54","emergency":"$14.95","shell":"","priceA":"$104"}},"8597":{"Keyless Ride":{"shell":"","priceB":"","emergency":6.95,"oem":"","priceA":194}},"8598":{"Keyless Ride":{"oem":"","emergency":"$7.95","shell":"$14.95","priceB":"","priceA":"$79"}},"8599":{"Keyless Ride":{"priceA":"$74","emergency":"$7.95","oem":"","priceB":"","shell":""}},"8602":{"Keyless Ride":{"emergency":"$7.95","shell":"","priceB":"","oem":"","priceA":"$89"}},"8603":{"Keyless Ride":{"priceA":"$139","emergency":"$6.95","shell":"","priceB":"","oem":""}},"8605":{"Keyless Ride":{"shell":"$6.95","oem":"","emergency":"","priceA":"$94","priceB":""}},"8607":{"Keyless Ride":{"shell":"","priceA":"128","emergency":"","priceB":"87","oem":""}},"8612":{"Keyless Ride":{"shell":"","priceB":"","emergency":7.95,"oem":"","priceA":174}},"8618":{"Keyless Ride":{"shell":"$6.95","priceA":"$74","oem":"","emergency":"","priceB":""}},"8621":{"Keyless Ride":{"oem":"","emergency":"$7.95","priceB":"$49","shell":"","priceA":"$84"}},"8622":{"Keyless Ride":{"priceB":"87","shell":"","priceA":"128","oem":"","emergency":""}},"8624":{"Keyless Ride":{"emergency":7.99,"priceB":17.95,"oem":"","priceA":34.95,"shell":""}},"8626":{"Keyless Ride":{"priceB":49,"oem":"","priceA":94,"shell":6.95,"emergency":""}},"8627":{"Keyless Ride":{"priceB":"$94","shell":"","emergency":"","priceA":"$164","oem":""}},"8629":{"Keyless Ride":{"priceA":"$79","priceB":"","oem":"","shell":"","emergency":""}},"8643":{"Keyless Ride":{"shell":"","emergency":"","oem":"","priceA":"$169","priceB":""}},"8644":{"Keyless Ride":{"emergency":"","shell":9.95,"priceB":"$49","oem":"","priceA":"$94"}},"8646":{"Keyless Ride":{"shell":"","emergency":"","oem":"","priceA":"$179","priceB":""}},"8651":{"Keyless Ride":{"priceB":"","priceA":149,"oem":"","emergency":6.95,"shell":""}},"8659":{"Keyless Ride":{"emergency":8.95,"shell":"","priceB":"","oem":"","priceA":129}},"8662":{"Keyless Ride":{"priceA":"$124","shell":11.95,"emergency":"","oem":"","priceB":"$27.95"}},"8672":{"Keyless Ride":{"priceA":"134","shell":"","priceB":"","oem":"","emergency":""}},"8674":{"Keyless Ride":{"emergency":"","priceB":"","oem":"","shell":"","priceA":"225"}},"8675":{"Keyless Ride":{"shell":"","priceA":"239","oem":"","emergency":"","priceB":""}},"8676":{"Keyless Ride":{"emergency":"","oem":"","priceB":"","priceA":"239","shell":""}},"8699":{"Keyless Ride":{"priceA":184,"priceB":"","emergency":8.95,"shell":"","oem":""}},"8867":{"Keyless Ride":{"priceB":"","oem":"$17.95","emergency":"","priceA":"$64","shell":"$6.95"}},"8960":{"Keyless Ride":{"priceB":"$49","oem":"","shell":"","emergency":"","priceA":"$104"}},"9008":{"Keyless Ride":{"priceB":64,"oem":"","priceA":94,"emergency":8.95,"shell":""}},"9009":{"Keyless Ride":{"priceB":69,"priceA":"$114","emergency":8.95,"oem":"","shell":""}},"9027":{"Keyless Ride":{"oem":"","priceA":139,"shell":"","priceB":84,"emergency":8.95}},"9101":{"Keyless Ride":{"priceB":14.95,"shell":"","priceA":29,"oem":"","emergency":""}},"9107":{"Keyless Ride":{"shell":6.95,"oem":"","emergency":"","priceA":29.95,"priceB":14.95}},"9130":{"Keyless Ride":{"priceB":"$18","priceA":"$26","emergency":"","shell":"","oem":""}},"9131":{"Keyless Ride":{"shell":"","emergency":"","oem":"","priceB":"$18","priceA":"$26"}},"9137":{"Keyless Ride":{"priceA":"$89","shell":"","oem":"","priceB":"","emergency":""}},"9138":{"Keyless Ride":{"priceA":"$19.43","emergency":"","priceB":"$14.95","oem":"","shell":8.95}},"9139":{"Keyless Ride":{"priceB":"","oem":14.95,"shell":"","priceA":59,"emergency":""}},"9206":{"Keyless Ride":{"priceB":"","shell":"","emergency":7.95,"oem":"","priceA":"$99"}},"9217":{"Keyless Ride":{"priceB":"$44","oem":"","emergency":7.95,"priceA":"$69","shell":""}},"9269":{"Keyless Ride":{"priceA":"$84","priceB":"$14.95","shell":"","emergency":"","oem":""}},"9307":{"Keyless Ride":{"priceA":"$119","emergency":8.95,"priceB":89,"oem":"","shell":""}},"9319":{"Keyless Ride":{"priceA":34,"oem":"","emergency":"","shell":"","priceB":21.95}},"9352":{"Keyless Ride":{"priceB":"$14.95","shell":6.95,"oem":"","priceA":"$19.43","emergency":""}},"9354":{"Keyless Ride":{"emergency":"","shell":"","oem":"","priceA":"$68","priceB":""}},"9358":{"Keyless Ride":{"oem":"","priceA":"34","shell":"","priceB":"13.95","emergency":""}},"9367":{"Keyless Ride":{"shell":7.95,"oem":14.95,"priceA":84,"priceB":39,"emergency":""}},"9368":{"Keyless Ride":{"priceB":39,"priceA":99,"emergency":"","oem":"","shell":7.95}},"9375":{"Keyless Ride":{"emergency":"","oem":"","priceA":"$54","priceB":"$34","shell":""}},"9380":{"Keyless Ride":{"emergency":"","oem":"","priceA":114,"priceB":44,"shell":6.95}},"9383":{"Keyless Ride":{"priceA":115,"emergency":"","priceB":39,"shell":6.95,"oem":11.95}},"9396":{"Keyless Ride":{"priceB":14.95,"oem":"","shell":"","emergency":"","priceA":24.95}},"9409":{"Keyless Ride":{"emergency":"","shell":6.95,"priceB":21,"oem":"","priceA":32}},"9431":{"Keyless Ride":{"priceA":144,"oem":"","shell":6.95,"priceB":44,"emergency":""}},"9447":{"Keyless Ride":{"priceA":"$74","emergency":"$7.95","oem":"","shell":"","priceB":"$49"}},"9448":{"Keyless Ride":{"priceA":"$89","oem":"","shell":"","emergency":"$7.95","priceB":"$49"}},"9453":{"Keyless Ride":{"emergency":"","priceB":"$36.75","priceA":"$109","oem":"","shell":""}},"9455":{"Keyless Ride":{"shell":"","priceA":79,"oem":"","emergency":"","priceB":""}},"9471":{"Keyless Ride":{"emergency":"","oem":"$17.95","priceB":"","shell":"","priceA":"$97"}},"9475":{"Keyless Ride":{"shell":"","priceB":"","oem":"","priceA":"$109","emergency":""}},"9476":{"Keyless Ride":{"emergency":"","priceB":"","oem":"","shell":"","priceA":"$99"}},"9500":{"Keyless Ride":{"shell":"","priceB":21,"oem":"","priceA":34,"emergency":""}},"9523":{"Keyless Ride":{"priceB":17.95,"oem":"","priceA":26,"emergency":"","shell":""}},"9544":{"Keyless Ride":{"shell":"","emergency":"","priceA":"$94","priceB":"","oem":""}},"9551":{"Keyless Ride":{"oem":"","shell":"","priceB":29,"emergency":"","priceA":44}},"9564":{"Keyless Ride":{"priceA":"$89","emergency":"","priceB":"","oem":"$17.95","shell":""}},"9566":{"Keyless Ride":{"shell":"$6.95","priceB":"$17.95","priceA":"$94","emergency":"","oem":""}},"9574":{"Keyless Ride":{"shell":"","oem":"$12.95","priceB":"$29","priceA":"$39","emergency":""}},"9575":{"Keyless Ride":{"shell":6.95,"emergency":"","priceB":29,"priceA":109,"oem":""}},"9578":{"Keyless Ride":{"priceA":109,"shell":6.95,"oem":"","priceB":14.95,"emergency":""}},"9579":{"Keyless Ride":{"oem":"","priceA":104,"emergency":"","shell":6.95,"priceB":14.95}},"9583":{"Keyless Ride":{"emergency":"","shell":"","priceB":"$29","priceA":"$43.49","oem":"$12.95"}},"9584":{"Keyless Ride":{"emergency":"","shell":6.95,"priceB":9.95,"priceA":112,"oem":""}},"9587":{"Keyless Ride":{"emergency":"","oem":"","shell":"","priceB":17.95,"priceA":34}},"9603":{"Keyless Ride":{"shell":"","oem":"","priceB":"","priceA":162,"emergency":""}},"9622":{"Keyless Ride":{"priceB":"$29","emergency":"","oem":"","priceA":"$39","shell":""}},"9626":{"Keyless Ride":{"oem":"","priceB":"","emergency":"","shell":"","priceA":24.95}},"9637":{"Keyless Ride":{"oem":"","emergency":"","priceA":"$139","shell":"","priceB":"$69"}},"9643":{"Keyless Ride":{"oem":"","emergency":7.95,"priceA":139,"shell":"","priceB":""}},"9645":{"Keyless Ride":{"oem":"","shell":"","priceB":"","emergency":"","priceA":192}},"9646":{"Keyless Ride":{"emergency":7.95,"shell":"","priceB":"","priceA":139,"oem":""}},"9652":{"Keyless Ride":{"priceB":49,"priceA":79,"oem":"","emergency":7.95,"shell":""}},"9699":{"Keyless Ride":{"priceB":"","priceA":"89","oem":"","shell":"","emergency":""}},"9719":{"Keyless Ride":{"oem":"","priceA":"$114","shell":15.95,"emergency":"","priceB":"$17.95"}},"9722":{"Keyless Ride":{"priceB":"$17.95","emergency":"","priceA":"$114","shell":"","oem":""}},"9727":{"Keyless Ride":{"priceB":"$21.95","priceA":"$91.95","emergency":"","oem":"","shell":""}},"9728":{"Keyless Ride":{"priceA":"$44","priceB":"$34","shell":"","oem":"$12.95","emergency":""}},"9731":{"Keyless Ride":{"oem":"$12.95","priceA":"$44","priceB":"$34","shell":"","emergency":""}},"9733":{"Keyless Ride":{"emergency":"","oem":"","shell":"","priceB":14.95,"priceA":24}},"9760":{"Keyless Ride":{"priceA":104,"priceB":17.95,"emergency":"","oem":"","shell":6.95}},"9773":{"Keyless Ride":{"oem":"","shell":"","emergency":"","priceA":39,"priceB":29}},"9775":{"Keyless Ride":{"shell":6.95,"oem":11.95,"emergency":"","priceB":39,"priceA":75}},"9776":{"Keyless Ride":{"oem":"","shell":"","priceA":"110","emergency":"","priceB":""}},"9810":{"Keyless Ride":{"priceA":157,"oem":"","emergency":6.95,"shell":"","priceB":89}},"9822":{"Keyless Ride":{"oem":"","shell":"","priceA":"$69","priceB":"","emergency":"$7.95"}},"9841":{"Keyless Ride":{"priceA":"194.00","oem":"","emergency":"","shell":"","priceB":""}},"9848":{"Keyless Ride":{"shell":6.95,"priceA":104,"oem":"","priceB":"","emergency":4.95}},"9850":{"Keyless Ride":{"priceA":26,"emergency":"","priceB":14.95,"oem":"","shell":""}},"9865":{"Keyless Ride":{"oem":"","emergency":4.95,"priceB":"","priceA":119,"shell":6.95}},"9875":{"Keyless Ride":{"oem":"","shell":"","emergency":"$13.95","priceA":"$39","priceB":""}},"9880":{"Keyless Ride":{"oem":"","priceA":159,"priceB":"","emergency":"","shell":6.95}},"9881":{"Keyless Ride":{"emergency":"","shell":"","oem":"","priceB":"","priceA":129}},"9888":{"Keyless Ride":{"oem":"","emergency":"","priceB":"9.95","shell":"","priceA":"24.95"}},"9894":{"Keyless Ride":{"emergency":"","priceB":"","oem":"","priceA":"99","shell":""}},"9904":{"Keyless Ride":{"priceA":44,"shell":9.95,"priceB":29,"emergency":"","oem":""}},"9924":{"Keyless Ride":{"priceA":194,"emergency":"","priceB":"","oem":"","shell":""}},"9940":{"Keyless Ride":{"priceA":74,"emergency":"","priceB":24.95,"shell":6.95,"oem":""}},"9944":{"Keyless Ride":{"oem":"","emergency":"","shell":"","priceB":"","priceA":"$79"}},"9945":{"Keyless Ride":{"shell":"","priceB":"","emergency":"","priceA":"$72","oem":""}},"9946":{"Keyless Ride":{"shell":"","priceB":"","oem":"","emergency":"","priceA":"$79"}},"9947":{"Keyless Ride":{"shell":"","emergency":"","oem":"","priceA":"164","priceB":""}},"9958":{"Keyless Ride":{"emergency":"$13.95","shell":"$6.95","priceA":"$49","priceB":"$21.95","oem":"$17.95"}},"9968":{"Keyless Ride":{"priceB":59,"emergency":4.95,"shell":11.95,"priceA":144,"oem":""}},"9975":{"Keyless Ride":{"shell":"","oem":"","priceA":"$110","emergency":"","priceB":""}},"9984":{"Keyless Ride":{"emergency":"$13.95","priceA":"$39","priceB":"$18.95","shell":"$6.95","oem":"$17.95"}},"9991":{"Keyless Ride":{"emergency":"","priceB":"","priceA":"124","oem":"","shell":""}},"9992":{"Keyless Ride":{"shell":"$6.95","priceB":"","priceA":"$37","emergency":"$13.95","oem":""}},"40011":{"Keyless Ride":{"oem":"","priceB":"","emergency":"","priceA":6.95,"shell":""}},"40012":{"Keyless Ride":{"priceA":6.95,"oem":"","priceB":"","emergency":"","shell":""}},"40013":{"Keyless Ride":{"emergency":"","priceA":6.95,"shell":"","oem":"","priceB":""}},"40014":{"Keyless Ride":{"shell":"","oem":"","priceB":"","emergency":"","priceA":6.95}},"40015":{"Keyless Ride":{"shell":"","emergency":"","priceA":6.95,"priceB":"","oem":""}},"40016":{"Keyless Ride":{"oem":"","priceA":6.95,"shell":"","priceB":"","emergency":""}},"40017":{"Keyless Ride":{"oem":"","emergency":"","shell":"","priceA":6.95,"priceB":""}},"40018":{"Keyless Ride":{"shell":"","priceA":6.95,"oem":"","priceB":"","emergency":""}},"40019":{"Keyless Ride":{"shell":"","emergency":"","priceB":"","oem":"","priceA":6.95}},"40020":{"Keyless Ride":{"shell":"","priceA":6.95,"oem":"","emergency":"","priceB":""}},"40021":{"Keyless Ride":{"shell":"","emergency":"","priceB":"","priceA":6.95,"oem":""}},"40022":{"Keyless Ride":{"priceA":6.95,"oem":"","priceB":"","shell":"","emergency":""}},"40023":{"Keyless Ride":{"priceB":"","emergency":"","shell":"","priceA":6.95,"oem":""}},"40024":{"Keyless Ride":{"shell":"","oem":"","priceA":6.95,"emergency":"","priceB":""}},"40025":{"Keyless Ride":{"priceA":6.95,"priceB":"","emergency":"","shell":"","oem":""}},"40076":{"Keyless Ride":{"priceA":6.95,"emergency":"","priceB":"","shell":"","oem":""}},"40082":{"Keyless Ride":{"oem":"","shell":"","priceB":"","priceA":6.29,"emergency":""}},"40083":{"Keyless Ride":{"oem":"","emergency":"","priceB":"","priceA":6.29,"shell":""}},"40084":{"Keyless Ride":{"oem":"","shell":"","emergency":"","priceA":6.29,"priceB":""}},"40085":{"Keyless Ride":{"emergency":"","oem":"","priceB":"","priceA":6.29,"shell":""}},"40086":{"Keyless Ride":{"priceA":6.29,"emergency":"","oem":"","priceB":"","shell":""}},"40087":{"Keyless Ride":{"emergency":"","priceA":6.29,"oem":"","shell":"","priceB":""}},"40088":{"Keyless Ride":{"oem":"","shell":"","priceA":6.29,"priceB":"","emergency":""}},"40089":{"Keyless Ride":{"oem":"","emergency":"","shell":"","priceB":"","priceA":6.29}},"40090":{"Keyless Ride":{"oem":"","priceA":6.29,"emergency":"","shell":"","priceB":""}},"40091":{"Keyless Ride":{"priceB":"","oem":"","emergency":"","shell":"","priceA":6.29}},"40092":{"Keyless Ride":{"priceB":"","emergency":"","priceA":6.29,"shell":"","oem":""}},"40093":{"Keyless Ride":{"oem":"","shell":"","priceB":"","emergency":"","priceA":6.29}},"40094":{"Keyless Ride":{"priceB":"","emergency":"","oem":"","priceA":6.29,"shell":""}},"40095":{"Keyless Ride":{"priceA":6.29,"priceB":"","oem":"","emergency":"","shell":""}},"40146":{"Keyless Ride":{"priceA":"$6.29","oem":"","priceB":"","shell":"","emergency":""}},"40147":{"Keyless Ride":{"shell":"","oem":"","priceB":"","priceA":"$13.49","emergency":""}},"40150":{"Keyless Ride":{"emergency":"","priceA":11.49,"priceB":"","oem":"","shell":""}},"40155":{"Keyless Ride":{"oem":"","shell":"","priceB":"","emergency":"","priceA":"$5.95"}},"40161":{"Keyless Ride":{"emergency":"","shell":"","priceB":"","priceA":13.25,"oem":""}},"40162":{"Keyless Ride":{"emergency":"","priceA":18.95,"priceB":"","oem":"","shell":""}},"40165":{"Keyless Ride":{"oem":"","priceA":15.45,"shell":"","emergency":"","priceB":""}},"40166":{"Keyless Ride":{"emergency":"","oem":"","priceA":18.49,"shell":"","priceB":""}},"40167":{"Keyless Ride":{"oem":"","priceB":"","priceA":20.59,"emergency":"","shell":""}},"40170":{"Keyless Ride":{"oem":"","priceA":"$8.49","emergency":"","priceB":"","shell":""}},"40174":{"Keyless Ride":{"priceB":"","oem":"","priceA":14,"emergency":"","shell":""}},"40175":{"Keyless Ride":{"priceB":"","priceA":10.79,"shell":"","emergency":"","oem":""}},"40179":{"Keyless Ride":{"shell":"","priceB":"","emergency":"","oem":"","priceA":19.99}},"40180":{"Keyless Ride":{"priceB":"","priceA":14.49,"oem":"","emergency":"","shell":""}},"40181":{"Keyless Ride":{"priceA":11.95,"priceB":"","emergency":"","shell":"","oem":""}},"40182":{"Keyless Ride":{"emergency":"","priceA":11.49,"oem":"","shell":"","priceB":""}},"40183":{"Keyless Ride":{"priceA":11.95,"shell":"","oem":"","priceB":"","emergency":""}},"40186":{"Keyless Ride":{"priceA":15.99,"emergency":"","shell":"","oem":"","priceB":""}},"40187":{"Keyless Ride":{"priceB":"","shell":"","emergency":"","oem":"","priceA":19.95}},"40190":{"Keyless Ride":{"priceB":"","oem":"","priceA":28.95,"shell":"","emergency":""}},"40193":{"Keyless Ride":{"emergency":"","oem":"","priceB":"","priceA":15.95,"shell":""}},"40195":{"Keyless Ride":{"shell":"","emergency":"","oem":"","priceB":"","priceA":7.49}},"40196":{"Keyless Ride":{"shell":"","emergency":"","oem":"","priceB":"","priceA":27.99}},"40200":{"Keyless Ride":{"shell":"","priceB":"","priceA":"$8.49","emergency":"","oem":""}},"40201":{"Keyless Ride":{"shell":"","emergency":"","priceA":2.75,"oem":"","priceB":""}},"HO01":{"Keyless Ride":{"emergency":"","priceA":"$16.99","shell":"","priceB":"","oem":""}},"40211":{"Keyless Ride":{"priceB":"","oem":"","priceA":127,"emergency":"","shell":""}},"40220":{"Keyless Ride":{"emergency":"","oem":"","priceA":9.99,"shell":"","priceB":""}},"40227":{"Keyless Ride":{"priceB":"","oem":"","shell":"","priceA":"$12.95","emergency":""}},"40230":{"Keyless Ride":{"priceB":"","emergency":"","oem":"","shell":"","priceA":10.49}},"40240":{"Keyless Ride":{"oem":"","emergency":"","priceA":7.95,"priceB":"","shell":""}},"40241":{"Keyless Ride":{"shell":"","priceA":21.95,"oem":"","emergency":"","priceB":""}},"40245":{"Keyless Ride":{"shell":"","priceA":8.95,"priceB":"","emergency":"","oem":""}},"40246":{"Keyless Ride":{"oem":"","priceA":67,"shell":"","priceB":"","emergency":""}},"40247":{"Keyless Ride":{"oem":"","emergency":"","priceB":"","priceA":19.95,"shell":""}},"40248":{"Keyless Ride":{"priceB":"","oem":"","priceA":44,"shell":"","emergency":""}},"40251":{"Keyless Ride":{"oem":"","emergency":"","shell":"","priceA":2.99,"priceB":""}},"40257":{"Keyless Ride":{"oem":"","shell":"","priceB":"","emergency":"","priceA":15}},"40262":{"Keyless Ride":{"priceA":"$10.95","oem":"","shell":"","emergency":"","priceB":""}},"40263":{"Keyless Ride":{"oem":"","priceB":"","shell":"","priceA":7.49,"emergency":""}},"40302":{"Keyless Ride":{"shell":"","priceB":"","oem":"","emergency":"","priceA":54}},"40308":{"Keyless Ride":{"shell":"","oem":"","priceB":"","emergency":"","priceA":"$15.95"}},"40315":{"Keyless Ride":{"priceA":13.49,"priceB":"","emergency":"","shell":"","oem":""}},"40316":{"Keyless Ride":{"emergency":"","oem":"","priceA":"$10.95","priceB":"","shell":""}},"40317":{"Keyless Ride":{"priceA":59,"oem":"","priceB":"","emergency":"","shell":""}},"40319":{"Keyless Ride":{"emergency":"","shell":"","oem":"","priceA":"$13.95","priceB":""}},"40322":{"Keyless Ride":{"priceA":29,"shell":"","oem":"","emergency":"","priceB":""}},"40329":{"Keyless Ride":{"priceA":6.95,"shell":"","emergency":"","priceB":"","oem":""}},"40334":{"Keyless Ride":{"shell":"","priceB":"","priceA":37,"oem":"","emergency":""}},"41341":{"Keyless Ride":{"shell":"","emergency":"","oem":"","priceB":"","priceA":25}},"41993":{"Keyless Ride":{"emergency":"","priceB":"","oem":"","priceA":72,"shell":""}},"41994":{"Keyless Ride":{"oem":"","priceA":14,"shell":"","priceB":"","emergency":""}},"41995":{"Keyless Ride":{"emergency":"","priceA":8.95,"shell":"","oem":"","priceB":""}},"41996":{"Keyless Ride":{"priceA":34,"shell":"","priceB":"","emergency":"","oem":""}},"41998":{"Keyless Ride":{"shell":"","emergency":"","priceB":"","priceA":67,"oem":""}},"41999":{"Keyless Ride":{"shell":"","oem":"","priceB":"","priceA":46,"emergency":""}},"42005":{"Keyless Ride":{"oem":"","shell":"","emergency":"","priceB":"","priceA":17.95}},"42008":{"Keyless Ride":{"oem":"","emergency":"","priceB":"","priceA":26.49,"shell":""}},"42009":{"Keyless Ride":{"oem":"","emergency":"","priceA":7.99,"shell":"","priceB":""}},"42013":{"Keyless Ride":{"emergency":"","priceA":24.99,"priceB":"","oem":"","shell":""}},"42014":{"Keyless Ride":{"oem":"","emergency":"","priceB":"","shell":"","priceA":9.95}},"42015":{"Keyless Ride":{"oem":"","emergency":"","shell":"","priceB":"","priceA":24.95}},"42016":{"Keyless Ride":{"oem":"","emergency":"","shell":"","priceB":"","priceA":34.99}},"42018":{"Keyless Ride":{"priceA":29,"oem":"","emergency":"","shell":"","priceB":""}},"42020":{"Keyless Ride":{"oem":"","emergency":"","shell":"","priceB":"","priceA":24.95}},"42035":{"Keyless Ride":{"priceA":29,"oem":"","emergency":"","priceB":"","shell":""}},"42040":{"Keyless Ride":{"priceA":23.99,"oem":"","shell":"","emergency":"","priceB":""}},"42049":{"Keyless Ride":{"priceA":47.99,"emergency":"","shell":"","priceB":"","oem":""}},"42055":{"Keyless Ride":{"shell":"","oem":"","priceB":"","emergency":"","priceA":7.49}},"42065":{"Keyless Ride":{"shell":"","priceB":"","emergency":"","priceA":8.49,"oem":""}},"42067":{"Keyless Ride":{"oem":"","shell":"","emergency":"","priceB":"","priceA":"$27.95"}},"42073":{"Keyless Ride":{"shell":"","priceB":"","oem":"","priceA":"$84","emergency":""}},"42074":{"Keyless Ride":{"priceB":"","oem":"","priceA":"$59","emergency":"","shell":""}},"42084":{"Keyless Ride":{"priceA":19.99,"emergency":"","shell":"","priceB":"","oem":""}},"42095":{"Keyless Ride":{"shell":"","priceB":"","oem":"","priceA":"$27.95","emergency":""}},"42101":{"Keyless Ride":{"oem":"","priceA":12.95,"emergency":"","shell":"","priceB":""}},"42105":{"Keyless Ride":{"priceA":7.99,"shell":"","priceB":"","oem":"","emergency":""}},"42114":{"Keyless Ride":{"priceB":"","oem":"","priceA":27.95,"emergency":"","shell":""}},"42115":{"Keyless Ride":{"priceB":"","priceA":10.95,"oem":"","emergency":"","shell":""}},"42117":{"Keyless Ride":{"shell":"","priceA":29.95,"priceB":"","emergency":"","oem":""}},"42119":{"Keyless Ride":{"emergency":"","shell":"","oem":"","priceA":10.95,"priceB":""}},"42135":{"Keyless Ride":{"oem":"","shell":"","emergency":"","priceB":"","priceA":9.99}},"42137":{"Keyless Ride":{"shell":"","oem":"","priceA":24.95,"priceB":"","emergency":""}},"42138":{"Keyless Ride":{"priceA":32,"shell":"","emergency":"","priceB":"","oem":""}},"42152":{"Keyless Ride":{"oem":"","shell":"","priceB":"","priceA":"$10.95","emergency":""}},"42176":{"Keyless Ride":{"priceA":34,"emergency":"","priceB":"","shell":"","oem":""}},"42177":{"Keyless Ride":{"oem":"","priceA":34,"shell":"","emergency":"","priceB":""}},"42180":{"Keyless Ride":{"priceA":7.95,"oem":"","shell":"","emergency":"","priceB":""}},"42184":{"Keyless Ride":{"priceB":"","oem":"","shell":"","emergency":"","priceA":29.95}},"42190":{"Keyless Ride":{"priceA":9.48,"oem":"","priceB":"","emergency":"","shell":""}},"42373":{"Keyless Ride":{"emergency":"","shell":"","oem":"","priceB":"","priceA":12.95}},"HO05":{"Keyless Ride":{"emergency":"","priceA":"$9.99","shell":"","oem":"","priceB":""}},"42759":{"Keyless Ride":{"priceA":"$8.29","oem":"","emergency":"","shell":"","priceB":""}},"42763":{"Keyless Ride":{"shell":"","oem":"","emergency":"","priceB":"","priceA":7.49}},"42764":{"Keyless Ride":{"shell":"","priceB":"","oem":"","emergency":"","priceA":7.49}},"42769":{"Keyless Ride":{"oem":"","priceA":4.49,"emergency":"","shell":"","priceB":""}},"42771":{"Keyless Ride":{"emergency":"","shell":"","priceA":12.95,"oem":"","priceB":""}},"42774":{"Keyless Ride":{"emergency":"","priceA":44,"priceB":"","oem":"","shell":""}},"42777":{"Keyless Ride":{"shell":"","priceB":"","oem":"","emergency":"","priceA":119}},"42778":{"Keyless Ride":{"priceB":"","emergency":"","oem":"","shell":"","priceA":109}},"42793":{"Keyless Ride":{"oem":"","emergency":"","shell":"","priceA":"$7.29","priceB":""}},"42796":{"Keyless Ride":{"emergency":"","priceA":5.99,"oem":"","shell":"","priceB":""}},"42824":{"Keyless Ride":{"priceB":"","priceA":"$10.95","shell":"","emergency":"","oem":""}},"42828":{"Keyless Ride":{"shell":"","priceB":"","oem":"","emergency":"","priceA":"$6.79"}},"42829":{"Keyless Ride":{"priceA":7.99,"oem":"","shell":"","emergency":"","priceB":""}},"42901":{"Keyless Ride":{"shell":"","priceA":9.95,"oem":"","emergency":"","priceB":""}},"42948":{"Keyless Ride":{"priceB":"","oem":"","priceA":11.99,"shell":"","emergency":""}},"42949":{"Keyless Ride":{"priceA":14.95,"emergency":"","oem":"","shell":"","priceB":""}},"42950":{"Keyless Ride":{"oem":"","priceA":15.99,"emergency":"","priceB":"","shell":""}},"42953":{"Keyless Ride":{"oem":"","priceB":"","shell":"","emergency":"","priceA":10.99}},"42956":{"Keyless Ride":{"oem":"","priceA":29.95,"shell":"","priceB":"","emergency":""}},"42957":{"Keyless Ride":{"oem":"","priceB":"","emergency":"","priceA":109,"shell":""}},"42958":{"Keyless Ride":{"priceB":"","emergency":"","shell":"","oem":"","priceA":20.49}},"42961":{"Keyless Ride":{"oem":"","priceA":"$29","shell":"","emergency":"","priceB":""}},"42975":{"Keyless Ride":{"shell":"","oem":"","priceA":11.95,"emergency":"","priceB":""}},"43000":{"Keyless Ride":{"emergency":"","priceA":19.85,"priceB":"","oem":"","shell":""}},"43001":{"Keyless Ride":{"oem":"","emergency":"","priceB":"","priceA":13.49,"shell":""}},"43005":{"Keyless Ride":{"priceB":"","priceA":7.49,"shell":"","oem":"","emergency":""}},"43006":{"Keyless Ride":{"emergency":"","priceB":"","priceA":5.95,"shell":"","oem":""}},"43008":{"Keyless Ride":{"emergency":"","shell":"","priceB":"","oem":"","priceA":24.99}},"43009":{"Keyless Ride":{"priceA":44,"priceB":"","oem":"","shell":"","emergency":""}},"43113":{"Keyless Ride":{"priceA":9.95,"priceB":"","emergency":"","oem":"","shell":""}},"43119":{"Keyless Ride":{"oem":"","priceB":"","priceA":11.49,"shell":"","emergency":""}},"43160":{"Keyless Ride":{"oem":"","priceA":"$9.95","priceB":"","shell":"","emergency":""}},"43161":{"Keyless Ride":{"shell":"","oem":"","priceB":"","emergency":"","priceA":"$9.95"}},"43341":{"Keyless Ride":{"priceA":8.95,"emergency":"","shell":"","priceB":"","oem":""}},"45200":{"Keyless Ride":{"emergency":"","shell":"","priceA":50,"priceB":"","oem":""}},"45506":{"Keyless Ride":{"priceA":25,"shell":"","oem":"","priceB":"","emergency":""}},"45513":{"Keyless Ride":{"priceB":"","shell":"","oem":"","emergency":"","priceA":20.95}},"45514":{"Keyless Ride":{"oem":"","emergency":"","priceB":"","priceA":25,"shell":""}},"45516":{"Keyless Ride":{"shell":"","priceA":25,"emergency":"","oem":"","priceB":""}},"45522":{"Keyless Ride":{"priceA":"$10.95","emergency":"","shell":"","priceB":"","oem":""}},"45556":{"Keyless Ride":{"shell":"","emergency":"","priceA":20.95,"oem":"","priceB":""}},"45557":{"Keyless Ride":{"priceB":"","shell":"","priceA":25,"oem":"","emergency":""}},"45558":{"Keyless Ride":{"priceA":20.95,"oem":"","emergency":"","priceB":"","shell":""}},"45559":{"Keyless Ride":{"shell":"","priceA":25,"priceB":"","oem":"","emergency":""}},"45561":{"Keyless Ride":{"shell":"","emergency":"","oem":"","priceB":"","priceA":20.95}},"45562":{"Keyless Ride":{"oem":"","shell":"","emergency":"","priceB":"","priceA":25}},"45582":{"Keyless Ride":{"emergency":"","priceB":"","priceA":25,"shell":"","oem":""}},"45583":{"Keyless Ride":{"shell":"","priceA":25,"emergency":"","oem":"","priceB":""}},"47033":{"Keyless Ride":{"emergency":"","oem":"","shell":"","priceB":"","priceA":7.25}},"47034":{"Keyless Ride":{"shell":"","oem":"","emergency":"","priceA":"$9.95","priceB":""}},"48025":{"Keyless Ride":{"shell":"","priceB":"","priceA":4.69,"emergency":"","oem":""}},"48030":{"Keyless Ride":{"oem":"","priceB":"","emergency":"","shell":"","priceA":7.75}},"48035":{"Keyless Ride":{"shell":"","priceB":"","oem":"","emergency":"","priceA":5.99}},"48040":{"Keyless Ride":{"shell":"","priceA":5.99,"priceB":"","emergency":"","oem":""}},"48045":{"Keyless Ride":{"priceB":"","emergency":"","oem":"","priceA":9.99,"shell":""}},"48050":{"Keyless Ride":{"priceA":5.95,"emergency":"","oem":"","shell":"","priceB":""}},"48051":{"Keyless Ride":{"emergency":"","priceB":"","oem":"","priceA":6.25,"shell":""}},"48055":{"Keyless Ride":{"emergency":"","priceA":6.49,"shell":"","priceB":"","oem":""}},"48060":{"Keyless Ride":{"priceA":4.99,"emergency":"","priceB":"","shell":"","oem":""}},"48066":{"Keyless Ride":{"shell":"","emergency":"","priceA":10.29,"oem":"","priceB":""}},"48070":{"Keyless Ride":{"priceB":"","emergency":"","priceA":6.75,"oem":"","shell":""}},"48075":{"Keyless Ride":{"shell":"","emergency":"","priceA":6.25,"oem":"","priceB":""}},"48115":{"Keyless Ride":{"shell":"","priceB":"","priceA":7.75,"oem":"","emergency":""}},"48130":{"Keyless Ride":{"oem":"","shell":"","priceB":"","priceA":9.99,"emergency":""}},"48135":{"Keyless Ride":{"shell":"","priceB":"","priceA":9.49,"emergency":"","oem":""}},"48165":{"Keyless Ride":{"oem":"","emergency":"","priceB":"","priceA":6.75,"shell":""}},"48170":{"Keyless Ride":{"shell":"","priceB":"","emergency":"","priceA":12.49,"oem":""}},"48171":{"Keyless Ride":{"emergency":"","shell":"","priceA":7.49,"priceB":"","oem":""}},"48172":{"Keyless Ride":{"oem":"","priceA":11.95,"emergency":"","shell":"","priceB":""}},"48175":{"Keyless Ride":{"oem":"","shell":"","priceB":"","emergency":"","priceA":8.99}},"48180":{"Keyless Ride":{"priceA":11.25,"shell":"","emergency":"","priceB":"","oem":""}},"48185":{"Keyless Ride":{"oem":"","shell":"","emergency":"","priceB":"","priceA":6.95}},"48190":{"Keyless Ride":{"priceA":9.49,"emergency":"","shell":"","oem":"","priceB":""}},"48201":{"Keyless Ride":{"emergency":"","priceA":7.75,"priceB":"","shell":"","oem":""}},"48202":{"Keyless Ride":{"emergency":"","shell":"","priceB":"","priceA":9.99,"oem":""}},"48203":{"Keyless Ride":{"priceA":7.75,"oem":"","priceB":"","emergency":"","shell":""}},"48204":{"Keyless Ride":{"shell":"","oem":"","emergency":"","priceB":"","priceA":7.75}},"48212":{"Keyless Ride":{"priceA":7.75,"priceB":"","emergency":"","shell":"","oem":""}},"48239":{},"48249":{"Keyless Ride":{"shell":"","priceB":"","priceA":12.49,"emergency":"","oem":""}},"48258":{"Keyless Ride":{"oem":"","priceB":"","emergency":"","priceA":25,"shell":""}},"48286":{"Keyless Ride":{"emergency":"","shell":"","priceB":"","priceA":20.95,"oem":""}},"48287":{"Keyless Ride":{"priceA":20.95,"shell":"","oem":"","priceB":"","emergency":""}},"48288":{"Keyless Ride":{"priceA":20.95,"shell":"","oem":"","priceB":"","emergency":""}},"48516":{"Keyless Ride":{"oem":"","priceB":"","emergency":"","shell":"","priceA":49}},"48518":{"Keyless Ride":{"priceA":6.99,"shell":"","priceB":"","emergency":"","oem":""}},"48522":{"Keyless Ride":{"emergency":"","shell":"","priceB":"","oem":"","priceA":49}},"609139":{},"B44":{"Keyless-City":{"oem":"","shell":"","priceA":".28","emergency":"","priceB":""}},"B45":{},"HD101":{},"HD92":{},"HD103":{},"Y160":{"Keyless Ride":{"priceA":6.49,"priceB":"","emergency":"","shell":"","oem":""}},"Y164":{"Keyless Ride":{"emergency":"","priceA":67,"oem":"","priceB":"","shell":""}},"Y170":{"Keyless Ride":{"shell":"","priceA":19.85,"emergency":"","priceB":"","oem":""}},"S30FDP":{"Keyless Ride":{"priceA":20.95,"emergency":"","oem":"","priceB":"","shell":""}},"H73":{"Keyless Ride":{"oem":"","priceB":"","emergency":"","priceA":2.75,"shell":""}},"H72":{"Keyless Ride":{"emergency":"","priceA":15,"oem":"","priceB":"","shell":""}},"H74/H86":{"Keyless Ride":{"emergency":"","oem":"","shell":"","priceB":"","priceA":27.99}},"H84":{"Keyless Ride":{"oem":"","priceA":13.25,"shell":"","priceB":"","emergency":""}},"H91":{"Keyless Ride":{"shell":"","priceA":"$84","emergency":"","priceB":"","oem":""}},"JAG2":{"Keyless Ride":{"shell":"","priceB":"","priceA":7.75,"emergency":"","oem":""}},"H92":{"Keyless Ride":{"shell":"","priceB":"","oem":"","priceA":15.95,"emergency":""}},"H94":{"Keyless Ride":{"priceB":"","shell":"","emergency":"","priceA":"$10.95","oem":""}},"H128":{"Keyless Ride":{"priceA":"$27.95","emergency":"","oem":"","priceB":"","shell":""}},"B115":{"Keyless Ride":{"shell":"","emergency":"","oem":"","priceB":"","priceA":9.99}},"PT04":{"Keyless Ride":{"emergency":"","oem":"","shell":"","priceA":10.49,"priceB":""}},"B99":{},"B97":{"Keyless Ride":{"emergency":"","oem":"","priceB":"","shell":"","priceA":"$8.49"}},"B100":{"Keyless Ride":{"priceA":37,"oem":"","emergency":"","shell":"","priceB":""}},"B103":{"Keyless Ride":{"priceA":10.79,"oem":"","emergency":"","shell":"","priceB":""}},"B111":{"Keyless Ride":{"shell":"","priceA":2.99,"oem":"","priceB":"","emergency":""}},"B112":{"Keyless Ride":{"priceA":"$12.95","shell":"","oem":"","priceB":"","emergency":""}},"B114":{"Keyless Ride":{"priceB":"","oem":"","priceA":"$27.95","shell":"","emergency":""}},"B114R":{"Keyless Ride":{"priceA":24.95,"oem":"","shell":"","emergency":"","priceB":""}},"B119":{"Keyless Ride":{"priceB":"","emergency":"","shell":"","oem":"","priceA":59}},"B120":{"Keyless Ride":{"priceA":13.49,"oem":"","shell":"","emergency":"","priceB":""}},"DWO4":{"Keyless Ride":{"priceA":20.49,"shell":"","oem":"","priceB":"","emergency":""}},"DWO5R":{"Keyless Ride":{"oem":"","shell":"","priceB":"","emergency":"","priceA":7.75}},"DWO5":{"Keyless Ride":{"priceB":"","priceA":7.75,"emergency":"","oem":"","shell":""}},"HD106":{"Keyless Ride":{"priceA":"$14.95","oem":"","shell":"","priceB":"","emergency":""}},"HD111":{"Keyless Ride":{"priceB":"","priceA":"$15.45","oem":"","emergency":"","shell":""}},"HO03":{"Keyless Ride":{"emergency":"","shell":"","oem":"","priceA":"$11.95","priceB":""}},"TOY40BT4":{"Keyless Ride":{"priceB":"","priceA":15.99,"emergency":"","shell":"","oem":""}},"TOY48BT4":{"Keyless Ride":{"shell":"","priceA":29.95,"oem":"","emergency":"","priceB":""}},"TOY48H-PT":{"Keyless Ride":{"priceA":34,"shell":"","priceB":"","emergency":"","oem":""}},"TOY50-PT-M":{"Keyless Ride":{"priceB":"","shell":"","oem":"","emergency":"","priceA":25}},"TOY57-PT":{"Keyless Ride":{"priceA":34.99,"priceB":"","emergency":"","shell":"","oem":""}},"TOY44D":{"Keyless Ride":{"emergency":"","priceA":14,"oem":"","shell":"","priceB":""}},"TOY44G":{"Keyless Ride":{"oem":"","emergency":"","priceB":"","shell":"","priceA":7.49}},"TOY44H":{"Keyless Ride":{"priceB":"","emergency":"","oem":"","shell":"","priceA":46}},"TOY43AT4":{"Keyless Ride":{"shell":"","oem":"","priceB":"","priceA":6.95,"emergency":""}},"TOY57":{"Keyless Ride":{"priceA":9.49,"shell":"","emergency":"","oem":"","priceB":""}},"H75":{"Keyless-City":{"priceA":"0.64","shell":"","priceB":"","oem":"","emergency":""}},"Y159":{},"HO05":{},"B84":{},"B85":{},"B51":{},"HY18":{"Keyless-City":{"oem":"","emergency":"","priceB":"","shell":"","priceA":"0.92"}},"B50":{},"DA34":{"Keyless-City":{"shell":"","emergency":"","oem":"","priceB":"","priceA":"0.61"}},"B59":{},"HY13":{"Keyless-City":{"priceA":"0.88","shell":"","oem":"","emergency":"","priceB":""}},"HY15":{"Keyless-City":{"shell":"","priceA":"1.15","priceB":"","oem":"","emergency":""}},"KK5":{"Keyless-City":{"emergency":"","priceB":"","priceA":"1.01","shell":"","oem":""}},"B91":{},"B82":{},"B106":{},"KK8":{"Keyless-City":{"priceB":"","oem":"","emergency":"","shell":"","priceA":"1.19"}},"B68":{},"B86":{},"B102":{},"HU101":{"Keyless-City":{"emergency":"","shell":"","priceA":"0.82","oem":"","priceB":""}},"HY17":{"Keyless-City":{"oem":"","emergency":"","shell":"","priceB":"","priceA":"0.71"}},"KK12":{"Keyless-City":{"shell":"","oem":"","priceA":"4.11","emergency":"","priceB":""}},"HY14":{"Keyless-City":{"emergency":"","shell":"","priceB":"","priceA":"1.10","oem":""}},"HY12":{"Keyless-City":{"shell":"","priceA":"0.79","emergency":"","oem":"","priceB":""}},"HU100":{"Keyless-City":{"oem":"","shell":"","emergency":"","priceB":"","priceA":"0.78"}},"Y157":{"Keyless-City":{"oem":"","priceB":"","priceA":"0.41","shell":"","emergency":""}},"B62":{},"B89":{},"B79":{},"KK4":{"Keyless-City":{"emergency":"","priceA":"0.98","priceB":"","shell":"","oem":""}},"HY16":{"Keyless-City":{"priceA":"1.44","emergency":"","oem":"","shell":"","priceB":""}}};
let customVendors = []; // User-added vendors
let vehicleOverrides = {"5470":[{"codeSeries":[{"series":"V0001-V5718","years":"2019-2019"}],"make":"Cadillac","endYear":2020,"startYear":2019,"model":"XT4"},{"codeSeries":[{"series":"V0001-V5718","years":"2017-2019"}],"endYear":2019,"startYear":2017,"model":"XT5","make":"Cadillac"},{"startYear":2020,"model":"XT6","endYear":2021,"make":"Cadillac","codeSeries":[{"years":"2020-2020","series":"V0001-V5718"}]}],"8391":[{"endYear":2016,"make":"Buick","model":"Encore","startYear":2014}],"8598":[{"model":"ATS","endYear":2019,"make":"Cadillac","startYear":2015},{"startYear":2014,"model":"CTS","make":"Cadillac","endYear":2019},{"endYear":2019,"startYear":2016,"make":"Cadillac","model":"CTS-V"},{"endYear":2019,"make":"Cadillac","model":"XTS","startYear":2016}],"8602":[{"make":"Cadillac","startYear":2015,"model":"SRX","endYear":2017}],"9622":[{"startYear":2005,"make":"Buick","endYear":2009,"model":"Allure"},{"startYear":2005,"model":"LaCrosse","endYear":2009,"make":"Buick"},{"startYear":2007,"endYear":2010,"make":"Chevrolet","model":"Cobalt"},{"startYear":2008,"model":"HHR","endYear":2011,"make":"Chevrolet"},{"model":"Malibu","startYear":2006,"endYear":2012,"make":"Chevrolet"},{"endYear":2007,"startYear":2006,"make":"Chevrolet","model":"Malibu Maxx"},{"startYear":2007,"model":"G5","endYear":2010,"make":"Pontiac"},{"model":"G6","startYear":2006,"make":"Pontiac","endYear":2010},{"make":"Pontiac","model":"Grand Prix","endYear":2008,"startYear":2007},{"startYear":2007,"make":"Pontiac","model":"Solstice","endYear":2009},{"make":"Saturn","model":"Aura","endYear":2009,"startYear":2007},{"model":"Sky","startYear":2007,"make":"Saturn","endYear":2010}],"40076":[{"model":"LeSabre","make":"Buick","endYear":1999,"startYear":1991},{"make":"Buick","startYear":1991,"model":"Park Avenue","endYear":1996},{"startYear":1990,"model":"Reatta","make":"Buick","endYear":1992},{"model":"Regal","endYear":1996,"startYear":1994,"make":"Buick"},{"endYear":1994,"make":"Buick","model":"Riviera","startYear":1992},{"endYear":1996,"model":"Roadmaster","startYear":1994,"make":"Buick"},{"startYear":1989,"make":"Cadillac","endYear":1993,"model":"Allante"},{"endYear":1999,"model":"DeVille","startYear":1991,"make":"Cadillac"},{"startYear":1989,"endYear":2002,"model":"El Dorado","make":"Cadillac"},{"make":"Cadillac","startYear":1989,"model":"Seville","endYear":1990},{"startYear":1986,"make":"Chevrolet","endYear":2002,"model":"Camaro"},{"startYear":1995,"endYear":1996,"make":"Chevrolet","model":"Caprice Classic"},{"startYear":1986,"make":"Chevrolet","model":"Corvette","endYear":1996},{"endYear":1996,"make":"Chevrolet","startYear":1995,"model":"Impala"},{"startYear":1994,"make":"Chevrolet","endYear":2001,"model":"Lumina"},{"model":"Monte Carlo","startYear":1995,"endYear":1999,"make":"Chevrolet"},{"make":"Oldsmobile","startYear":1994,"model":"Cutlass Supreme","endYear":1997},{"startYear":1992,"model":"Eighty Eight","endYear":1999,"make":"Oldsmobile"},{"make":"Oldsmobile","model":"LSS","endYear":1999,"startYear":1996},{"model":"Ninety Eight","endYear":1996,"make":"Oldsmobile","startYear":1991},{"startYear":1997,"endYear":1999,"make":"Oldsmobile","model":"Regency"},{"startYear":1990,"endYear":1992,"model":"Toronado","make":"Oldsmobile"},{"startYear":1989,"model":"Bonneville","endYear":1999,"make":"Pontiac"},{"make":"Pontiac","startYear":1988,"endYear":2002,"model":"Firebird"},{"make":"Pontiac","endYear":1996,"startYear":1994,"model":"Grand Prix"},{"startYear":1993,"model":"Fleetwood","codeSeries":[],"endYear":1996,"make":"Cadillac"},{"endYear":1996,"codeSeries":[],"model":"Brougham","make":"Cadillac","startYear":1993},{"endYear":1996,"make":"Cadillac","model":"Seville","startYear":1991,"codeSeries":[]}],"40170":[{"make":"Buick","model":"Park Avenue","startYear":1997,"endYear":2005},{"model":"Terraza","make":"Buick","endYear":2006,"startYear":2005},{"endYear":2007,"model":"Uplander","make":"Chevrolet","startYear":2005},{"make":"Chevrolet","startYear":1999,"model":"Venture","endYear":2005},{"startYear":1999,"make":"Oldsmobile","model":"Silhouette","endYear":2004},{"startYear":1999,"model":"Montana","make":"Pontiac","endYear":2005},{"endYear":2006,"startYear":2005,"model":"Montana SV6","make":"Pontiac"},{"model":"Relay","startYear":2005,"endYear":2007,"make":"Saturn"}],"40180":[{"make":"Buick","startYear":2000,"model":"LeSabre","endYear":2005},{"startYear":2002,"model":"Rendezvous","make":"Buick","endYear":2007},{"endYear":2005,"make":"Cadillac","model":"DeVille","startYear":2000},{"endYear":1999,"codeSeries":[{"series":"1-1988","years":"1997-1999"}],"make":"Cadillac","model":"Seville","startYear":1997},{"make":"Oldsmobile","endYear":2003,"model":"Aurora","startYear":2001},{"startYear":2001,"endYear":2005,"model":"Aztek","make":"Pontiac"},{"startYear":2000,"make":"Pontiac","endYear":2005,"model":"Bonneville"},{"make":"Pontiac","startYear":2007,"model":"Montana SV6","endYear":2009},{"model":"Seville","startYear":2000,"endYear":2005,"codeSeries":[{"years":"2000-2005","series":"H0001-H3988"}],"make":"Cadillac"}],"40227":[{"startYear":2003,"make":"Cadillac","endYear":2007,"model":"CTS"}],"40262":[{"model":"SRX","endYear":2006,"make":"Cadillac","startYear":2004}],"42759":[{"endYear":2017,"model":"Enclave","make":"Buick","startYear":2007},{"startYear":2006,"model":"Lucerne","make":"Buick","endYear":2011},{"startYear":2008,"endYear":2014,"model":"CTS","make":"Cadillac"},{"make":"Cadillac","model":"CTS-V","endYear":2012,"startYear":2009},{"make":"Cadillac","model":"DTS","startYear":2006,"endYear":2011},{"model":"Escalade","codeSeries":[{"years":"2007-2014","series":"G0000-G3631"}],"make":"Cadillac","startYear":2007,"endYear":2014},{"codeSeries":[{"series":"G0000-G3631","years":"2007-2009"}],"endYear":2009,"startYear":2007,"make":"Cadillac","model":"Escalade ESV"},{"make":"Cadillac","codeSeries":[{"years":"2007-2014","series":"G0000-G3631"}],"startYear":2007,"model":"Escalade EXT","endYear":2014},{"model":"SRX","make":"Cadillac","startYear":2007,"endYear":2009},{"endYear":2011,"codeSeries":[{"series":"G0000-G3631","years":"2004-2011"}],"model":"STS","startYear":2004,"make":"Cadillac"},{"endYear":2013,"make":"Chevrolet","startYear":2007,"model":"Avalanche"},{"make":"Chevrolet","startYear":2005,"model":"Cobalt","endYear":2010},{"make":"Chevrolet","startYear":2007,"endYear":2009,"model":"Equinox"},{"model":"Express","endYear":2015,"make":"Chevrolet","startYear":2008},{"make":"Chevrolet","model":"HHR","endYear":2011,"startYear":2006},{"endYear":2016,"make":"Chevrolet","model":"Impala","startYear":2006},{"make":"Chevrolet","model":"Malibu","startYear":2004,"endYear":2012},{"model":"Malibu Maxx","make":"Chevrolet","endYear":2007,"startYear":2004},{"endYear":2007,"model":"Monte Carlo","startYear":2006,"make":"Chevrolet"},{"make":"Chevrolet","endYear":2014,"model":"Silverado","startYear":2007},{"endYear":2014,"model":"Suburban","make":"Chevrolet","startYear":2007},{"endYear":2014,"startYear":2007,"model":"Tahoe","make":"Chevrolet"},{"make":"Chevrolet","model":"Traverse","endYear":2017,"startYear":2009},{"make":"GMC","model":"Acadia","endYear":2017,"startYear":2007},{"endYear":2014,"make":"GMC","model":"Savana","startYear":2008},{"model":"Sierra","make":"GMC","startYear":2007,"endYear":2014},{"endYear":2014,"startYear":2007,"model":"Yukon","make":"GMC"},{"startYear":2008,"endYear":2009,"model":"H2","make":"Hummer"},{"startYear":2007,"endYear":2010,"model":"G5","make":"Pontiac"},{"startYear":2005,"make":"Pontiac","model":"G6","endYear":2010},{"startYear":2006,"model":"Solstice","endYear":2009,"make":"Pontiac"},{"startYear":2007,"model":"Torrent","make":"Pontiac","endYear":2009},{"model":"Aura","make":"Saturn","endYear":2009,"startYear":2007},{"make":"Saturn","endYear":2010,"startYear":2007,"model":"Outlook"},{"startYear":2007,"make":"Saturn","model":"Sky","endYear":2010},{"model":"Suzuki XL-7","endYear":2009,"startYear":2007,"make":"Saturn"}],"42793":[{"startYear":2007,"make":"Buick","endYear":2017,"model":"Enclave"},{"make":"Buick","model":"Lucerne","endYear":2011,"startYear":2006},{"endYear":2014,"startYear":2008,"make":"Cadillac","model":"CTS"},{"make":"Cadillac","endYear":2012,"startYear":2009,"model":"CTS-V"},{"startYear":2006,"model":"DTS","make":"Cadillac","endYear":2011},{"codeSeries":[{"series":"G0000-G3631","years":"2007-2014"}],"startYear":2007,"endYear":2014,"make":"Cadillac","model":"Escalade"},{"codeSeries":[{"series":"G0000-G3631","years":"2007-2009"}],"startYear":2007,"endYear":2009,"model":"Escalade ESV","make":"Cadillac"},{"startYear":2007,"endYear":2014,"model":"Escalade EXT","make":"Cadillac","codeSeries":[{"years":"2007-2014","series":"G0000-G3631"}]},{"model":"SRX","endYear":2009,"startYear":2007,"make":"Cadillac"},{"codeSeries":[{"years":"2004-2011","series":"G0000-G3631"}],"startYear":2004,"model":"STS","make":"Cadillac","endYear":2011},{"endYear":2013,"model":"Avalanche","startYear":2007,"make":"Chevrolet"},{"endYear":2010,"make":"Chevrolet","startYear":2006,"model":"Cobalt"},{"endYear":2009,"make":"Chevrolet","startYear":2007,"model":"Equinox"},{"model":"Express","startYear":2008,"make":"Chevrolet","endYear":2015},{"endYear":2011,"make":"Chevrolet","model":"HHR","startYear":2006},{"endYear":2016,"make":"Chevrolet","model":"Impala","startYear":2006},{"make":"Chevrolet","model":"Malibu","startYear":2004,"endYear":2012},{"make":"Chevrolet","endYear":2007,"startYear":2004,"model":"Malibu Maxx"},{"make":"Chevrolet","endYear":2007,"startYear":2006,"model":"Monte Carlo"},{"startYear":2007,"make":"Chevrolet","endYear":2014,"model":"Silverado"},{"startYear":2007,"endYear":2014,"make":"Chevrolet","model":"Suburban"},{"model":"Tahoe","startYear":2007,"make":"Chevrolet","endYear":2014},{"endYear":2017,"make":"Chevrolet","model":"Traverse","startYear":2009},{"model":"Acadia","endYear":2017,"make":"GMC","startYear":2007},{"model":"Savana","make":"GMC","endYear":2014,"startYear":2008},{"startYear":2007,"endYear":2014,"model":"Sierra","make":"GMC"},{"endYear":2014,"startYear":2007,"make":"GMC","model":"Yukon"},{"startYear":2008,"endYear":2009,"make":"Hummer","model":"H2"},{"make":"Pontiac","model":"G5","endYear":2010,"startYear":2007},{"endYear":2010,"startYear":2005,"model":"G6","make":"Pontiac"},{"make":"Pontiac","startYear":2006,"endYear":2009,"model":"Solstice"},{"endYear":2009,"make":"Pontiac","startYear":2007,"model":"Torrent"},{"startYear":2007,"make":"Saturn","endYear":2009,"model":"Aura"},{"make":"Saturn","startYear":2007,"endYear":2010,"model":"Outlook"},{"make":"Saturn","startYear":2007,"endYear":2010,"model":"Sky"},{"endYear":2009,"make":"Saturn","startYear":2007,"model":"Suzuki XL-7"}],"42824":[{"endYear":2009,"startYear":2005,"model":"Allure","make":"Buick"},{"make":"Buick","model":"LaCrosse","endYear":2009,"startYear":2005},{"endYear":2008,"startYear":2005,"make":"Buick","model":"Terraza"},{"make":"Pontiac","model":"Grand Prix","startYear":2004,"endYear":2008}],"47034":[{"endYear":2019,"startYear":2016,"model":"Cascada","make":"Buick"},{"make":"Buick","model":"Encore","startYear":2014,"endYear":2022},{"make":"Buick","endYear":2016,"startYear":2010,"model":"LaCrosse"},{"endYear":2017,"model":"Regal","make":"Buick","startYear":2011},{"model":"Verano","make":"Buick","startYear":2012,"endYear":2017},{"startYear":2010,"model":"Camaro","make":"Chevrolet","endYear":2016},{"startYear":2014,"make":"Chevrolet","endYear":2017,"model":"Caprice"},{"model":"Colorado","startYear":2015,"endYear":2022,"make":"Chevrolet"},{"endYear":2019,"startYear":2011,"make":"Chevrolet","model":"Cruze"},{"make":"Chevrolet","startYear":2010,"endYear":2017,"model":"Equinox"},{"startYear":2014,"make":"Chevrolet","endYear":2018,"model":"Impala"},{"model":"Malibu","endYear":2016,"startYear":2013,"make":"Chevrolet"},{"make":"Chevrolet","startYear":2014,"model":"Silverado","endYear":2023},{"model":"Sonic","endYear":2020,"startYear":2012,"make":"Chevrolet"},{"startYear":2016,"model":"Spark","endYear":2022,"make":"Chevrolet"},{"endYear":2020,"model":"Suburban","startYear":2015,"make":"Chevrolet"},{"model":"Tahoe","endYear":2020,"make":"Chevrolet","startYear":2015},{"model":"Trax","endYear":2022,"startYear":2015,"make":"Chevrolet"},{"endYear":2022,"model":"Canyon","make":"GMC","startYear":2015},{"startYear":2014,"model":"Sierra","endYear":2023,"make":"GMC"},{"startYear":2010,"model":"Terrain","endYear":2018,"make":"GMC"},{"model":"Yukon","make":"GMC","startYear":2015,"endYear":2020}],"B84":[{"make":"Buick","endYear":1993,"startYear":1993,"model":"Skylark"}],"B45":[{"make":"Oldsmobile","startYear":1991,"model":"Regency","endYear":1998},{"model":"LeSabre","endYear":1999,"make":"Buick","startYear":1991},{"startYear":1991,"model":"Reatta","make":"Buick","endYear":1992},{"make":"Buick","endYear":1994,"model":"Riviera","startYear":1992},{"make":"Buick","model":"Roadmaster","endYear":1993,"startYear":1991},{"endYear":1999,"startYear":1991,"make":"Cadillac","model":"Concours"},{"make":"Cadillac","endYear":1999,"model":"DeVille","startYear":1991},{"startYear":1991,"endYear":2003,"model":"El Dorado","make":"Cadillac"},{"endYear":1996,"model":"Seville","make":"Cadillac","startYear":1991},{"startYear":1991,"model":"Beretta","endYear":1996,"make":"Chevrolet"},{"make":"Chevrolet","model":"Corsica w/o Tilt Wheel","endYear":1996,"startYear":1991},{"make":"Chevrolet","endYear":1996,"startYear":1991,"model":"Corsica w/ Tilt Wheel"},{"model":"Camaro","make":"Chevrolet","startYear":1991,"endYear":2002},{"model":"Z28","make":"Chevrolet","endYear":2002,"startYear":1991},{"startYear":1991,"endYear":1994,"model":"Cavalier","make":"Chevrolet"},{"model":"Corvette","endYear":1996,"make":"Chevrolet","startYear":1991},{"make":"Chevrolet","endYear":1996,"startYear":1991,"model":"Impala"},{"model":"Caprice","make":"Chevrolet","endYear":1996,"startYear":1991},{"endYear":1994,"make":"Chevrolet","startYear":1991,"model":"Blazer"},{"make":"Chevrolet","startYear":1991,"model":"C/K","endYear":1994},{"endYear":1994,"model":"Silverado","startYear":1991,"make":"Chevrolet"},{"startYear":1991,"model":"Typhoon","endYear":1994,"make":"Chevrolet"},{"model":"Lumina","endYear":1995,"make":"Chevrolet","startYear":1991},{"make":"Chevrolet","startYear":1991,"endYear":1995,"model":"S-10"},{"endYear":1996,"make":"Buick","codeSeries":[{"years":"1991-1996","series":"L"},{"years":"1991-1996","series":"M"}],"model":"Century","startYear":1991},{"model":"Park Avenue","endYear":1996,"startYear":1991,"make":"Buick"},{"make":"Buick","model":"Roadmaster","startYear":1994,"endYear":1996},{"startYear":1992,"make":"Buick","endYear":1992,"model":"Skylark"},{"endYear":1993,"startYear":1993,"make":"Buick","model":"Skylark"},{"endYear":1994,"model":"Skylark","startYear":1994,"make":"Buick"},{"startYear":1991,"make":"Cadillac","endYear":1992,"model":"Brougham"},{"model":"Brougham","startYear":1993,"make":"Cadillac","endYear":1996},{"make":"Cadillac","startYear":1991,"model":"Fleetwood","codeSeries":[],"endYear":1992},{"endYear":1996,"model":"Fleetwood","startYear":1993,"codeSeries":[],"make":"Cadillac"}],"HD103":[{"startYear":1990,"make":"Acura","model":"Integra","endYear":1999},{"make":"Acura","model":"NSX","startYear":1991,"endYear":1996},{"model":"TL","make":"Acura","startYear":1995,"endYear":1998}],"B44":[{"model":"Regency","endYear":1998,"make":"Oldsmobile","startYear":1991},{"startYear":1991,"make":"Buick","model":"LeSabre","endYear":1999},{"startYear":1991,"model":"Reatta","endYear":1992,"make":"Buick"},{"endYear":1994,"make":"Buick","startYear":1992,"model":"Riviera"},{"model":"Roadmaster","startYear":1991,"endYear":1993,"make":"Buick"},{"startYear":1991,"make":"Cadillac","endYear":1992,"model":"Brougham"},{"startYear":1991,"model":"Fleetwood","make":"Cadillac","endYear":1992},{"model":"Beretta","startYear":1991,"endYear":1996,"make":"Chevrolet"},{"model":"Corsica w/o Tilt Wheel","make":"Chevrolet","startYear":1991,"endYear":1996},{"make":"Chevrolet","startYear":1991,"endYear":1996,"model":"Corsica w/ Tilt Wheel"},{"make":"Chevrolet","model":"Camaro","endYear":2002,"startYear":1991},{"model":"Z28","startYear":1991,"make":"Chevrolet","endYear":2002},{"make":"Chevrolet","startYear":1991,"model":"Cavalier","endYear":1994},{"model":"Corvette","make":"Chevrolet","endYear":1996,"startYear":1991},{"endYear":1996,"startYear":1991,"model":"Impala","make":"Chevrolet"},{"make":"Chevrolet","startYear":1991,"model":"Caprice","endYear":1996},{"endYear":1994,"startYear":1991,"model":"Blazer","make":"Chevrolet"},{"model":"C/K","startYear":1991,"endYear":1994,"make":"Chevrolet"},{"make":"Chevrolet","startYear":1991,"model":"Silverado","endYear":1994},{"model":"Typhoon","make":"Chevrolet","startYear":1991,"endYear":1994},{"startYear":1991,"model":"Lumina","endYear":1995,"make":"Chevrolet"},{"endYear":1995,"startYear":1991,"model":"S-10","make":"Chevrolet"},{"model":"Century","startYear":1991,"endYear":1996,"codeSeries":[{"series":"J","years":"1991-1996"},{"series":"K","years":"1991-1996"}],"make":"Buick"}],"B85":[{"endYear":2005,"make":"Buick","startYear":1997,"codeSeries":null,"model":"Century"},{"codeSeries":null,"startYear":1997,"make":"Buick","endYear":2004,"model":"Regal"},{"model":"Riviera","make":"Buick","startYear":1995,"endYear":1999,"codeSeries":null},{"codeSeries":null,"startYear":1995,"endYear":2000,"model":"Aurora","make":"Oldsmobile"}],"H74/H86":[{"model":"Escape","make":"Ford","endYear":2004,"startYear":2001},{"startYear":2000,"endYear":2005,"make":"Ford","model":"Focus"},{"endYear":2002,"make":"Ford","startYear":2001,"model":"Thunderbird"},{"endYear":2002,"startYear":2000,"make":"Lincoln","model":"LS"},{"model":"Tribute","endYear":2004,"make":"Mazda","startYear":2001}],"B97":[{"endYear":2005,"codeSeries":[{"years":"1997-2002","series":"1-1988"},{"years":"2002-2005","series":"H0001-H3988"}],"model":"Park Avenue","make":"Buick","startYear":1997},{"model":"Terraza","codeSeries":[{"series":"G0000-G3631","years":"2005-2006"}],"make":"Buick","endYear":2006,"startYear":2005},{"codeSeries":[{"years":"2005-2006","series":"S000A-S999K"}],"make":"Chevrolet","startYear":2005,"endYear":2006,"model":"Uplander"},{"codeSeries":[{"years":"1999-1999","series":"AA00-7T51"},{"series":"S000A-S999K","years":"2000-2005"}],"startYear":1999,"model":"Venture","make":"Chevrolet","endYear":2005},{"make":"Oldsmobile","endYear":2004,"startYear":1999,"model":"Silhouette","codeSeries":[{"years":"1999-2004","series":"S000A-S999K"}]},{"startYear":1999,"endYear":2004,"codeSeries":[{"years":"1999-2004","series":"S000A-S999K"}],"model":"Montana","make":"Pontiac"},{"codeSeries":[{"series":"S000A-S999K","years":"2005-2007"}],"startYear":2005,"make":"Saturn","endYear":2007,"model":"Relay"},{"startYear":1999,"model":"Transport","endYear":1999,"codeSeries":[{"series":"AA00-7T51","years":"1999-1999"}],"make":"Pontiac"}],"B100":[{"codeSeries":[{"series":"70000-75928","years":"2004-2012"}],"startYear":2004,"make":"Chevrolet","model":"Colorado","endYear":2012},{"model":"Canyon","make":"GMC","startYear":2004,"codeSeries":[{"years":"2004-2012","series":"70000-75928"}],"endYear":2012}],"B111":[{"endYear":2017,"codeSeries":[{"years":"2007-2017","series":"G0000-G3631"}],"make":"Buick","model":"Enclave","startYear":2007},{"make":"Buick","startYear":2006,"codeSeries":[{"years":"2006-2011","series":"G0000-G3631"}],"model":"Lucerne","endYear":2011},{"startYear":2008,"make":"Cadillac","endYear":2013,"model":"CTS","codeSeries":[{"years":"2008-2013","series":"G0000-G3631"}]},{"model":"CTS-V","endYear":2013,"startYear":2008,"make":"Cadillac","codeSeries":[{"series":"G0000-G3631","years":"2008-2013"}]},{"model":"DTS","codeSeries":[{"series":"G0000-G3631","years":"2006-2011"}],"make":"Cadillac","startYear":2006,"endYear":2011},{"endYear":2014,"model":"Escalade","startYear":2007,"make":"Cadillac","codeSeries":[{"years":"2007-2014","series":"G0000-G3631"}]},{"model":"Escalade ESV","endYear":2009,"startYear":2007,"codeSeries":[{"years":"2007-2009","series":"G0000-G3631"}],"make":"Cadillac"},{"codeSeries":[{"series":"G0000-G3631","years":"2007-2014"}],"startYear":2007,"model":"SRX","endYear":2014,"make":"Cadillac"},{"endYear":2011,"codeSeries":[{"years":"2004-2011","series":"G0000-G3631"}],"model":"STS","make":"Cadillac","startYear":2004},{"startYear":2007,"endYear":2013,"model":"Avalanche","codeSeries":[{"years":"2007-2013","series":"G0000-G3631"}],"make":"Chevrolet"},{"make":"Chevrolet","endYear":2010,"startYear":2006,"model":"Cobalt","codeSeries":[{"series":"G0000-G3631","years":"2006-2010"}]},{"make":"Chevrolet","codeSeries":[{"years":"2007-2009","series":"G0000-G3631"}],"endYear":2009,"model":"Equinox","startYear":2007},{"make":"Chevrolet","codeSeries":[{"years":"2008-2014","series":"G0000-G3631"}],"startYear":2008,"model":"Express","endYear":2014},{"codeSeries":[{"years":"2006-2011","series":"G0000-G3631"}],"make":"Chevrolet","model":"HHR","startYear":2006,"endYear":2011},{"endYear":2013,"model":"Impala","startYear":2006,"codeSeries":[{"years":"2006-2013","series":"G0000-G3631"}],"make":"Chevrolet"},{"model":"Malibu","endYear":2013,"make":"Chevrolet","codeSeries":[{"series":"G0000-G3631","years":"2004-2013"}],"startYear":2004},{"make":"Chevrolet","endYear":2013,"model":"Malibu Maxx","startYear":2004},{"model":"Monte Carlo","make":"Chevrolet","startYear":2006,"endYear":2007,"codeSeries":[{"years":"2006-2007","series":"G0000-G3631"}]},{"make":"Chevrolet","model":"Silverado","codeSeries":[{"series":"G0000-G3631","years":"2007-2014"}],"endYear":2014,"startYear":2007},{"codeSeries":[{"years":"2007-2014","series":"G0000-G3631"}],"endYear":2014,"startYear":2007,"make":"Chevrolet","model":"Suburban"},{"codeSeries":[{"series":"G0000-G3631","years":"2007-2014"}],"model":"Tahoe","make":"Chevrolet","endYear":2014,"startYear":2007},{"codeSeries":[{"series":"G0000-G3631","years":"2009-2017"}],"startYear":2009,"make":"Chevrolet","endYear":2017,"model":"Traverse"},{"model":"Acadia","endYear":2017,"make":"GMC","codeSeries":[{"series":"G0000-G3631","years":"2007-2017"}],"startYear":2007},{"endYear":2014,"model":"Savana","codeSeries":[{"years":"2008-2014","series":"G0000-G3631"}],"startYear":2008,"make":"GMC"},{"make":"GMC","model":"Sierra","startYear":2007,"codeSeries":[{"series":"G0000-G3631","years":"2007-2013"}],"endYear":2013},{"endYear":2014,"startYear":2007,"make":"GMC","model":"Yukon","codeSeries":[{"years":"2007-2014","series":"G0000-G3631"}]},{"codeSeries":[{"years":"2008-2009","series":"S000A-S999K"}],"make":"Hummer","model":"H2","startYear":2008,"endYear":2009},{"model":"G5","make":"Pontiac","endYear":2010,"codeSeries":[{"series":"G0000-G3631","years":"2007-2010"}],"startYear":2007},{"startYear":2005,"model":"G6","codeSeries":[{"years":"2007-2010","series":"G0000-G3631"}],"make":"Pontiac","endYear":2010},{"make":"Pontiac","model":"Solstice","startYear":2006,"codeSeries":[{"years":"2006-2009","series":"G0000-G3631"}],"endYear":2009},{"make":"Pontiac","startYear":2007,"endYear":2009,"model":"Torrent","codeSeries":[{"series":"G0000-G3631","years":"2007-2009"}]},{"make":"Saturn","codeSeries":[{"series":"G0000-G3631","years":"2007-2010"}],"model":"Aura","endYear":2010,"startYear":2007},{"model":"Outlook","make":"Saturn","endYear":2010,"startYear":2007,"codeSeries":[{"years":"2007-2010","series":"G0000-G3631"}]},{"startYear":2007,"model":"Sky","make":"Saturn","endYear":2010,"codeSeries":[{"years":"2007-2010","series":"G0000-G3631"}]},{"codeSeries":[{"series":"G0000-G3631","years":"2007-2009"}],"model":"XL-7","endYear":2009,"startYear":2007,"make":"Suzuki"}]};
let keyInfoOverrides = {"40076":{"secondaryKeyPartNumber":null,"emergencyPN":null,"keyway":"B62","battery":null,"fccid":"B62","isVATS":true,"buttons":null,"chip":"VATS","notes":null,"frequency":null,"keyType":"VATS Single-Sided"}};
let customDropdownValues = {"keyway":["B82","B67","B79","B68","B59","B63"],"chip":["PH 40 GM"],"keyType":[],"frequency":[],"buttons":[],"battery":[],"brand":[]};
let vehicleYearNotes = {"Buick|Encore":"Conflicting information from ILCO guide and KeylessRide. 2022 ILCO book shows 2014-2022 as all B119, while KeylessRide has flip keys from 2014-2016 and then Buick Prox/PEPS keys from 2017 onward.","Acura|RLX|Proximity":"ILCO shows 2016-2020 as RLX TECH and 2019-2020 as RLX ADV. One is 313.55-314.15 MHz and the other is 923.625-924.6 MHz","Acura|TLX|Proximity":"Some compatible key discrepancies across references.","Buick|Verano|Keyed Ignition":"Same year ranges between PEPS and non-PEPS.","Buick|Terraza|Keyed Ignition":"Weird year ranges on this one. Jan-05 to Mar-05 is PT04, then Apr-05 to 2006 is B97, then 2007 to 2008 is back to PT04."};

// FID System - Prefix-based tracking
let fidAssignments = {"SY5KHFNA433":"HY-015","KBRASTU15, CWTWB1U733, CWTWB1U821":"N-007","CWTWB1U751, CWTWB1U816":"N-018","M3N-A2C31243800, A2C87115400":"F-017","H73":"F-003","TQ8-FOB-4F08":"HY-012","KPU41788":"MZ-003","MOZB52TH":"T-015","WAZSKE13D03":"MZ-001","KR55WK49622":"N-006","OUCG8D-399H-A":"H-025","KPU41846":"OT-011","HYQ14ACX":"T-004","ACJ932HK1210A":"H-010","KR5TXN7":"N-001","SV3-VQTXNA13":"HY-036","TOY44H":"T-025","SY5JFRGE04":"HY-023","TQ8-RKE-4F25, TQ8-RKE-4F16":"HY-019","TQ8-RKE-4F14":"HY-032","HYQ14FBF":"T-002","H72":"F-002","M3N-A2C31243300":"F-018","OUCG8D-380H-A":"H-023","P4O9MK74946931, OHT05918179":"GM-022","SV3HMTX":"HY-034","CWTWB1U722":"F-025","MLBHLIK6-1T":"H-019","OSLOKA-630T":"HY-028","OSOKA-674T, OKA-674T":"HY-030","KR55WY8404":"HY-035","B120":"GM-012","OSLOKA-360T":"HY-026","KOBGT04A":"GM-036","DWO5":"OT-009","OUC003M":"MT-002","LHJ011":"GM-043","HYQ2AB":"GM-019","OSLOKA-674T":"HY-029","KR55WK47899":"F-026","DWO5R":"OT-008","ACJ932HK1310A":"H-014","KR5S180144014":"N-005","TOY57-PT":"T-023","HD101":"H-002","N5F-A08TAA":"F-021","CWTWB1G767":"N-016","HO05":"H-007","V2T01080514, OHT05918179":"GM-023","CWT72147KA3":"H-029","TQ8-RKE-4F16, TQ8-RKE-4F25":"HY-021","Y159":"CH-001","B115":"GM-010","WAZSKE13D01":"T-001","HYQ4EA":"GM-018","CQOFN00100":"HY-013","A269ZUA101":"H-027","H74/H86":"F-004","KR5V1X":"H-012","KR5S180144203":"N-003","OSLOKA-450T":"HY-017","KR5995364":"H-009","M3N-A2C93142300":"F-011","OSLOKA-310T":"HY-025","TOY50-PT-M":"T-022","TPX3":"OT-002","H128":"F-009","GQ4-54T":"CH-011","CWTWB1U821":"N-011","HYQ12BBY":"SB-004","BGBX1T478SKE125-01":"MZ-004","CWTWB1U811":"SB-003","OHT05918179":"GM-025","TQ8-FOB-4F16":"HY-002","TQ8-FOB-4F32, TQ8-FOB-4F19":"HY-005","HYQ12ABA":"CH-022","HO03":"H-006","OHT01060512":"GM-027","SY5YPFGE06":"HY-014","KR5434760":"H-013","A269ZUA106":"H-026","TQ8-FOB-4F17":"HY-011","KR5S180144106":"N-004","DWO4":"GM-014","GQ43VT5T":"CH-021","KR55WK49308":"H-017","TQ8-FOB-4F11":"HY-007","CWTWB1U322, CWTWB1U331, GQ43VT11T":"F-028","V2T01060514, P4O9MK74946931, OHT05918179":"GM-024","OUCD6000022":"F-023","HYQ14ADR":"T-009","CWTWB1U212, CWTWB1U331, GQ43VT11T":"F-029","H84":"F-005","B114R":"GM-009","M3N-32337100":"GM-033","CWTWB1U789":"N-012","GQ4-29T":"T-017","HD92":"H-001","CWTWB1U840":"N-010","CWTWB1G0090":"H-015","KR55WK48801":"F-020","M3N65981772, M3N5WY72XX":"CH-014","NBGG09C04":"GM-021","SY5HIFGE04":"HY-001","NHVWB1U521, NHVWB1U523":"H-024","TQ8-FOB-4F35":"HY-003","OUC60221":"GM-034","MLBHLIK6-1TA":"H-020","MARK8":"F-010","L2C0005T":"GM-038","CWTWB1U793":"F-024","M3N5WY8145":"H-008","TOY48BT4":"T-020","OHT692427AA":"CH-016","TOY40BT4":"T-019","HYQ14FBE":"T-006","CWTWB1U818":"N-017","CWTWB1U751":"N-014","OHT-4882056":"CH-008","MYT3X6898B":"GM-037","OHT1130261":"CH-010","HYQ14AHC":"SB-002","HD103":"H-003","SY5DMFNA433":"HY-010","OUCJ166N":"MT-003","MLBHLIK-1T":"H-018","OHT692427AB":"CH-018","Y170":"CH-004","CWTWBU624":"N-009","KOBUT1BT":"GM-045","B112":"GM-007","GQ43VT14T":"GM-046","KR55WK50073":"GM-029","HYQ12BDM":"T-014","B45":"GM-002","GQ4-53T":"CH-006","OHT692714AA, M3N5WY72XX":"CH-015","HYQ4AA":"GM-017","H94":"F-008","M3N-40821302":"CH-012","HD106":"H-004","TOY44G":"T-024","B100":"OT-007","OUCG8D-625M-A":"MT-004","TPX2":"OT-001","TOY43AT4":"T-026","MOZBR1ET":"T-005","M3N-A2C931426":"F-014","HU46":"OT-010","GQ43VT17T":"CH-020","H91":"F-006","CWTWB1U313, CWTWB1U343":"F-027","HYQ12BFA":"T-011","GQ43VT4T":"F-032","M3N-A2C931426, M3N-A2C93142600":"F-013","S30FDP":"OT-005","TK60":"OT-003","AVL-B01T1AC":"GM-026","ABO0204T":"GM-040","TQ8-FOB-4F27":"HY-008","OUC644M-KEY-N":"MT-001","HYQ12BEL":"T-016","B97":"GM-003","V2T0106512, OHT01060512":"GM-028","TQ8-FOB-4F36":"HY-004","HYQ12BGF, HYQ12BFB":"T-012","CWTWB1U429":"N-015","TOY57":"OT-012","CWTWB1U816, CWTWB1U751":"N-019","KOBLEAR1XT":"GM-044","M3M-40821302, M3N-XXXXXXXX":"CH-013","Y164":"CH-003","HYQ14FLA":"T-007","M3N5WY8609":"F-019","N5F-S0084A":"H-021","HYQ14AHK":"SB-001","Y160":"CH-002","KR5V2X":"H-016","HYQ12BFB, HYQ12BFA":"T-010","B114":"GM-008","HYQ1EA":"GM-015","B99":"GM-004","OSLOKA-875T, OSLOKA-910T":"HY-024","CQOFD00120":"HY-006","B119":"GM-011","TQ8-RKE-4F39":"HY-018","HYQ14FBC":"T-008","GQ43VT9T":"CH-019","TQ8-RKE-3F05":"HY-022","TOY48H-PT":"T-021","M3N-97395900":"CH-009","GQ43VT20T":"T-018","KR5TXN4":"N-002","TPX1":"OT-004","TQ8-RKE-3F04":"HY-020","HYQ2EB":"GM-020","NHVWB1U711":"SB-005","KR580399900":"H-011","OHT01060512, V2T0106512":"GM-030","TOY44D":"T-027","N5F-A08TDA":"F-022","M3N5WY783X":"CH-007","PT04":"GM-013","CWTWB1U331, CWTWB1U322, CWTWB1U343":"F-030","M3N-A2C931423, M3N-A2C93142300":"F-012","CWTWB1U331, CWTWB1U345":"F-031","M3N-A2C940780, M3N-A2C94078000":"F-016","CWTWBU729":"N-008","N5F736566-A":"GM-041","KOBUTAH2T":"H-028","OUC60270":"GM-035","WAZSKE11D01":"MZ-002","CQOTD00660":"HY-016","PINHA-T008":"HY-033","P4O9MK74946931, OHT01060512":"GM-031","HYQ1AA":"GM-016","JAG2":"OT-006","HYQ12BDP, HYQ12BEL":"T-013","OUCG8D-525M-A":"MT-005","PLNHM-T011":"HY-031","N5F-S0084A, N5F-A05TAA":"H-022","M3N-A2C940780":"F-015","OHT692427AA,OHT692713AA":"CH-017","B103":"GM-005","IYZ-C01C":"CH-005","VQQRK960NAT":"GM-032","L2C0007T":"GM-039","HD111":"H-005","H75":"F-001","HYQ14FBA":"T-003","CWTWB1U787":"N-013","LHJ009":"GM-042","H92":"F-007","B44":"GM-001","OSLOKA-423T":"HY-027","B111":"GM-006","SY5DMFNA04":"HY-009"};
let fidMerges = {};
// Feature flags  set to true to re-enable
let ENABLE_QUICK_MOVE_TO_GROUP = false;
let purchaseHistory = [];
let fidPrefixes = {"N":{"makes":["Nissan","Infiniti"],"name":"Nissan/Infiniti"},"F":{"makes":["Ford","Lincoln","Mercury"],"name":"Ford/Lincoln/Mercury"},"GM":{"makes":["Chevrolet","GMC","Buick","Cadillac","Saturn","Pontiac","Oldsmobile","Hummer"],"name":"GM/Chevrolet/Buick/Cadillac/GMC"},"T":{"makes":["Toyota","Lexus","Scion"],"name":"Toyota/Lexus/Scion"},"H":{"makes":["Honda","Acura"],"name":"Honda/Acura"},"CH":{"name":"Chrysler/Dodge/Jeep/Ram","makes":["Chrysler","Dodge","Jeep","Ram","Eagle","Plymouth"]},"HY":{"name":"Hyundai/Kia/Genesis","makes":["Hyundai","Kia","Genesis"]},"MZ":{"makes":["Mazda"],"name":"Mazda"},"MT":{"makes":["Mitsubishi"],"name":"Mitsubishi"},"SB":{"name":"Subaru","makes":["Subaru"]},"VW":{"name":"Volkswagen/Audi","makes":["Volkswagen","Audi"]},"SZ":{"name":"Suzuki","makes":["Suzuki"]},"CL":{"name":"Cloneable Keys","makes":[]},"TB":{"name":"Tibbe Keys","makes":[]},"OT":{"name":"Other","makes":[]}};
let cameFromFcc = false;
let cameFromFid = false;
let currentFccId = null;
let editingVendor = null;
let editingPartNumber = null;

// ===================== FCCID MERGE MIGRATION =====================
// DB array is already merged in source code. This runtime migration cleans up
// PN-keyed data stores (stock, vendor prices, overrides, etc.) in IndexedDB.
async function runFccidMergeMigration() {
    const migrationDone = await loadFromIndexedDB('fccidMergeV3');
    if (migrationDone) return;

    // Map of old PNs -> target FCCID PN (matches the source code merge)
    const pnToFccid = {
        // Batch 1
        '42055':'Y160','45200':'Y160','40240':'Y160','40241':'Y160',
        '48050':'Y164','40211':'Y164','40245':'Y164','40247':'Y164','40248':'Y164',
        '43001':'Y170','43009':'Y170','48051':'Y170',
        '40150':'H72','40155':'H72','48070':'H72',
        '40166':'H92','40167':'H92','40187':'H92','42101':'H92','43160':'H92','48066':'H92',
        '42074':'H94',
        '42190':'H128','42176':'H128','42177':'H128','42184':'H128',
        '40179':'B99','40181':'B99','40182':'B99','40183':'B99','48035':'B99','42975':'B99','42135':'B99',
        '42763':'B111','42764':'B111','42769':'B111','42793':'B111','42759':'B111','48025':'B111','42948':'B111','42949':'B111','42953':'B111',
        '40319':'B119','40322':'B119','47033':'B119','47034':'B119','40308':'B119',
        '40316':'B120','40147':'B120','40329':'B120',
        '48170':'TOY44D','43005':'TOY44D','42005':'TOY44D','42035':'TOY44D','42040':'TOY44D','42015':'TOY44D','43006':'TOY44D','42008':'TOY44D',
        '42014':'TOY44G','42013':'TOY44G','42084':'TOY44G','41998':'TOY44G','41993':'TOY44G','42009':'TOY44G',
        '48172':'TOY44H','42180':'TOY44H','42018':'TOY44H',
        '42065':'TOY43AT4','42020':'TOY43AT4',
        // Batch 2
        '40201':'H73','48060':'H73',
        '48075':'H74/H86','40196':'H74/H86',
        '43161':'H84','40161':'H84','40162':'H84','40165':'H84',
        '42073':'H91',
        '48045':'B115',
        '42829':'PT04','40230':'PT04','42828':'PT04','42824':'PT04','48030':'PT04',
        '48040':'B97','40170':'B97','40174':'B97',
        '40175':'B103',
        '48175':'B114R','42137':'B114R','42138':'B114R',
        '48202':'DWO4','42958':'DWO4',
        '43119':'TOY40BT4','48135':'TOY40BT4','42950':'TOY40BT4',
        '42117':'TOY48BT4','43008':'TOY48BT4','48130':'TOY48BT4',
        '41996':'TOY48H-PT',
        '43113':'TOY50-PT-M','42114':'TOY50-PT-M','41341':'TOY50-PT-M','48249':'TOY50-PT-M'
    };

    let changed = false;

    for (const [oldPn, newPn] of Object.entries(pnToFccid)) {
        // Transfer stock
        if (stockData[oldPn]) {
            stockData[newPn] = (stockData[newPn] || 0) + (stockData[oldPn] || 0);
            delete stockData[oldPn];
            changed = true;
        }
        // Transfer vendor prices
        if (vendorPrices[oldPn]) {
            if (!vendorPrices[newPn]) vendorPrices[newPn] = {};
            for (const vendor in vendorPrices[oldPn]) {
                if (!vendorPrices[newPn][vendor]) vendorPrices[newPn][vendor] = vendorPrices[oldPn][vendor];
            }
            delete vendorPrices[oldPn];
            changed = true;
        }
        // Clean up overrides for old PNs
        if (vehicleOverrides[oldPn]) { delete vehicleOverrides[oldPn]; changed = true; }
        if (keyInfoOverrides[oldPn]) { delete keyInfoOverrides[oldPn]; changed = true; }
        if (keyRelationships[oldPn]) { delete keyRelationships[oldPn]; changed = true; }
        // Update purchase history
        purchaseHistory.forEach(p => {
            if (String(p.partNumber) === oldPn) { p.partNumber = newPn; changed = true; }
        });
        // Remove old PNs from customKeys
        const ckIdx = customKeys.findIndex(k => String(k.pn) === oldPn);
        if (ckIdx >= 0) { customKeys.splice(ckIdx, 1); changed = true; }
    }

    if (changed) {
        saveToIndexedDB('stock', stockData);
        saveVendorPrices();
        saveVehicleOverrides();
        saveKeyInfoOverrides();
        saveCustomKeys();
        savePurchaseHistory();
        saveKeyRelationships();
    }

    saveToIndexedDB('fccidMergeV3', true);
}

// Merge custom key H75x into H75 (H75x only exists in user's IndexedDB/customKeys)
async function runH75xMergeMigration() {
    const done = await loadFromIndexedDB('h75xMergeV1');
    if (done) return;

    const sourceKey = DB.find(k => String(k.pn) === 'H75x');
    if (!sourceKey) {
        saveToIndexedDB('h75xMergeV1', true);
        return;
    }

    let targetKey = DB.find(k => String(k.pn) === 'H75');
    if (!targetKey) {
        // No H75 in DB yet  just rename H75x to H75
        sourceKey.pn = 'H75';
        const ckIdx = customKeys.findIndex(k => String(k.pn) === 'H75x');
        if (ckIdx >= 0) customKeys[ckIdx].pn = 'H75';
    } else {
        // Merge H75x vehicles into H75
        if (!targetKey.vehicles) targetKey.vehicles = [];
        (sourceKey.vehicles || []).forEach(v => {
            const exists = targetKey.vehicles.some(tv =>
                tv.make === v.make && tv.model === v.model &&
                tv.startYear == v.startYear && tv.endYear == v.endYear
            );
            if (!exists) targetKey.vehicles.push({ ...v });
        });
        if (!targetKey.mergedPNs) targetKey.mergedPNs = [];
        targetKey.mergedPNs.push('H75x');

        // Remove H75x from DB
        const dbIdx = DB.indexOf(sourceKey);
        if (dbIdx >= 0) DB.splice(dbIdx, 1);

        // Remove from customKeys
        const ckIdx = customKeys.findIndex(k => String(k.pn) === 'H75x');
        if (ckIdx >= 0) customKeys.splice(ckIdx, 1);
    }

    // Transfer PN-keyed data
    if (stockData['H75x']) {
        stockData['H75'] = (stockData['H75'] || 0) + stockData['H75x'];
        delete stockData['H75x'];
    }
    if (vendorPrices['H75x']) {
        if (!vendorPrices['H75']) vendorPrices['H75'] = {};
        for (const v in vendorPrices['H75x']) {
            if (!vendorPrices['H75'][v]) vendorPrices['H75'][v] = vendorPrices['H75x'][v];
        }
        delete vendorPrices['H75x'];
    }
    delete vehicleOverrides['H75x'];
    delete keyInfoOverrides['H75x'];
    delete keyRelationships['H75x'];
    purchaseHistory.forEach(p => {
        if (String(p.partNumber) === 'H75x') p.partNumber = 'H75';
    });

    saveToIndexedDB('database', DB);
    saveToIndexedDB('stock', stockData);
    saveVendorPrices();
    saveVehicleOverrides();
    saveKeyInfoOverrides();
    saveCustomKeys();
    savePurchaseHistory();
    saveKeyRelationships();
    saveToIndexedDB('h75xMergeV1', true);
}

// ===================== INIT =====================
async function init() {
    // Initialize IndexedDB first
    try {
        await initIndexedDB();
    } catch (e) {
        console.warn('IndexedDB not available, using localStorage fallback');
    }
    
    await loadLocalData();
    await loadCustomKeys();
    await loadCustomVehicles();
    await loadKeyRelationships();
    buildRelationshipsFromExistingData();
    applyVehicleOverridesToDB();
    applyKeyInfoOverridesToDB();
    await runFccidMergeMigration();
    await runH75xMergeMigration();
    initializeVendorPricesFromDB();
    buildFilters();
    buildFccidDatalist();
    applyFilters();
    document.getElementById('totalCount').textContent = DB.length;
    document.getElementById('aboutTotal').textContent = DB.length;
    
    const keyways = new Set(DB.map(k => k.keyway).filter(Boolean));
    document.getElementById('aboutKeyways').textContent = keyways.size;
    
    updateVendorCount();
    
    // Register service worker for PWA (with cache-busting version)
    if ('serviceWorker' in navigator) {
        try {
            const registration = await navigator.serviceWorker.register('service-worker.js?v=82');
            console.log('Service Worker registered:', registration.scope);
        } catch (e) {
            console.log('Service Worker registration failed:', e);
        }
    }
    
    // Handle URL parameters for shortcuts
    const urlParams = new URLSearchParams(window.location.search);
    const action = urlParams.get('action');
    if (action === 'add') {
        setTimeout(() => openAddInventory(), 100);
    } else if (action === 'lishi') {
        setTimeout(() => openLishiLookup(), 100);
    }
}

// ===================== INDEXEDDB STORAGE =====================
let db = null;
const DB_NAME = 'LockScrollDB';
const DB_VERSION = 1;
const STORE_NAME = 'appData';

function initIndexedDB() {
    return new Promise((resolve, reject) => {
        const request = indexedDB.open(DB_NAME, DB_VERSION);
        
        request.onerror = () => {
            console.error('IndexedDB error:', request.error);
            reject(request.error);
        };
        
        request.onsuccess = () => {
            db = request.result;
            resolve(db);
        };
        
        request.onupgradeneeded = (event) => {
            const database = event.target.result;
            if (!database.objectStoreNames.contains(STORE_NAME)) {
                database.createObjectStore(STORE_NAME, { keyPath: 'key' });
            }
        };
    });
}

function saveToIndexedDB(key, value) {
    if (!db) return Promise.resolve();
    
    return new Promise((resolve, reject) => {
        try {
            const transaction = db.transaction([STORE_NAME], 'readwrite');
            const store = transaction.objectStore(STORE_NAME);
            const request = store.put({ key: key, value: value });
            
            request.onsuccess = () => resolve();
            request.onerror = () => {
                console.error('Save error:', request.error);
                reject(request.error);
            };
        } catch (e) {
            console.error('Transaction error:', e);
            reject(e);
        }
    });
}

function loadFromIndexedDB(key) {
    if (!db) return Promise.resolve(null);
    
    return new Promise((resolve, reject) => {
        try {
            const transaction = db.transaction([STORE_NAME], 'readonly');
            const store = transaction.objectStore(STORE_NAME);
            const request = store.get(key);
            
            request.onsuccess = () => {
                resolve(request.result ? request.result.value : null);
            };
            request.onerror = () => {
                console.error('Load error:', request.error);
                reject(request.error);
            };
        } catch (e) {
            console.error('Transaction error:', e);
            reject(e);
        }
    });
}

async function loadLocalData() {
    try {
        // Try IndexedDB first
        if (db) {
            const savedStock = await loadFromIndexedDB('stock');
            if (savedStock) stockData = savedStock;
            
            const savedLishi = await loadFromIndexedDB('lishi');
            if (savedLishi) lishiData = savedLishi;
            
            const savedLishiVehicle = await loadFromIndexedDB('lishiVehicle');
            if (savedLishiVehicle) lishiVehicleData = savedLishiVehicle;
            
            const savedLishiInventory = await loadFromIndexedDB('lishiInventory');
            if (savedLishiInventory) lishiInventory = savedLishiInventory;

            const savedDeletedLishiTools = await loadFromIndexedDB('deletedLishiTools');
            if (savedDeletedLishiTools) deletedLishiTools = savedDeletedLishiTools;

            const savedCustomKeyways = await loadFromIndexedDB('customKeyways');
            if (savedCustomKeyways) customKeyways = savedCustomKeyways;

            const savedVendorPrices = await loadFromIndexedDB('vendorPrices');
            if (savedVendorPrices) vendorPrices = savedVendorPrices;
            
            const savedCustomVendors = await loadFromIndexedDB('customVendors');
            if (savedCustomVendors) customVendors = savedCustomVendors;
            
            const savedFidAssignments = await loadFromIndexedDB('fidAssignments');
            if (savedFidAssignments) fidAssignments = savedFidAssignments;
            
            const savedFidMerges = await loadFromIndexedDB('fidMerges');
            if (savedFidMerges) fidMerges = savedFidMerges;
            
            const savedPurchaseHistory = await loadFromIndexedDB('purchaseHistory');
            if (savedPurchaseHistory) purchaseHistory = savedPurchaseHistory;
            
            const savedFidPrefixes = await loadFromIndexedDB('fidPrefixes');
            if (savedFidPrefixes) fidPrefixes = { ...fidPrefixes, ...savedFidPrefixes };

            const savedVehicleOverrides = await loadFromIndexedDB('vehicleOverrides');
            if (savedVehicleOverrides) vehicleOverrides = savedVehicleOverrides;

            const savedKeyInfoOverrides = await loadFromIndexedDB('keyInfoOverrides');
            if (savedKeyInfoOverrides) keyInfoOverrides = savedKeyInfoOverrides;

            const savedCustomDropdownValues = await loadFromIndexedDB('customDropdownValues');
            if (savedCustomDropdownValues) customDropdownValues = { ...customDropdownValues, ...savedCustomDropdownValues };

            const savedVehicleYearNotes = await loadFromIndexedDB('vehicleYearNotes');
            if (savedVehicleYearNotes) vehicleYearNotes = savedVehicleYearNotes;

            // Load tools database
            await loadToolsDatabase();
        }

        // Fallback to localStorage for migration
        if (Object.keys(stockData).length === 0) {
            const lsStock = localStorage.getItem('lockscroll_stock');
            if (lsStock) {
                stockData = JSON.parse(lsStock);
                saveStock(); // Migrate to IndexedDB
            }
        }
        
        if (Object.keys(lishiData).length === 0) {
            const lsLishi = localStorage.getItem('lockscroll_lishi');
            if (lsLishi) {
                lishiData = JSON.parse(lsLishi);
                saveLishi();
            }
        }
        
        if (Object.keys(fidAssignments).length === 0) {
            const lsFid = localStorage.getItem('lockscroll_fid_assignments');
            if (lsFid) {
                fidAssignments = JSON.parse(lsFid);
                saveFidAssignments();
            }
        }
        
        if (purchaseHistory.length === 0) {
            const lsHistory = localStorage.getItem('lockscroll_purchase_history');
            if (lsHistory) {
                purchaseHistory = JSON.parse(lsHistory);
                savePurchaseHistory();
            }
        }
        
    } catch (e) {
        console.error('Error loading local data:', e);
    }
}

function initializeVendorPricesFromDB() {
    // Initialize vendor prices from the embedded database (Keyless Ride data)
    DB.forEach(key => {
        const pn = key.pn;
        if (!pn) return;
        
        if (!vendorPrices[pn]) {
            vendorPrices[pn] = {};
        }
        
        // If Keyless Ride prices exist in DB but not in vendorPrices, add them
        if (!vendorPrices[pn]['Keyless Ride']) {
            const dp = key.distributorPrices?.KeylessRide || {};
            if (key.priceA || key.priceB || dp.priceA || dp.priceB) {
                vendorPrices[pn]['Keyless Ride'] = {
                    priceA: dp.priceA || key.priceA || '',
                    priceB: dp.priceB || key.priceB || '',
                    emergency: dp.emergency || key.emergencyPrice || '',
                    shell: dp.shell || key.shellPrice || '',
                    oem: dp.oem || ''
                };
            }
        }
    });
    
    saveVendorPrices();
}

function saveStock() {
    saveToIndexedDB('stock', stockData);
    triggerAutoSync();
}

function saveLishi() {
    saveToIndexedDB('lishi', lishiData);
}

function saveLishiVehicle() {
    saveToIndexedDB('lishiVehicle', lishiVehicleData);
    triggerAutoSync();
}

function saveLishiInventory() {
    saveToIndexedDB('lishiInventory', lishiInventory);
    triggerAutoSync();
}

function saveDeletedLishiTools() {
    saveToIndexedDB('deletedLishiTools', deletedLishiTools);
    triggerAutoSync();
}

function saveCustomKeyways() {
    saveToIndexedDB('customKeyways', customKeyways);
    triggerAutoSync();
}

function saveVendorPrices() {
    saveToIndexedDB('vendorPrices', vendorPrices);
    triggerAutoSync();
}

function saveCustomVendors() {
    saveToIndexedDB('customVendors', customVendors);
    triggerAutoSync();
}

function saveFidAssignments() {
    saveToIndexedDB('fidAssignments', fidAssignments);
    triggerAutoSync();
}

function saveFidMerges() {
    saveToIndexedDB('fidMerges', fidMerges);
    triggerAutoSync();
}

function savePurchaseHistory() {
    saveToIndexedDB('purchaseHistory', purchaseHistory);
    triggerAutoSync();
}

function saveFidPrefixes() {
    saveToIndexedDB('fidPrefixes', fidPrefixes);
    triggerAutoSync();
}

function saveVehicleOverrides() {
    saveToIndexedDB('vehicleOverrides', vehicleOverrides);
    triggerAutoSync();
}

function saveCustomDropdownValues() {
    saveToIndexedDB('customDropdownValues', customDropdownValues);
    triggerAutoSync();
}

function applyVehicleOverridesToDB() {
    // Apply saved vehicle overrides to base database keys
    for (const pn in vehicleOverrides) {
        // Use == instead of === because object keys are always strings
        // but DB pn values can be numbers (e.g., 40076 vs "40076")
        const idx = DB.findIndex(k => k.pn == pn && !k.isCustom);
        if (idx >= 0) {
            DB[idx].vehicles = vehicleOverrides[pn];
        }
    }
}

function applyKeyInfoOverridesToDB() {
    // Apply saved key info overrides to base database keys
    for (const pn in keyInfoOverrides) {
        const idx = DB.findIndex(k => k.pn == pn && !k.isCustom);
        if (idx >= 0) {
            const overrides = keyInfoOverrides[pn];
            for (const field in overrides) {
                if (overrides[field] !== null && overrides[field] !== undefined) {
                    DB[idx][field] = overrides[field];
                }
            }
        }
    }
}

function saveKeyInfoOverrides() {
    saveToIndexedDB('keyInfoOverrides', keyInfoOverrides);
    triggerAutoSync();
}

function saveVehicleYearNotes() {
    saveToIndexedDB('vehicleYearNotes', vehicleYearNotes);
    triggerAutoSync();
}

function saveVehicleYearNote(make, model, keyType) {
    const noteKey = keyType ? `${make}|${model}|${keyType}` : `${make}|${model}`;
    const inputId = keyType ? 'vehicleYearNoteInput' : 'vehicleKeyTypeNoteInput';
    const textarea = document.getElementById(inputId);
    if (!textarea) return;
    const text = textarea.value.trim();
    if (text) {
        vehicleYearNotes[noteKey] = text;
    } else {
        delete vehicleYearNotes[noteKey];
    }
    saveVehicleYearNotes();
    toast('Note saved');
}

let editingKeyInfoIdx = null;

function populateEditKeyInfoDropdown(selectId, otherId, values, currentValue) {
    const select = document.getElementById(selectId);
    const otherInput = document.getElementById(otherId);
    select.innerHTML = '<option value="">-- None --</option>';
    values.forEach(v => {
        select.innerHTML += '<option value="' + v.replace(/"/g, '&quot;') + '">' + v + '</option>';
    });
    select.innerHTML += '<option value="__other__">+ Other (custom)</option>';
    if (currentValue) {
        // Check if value exists in the options
        const exists = values.some(v => v === String(currentValue));
        if (exists) {
            select.value = String(currentValue);
            otherInput.style.display = 'none';
            otherInput.value = '';
        } else {
            // Value not in dropdown - show as "Other"
            select.value = '__other__';
            otherInput.style.display = 'block';
            otherInput.value = currentValue;
        }
    } else {
        select.value = '';
        otherInput.style.display = 'none';
        otherInput.value = '';
    }
}

function openEditKeyInfoModal(idx) {
    editingKeyInfoIdx = idx;
    const key = DB[idx];

    // Reset PN field  only custom keys can have their PN edited
    const pnInput = document.getElementById('editKeyInfoPN');
    pnInput.value = key.pn || '';
    pnInput.disabled = true;
    pnInput.style.opacity = '0.7';
    document.getElementById('editKeyInfoPNWarning').style.display = 'none';
    const unlockBtn = document.getElementById('editKeyInfoPNUnlockBtn');
    if (key.isCustom) {
        unlockBtn.style.display = '';
        unlockBtn.textContent = '\uD83D\uDD12 Edit PN';
        unlockBtn.style.color = 'var(--accent)';
    } else {
        unlockBtn.style.display = 'none';
    }

    // Collect unique values from DB for fields without a dedicated category
    const fccIds = new Set();
    const emergencyPNs = new Set();
    const secondaryPNs = new Set();
    DB.forEach(k => {
        if (k.fccid) fccIds.add(String(k.fccid));
        if (k.emergencyPN) emergencyPNs.add(String(k.emergencyPN));
        if (k.secondaryKeyPartNumber) secondaryPNs.add(String(k.secondaryKeyPartNumber));
    });

    // Populate all dropdowns using DB values + custom dropdown values
    populateEditKeyInfoDropdown('editKeyInfoKeyType', 'editKeyInfoKeyTypeOther', getDropdownValuesForCategory('keyType'), key.keyType);
    populateEditKeyInfoDropdown('editKeyInfoKeyway', 'editKeyInfoKeywayOther', getDropdownValuesForCategory('keyway'), key.keyway);
    populateEditKeyInfoDropdown('editKeyInfoChip', 'editKeyInfoChipOther', getDropdownValuesForCategory('chip'), key.chip);
    populateEditKeyInfoDropdown('editKeyInfoFCC', 'editKeyInfoFCCOther', Array.from(fccIds).sort(), key.fccid);
    populateEditKeyInfoDropdown('editKeyInfoFrequency', 'editKeyInfoFrequencyOther', getDropdownValuesForCategory('frequency'), key.frequency);
    populateEditKeyInfoDropdown('editKeyInfoButtons', 'editKeyInfoButtonsOther', getDropdownValuesForCategory('buttons'), key.buttons);

    // Collect unique logo values from DB
    const logos = new Set();
    DB.forEach(k => { if (k.logo && k.logo.trim()) logos.add(k.logo.trim()); });
    populateEditKeyInfoDropdown('editKeyInfoLogo', 'editKeyInfoLogoOther', Array.from(logos).sort(), key.logo);

    populateEditKeyInfoDropdown('editKeyInfoBattery', 'editKeyInfoBatteryOther', getDropdownValuesForCategory('battery'), key.battery);
    populateEditKeyInfoDropdown('editKeyInfoEmergencyPN', 'editKeyInfoEmergencyPNOther', Array.from(emergencyPNs).sort(), key.emergencyPN);
    populateEditKeyInfoDropdown('editKeyInfoSecondaryPN', 'editKeyInfoSecondaryPNOther', Array.from(secondaryPNs).sort(), key.secondaryKeyPartNumber);

    document.getElementById('editKeyInfoNotes').value = key.notes || '';

    // VATS checkbox
    document.getElementById('editKeyInfoIsVATS').checked = key.isVATS || false;
    toggleEditKeyInfoVATS();

    document.getElementById('editKeyInfoModal').classList.add('on');
}

function toggleEditKeyInfoVATS() {
    const isVATS = document.getElementById('editKeyInfoIsVATS').checked;
    document.getElementById('editKeyInfoVATSSection').style.display = isVATS ? 'block' : 'none';
}

function closeEditKeyInfoModal() {
    document.getElementById('editKeyInfoModal').classList.remove('on');
    editingKeyInfoIdx = null;
}

function saveEditKeyInfo() {
    if (editingKeyInfoIdx === null) return;

    const key = DB[editingKeyInfoIdx];
    const oldPn = String(key.pn);
    const pnInput = document.getElementById('editKeyInfoPN');
    const newPnRaw = pnInput.value.trim();
    const pnChanged = key.isCustom && !pnInput.disabled && newPnRaw && newPnRaw !== oldPn;

    if (pnChanged) {
        const collision = DB.find(k => String(k.pn).toLowerCase() === newPnRaw.toLowerCase() && String(k.pn) !== oldPn);
        if (collision) {
            toast(`Part number "${newPnRaw}" already exists in the database`);
            return;
        }
        const saveConfirmed = confirm(
            `\u26A0\uFE0F Confirm Part Number Change\n\nOld: ${oldPn}\nNew: ${newPnRaw}\n\nSave this change?`
        );
        if (!saveConfirmed) return;
    }

    // Apply PN change before anything else
    if (pnChanged) {
        key.pn = newPnRaw;
        if (stockData[oldPn] !== undefined) {
            stockData[newPnRaw] = stockData[oldPn];
            delete stockData[oldPn];
            saveStock();
        }
        if (keyInfoOverrides[oldPn] !== undefined) {
            keyInfoOverrides[newPnRaw] = keyInfoOverrides[oldPn];
            delete keyInfoOverrides[oldPn];
            saveKeyInfoOverrides();
        }
    }

    const pn = String(key.pn); // use updated pn from here on

    const newKeyType = getDropdownValue('editKeyInfoKeyType', 'editKeyInfoKeyTypeOther') || null;
    const newKeyway = getDropdownValue('editKeyInfoKeyway', 'editKeyInfoKeywayOther') || null;
    const newChip = getDropdownValue('editKeyInfoChip', 'editKeyInfoChipOther') || null;
    const newFccid = getDropdownValue('editKeyInfoFCC', 'editKeyInfoFCCOther') || null;
    const newFrequency = getDropdownValue('editKeyInfoFrequency', 'editKeyInfoFrequencyOther') || null;
    const newButtons = getDropdownValue('editKeyInfoButtons', 'editKeyInfoButtonsOther') || null;
    const newLogo = getDropdownValue('editKeyInfoLogo', 'editKeyInfoLogoOther') || null;
    const newBattery = getDropdownValue('editKeyInfoBattery', 'editKeyInfoBatteryOther') || null;
    const newEmergencyPN = getDropdownValue('editKeyInfoEmergencyPN', 'editKeyInfoEmergencyPNOther') || null;
    const newNotes = document.getElementById('editKeyInfoNotes').value.trim() || null;
    const newIsVATS = document.getElementById('editKeyInfoIsVATS').checked;
    const newSecondaryPN = getDropdownValue('editKeyInfoSecondaryPN', 'editKeyInfoSecondaryPNOther') || null;

    if (key.isCustom) {
        // For custom keys, update the customKeys array directly
        // Search by old PN if it was renamed, otherwise by current pn
        const searchPn = pnChanged ? oldPn : pn;
        const customIdx = customKeys.findIndex(ck => String(ck.pn) === searchPn);
        if (customIdx >= 0) {
            if (pnChanged) customKeys[customIdx].pn = newPnRaw;
            customKeys[customIdx].keyType = newKeyType;
            customKeys[customIdx].keyway = newKeyway;
            customKeys[customIdx].chip = newChip;
            customKeys[customIdx].fccid = newFccid;
            customKeys[customIdx].frequency = newFrequency;
            customKeys[customIdx].buttons = newButtons;
            customKeys[customIdx].logo = newLogo;
            customKeys[customIdx].battery = newBattery;
            customKeys[customIdx].emergencyPN = newEmergencyPN;
            customKeys[customIdx].notes = newNotes;
            customKeys[customIdx].isVATS = newIsVATS;
            customKeys[customIdx].secondaryKeyPartNumber = newSecondaryPN;
            saveCustomKeys();
        }
        // Also update DB entry in memory
        key.keyType = newKeyType;
        key.keyway = newKeyway;
        key.chip = newChip;
        key.fccid = newFccid;
        key.frequency = newFrequency;
        key.buttons = newButtons;
        key.logo = newLogo;
        key.battery = newBattery;
        key.emergencyPN = newEmergencyPN;
        key.notes = newNotes;
        key.isVATS = newIsVATS;
        key.secondaryKeyPartNumber = newSecondaryPN;
    } else {
        // For base DB keys, save overrides
        const overrides = {};
        overrides.keyType = newKeyType;
        overrides.keyway = newKeyway;
        overrides.chip = newChip;
        overrides.fccid = newFccid;
        overrides.frequency = newFrequency;
        overrides.buttons = newButtons;
        overrides.logo = newLogo;
        overrides.battery = newBattery;
        overrides.emergencyPN = newEmergencyPN;
        overrides.notes = newNotes;
        overrides.isVATS = newIsVATS;
        overrides.secondaryKeyPartNumber = newSecondaryPN;

        keyInfoOverrides[pn] = overrides;
        saveKeyInfoOverrides();

        // Apply to in-memory DB
        for (const field in overrides) {
            if (overrides[field] !== null && overrides[field] !== undefined) {
                key[field] = overrides[field];
            } else {
                key[field] = overrides[field];
            }
        }
    }

    // Refresh the key detail page
    openKey(editingKeyInfoIdx, cameFromFcc, cameFromFid);
    closeEditKeyInfoModal();
    if (pnChanged) {
        toast(`Part number changed: ${oldPn} \u2192 ${newPnRaw}`);
    } else {
        toast('Key info updated');
    }
}

function getAllVendors() {
    return [...DEFAULT_VENDORS, ...customVendors];
}

function updateVendorCount() {
    document.getElementById('aboutVendors').textContent = getAllVendors().length;
}

// ===================== FILTERS =====================
function buildFilters() {
    updateYearDropdown();
    updateMakeDropdown();
    updateModelDropdown();
    populateAdvancedFilters();
}

// Advanced Search Functions
let advancedSearchOpen = false;

function toggleAdvancedSearch() {
    advancedSearchOpen = !advancedSearchOpen;
    const panel = document.getElementById('advancedSearchPanel');
    const icon = document.getElementById('advancedSearchIcon');

    if (advancedSearchOpen) {
        panel.style.display = 'block';
        icon.textContent = '';
    } else {
        panel.style.display = 'none';
        icon.textContent = '';
    }
}

function populateAdvancedFilters() {
    // Collect unique values from DB
    const keyways = new Set();
    const chips = new Set();
    const keyTypes = new Set();
    const frequencies = new Set();
    const buttonCounts = new Set();

    DB.forEach(key => {
        if (key.keyway) keyways.add(String(key.keyway));
        if (key.chip) chips.add(String(key.chip));
        if (key.keyType) keyTypes.add(String(key.keyType));
        if (key.frequency) frequencies.add(String(key.frequency));
        if (key.buttons) {
            // Extract button count (e.g., "3 Button" from "3 Button: L, U, P")
            const match = String(key.buttons).match(/^(\d+)\s*Button/i);
            if (match) buttonCounts.add(match[1] + ' Button');
        }
    });

    // Include custom keyways (user-added keyways that persist even without keys)
    customKeyways.forEach(kw => keyways.add(kw));

    // Include user-added custom dropdown values
    if (customDropdownValues.keyway) customDropdownValues.keyway.forEach(v => keyways.add(v));
    if (customDropdownValues.chip) customDropdownValues.chip.forEach(v => chips.add(v));
    if (customDropdownValues.keyType) customDropdownValues.keyType.forEach(v => keyTypes.add(v));
    if (customDropdownValues.frequency) customDropdownValues.frequency.forEach(v => frequencies.add(v));
    if (customDropdownValues.buttons) customDropdownValues.buttons.forEach(v => { const m = v.match(/^(\d+)\s*Button/i); if (m) buttonCounts.add(m[1] + ' Button'); });

    // Populate Keyway dropdown
    const keywaySelect = document.getElementById('advKeywayFilter');
    if (keywaySelect) {
        const currentVal = keywaySelect.value;
        keywaySelect.innerHTML = '<option value="">Any Keyway</option>';
        Array.from(keyways).sort().forEach(kw => {
            keywaySelect.innerHTML += `<option value="${kw}">${kw}</option>`;
        });
        if (currentVal) keywaySelect.value = currentVal;
    }

    // Populate Chip dropdown
    const chipSelect = document.getElementById('advChipFilter');
    if (chipSelect) {
        const currentVal = chipSelect.value;
        chipSelect.innerHTML = '<option value="">Any Chip</option>';
        Array.from(chips).sort().forEach(c => {
            chipSelect.innerHTML += `<option value="${c}">${c}</option>`;
        });
        if (currentVal) chipSelect.value = currentVal;
    }

    // Populate Key Type dropdown
    const keyTypeSelect = document.getElementById('advKeyTypeFilter');
    if (keyTypeSelect) {
        const currentVal = keyTypeSelect.value;
        keyTypeSelect.innerHTML = '<option value="">Any Type</option>';
        Array.from(keyTypes).sort().forEach(kt => {
            keyTypeSelect.innerHTML += `<option value="${kt}">${kt}</option>`;
        });
        if (currentVal) keyTypeSelect.value = currentVal;
    }

    // Populate Frequency dropdown
    const freqSelect = document.getElementById('advFrequencyFilter');
    if (freqSelect) {
        const currentVal = freqSelect.value;
        freqSelect.innerHTML = '<option value="">Any Frequency</option>';
        Array.from(frequencies).sort().forEach(f => {
            freqSelect.innerHTML += `<option value="${f}">${f}</option>`;
        });
        if (currentVal) freqSelect.value = currentVal;
    }

    // Populate Buttons dropdown
    const buttonsSelect = document.getElementById('advButtonsFilter');
    if (buttonsSelect) {
        const currentVal = buttonsSelect.value;
        buttonsSelect.innerHTML = '<option value="">Any Buttons</option>';
        Array.from(buttonCounts).sort((a, b) => parseInt(a) - parseInt(b)).forEach(b => {
            buttonsSelect.innerHTML += `<option value="${b}">${b}</option>`;
        });
        if (currentVal) buttonsSelect.value = currentVal;
    }
}

function clearAdvancedFilters() {
    document.getElementById('advKeywayFilter').value = '';
    document.getElementById('advChipFilter').value = '';
    document.getElementById('advKeyTypeFilter').value = '';
    document.getElementById('advFrequencyFilter').value = '';
    document.getElementById('advButtonsFilter').value = '';
    document.getElementById('advFccFilter').value = '';
    applyFilters();
}

function updateAdvancedFilterCount() {
    const advKeyway = document.getElementById('advKeywayFilter')?.value || '';
    const advChip = document.getElementById('advChipFilter')?.value || '';
    const advKeyType = document.getElementById('advKeyTypeFilter')?.value || '';
    const advFrequency = document.getElementById('advFrequencyFilter')?.value || '';
    const advButtons = document.getElementById('advButtonsFilter')?.value || '';
    const advFcc = document.getElementById('advFccFilter')?.value || '';

    const count = [advKeyway, advChip, advKeyType, advFrequency, advButtons, advFcc].filter(v => v).length;
    const countEl = document.getElementById('advancedFilterCount');
    if (countEl) {
        countEl.textContent = count > 0 ? `${count} advanced filter${count > 1 ? 's' : ''} active` : '';
    }

    // Update toggle button to show active filters
    const toggleBtn = document.getElementById('advancedSearchToggle');
    if (toggleBtn && count > 0 && !advancedSearchOpen) {
        toggleBtn.style.borderColor = 'var(--accent)';
        toggleBtn.style.color = 'var(--accent)';
    } else if (toggleBtn) {
        toggleBtn.style.borderColor = 'var(--border)';
        toggleBtn.style.color = 'var(--accent)';
    }
}

function updateYearDropdown() {
    const make = document.getElementById('fMake').value;
    const model = document.getElementById('fModel').value;
    const currentYear = document.getElementById('fYear').value;
    
    // Find valid years based on current make/model selection
    const validYears = new Set();
    
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            // Filter by make if selected
            if (make && v.make !== make) return;
            // Filter by model if selected
            if (model && v.model !== model) return;
            
            // Add all years in range
            for (let y = v.startYear; y <= v.endYear; y++) {
                if (y > 1900 && y <= new Date().getFullYear() + 2) {
                    validYears.add(y);
                }
            }
        });
    });
    
    const yearSelect = document.getElementById('fYear');
    const maxYear = validYears.size > 0 ? Math.max(...validYears) : new Date().getFullYear();
    const minYear = validYears.size > 0 ? Math.min(...validYears) : 2000;
    
    yearSelect.innerHTML = '<option value="">All Years</option>';
    for (let y = maxYear; y >= minYear; y--) {
        if (validYears.has(y) || (!make && !model)) {
            const opt = document.createElement('option');
            opt.value = y;
            opt.textContent = y;
            if (y == currentYear) opt.selected = true;
            yearSelect.appendChild(opt);
        }
    }
    
    // If current selection is no longer valid, reset it
    if (currentYear && !validYears.has(parseInt(currentYear)) && (make || model)) {
        yearSelect.value = '';
    }
}

function updateMakeDropdown() {
    const year = document.getElementById('fYear').value;
    const model = document.getElementById('fModel').value;
    const currentMake = document.getElementById('fMake').value;
    
    // Find valid makes based on current year/model selection
    const validMakes = new Set();
    
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            // Filter by year if selected
            if (year) {
                const y = parseInt(year);
                if (y < v.startYear || y > v.endYear) return;
            }
            // Filter by model if selected
            if (model && v.model !== model) return;
            
            if (v.make) validMakes.add(v.make);
        });
    });
    
    const makeSelect = document.getElementById('fMake');
    makeSelect.innerHTML = '<option value="">All Makes</option>';
    Array.from(validMakes).sort().forEach(m => {
        const opt = document.createElement('option');
        opt.value = m;
        opt.textContent = m;
        if (m === currentMake) opt.selected = true;
        makeSelect.appendChild(opt);
    });
    
    // If current selection is no longer valid, reset it
    if (currentMake && !validMakes.has(currentMake) && (year || model)) {
        makeSelect.value = '';
    }
}

function updateModelDropdown() {
    const year = document.getElementById('fYear').value;
    const make = document.getElementById('fMake').value;
    const currentModel = document.getElementById('fModel').value;
    
    // Find valid models based on current year/make selection
    const validModels = new Set();
    
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            // Filter by year if selected
            if (year) {
                const y = parseInt(year);
                if (y < v.startYear || y > v.endYear) return;
            }
            // Filter by make if selected
            if (make && v.make !== make) return;
            
            if (v.model) validModels.add(v.model);
        });
    });
    
    const modelSelect = document.getElementById('fModel');
    modelSelect.innerHTML = '<option value="">All Models</option>';
    Array.from(validModels).sort().forEach(m => {
        const opt = document.createElement('option');
        opt.value = m;
        opt.textContent = m;
        if (m === currentModel) opt.selected = true;
        modelSelect.appendChild(opt);
    });
    
    // If current selection is no longer valid, reset it
    if (currentModel && !validModels.has(currentModel) && (year || make)) {
        modelSelect.value = '';
    }
}

function updateModels() {
    // Called when make changes - update year and model dropdowns
    updateYearDropdown();
    updateModelDropdown();
}

function resetFilters() {
    document.getElementById('fYear').value = '';
    document.getElementById('fMake').value = '';
    document.getElementById('fModel').value = '';
    document.getElementById('searchBox').value = '';
    // Clear advanced filters
    if (document.getElementById('advKeywayFilter')) {
        document.getElementById('advKeywayFilter').value = '';
        document.getElementById('advChipFilter').value = '';
        document.getElementById('advKeyTypeFilter').value = '';
        document.getElementById('advFrequencyFilter').value = '';
        document.getElementById('advButtonsFilter').value = '';
        document.getElementById('advFccFilter').value = '';
    }
    // Rebuild all dropdowns with full options
    buildFilters();
    applyFilters();
}

function applyFilters() {
    const year = document.getElementById('fYear').value;
    const make = document.getElementById('fMake').value;
    const model = document.getElementById('fModel').value;
    const search = document.getElementById('searchBox').value.toLowerCase().trim();

    // Advanced filters
    const advKeyway = document.getElementById('advKeywayFilter')?.value || '';
    const advChip = document.getElementById('advChipFilter')?.value || '';
    const advKeyType = document.getElementById('advKeyTypeFilter')?.value || '';
    const advFrequency = document.getElementById('advFrequencyFilter')?.value || '';
    const advButtons = document.getElementById('advButtonsFilter')?.value || '';
    const advFcc = (document.getElementById('advFccFilter')?.value || '').toUpperCase().trim();

    // Debug logging
    if (advFrequency) {
        console.log('Frequency filter active:', advFrequency);
    }

    filteredKeys = DB.filter((key, idx) => {
        if (search) {
            const searchStr = [
                key.pn,
                key.fccid,
                key.keyway,
                key.chip,
                key.keyType,
                key.buttons,
                key.frequency,
                ...(key.vehicles || []).map(v => `${v.make} ${v.model}`)
            ].join(' ').toLowerCase();

            if (!searchStr.includes(search)) return false;
        }

        if (year || make || model) {
            const vehicles = key.vehicles || [];
            const match = vehicles.some(v => {
                if (year) {
                    const y = parseInt(year);
                    if (y < v.startYear || y > v.endYear) return false;
                }
                if (make && v.make !== make) return false;
                if (model && v.model !== model) return false;
                return true;
            });
            if (!match) return false;
        }

        // Advanced filters
        if (advKeyway && String(key.keyway || '').toLowerCase().trim() !== advKeyway.toLowerCase().trim()) return false;
        if (advChip && !String(key.chip || '').toLowerCase().includes(advChip.toLowerCase())) return false;
        if (advKeyType && String(key.keyType || '').toLowerCase().trim() !== advKeyType.toLowerCase().trim()) return false;
        if (advFrequency && String(key.frequency || '').toLowerCase().trim() !== advFrequency.toLowerCase().trim()) return false;
        if (advButtons && !String(key.buttons || '').toLowerCase().includes(advButtons.toLowerCase())) return false;
        if (advFcc && !String(key.fccid || '').toUpperCase().includes(advFcc)) return false;

        return true;
    });

    // Debug: log filtered count
    if (advFrequency) {
        console.log('Keys matching frequency filter:', filteredKeys.length);
    }

    updateAdvancedFilterCount();
    renderKeys();
}

// ===================== RENDER KEYS =====================
function renderKeys() {
    const list = document.getElementById('keyList');
    document.getElementById('showCount').textContent = filteredKeys.length;
    
    if (filteredKeys.length === 0) {
        list.innerHTML = '<div style="text-align:center;color:var(--dim);padding:40px;">No keys found</div>';
        return;
    }
    
    list.innerHTML = filteredKeys.map((key, i) => {
        const idx = DB.indexOf(key);
        const stock = stockData[key.pn] || 0;
        const stockClass = stock === 0 ? 'stock-out' : stock <= 2 ? 'stock-low' : 'stock-in';
        
        const vehicles = (key.vehicles || []).slice(0, 3).map(v => 
            `${v.make} ${v.model} (${formatYearRange(v)})`
        ).join(', ');
        
        return `
            <div class="key-card" onclick="openKey(${idx})">
                <div class="key-card-header">
                    <span class="key-pn">${key.pn || 'N/A'}</span>
                    <span class="key-type">${key.keyType || 'Unknown'}</span>
                </div>
                <div class="key-info">
                    <span><strong>Keyway:</strong> ${key.keyway || 'N/A'}</span>
                    <span><strong>FCC:</strong> ${key.fccid || 'N/A'}</span>
                    <span class="stock-badge ${stockClass}">Stock: ${stock}</span>
                </div>
                <div class="key-vehicles">${vehicles || 'No vehicle info'}</div>
            </div>
        `;
    }).join('');
}

// ===================== KEY DETAIL =====================
function openKey(idx, fromFcc = false, fromFid = false) {
    currentKeyIdx = idx;
    cameFromFcc = fromFcc;
    cameFromFid = fromFid;

    // Hide FCC panel if coming from FCC list
    if (fromFcc) {
        document.getElementById('fccPanel').classList.remove('on');
    }

    const key = DB[idx];
    const stock = stockData[key.pn] || 0;
    const keyway = key.keyway || '';
    const lishi = lishiData[keyway] || {};
    const assignedFid = key.fccid ? fidAssignments[key.fccid] : null;

    document.getElementById('detailTitle').textContent = `Part #${key.pn}`;

    // Build FID display if assigned
    const fidHtml = assignedFid ? `
        <div style="text-align:center;margin-bottom:16px;">
            <span onclick="openFid()" style="display:inline-block;padding:8px 16px;background:var(--accent);color:var(--bg);border-radius:20px;font-weight:600;font-size:14px;cursor:pointer;">
                FID: ${assignedFid} 
            </span>
        </div>
    ` : (key.fccid ? `
        <div style="text-align:center;margin-bottom:16px;">
            <span onclick="openFid()" style="display:inline-block;padding:8px 16px;background:var(--bg);color:var(--dim);border:1px dashed var(--border);border-radius:20px;font-size:13px;cursor:pointer;">
                No FID assigned - Click to assign 
            </span>
        </div>
    ` : '');

    let html = `
        ${fidHtml}
        <!-- Stock Section -->
        <div class="detail-section">
            <h3>Stock Management</h3>
            <div style="display:flex;justify-content:center;align-items:center;padding:16px;">
                <div class="stock-controls">
                    <button class="stock-btn minus" onclick="adjustStock('${key.pn}', -1)"></button>
                    <span class="stock-qty" id="stockQty">${stock}</span>
                    <button class="stock-btn plus" onclick="adjustStock('${key.pn}', 1)">+</button>
                </div>
            </div>
        </div>

        <!-- Key Info Section (smart field hiding: only show fields with values) -->
        <div class="detail-section">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                <h3 style="margin:0;">Key Information</h3>
                <button onclick="openEditKeyInfoModal(${idx})" style="padding:6px 12px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:var(--accent);font-size:12px;cursor:pointer;"> Edit</button>
            </div>
            <div class="detail-row">
                <span class="detail-label">Part Number</span>
                <span class="detail-value mono">${key.pn || 'N/A'}</span>
            </div>
            ${key.keyType ? `<div class="detail-row">
                <span class="detail-label">Key Type</span>
                <span class="detail-value">${key.keyType}</span>
            </div>` : ''}
            ${key.keyway ? `<div class="detail-row">
                <span class="detail-label">Keyway / Blade</span>
                <span class="detail-value mono">${key.keyway}</span>
            </div>` : ''}
            ${key.chip ? `<div class="detail-row">
                <span class="detail-label">Chip Type</span>
                <span class="detail-value">${key.chip}</span>
            </div>` : ''}
            ${key.isVATS ? `
            <div class="detail-row" style="background:linear-gradient(90deg, rgba(255,107,53,0.15), transparent);border-left:3px solid var(--accent2);padding-left:12px;margin:8px 0;">
                <span class="detail-label" style="color:var(--accent2);font-weight:600;">&#128273; VATS Key</span>
                <span class="detail-value" style="color:var(--accent2);font-weight:600;">Yes</span>
            </div>
            ${key.secondaryKeyPartNumber ? `
            <div class="detail-row" style="background:rgba(255,107,53,0.08);padding-left:15px;">
                <span class="detail-label">Secondary Key (Door/Trunk)</span>
                <span class="detail-value mono">${key.secondaryKeyPartNumber} <span style="color:var(--accent);font-size:11px;">(Stock: ${stockData[key.secondaryKeyPartNumber] || 0})</span></span>
            </div>
            ` : ''}
            ` : ''}
            ${key.frequency ? `<div class="detail-row">
                <span class="detail-label">Frequency</span>
                <span class="detail-value">${key.frequency}</span>
            </div>` : ''}
            ${key.buttons ? `<div class="detail-row">
                <span class="detail-label">Buttons</span>
                <span class="detail-value">${key.buttons}</span>
            </div>` : ''}
            ${key.logo ? `<div class="detail-row">
                <span class="detail-label">Logo</span>
                <span class="detail-value">${key.logo}</span>
            </div>` : ''}
            ${key.battery ? `<div class="detail-row">
                <span class="detail-label">Battery</span>
                <span class="detail-value">${key.battery}</span>
            </div>` : ''}
            ${key.emergencyPN ? `<div class="detail-row">
                <span class="detail-label">Emergency Key PN</span>
                <span class="detail-value mono">${key.emergencyPN}</span>
            </div>` : ''}
            ${key.fccid ? `<div class="detail-row" style="cursor:pointer" onclick="openFccPage('${key.fccid}')">
                <span class="detail-label">FCC ID</span>
                <span class="detail-value mono" style="color:var(--accent)">${key.fccid} &#8594;</span>
            </div>` : ''}
            ${key.mergedPNs && key.mergedPNs.length > 0 ? `<div class="detail-row">
                <span class="detail-label">Includes PNs</span>
                <span class="detail-value" style="font-size:11px;color:var(--dim);">${key.mergedPNs.join(', ')}</span>
            </div>` : ''}
        </div>

        ${key.keyway ? `<!-- Lishi Section -->
        <div class="detail-section lishi-section">
            <div class="lishi-header">
                <h3>&#128295; Lishi Tool</h3>
                <span class="lishi-keyway">${keyway} Keyway</span>
            </div>
            <div id="lishiContent">
                ${renderLishiContent(keyway, lishi)}
            </div>
        </div>` : ''}
        
        <!-- Pricing Section -->
        <div class="detail-section pricing-section">
            <h3> Vendor Pricing</h3>
            <div id="vendorPricesContainer">
                ${renderVendorPrices(key.pn)}
            </div>
            <button class="add-vendor-price-btn" onclick="openAddVendorPriceModal('${key.pn}')">+ Add Vendor Pricing</button>
        </div>
        
        ${key.notes ? `
        <div class="detail-section">
            <h3>Notes</h3>
            <p style="color:var(--text);font-size:13px;line-height:1.6;">${key.notes}</p>
        </div>
        ` : ''}

        <!-- Vehicles Section -->
        <div class="detail-section">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                <h3 style="margin:0;"> Compatible Vehicles</h3>
                <div style="display:flex;gap:6px;">
                    <button onclick="openAddSingleVehicleModal(${idx})" style="padding:6px 12px;background:var(--accent);border:none;border-radius:6px;color:var(--bg);font-size:12px;cursor:pointer;font-weight:600;">+ Add</button>
                    <button onclick="openEditVehiclesModal(${idx})" style="padding:6px 12px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:var(--accent);font-size:12px;cursor:pointer;"> Edit</button>
                </div>
            </div>
            ${(key.vehicles || []).slice().sort((a, b) => a.make.localeCompare(b.make) || a.model.localeCompare(b.model) || a.startYear - b.startYear).map(v => {
                // Handle codeSeries: can be string (old format) or array (new format)
                let codeSeriesHtml = '';
                if (v.codeSeries) {
                    if (Array.isArray(v.codeSeries) && v.codeSeries.length > 0) {
                        // New array format: [{ years: "1997-1999", series: "AA00-7T51" }]
                        codeSeriesHtml = v.codeSeries.map(cs =>
                            `<div style="color:var(--accent2);font-size:11px;margin-top:4px;"> ${cs.series} <span style="color:var(--dim);font-size:10px;">(${cs.years})</span></div>`
                        ).join('');
                    } else if (typeof v.codeSeries === 'string') {
                        // Old string format for backwards compatibility
                        codeSeriesHtml = `<span style="color:var(--accent2);font-size:11px;margin-left:6px;"> ${v.codeSeries}</span>`;
                    }
                }
                return `
                <div class="detail-row" style="flex-wrap:wrap;flex-direction:column;align-items:flex-start;">
                    <div style="display:flex;justify-content:space-between;width:100%;">
                        <span class="detail-label">${v.make} ${v.model}</span>
                        <span class="detail-value">${formatYearRange(v)}</span>
                    </div>
                    ${Array.isArray(v.codeSeries) && v.codeSeries.length > 0 ? `<div style="margin-top:4px;padding-left:8px;">${codeSeriesHtml}</div>` : (typeof v.codeSeries === 'string' && v.codeSeries ? codeSeriesHtml : '')}
                </div>
            `}).join('') || '<div style="color:var(--dim)">No vehicle data</div>'}
        </div>

        <!-- Delete Part Number -->
        <div style="margin-top:24px;padding:16px;text-align:center;">
            <button onclick="deletePartNumber(${idx})" style="padding:10px 24px;background:transparent;border:1px solid #ff4444;border-radius:8px;color:#ff4444;font-size:13px;cursor:pointer;">Delete Part Number</button>
        </div>
    `;

    document.getElementById('detailContent').innerHTML = html;
    document.getElementById('detailPanel').classList.add('on');
}

// ===================== EDIT VEHICLES FOR KEY =====================
let editingVehiclesKeyIdx = null;
let editingVehicles = [];
let vehicleMakesCache = [];
let vehicleModelsCache = {}; // { make: [models] }
let codeSeriesCache = []; // All known code series from Lishi tools

function buildCodeSeriesCache() {
    const series = new Set();

    // Helper to add a code series value (handles string, array-of-objects, or object)
    function addCS(val) {
        if (!val) return;
        if (typeof val === 'string') { series.add(val); return; }
        if (Array.isArray(val)) { val.forEach(item => addCS(item)); return; }
        if (val.series && typeof val.series === 'string') { series.add(val.series); return; }
    }

    // Collect from Lishi inventory
    for (const toolName in lishiInventory) {
        const tool = lishiInventory[toolName];
        if (tool.codeSeries) addCS(tool.codeSeries);
    }

    // Collect from master Lishi tools
    for (const toolName in MASTER_LISHI_TOOLS) {
        const tool = MASTER_LISHI_TOOLS[toolName];
        if (tool.codeSeries) addCS(tool.codeSeries);
    }

    // Collect from existing vehicle data in DB
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.codeSeries) addCS(v.codeSeries);
        });
    });

    // Collect from user-entered vehicle data (lishiVehicleData)
    for (const key in lishiVehicleData) {
        const vehicleData = lishiVehicleData[key];
        if (vehicleData) {
            if (vehicleData.codeSeries) addCS(vehicleData.codeSeries);
            if (vehicleData.ignition_codeSeries) addCS(vehicleData.ignition_codeSeries);
            if (vehicleData.door_codeSeries) addCS(vehicleData.door_codeSeries);
        }
    }

    // Collect from custom vehicles
    customVehicles.forEach(cv => {
        if (cv.codeSeries) addCS(cv.codeSeries);
        if (cv.ignition_codeSeries) addCS(cv.ignition_codeSeries);
        if (cv.door_codeSeries) addCS(cv.door_codeSeries);
    });

    codeSeriesCache = Array.from(series).sort();
}

function buildVehicleDropdownData() {
    // Build unique makes and models from DB
    const makes = new Set();
    const modelsByMake = {};

    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make) {
                makes.add(v.make);
                if (!modelsByMake[v.make]) modelsByMake[v.make] = new Set();
                if (v.model) modelsByMake[v.make].add(v.model);
            }
        });
    });

    // Also include custom vehicles
    customVehicles.forEach(v => {
        if (v.make) {
            makes.add(v.make);
            if (!modelsByMake[v.make]) modelsByMake[v.make] = new Set();
            if (v.model) modelsByMake[v.make].add(v.model);
        }
    });

    vehicleMakesCache = Array.from(makes).sort();
    vehicleModelsCache = {};
    for (const make in modelsByMake) {
        vehicleModelsCache[make] = Array.from(modelsByMake[make]).sort();
    }
}

function openEditVehiclesModal(keyIdx) {
    editingVehiclesKeyIdx = keyIdx;
    const key = DB[keyIdx];
    editingVehicles = JSON.parse(JSON.stringify(key.vehicles || [])); // Deep copy
    // Alphabetize vehicles to make it easier to spot duplicates
    editingVehicles.sort((a, b) =>
        (a.make || '').localeCompare(b.make || '') ||
        (a.model || '').localeCompare(b.model || '') ||
        (a.startYear || 0) - (b.startYear || 0)
    );
    buildVehicleDropdownData();
    renderEditVehiclesList();
    document.getElementById('editVehiclesModal').classList.add('on');
}

function closeEditVehiclesModal() {
    document.getElementById('editVehiclesModal').classList.remove('on');
    editingVehiclesKeyIdx = null;
    editingVehicles = [];
}

function renderEditVehiclesList() {
    const container = document.getElementById('editVehiclesList');

    // Build code series cache if needed
    if (codeSeriesCache.length === 0) {
        buildCodeSeriesCache();
    }

    if (editingVehicles.length === 0) {
        container.innerHTML = '<div style="text-align:center;color:var(--dim);padding:20px;">No vehicles. Click "Add Vehicle" to add one.</div>';
        return;
    }

    container.innerHTML = editingVehicles.map((v, i) => {
        // Generate make options per-vehicle with selected attribute
        const allMakes = vehicleMakesCache.includes(v.make) ? vehicleMakesCache : (v.make ? [...vehicleMakesCache, v.make].sort() : vehicleMakesCache);
        const makeOptions = allMakes.map(m => `<option value="${m}"${m === v.make ? ' selected' : ''}>${m}</option>`).join('');

        // Generate model options per-vehicle with selected attribute
        const models = v.make ? (vehicleModelsCache[v.make] || []) : [];
        const allModels = (v.model && !models.includes(v.model)) ? [...models, v.model].sort() : models;
        const modelOptions = allModels.map(m => `<option value="${m}"${m === v.model ? ' selected' : ''}>${m}</option>`).join('');

        // Normalize codeSeries to array format
        let codeSeriesArr = [];
        if (v.codeSeries) {
            if (Array.isArray(v.codeSeries)) {
                codeSeriesArr = v.codeSeries;
            } else if (typeof v.codeSeries === 'string') {
                // Convert old string format to array format
                codeSeriesArr = [{ years: `${v.startYear || ''}-${v.endYear || ''}`, series: v.codeSeries }];
            }
        }

        // Render code series entries with selected attribute on each
        const codeSeriesEntriesHtml = codeSeriesArr.map((cs, j) => {
            const allSeries = (cs.series && !codeSeriesCache.includes(cs.series)) ? [...codeSeriesCache, cs.series].sort() : codeSeriesCache;
            const csOptions = allSeries.map(s => `<option value="${s}"${s === cs.series ? ' selected' : ''}>${s}</option>`).join('');
            const parsed = parseCodeSeriesYears(cs.years);
            const prefix = `editVehCS${i}_${j}`;
            const onYC = `onchange="updateEditVehCSYearFields(${i}, ${j})"`;
            return `
            <div style="background:var(--bg);border:1px solid var(--border);border-radius:6px;padding:8px;margin-bottom:6px;" data-vehicle="${i}" data-cs="${j}">
                <div style="display:grid;grid-template-columns:auto 1fr auto auto 1fr;gap:3px;align-items:center;margin-bottom:6px;">
                    <select id="${prefix}SM" ${onYC} style="padding:4px 2px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;">${monthSelectOptions(parsed.startMonth || '')}</select>
                    <input type="number" id="${prefix}SY" value="${parsed.startYear || ''}" placeholder="Year" ${onYC} style="width:100%;padding:4px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;box-sizing:border-box;">
                    <span style="color:var(--dim);font-size:10px;padding:0 2px;">to</span>
                    <select id="${prefix}EM" ${onYC} style="padding:4px 2px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;">${monthSelectOptions(parsed.endMonth || '')}</select>
                    <input type="number" id="${prefix}EY" value="${parsed.endYear || ''}" placeholder="Year" ${onYC} style="width:100%;padding:4px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;box-sizing:border-box;">
                </div>
                <div style="display:grid;grid-template-columns:1fr auto;gap:6px;align-items:center;">
                    <select onchange="onEditVehicleCodeSeriesEntryChange(${i}, ${j}, this.value)"
                        style="padding:6px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:12px;"
                        id="editVehCodeSeriesEntry${i}_${j}">
                        <option value="">Select Series...</option>
                        ${csOptions}
                        <option value="__add_new__">+ Add New...</option>
                    </select>
                    <button onclick="removeEditVehicleCodeSeriesEntry(${i}, ${j})"
                        style="padding:4px 8px;background:var(--danger);color:white;border:none;border-radius:4px;cursor:pointer;font-size:11px;"></button>
                </div>
            </div>
        `}).join('');

        return `
            <div style="padding:12px;background:var(--card);border-radius:8px;margin-bottom:8px;">
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:8px;">
                    <select id="editVehMake${i}" onchange="onEditVehicleMakeChange(${i}, this.value)"
                        style="padding:8px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:13px;">
                        <option value="">Select Make...</option>
                        ${makeOptions}
                        <option value="__add_new__">+ Add New Make...</option>
                    </select>
                    <select id="editVehModel${i}" onchange="onEditVehicleModelChange(${i}, this.value)"
                        style="padding:8px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:13px;">
                        <option value="">Select Model...</option>
                        ${modelOptions}
                        <option value="__add_new__">+ Add New Model...</option>
                    </select>
                </div>
                <div style="display:grid;grid-template-columns:auto 1fr auto 1fr auto;gap:6px;align-items:end;margin-bottom:8px;">
                    <div>
                        <label style="font-size:10px;color:var(--dim);display:block;margin-bottom:3px;">Month</label>
                        <select onchange="updateEditVehicle(${i}, 'startMonth', parseInt(this.value) || undefined)"
                            style="padding:7px 4px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:12px;">
                            ${monthSelectOptions(v.startMonth || '')}
                        </select>
                    </div>
                    <div>
                        <label style="font-size:10px;color:var(--dim);display:block;margin-bottom:3px;">Start Year</label>
                        <input type="number" value="${v.startYear || ''}" placeholder="e.g. 2015"
                            onchange="updateEditVehicle(${i}, 'startYear', parseInt(this.value))"
                            style="width:100%;padding:8px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:13px;box-sizing:border-box;">
                    </div>
                    <div>
                        <label style="font-size:10px;color:var(--dim);display:block;margin-bottom:3px;">Month</label>
                        <select onchange="updateEditVehicle(${i}, 'endMonth', parseInt(this.value) || undefined)"
                            style="padding:7px 4px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:12px;">
                            ${monthSelectOptions(v.endMonth || '')}
                        </select>
                    </div>
                    <div>
                        <label style="font-size:10px;color:var(--dim);display:block;margin-bottom:3px;">End Year</label>
                        <input type="number" value="${v.endYear || ''}" placeholder="e.g. 2020"
                            onchange="updateEditVehicle(${i}, 'endYear', parseInt(this.value))"
                            style="width:100%;padding:8px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:13px;box-sizing:border-box;">
                    </div>
                    <button onclick="removeEditVehicle(${i})" style="padding:8px 12px;background:var(--danger);color:white;border:none;border-radius:6px;cursor:pointer;font-size:14px;">&#128465;</button>
                </div>
                <div style="border-top:1px solid var(--border);padding-top:8px;margin-top:4px;">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                        <span style="font-size:11px;color:var(--dim);">Code Series (with year ranges)</span>
                        <button onclick="addEditVehicleCodeSeriesEntry(${i})"
                            style="padding:4px 10px;background:var(--accent2);color:white;border:none;border-radius:4px;cursor:pointer;font-size:11px;">+ Add Code Series</button>
                    </div>
                    ${codeSeriesEntriesHtml || '<div style="color:var(--dim);font-size:11px;text-align:center;padding:8px;">No code series added</div>'}
                </div>
            </div>
        `;
    }).join('');
}

// Helper to ensure codeSeries is array format
function ensureCodeSeriesArray(vehicleIdx) {
    const v = editingVehicles[vehicleIdx];
    if (!v.codeSeries) {
        v.codeSeries = [];
    } else if (typeof v.codeSeries === 'string') {
        // Convert old string format to array
        v.codeSeries = [{ years: `${v.startYear || ''}-${v.endYear || ''}`, series: v.codeSeries }];
    } else if (!Array.isArray(v.codeSeries)) {
        v.codeSeries = [];
    }
}

function addEditVehicleCodeSeriesEntry(vehicleIdx) {
    ensureCodeSeriesArray(vehicleIdx);
    const v = editingVehicles[vehicleIdx];
    const defaultYears = `${v.startYear || new Date().getFullYear()}-${v.endYear || new Date().getFullYear()}`;
    v.codeSeries.push({ years: defaultYears, series: '' });
    renderEditVehiclesList();
}

function removeEditVehicleCodeSeriesEntry(vehicleIdx, csIdx) {
    ensureCodeSeriesArray(vehicleIdx);
    editingVehicles[vehicleIdx].codeSeries.splice(csIdx, 1);
    if (editingVehicles[vehicleIdx].codeSeries.length === 0) {
        editingVehicles[vehicleIdx].codeSeries = [];
    }
    renderEditVehiclesList();
}

function updateEditVehicleCodeSeriesYears(vehicleIdx, csIdx, value) {
    ensureCodeSeriesArray(vehicleIdx);
    if (editingVehicles[vehicleIdx].codeSeries[csIdx]) {
        editingVehicles[vehicleIdx].codeSeries[csIdx].years = value;
    }
}

function updateEditVehCSYearFields(vehicleIdx, csIdx) {
    var prefix = 'editVehCS' + vehicleIdx + '_' + csIdx;
    var sm = parseInt(document.getElementById(prefix + 'SM')?.value) || 0;
    var sy = document.getElementById(prefix + 'SY')?.value || '';
    var em = parseInt(document.getElementById(prefix + 'EM')?.value) || 0;
    var ey = document.getElementById(prefix + 'EY')?.value || '';
    ensureCodeSeriesArray(vehicleIdx);
    if (editingVehicles[vehicleIdx].codeSeries[csIdx]) {
        editingVehicles[vehicleIdx].codeSeries[csIdx].years = buildCodeSeriesYears(sm, sy, em, ey);
    }
}

function onEditVehicleCodeSeriesEntryChange(vehicleIdx, csIdx, value) {
    ensureCodeSeriesArray(vehicleIdx);
    if (value === '__add_new__') {
        const newCodeSeries = prompt('Enter new code series (e.g., 1001-4096):');
        if (newCodeSeries && newCodeSeries.trim()) {
            const cs = newCodeSeries.trim();
            if (!codeSeriesCache.includes(cs)) {
                codeSeriesCache.push(cs);
                codeSeriesCache.sort();
            }
            editingVehicles[vehicleIdx].codeSeries[csIdx].series = cs;
            renderEditVehiclesList();
        } else {
            renderEditVehiclesList();
        }
    } else {
        editingVehicles[vehicleIdx].codeSeries[csIdx].series = value || '';
    }
}

// Legacy function for backwards compatibility
function onEditVehicleCodeSeriesChange(index, value) {
    ensureCodeSeriesArray(index);
    if (value === '__add_new__') {
        const newCodeSeries = prompt('Enter new code series (e.g., 1001-4096):');
        if (newCodeSeries && newCodeSeries.trim()) {
            const cs = newCodeSeries.trim();
            if (!codeSeriesCache.includes(cs)) {
                codeSeriesCache.push(cs);
                codeSeriesCache.sort();
            }
            const v = editingVehicles[index];
            const defaultYears = `${v.startYear || ''}-${v.endYear || ''}`;
            v.codeSeries.push({ years: defaultYears, series: cs });
            renderEditVehiclesList();
        } else {
            renderEditVehiclesList();
        }
    } else if (value) {
        const v = editingVehicles[index];
        const defaultYears = `${v.startYear || ''}-${v.endYear || ''}`;
        v.codeSeries.push({ years: defaultYears, series: value });
    }
}

function onEditVehicleMakeChange(index, value) {
    if (value === '__add_new__') {
        const newMake = prompt('Enter new make name:');
        if (newMake && newMake.trim()) {
            const make = newMake.trim();
            if (!vehicleMakesCache.includes(make)) {
                vehicleMakesCache.push(make);
                vehicleMakesCache.sort();
                vehicleModelsCache[make] = [];
            }
            editingVehicles[index].make = make;
            editingVehicles[index].model = ''; // Reset model when make changes
            renderEditVehiclesList();
        } else {
            renderEditVehiclesList(); // Reset dropdown
        }
    } else {
        editingVehicles[index].make = value;
        editingVehicles[index].model = ''; // Reset model when make changes
        renderEditVehiclesList();
    }
}

function onEditVehicleModelChange(index, value) {
    const make = editingVehicles[index].make;
    if (value === '__add_new__') {
        if (!make) {
            alert('Please select a make first');
            renderEditVehiclesList();
            return;
        }
        const newModel = prompt(`Enter new model name for ${make}:`);
        if (newModel && newModel.trim()) {
            const model = newModel.trim();
            if (!vehicleModelsCache[make]) vehicleModelsCache[make] = [];
            if (!vehicleModelsCache[make].includes(model)) {
                vehicleModelsCache[make].push(model);
                vehicleModelsCache[make].sort();
            }
            editingVehicles[index].model = model;
            renderEditVehiclesList();
        } else {
            renderEditVehiclesList(); // Reset dropdown
        }
    } else {
        editingVehicles[index].model = value;
    }
}

function updateEditVehicle(index, field, value) {
    editingVehicles[index][field] = value;
}

function addVehicleToKey() {
    editingVehicles.push({ make: '', model: '', startYear: new Date().getFullYear(), endYear: new Date().getFullYear(), codeSeries: [] });
    renderEditVehiclesList();
}

function removeEditVehicle(index) {
    editingVehicles.splice(index, 1);
    renderEditVehiclesList();
}

function saveKeyVehicles() {
    if (editingVehiclesKeyIdx === null) return;

    // Filter out empty entries
    const validVehicles = editingVehicles.filter(v => v.make && v.model && v.startYear && v.endYear);

    // Update DB
    DB[editingVehiclesKeyIdx].vehicles = validVehicles;

    const key = DB[editingVehiclesKeyIdx];
    if (key.isCustom) {
        // Save to customKeys for custom keys
        const customIdx = customKeys.findIndex(k => k.pn === key.pn);
        if (customIdx >= 0) {
            customKeys[customIdx].vehicles = validVehicles;
            saveCustomKeys();
        }
    } else {
        // Save to vehicleOverrides for base database keys
        vehicleOverrides[key.pn] = validVehicles;
        saveVehicleOverrides();
    }

    // Refresh the key detail view
    openKey(editingVehiclesKeyIdx, cameFromFcc, cameFromFid);
    closeEditVehiclesModal();
    toast('Vehicles updated');
    triggerAutoSync();
}

// ===================== ADD SINGLE VEHICLE =====================
let addingVehicleKeyIdx = null;
let addingVehicle = { make: '', model: '', startYear: '', endYear: '', codeSeries: [] };

function openAddSingleVehicleModal(keyIdx) {
    addingVehicleKeyIdx = keyIdx;
    addingVehicle = { make: '', model: '', startYear: new Date().getFullYear(), endYear: new Date().getFullYear(), codeSeries: [] };
    buildVehicleDropdownData();
    buildCodeSeriesCache();

    // Populate make dropdown
    const makeSelect = document.getElementById('addVehMake');
    const makeOptions = vehicleMakesCache.map(m => `<option value="${m}">${m}</option>`).join('');
    makeSelect.innerHTML = `
        <option value="">Select Make...</option>
        ${makeOptions}
        <option value="__add_new__">+ Add New Make...</option>
    `;

    // Reset model dropdown
    document.getElementById('addVehModel').innerHTML = '<option value="">Select Model...</option>';

    // Set default years
    document.getElementById('addVehStartYear').value = new Date().getFullYear();
    document.getElementById('addVehEndYear').value = new Date().getFullYear();
    document.getElementById('addVehStartMonth').innerHTML = monthSelectOptions('');
    document.getElementById('addVehEndMonth').innerHTML = monthSelectOptions('');

    // Render empty code series list
    renderAddVehicleCodeSeriesList();

    document.getElementById('addSingleVehicleModal').classList.add('on');
}

function closeAddSingleVehicleModal() {
    document.getElementById('addSingleVehicleModal').classList.remove('on');
    addingVehicleKeyIdx = null;
    addingVehicle = { make: '', model: '', startYear: '', endYear: '', codeSeries: [] };
}

function renderAddVehicleCodeSeriesList() {
    const container = document.getElementById('addVehCodeSeriesList');
    const codeSeriesOptions = codeSeriesCache.map(cs => `<option value="${cs}">${cs}</option>`).join('');

    if (!addingVehicle.codeSeries || addingVehicle.codeSeries.length === 0) {
        container.innerHTML = '<div style="color:var(--dim);font-size:11px;text-align:center;padding:8px;">No code series added</div>';
        return;
    }

    container.innerHTML = addingVehicle.codeSeries.map((cs, j) => {
        const parsed = parseCodeSeriesYears(cs.years);
        const prefix = `addVehCS${j}`;
        const onYC = `onchange="updateAddVehCSYearFields(${j})"`;
        return `
        <div style="background:var(--bg);border:1px solid var(--border);border-radius:6px;padding:8px;margin-bottom:6px;">
            <div style="display:grid;grid-template-columns:auto 1fr auto auto 1fr;gap:3px;align-items:center;margin-bottom:6px;">
                <select id="${prefix}SM" ${onYC} style="padding:4px 2px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;">${monthSelectOptions(parsed.startMonth || '')}</select>
                <input type="number" id="${prefix}SY" value="${parsed.startYear || ''}" placeholder="Year" ${onYC} style="width:100%;padding:4px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;box-sizing:border-box;">
                <span style="color:var(--dim);font-size:10px;padding:0 2px;">to</span>
                <select id="${prefix}EM" ${onYC} style="padding:4px 2px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;">${monthSelectOptions(parsed.endMonth || '')}</select>
                <input type="number" id="${prefix}EY" value="${parsed.endYear || ''}" placeholder="Year" ${onYC} style="width:100%;padding:4px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;box-sizing:border-box;">
            </div>
            <div style="display:grid;grid-template-columns:1fr auto;gap:6px;align-items:center;">
                <select onchange="onAddVehicleCodeSeriesEntryChange(${j}, this.value)"
                    style="padding:6px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:12px;"
                    id="addVehCodeSeriesEntry${j}">
                    <option value="">Select Series...</option>
                    ${codeSeriesOptions}
                    <option value="__add_new__">+ Add New...</option>
                </select>
                <button onclick="removeAddVehicleCodeSeriesEntry(${j})"
                    style="padding:4px 8px;background:var(--danger);color:white;border:none;border-radius:4px;cursor:pointer;font-size:11px;"></button>
            </div>
        </div>
    `}).join('');

    // Set selected values
    addingVehicle.codeSeries.forEach((cs, j) => {
        const csSelect = document.getElementById(`addVehCodeSeriesEntry${j}`);
        if (csSelect && cs.series) {
            if (!codeSeriesCache.includes(cs.series)) {
                const opt = document.createElement('option');
                opt.value = cs.series;
                opt.text = cs.series;
                csSelect.insertBefore(opt, csSelect.lastElementChild);
            }
            csSelect.value = cs.series;
        }
    });
}

function addAddVehicleCodeSeriesEntry() {
    const startYear = document.getElementById('addVehStartYear').value || new Date().getFullYear();
    const endYear = document.getElementById('addVehEndYear').value || new Date().getFullYear();
    addingVehicle.codeSeries.push({ years: `${startYear}-${endYear}`, series: '' });
    renderAddVehicleCodeSeriesList();
}

function removeAddVehicleCodeSeriesEntry(idx) {
    addingVehicle.codeSeries.splice(idx, 1);
    renderAddVehicleCodeSeriesList();
}

function updateAddVehicleCodeSeriesYears(idx, value) {
    if (addingVehicle.codeSeries[idx]) {
        addingVehicle.codeSeries[idx].years = value;
    }
}

function updateAddVehCSYearFields(idx) {
    var prefix = 'addVehCS' + idx;
    var sm = parseInt(document.getElementById(prefix + 'SM')?.value) || 0;
    var sy = document.getElementById(prefix + 'SY')?.value || '';
    var em = parseInt(document.getElementById(prefix + 'EM')?.value) || 0;
    var ey = document.getElementById(prefix + 'EY')?.value || '';
    if (addingVehicle.codeSeries[idx]) {
        addingVehicle.codeSeries[idx].years = buildCodeSeriesYears(sm, sy, em, ey);
    }
}

function onAddVehicleCodeSeriesEntryChange(idx, value) {
    if (value === '__add_new__') {
        const newCodeSeries = prompt('Enter new code series (e.g., 1001-4096):');
        if (newCodeSeries && newCodeSeries.trim()) {
            const cs = newCodeSeries.trim();
            if (!codeSeriesCache.includes(cs)) {
                codeSeriesCache.push(cs);
                codeSeriesCache.sort();
            }
            addingVehicle.codeSeries[idx].series = cs;
            renderAddVehicleCodeSeriesList();
        } else {
            renderAddVehicleCodeSeriesList();
        }
    } else {
        addingVehicle.codeSeries[idx].series = value || '';
    }
}

// Legacy function for backwards compatibility
function onAddSingleVehicleCodeSeriesChange(value) {
    if (value === '__add_new__') {
        const newCodeSeries = prompt('Enter new code series (e.g., 1001-4096):');
        if (newCodeSeries && newCodeSeries.trim()) {
            const cs = newCodeSeries.trim();
            if (!codeSeriesCache.includes(cs)) {
                codeSeriesCache.push(cs);
                codeSeriesCache.sort();
            }
            const startYear = document.getElementById('addVehStartYear').value || new Date().getFullYear();
            const endYear = document.getElementById('addVehEndYear').value || new Date().getFullYear();
            addingVehicle.codeSeries.push({ years: `${startYear}-${endYear}`, series: cs });
            renderAddVehicleCodeSeriesList();
        }
    } else if (value) {
        const startYear = document.getElementById('addVehStartYear').value || new Date().getFullYear();
        const endYear = document.getElementById('addVehEndYear').value || new Date().getFullYear();
        addingVehicle.codeSeries.push({ years: `${startYear}-${endYear}`, series: value });
        renderAddVehicleCodeSeriesList();
    }
}

function onAddVehicleMakeChange(value) {
    if (value === '__add_new__') {
        const newMake = prompt('Enter new make name:');
        if (newMake && newMake.trim()) {
            const make = newMake.trim();
            if (!vehicleMakesCache.includes(make)) {
                vehicleMakesCache.push(make);
                vehicleMakesCache.sort();
                vehicleModelsCache[make] = [];
            }
            addingVehicle.make = make;

            // Refresh make dropdown and select new make
            const makeSelect = document.getElementById('addVehMake');
            const makeOptions = vehicleMakesCache.map(m => `<option value="${m}"${m === make ? ' selected' : ''}>${m}</option>`).join('');
            makeSelect.innerHTML = `
                <option value="">Select Make...</option>
                ${makeOptions}
                <option value="__add_new__">+ Add New Make...</option>
            `;
            makeSelect.value = make;

            // Reset model dropdown for new make
            updateAddVehicleModelDropdown(make);
        } else {
            document.getElementById('addVehMake').value = addingVehicle.make || '';
        }
    } else {
        addingVehicle.make = value;
        addingVehicle.model = '';
        updateAddVehicleModelDropdown(value);
    }
}

function updateAddVehicleModelDropdown(make) {
    const modelSelect = document.getElementById('addVehModel');
    const models = vehicleModelsCache[make] || [];
    const modelOptions = models.map(m => `<option value="${m}">${m}</option>`).join('');
    modelSelect.innerHTML = `
        <option value="">Select Model...</option>
        ${modelOptions}
        <option value="__add_new__">+ Add New Model...</option>
    `;
}

function onAddVehicleModelChange(value) {
    const make = addingVehicle.make;
    if (value === '__add_new__') {
        if (!make) {
            alert('Please select a make first');
            document.getElementById('addVehModel').value = '';
            return;
        }
        const newModel = prompt(`Enter new model name for ${make}:`);
        if (newModel && newModel.trim()) {
            const model = newModel.trim();
            if (!vehicleModelsCache[make]) vehicleModelsCache[make] = [];
            if (!vehicleModelsCache[make].includes(model)) {
                vehicleModelsCache[make].push(model);
                vehicleModelsCache[make].sort();
            }
            addingVehicle.model = model;

            // Refresh model dropdown and select new model
            updateAddVehicleModelDropdown(make);
            document.getElementById('addVehModel').value = model;
        } else {
            document.getElementById('addVehModel').value = addingVehicle.model || '';
        }
    } else {
        addingVehicle.model = value;
    }
}

function saveAddSingleVehicle() {
    if (addingVehicleKeyIdx === null) return;

    const make = addingVehicle.make;
    const model = addingVehicle.model;
    const startYear = parseInt(document.getElementById('addVehStartYear').value);
    const endYear = parseInt(document.getElementById('addVehEndYear').value);
    const startMonth = parseInt(document.getElementById('addVehStartMonth').value) || 0;
    const endMonth = parseInt(document.getElementById('addVehEndMonth').value) || 0;

    // Filter out empty code series entries and use array format
    const codeSeries = (addingVehicle.codeSeries || []).filter(cs => cs.series && cs.series.trim());

    // Validate
    if (!make || !model) {
        alert('Please select a make and model');
        return;
    }
    if (!startYear || !endYear) {
        alert('Please enter start and end years');
        return;
    }
    if (startYear > endYear) {
        alert('Start year cannot be after end year');
        return;
    }

    const newVehicle = { make, model, startYear, endYear, startMonth: startMonth || undefined, endMonth: endMonth || undefined, codeSeries: codeSeries.length > 0 ? codeSeries : [] };

    // Check if this vehicle application already exists on this key
    const key = DB[addingVehicleKeyIdx];
    const alreadyOnThisKey = (key.vehicles || []).some(v =>
        v.make === make && v.model === model &&
        parseInt(v.startYear) === startYear && parseInt(v.endYear) === endYear
    );
    if (alreadyOnThisKey) {
        toast('This vehicle application already exists on this key');
        return;
    }

    // Check if this vehicle/year combo exists on OTHER keys
    const otherKeys = [];
    DB.forEach((k, idx) => {
        if (idx === addingVehicleKeyIdx) return;
        (k.vehicles || []).forEach(v => {
            if (v.make === make && v.model === model) {
                const exStart = parseInt(v.startYear) || 0;
                const exEnd = parseInt(v.endYear) || exStart;
                if (startYear <= exEnd && endYear >= exStart) {
                    otherKeys.push(String(k.pn));
                }
            }
        });
    });
    if (otherKeys.length > 0) {
        const uniquePNs = [...new Set(otherKeys)].join(', ');
        if (!confirm(`This vehicle application (${make} ${model} ${formatYearRange({startYear, endYear, startMonth, endMonth})}) already exists on key(s): ${uniquePNs}\n\nAdd it to this key too?`)) {
            return;
        }
    }

    // Get existing vehicles and add new one
    const existingVehicles = key.vehicles || [];
    const updatedVehicles = [...existingVehicles, newVehicle];

    // Update DB
    DB[addingVehicleKeyIdx].vehicles = updatedVehicles;

    if (key.isCustom) {
        // Save to customKeys for custom keys
        const customIdx = customKeys.findIndex(k => k.pn === key.pn);
        if (customIdx >= 0) {
            customKeys[customIdx].vehicles = updatedVehicles;
            saveCustomKeys();
        }
    } else {
        // Save to vehicleOverrides for base database keys
        vehicleOverrides[key.pn] = updatedVehicles;
        saveVehicleOverrides();
    }

    // Refresh the key detail view
    openKey(addingVehicleKeyIdx, cameFromFcc, cameFromFid);
    closeAddSingleVehicleModal();
    toast('Vehicle added');
    triggerAutoSync();
}

function renderVendorPrices(pn) {
    const prices = vendorPrices[pn] || {};
    const vendors = Object.keys(prices);
    
    if (vendors.length === 0) {
        return '<div style="color:var(--dim);text-align:center;padding:12px;">No pricing data. Add vendor pricing below.</div>';
    }
    
    return vendors.map(vendor => {
        const p = prices[vendor];
        const hasData = p.priceA || p.priceB || p.emergency || p.shell || p.oem;
        
        if (!hasData) return '';
        
        return `
            <div class="vendor-price-card">
                <div class="vendor-price-header">
                    <span class="vendor-name">${vendor}</span>
                    <button class="edit-prices-btn" onclick="openEditPricesModal('${pn}', '${vendor}')">Edit</button>
                </div>
                ${p.priceA ? `<div class="vendor-price-row"><span class="label">Price A</span><span class="value">$${p.priceA}</span></div>` : ''}
                ${p.priceB ? `<div class="vendor-price-row"><span class="label">Price B</span><span class="value">$${p.priceB}</span></div>` : ''}
                ${p.emergency ? `<div class="vendor-price-row"><span class="label">Emergency Key</span><span class="value">$${p.emergency}</span></div>` : ''}
                ${p.shell ? `<div class="vendor-price-row"><span class="label">Shell</span><span class="value">$${p.shell}</span></div>` : ''}
                ${p.oem ? `<div class="vendor-price-row"><span class="label">OEM</span><span class="value">$${p.oem}</span></div>` : ''}
            </div>
        `;
    }).join('');
}

function renderLishiContent(keyway, lishi) {
    if (!keyway) {
        return '<div style="color:var(--dim);text-align:center;padding:12px;">No keyway specified</div>';
    }
    
    if (lishi.tool) {
        const dirClass = lishi.direction === 'CCW' ? 'ccw' : 'cw';
        return `
            <div class="lishi-tool-display">
                <span class="lishi-tool-name">${lishi.tool}</span>
                <button class="lishi-direction ${dirClass}" onclick="toggleLishiDirection('${keyway}')">${lishi.direction || 'CW'}</button>
                <button style="margin-left:auto;background:none;border:1px solid var(--border);color:var(--dim);padding:6px 10px;border-radius:6px;cursor:pointer" onclick="editLishi('${keyway}')">Edit</button>
            </div>
        `;
    } else {
        return `
            <div style="text-align:center;">
                <button class="lishi-add-btn" onclick="addLishi('${keyway}')">+ Add Lishi Tool</button>
            </div>
        `;
    }
}

function addLishi(keyway) {
    const tool = prompt('Enter Lishi tool name (e.g., HU66, TOY43):');
    if (tool && tool.trim()) {
        lishiData[keyway] = { tool: tool.trim().toUpperCase(), direction: 'CW' };
        saveLishi();
        openKey(currentKeyIdx, cameFromFcc, cameFromFid);
        toast('Lishi tool added');
    }
}

function editLishi(keyway) {
    const current = lishiData[keyway]?.tool || '';
    const tool = prompt('Edit Lishi tool name:', current);
    if (tool === null) return;
    
    if (tool.trim() === '') {
        delete lishiData[keyway];
        toast('Lishi tool removed');
    } else {
        lishiData[keyway] = { ...lishiData[keyway], tool: tool.trim().toUpperCase() };
        toast('Lishi tool updated');
    }
    saveLishi();
    openKey(currentKeyIdx, cameFromFcc, cameFromFid);
}

function toggleLishiDirection(keyway) {
    if (!lishiData[keyway]) return;
    lishiData[keyway].direction = lishiData[keyway].direction === 'CW' ? 'CCW' : 'CW';
    saveLishi();
    openKey(currentKeyIdx, cameFromFcc, cameFromFid);
}

function closeDetail() {
    document.getElementById('detailPanel').classList.remove('on');

    if (cameFromVehicle) {
        // Return to vehicle detail page
        openVehicleDetail(cameFromVehicle);
        cameFromVehicle = null;
        return;
    }

    if (cameFromFcc && currentFccId) {
        openFccPage(currentFccId, cameFromFid);
    }

    cameFromFcc = false;
    currentKeyIdx = null;
}

function deletePartNumber(idx) {
    const key = DB[idx];
    if (!key) return;

    if (!confirm(`Delete part number ${key.pn}?\n\nThis will remove the key and all its associated data (stock, pricing, overrides).`)) return;

    const pn = String(key.pn);

    // Remove from DB
    DB.splice(idx, 1);

    // Remove from customKeys if it was custom
    const ckIdx = customKeys.findIndex(k => String(k.pn) === pn);
    if (ckIdx >= 0) customKeys.splice(ckIdx, 1);
    saveCustomKeys();

    // Clean up associated data
    delete stockData[pn];
    saveStock();
    delete vendorPrices[pn];
    saveVendorPrices();
    delete vehicleOverrides[pn];
    saveVehicleOverrides();
    delete keyInfoOverrides[pn];
    saveKeyInfoOverrides();
    delete keyRelationships[pn];
    saveKeyRelationships();

    // Remove from purchase history
    const beforePH = purchaseHistory.length;
    purchaseHistory = purchaseHistory.filter(p => String(p.partNumber) !== pn);
    if (purchaseHistory.length !== beforePH) savePurchaseHistory();

    // Save updated DB
    saveToIndexedDB('database', DB);

    // Close detail and refresh
    document.getElementById('detailPanel').classList.remove('on');
    currentKeyIdx = null;
    buildFilters();
    applyFilters();
    document.getElementById('totalCount').textContent = DB.length;
    toast(`Deleted ${pn}`);
}

// ===================== STOCK =====================
function adjustStock(pn, delta) {
    const current = stockData[pn] || 0;
    const newQty = Math.max(0, current + delta);
    stockData[pn] = newQty;
    saveStock();
    
    document.getElementById('stockQty').textContent = newQty;
    applyFilters();
}

// ===================== VENDOR PRICING MODALS =====================
function openEditPricesModal(pn, vendor) {
    editingPartNumber = pn;
    editingVendor = vendor;
    
    const prices = vendorPrices[pn]?.[vendor] || {};
    
    document.getElementById('editPricesVendor').textContent = vendor;
    document.getElementById('editPriceA').value = prices.priceA || '';
    document.getElementById('editPriceB').value = prices.priceB || '';
    document.getElementById('editEmergency').value = prices.emergency || '';
    document.getElementById('editShell').value = prices.shell || '';
    document.getElementById('editOem').value = prices.oem || '';
    
    document.getElementById('editPricesModal').classList.add('on');
}

function closeEditPricesModal() {
    document.getElementById('editPricesModal').classList.remove('on');
    editingPartNumber = null;
    editingVendor = null;
}

function savePrices() {
    if (!editingPartNumber || !editingVendor) return;
    
    if (!vendorPrices[editingPartNumber]) {
        vendorPrices[editingPartNumber] = {};
    }
    
    const priceA = document.getElementById('editPriceA').value.trim();
    const priceB = document.getElementById('editPriceB').value.trim();
    const emergency = document.getElementById('editEmergency').value.trim();
    const shell = document.getElementById('editShell').value.trim();
    const oem = document.getElementById('editOem').value.trim();
    
    // If all empty, remove the vendor entry
    if (!priceA && !priceB && !emergency && !shell && !oem) {
        delete vendorPrices[editingPartNumber][editingVendor];
    } else {
        vendorPrices[editingPartNumber][editingVendor] = {
            priceA, priceB, emergency, shell, oem
        };
    }
    
    saveVendorPrices();
    closeEditPricesModal();
    openKey(currentKeyIdx, cameFromFcc, cameFromFid);
    toast('Prices updated');
}

function openAddVendorPriceModal(pn) {
    editingPartNumber = pn;
    
    // Populate vendor dropdown with vendors that don't already have pricing for this key
    const existingVendors = Object.keys(vendorPrices[pn] || {});
    const availableVendors = getAllVendors().filter(v => !existingVendors.includes(v.name));
    
    const select = document.getElementById('selectVendorForPrice');
    select.innerHTML = availableVendors.length === 0 
        ? '<option value="">All vendors have pricing</option>'
        : availableVendors.map(v => `<option value="${v.name}">${v.name}</option>`).join('');
    
    document.getElementById('addPriceA').value = '';
    document.getElementById('addPriceB').value = '';
    document.getElementById('addEmergency').value = '';
    document.getElementById('addShell').value = '';
    document.getElementById('addOem').value = '';
    
    document.getElementById('addVendorPriceModal').classList.add('on');
}

function closeAddVendorPriceModal() {
    document.getElementById('addVendorPriceModal').classList.remove('on');
    editingPartNumber = null;
}

function saveNewVendorPrice() {
    const vendor = document.getElementById('selectVendorForPrice').value;
    if (!vendor || !editingPartNumber) {
        toast('Please select a vendor');
        return;
    }
    
    if (!vendorPrices[editingPartNumber]) {
        vendorPrices[editingPartNumber] = {};
    }
    
    vendorPrices[editingPartNumber][vendor] = {
        priceA: document.getElementById('addPriceA').value.trim(),
        priceB: document.getElementById('addPriceB').value.trim(),
        emergency: document.getElementById('addEmergency').value.trim(),
        shell: document.getElementById('addShell').value.trim(),
        oem: document.getElementById('addOem').value.trim()
    };
    
    saveVendorPrices();
    closeAddVendorPriceModal();
    openKey(currentKeyIdx, cameFromFcc, cameFromFid);
    toast('Vendor pricing added');
}

// ===================== VENDOR MANAGEMENT =====================
function renderVendorList() {
    const vendors = getAllVendors();
    
    document.getElementById('vendorList').innerHTML = vendors.map(v => `
        <div class="vendor-list-item ${v.default ? 'default' : ''}">
            <div>
                <div class="name">${v.name}</div>
                <div class="type">${v.type.charAt(0).toUpperCase() + v.type.slice(1)}${v.default ? '  Default' : ''}</div>
            </div>
            ${!v.default ? `<button class="remove-btn" onclick="removeVendor('${v.name}')">Remove</button>` : ''}
        </div>
    `).join('');
}

function openAddVendorModal() {
    document.getElementById('newVendorName').value = '';
    document.getElementById('newVendorType').value = 'distributor';
    document.getElementById('addVendorModal').classList.add('on');
}

function closeAddVendorModal() {
    document.getElementById('addVendorModal').classList.remove('on');
}

function addVendor() {
    const name = document.getElementById('newVendorName').value.trim();
    const type = document.getElementById('newVendorType').value;
    
    if (!name) {
        toast('Please enter a vendor name');
        return;
    }
    
    // Check if vendor already exists
    if (getAllVendors().some(v => v.name.toLowerCase() === name.toLowerCase())) {
        toast('Vendor already exists');
        return;
    }
    
    customVendors.push({ name, type, default: false });
    saveCustomVendors();
    
    closeAddVendorModal();
    renderVendorList();
    updateVendorCount();
    toast('Vendor added');
}

function removeVendor(name) {
    // Remove from custom vendors
    customVendors = customVendors.filter(v => v.name !== name);
    saveCustomVendors();
    
    // Remove pricing data for this vendor
    Object.keys(vendorPrices).forEach(pn => {
        delete vendorPrices[pn][name];
    });
    saveVendorPrices();
    
    renderVendorList();
    updateVendorCount();
    toast('Vendor removed');
}

// ===================== FCC PAGE =====================
function openFccPage(fccId, fromFid = false) {
    if (!fccId || fccId === 'N/A') return;
    
    currentFccId = fccId;
    cameFromFid = fromFid;
    
    const keys = DB.filter(k => k.fccid === fccId);
    
    document.getElementById('fccIdDisplay').textContent = fccId;
    document.getElementById('fccKeyCount').textContent = `${keys.length} key${keys.length !== 1 ? 's' : ''} with this FCC ID`;
    
    document.getElementById('fccKeysList').innerHTML = keys.map(key => {
        const idx = DB.indexOf(key);
        const stock = stockData[key.pn] || 0;
        
        return `
            <div class="fcc-key-item" onclick="openKey(${idx}, true, ${cameFromFid})">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                    <span style="font-size:18px;font-weight:700;color:var(--accent);font-family:monospace;">${key.pn}</span>
                    <span style="font-size:12px;padding:4px 8px;background:var(--accent2);color:white;border-radius:4px;">${key.keyType}</span>
                </div>
                <div style="font-size:13px;color:var(--dim);">
                    <span>Keyway: ${key.keyway || 'N/A'}</span>  
                    <span>Buttons: ${key.buttons || 'N/A'}</span>  
                    <span>Stock: ${stock}</span>
                </div>
            </div>
        `;
    }).join('');
    
    document.getElementById('fccPanel').classList.add('on');
}

function closeFcc() {
    document.getElementById('fccPanel').classList.remove('on');
    
    if (cameFromFid) {
        openFid();
    }
    
    cameFromFid = false;
    currentFccId = null;
}

// ===================== FID MANAGER =====================
// ===================== FID MANAGER =====================
let editingFccId = null;
let editingPrefixCode = null;

function openFid() {
    // Populate prefix filter dropdown
    const prefixFilter = document.getElementById('fidPrefixFilter');
    prefixFilter.innerHTML = '<option value="">All Groups</option>';
    Object.entries(fidPrefixes).sort((a, b) => a[0].localeCompare(b[0])).forEach(([code, data]) => {
        const opt = document.createElement('option');
        opt.value = code;
        opt.textContent = `${code}- (${data.name})`;
        prefixFilter.appendChild(opt);
    });
    
    renderFidList();
    document.getElementById('fidPanel').classList.add('on');
}

function renderFidList() {
    const fccMap = new Map();
    DB.forEach(key => {
        if (key.fccid) {
            if (!fccMap.has(key.fccid)) {
                fccMap.set(key.fccid, []);
            }
            fccMap.get(key.fccid).push(key);
        }
    });
    
    let fccList = Array.from(fccMap.entries());
    
    // Filter out merged FCC IDs (they'll be shown with their parent)
    fccList = fccList.filter(([fccId]) => !fidMerges[fccId]);
    
    // Sort by FID if assigned, then by FCC ID
    fccList.sort((a, b) => {
        const fidA = fidAssignments[a[0]] || '';
        const fidB = fidAssignments[b[0]] || '';
        if (fidA && fidB) {
            // Both have FIDs - sort by prefix then number
            const prefixA = fidA.split('-')[0];
            const prefixB = fidB.split('-')[0];
            if (prefixA !== prefixB) return prefixA.localeCompare(prefixB);
            const numA = parseInt(fidA.split('-')[1]) || 0;
            const numB = parseInt(fidB.split('-')[1]) || 0;
            return numA - numB;
        }
        if (fidA) return -1; // FID assigned comes first
        if (fidB) return 1;
        return a[0].localeCompare(b[0]); // Sort by FCC ID
    });
    
    document.getElementById('fidList').innerHTML = fccList.map(([fccId, keys]) => {
        const makes = [...new Set(keys.flatMap(k => (k.vehicles || []).map(v => v.make)))];
        const makesDisplay = makes.slice(0, 3).join(', ');
        const fid = fidAssignments[fccId];
        
        // Find merged FCC IDs
        const mergedFccs = Object.entries(fidMerges).filter(([src, tgt]) => tgt === fccId).map(([src]) => src);
        
        return `
            <div class="fid-card" data-fccid="${fccId}" data-fid="${fid || ''}" data-makes="${makes.join(',')}">
                <div class="fid-card-left">
                    <div>
                        ${fid 
                            ? `<div class="fid-number">${fid}</div>`
                            : `<div class="fid-number unassigned">No FID</div>`
                        }
                    </div>
                    <div class="fid-info">
                        <h4>${fccId}</h4>
                        ${mergedFccs.length > 0 ? `
                            <div style="font-size:11px;color:var(--accent);margin:4px 0;">
                                 Merged: ${mergedFccs.map(fc => `<span style="cursor:pointer;text-decoration:underline;" onclick="event.stopPropagation();openEditFidModal('${fc}')">${fc}</span>`).join(', ')}
                            </div>
                        ` : ''}
                        <p>${keys.length} key${keys.length !== 1 ? 's' : ''}  ${makesDisplay || 'Unknown'}</p>
                    </div>
                </div>
                <div class="fid-card-actions">
                    ${ENABLE_QUICK_MOVE_TO_GROUP ? `<select class="fid-btn" style="background:var(--bg);color:var(--text);border:1px solid var(--border);font-size:11px;padding:6px 8px;max-width:90px;" onchange="quickMoveToGroup('${fccId}', this.value); this.value='';" title="Move to group">
                        <option value="">Group</option>
                        ${Object.entries(fidPrefixes).map(([p, d]) => '<option value="' + p + '">' + p + ' - ' + d.name + '</option>').join('')}
                    </select>` : ''}
                    <button class="fid-btn" style="background:var(--bg);color:var(--text);border:1px solid var(--border);" onclick="openEditFidModal('${fccId}')">${fid ? 'Edit' : 'Assign'}</button>
                    <button class="fid-btn" onclick="openFccFromFid('${fccId}')">View </button>
                </div>
            </div>
        `;
    }).join('');
    
    // Apply current filters
    filterFids();
}

function openFccFromFid(fccId) {
    document.getElementById('fidPanel').classList.remove('on');
    openFccPage(fccId, true);
}

function quickMoveToGroup(fccId, newPrefix) {
    if (!newPrefix) return;
    const nextNum = getNextFidNumber(newPrefix);
    const newFid = newPrefix + '-' + formatFidNumber(nextNum);
    fidAssignments[fccId] = newFid;
    saveFidAssignments();
    renderFidList();
    toast('Moved to ' + newFid + ' (' + (fidPrefixes[newPrefix]?.name || newPrefix) + ')');
}

function filterFids() {
    const search = document.getElementById('fidSearch').value.toLowerCase();
    const prefixFilter = document.getElementById('fidPrefixFilter').value;
    const cards = document.querySelectorAll('#fidList .fid-card');
    
    cards.forEach(card => {
        const fccId = card.dataset.fccid.toLowerCase();
        const fid = card.dataset.fid.toLowerCase();
        const makes = card.dataset.makes.toLowerCase();
        
        let show = true;
        
        // Search filter
        if (search) {
            const matchesSearch = fccId.includes(search) || fid.includes(search) || makes.includes(search);
            if (!matchesSearch) show = false;
        }
        
        // Prefix filter
        if (prefixFilter && show) {
            if (!fid.startsWith(prefixFilter.toLowerCase() + '-')) {
                show = false;
            }
        }
        
        card.style.display = show ? '' : 'none';
    });
}

function closeFid() {
    document.getElementById('fidPanel').classList.remove('on');
}

// FID Assignment Functions
function getPrefixForMakes(makes) {
    for (const [prefix, data] of Object.entries(fidPrefixes)) {
        if (data.makes.some(m => makes.includes(m))) {
            return prefix;
        }
    }
    return 'OT'; // Other
}

function getNextFidNumber(prefix) {
    let maxNum = 0;
    Object.values(fidAssignments).forEach(fid => {
        if (fid && fid.startsWith(prefix + '-')) {
            const num = parseInt(fid.split('-')[1]) || 0;
            if (num > maxNum) maxNum = num;
        }
    });
    return maxNum + 1;
}

function formatFidNumber(num) {
    return String(num).padStart(3, '0');
}

function getKeyTypePriority(keyType) {
    // Priority order: 1=Non-chip, 2=Chip, 3=Fobik, 4=Remote Head/Flip/PEPS, 5=Proximity, 6=Remote Only
    const kt = (keyType || '').toLowerCase();

    // Remote only - last
    if (kt.includes('remote only') || kt === 'remote') {
        return 6;
    }
    // Proximity/Smart keys
    if (kt.includes('proximity') || kt.includes('smart') || kt.includes('prox')) {
        return 5;
    }
    // Remote Head, Flip, PEPS keys
    if (kt.includes('remote head') || kt.includes('flip') || kt.includes('peps')) {
        return 4;
    }
    // Fobik
    if (kt.includes('fobik')) {
        return 3;
    }
    // Chip/Transponder keys
    if (kt.includes('chip') || kt.includes('transponder') || kt.includes('vats')) {
        return 2;
    }
    // Non-chip keys - first
    return 1;
}

function naturalSortCompare(a, b) {
    const aParts = a.match(/(\d+|\D+)/g) || [];
    const bParts = b.match(/(\d+|\D+)/g) || [];
    for (let i = 0; i < Math.max(aParts.length, bParts.length); i++) {
        if (i >= aParts.length) return -1;
        if (i >= bParts.length) return 1;
        const aIsNum = /^\d+$/.test(aParts[i]);
        const bIsNum = /^\d+$/.test(bParts[i]);
        if (aIsNum && bIsNum) {
            const diff = parseInt(aParts[i]) - parseInt(bParts[i]);
            if (diff !== 0) return diff;
        } else {
            const cmp = aParts[i].localeCompare(bParts[i]);
            if (cmp !== 0) return cmp;
        }
    }
    return 0;
}

function autoAssignAllFids() {
    try {
        // Get all unique FCC IDs that don't have assignments
        const fccToAssign = [];
        const seenFcc = new Set();

        DB.forEach(key => {
            if (key.fccid && !seenFcc.has(key.fccid) && !fidAssignments[key.fccid]) {
                seenFcc.add(key.fccid);
                const makes = new Set();
                let keyType = key.keyType || '';
                DB.forEach(k => {
                    if (k.fccid === key.fccid) {
                        (k.vehicles || []).forEach(v => {
                            if (v.make) makes.add(v.make);
                        });
                        // Use the first non-empty key type found
                        if (!keyType && k.keyType) keyType = k.keyType;
                    }
                });
                fccToAssign.push({
                    fccid: key.fccid,
                    makes: Array.from(makes),
                    keyType: keyType,
                    priority: getKeyTypePriority(keyType)
                });
            }
        });

        if (fccToAssign.length === 0) {
            toast('All FCC IDs already have FID assignments');
            return;
        }

        // Sort by priority, then alphabetically by fccid with natural number ordering
        fccToAssign.sort((a, b) => a.priority - b.priority || naturalSortCompare(a.fccid, b.fccid));

        // Track the next number for each prefix during assignment
        const prefixCounters = {};

        // Initialize counters with existing max numbers
        Object.keys(fidPrefixes).forEach(prefix => {
            let maxNum = 0;
            Object.values(fidAssignments).forEach(fid => {
                if (fid && fid.startsWith(prefix + '-')) {
                    const num = parseInt(fid.split('-')[1]) || 0;
                    if (num > maxNum) maxNum = num;
                }
            });
            prefixCounters[prefix] = maxNum;
        });

        // Assign FIDs
        let assigned = 0;
        fccToAssign.forEach(item => {
            const prefix = getPrefixForMakes(item.makes);

            // Initialize counter if not exists
            if (prefixCounters[prefix] === undefined) {
                prefixCounters[prefix] = 0;
            }

            // Increment and use
            prefixCounters[prefix]++;
            fidAssignments[item.fccid] = prefix + '-' + formatFidNumber(prefixCounters[prefix]);
            assigned++;
        });

        saveFidAssignments();
        renderFidList();
        toast('Assigned ' + assigned + ' FID numbers');
    } catch (e) {
        console.error('Auto-assign error:', e);
        toast('Error: ' + e.message);
    }
}

function autoAssignFidForNewKey() {
    const fccId = document.getElementById('customKeyFCC').value.trim().toUpperCase();

    if (!fccId) {
        toast('Enter an FCC ID first');
        return;
    }

    // Check if this FCC ID already has an assignment
    if (fidAssignments[fccId]) {
        const existingFid = fidAssignments[fccId];
        document.getElementById('newKeyFidDisplay').textContent = ` Already assigned: ${existingFid}`;
        document.getElementById('newKeyFidDisplay').style.display = 'block';
        document.getElementById('newKeyFidDisplay').style.color = 'var(--accent)';
        toast('FCC ID already has FID: ' + existingFid);
        return;
    }

    // Get makes from the vehicles being added to this key
    const vehicleContainers = document.querySelectorAll('#customKeyVehicles .custom-vehicle-entry');
    const makes = new Set();
    vehicleContainers.forEach(container => {
        const makeSelect = container.querySelector('select[id^="customKeyMake"]');
        if (makeSelect && makeSelect.value) {
            makes.add(makeSelect.value);
        }
    });

    // Determine prefix based on makes
    const prefix = getPrefixForMakes(Array.from(makes));

    // Get next number for this prefix
    const nextNum = getNextFidNumber(prefix);
    const newFid = prefix + '-' + formatFidNumber(nextNum);

    // Assign and save
    fidAssignments[fccId] = newFid;
    saveFidAssignments();

    // Update display
    document.getElementById('newKeyFidDisplay').innerHTML = ` Assigned: <strong>${newFid}</strong>`;
    document.getElementById('newKeyFidDisplay').style.display = 'block';
    document.getElementById('newKeyFidDisplay').style.color = 'var(--green)';

    toast('Assigned FID: ' + newFid);
}

function openEditFidModal(fccId) {
    editingFccId = fccId;

    document.getElementById('editFidFccId').textContent = fccId;

    // Populate prefix dropdowns (both edit and move)
    const prefixSelect = document.getElementById('editFidPrefix');
    const movePrefixSelect = document.getElementById('moveFidPrefix');
    prefixSelect.innerHTML = '';
    movePrefixSelect.innerHTML = '';
    Object.entries(fidPrefixes).sort((a, b) => a[0].localeCompare(b[0])).forEach(([code, data]) => {
        const opt = document.createElement('option');
        opt.value = code;
        opt.textContent = code + '-';
        prefixSelect.appendChild(opt);
        movePrefixSelect.appendChild(opt.cloneNode(true));
    });

    // Set current values
    const currentFid = fidAssignments[fccId];
    if (currentFid) {
        const [prefix, num] = currentFid.split('-');
        prefixSelect.value = prefix;
        movePrefixSelect.value = prefix;
        document.getElementById('editFidNumber').value = num;
        document.getElementById('editFidCurrentFid').textContent = 'Current: ' + currentFid;
    } else {
        // Suggest prefix based on makes
        const makes = [];
        DB.forEach(key => {
            if (key.fccid === fccId) {
                (key.vehicles || []).forEach(v => {
                    if (v.make) makes.push(v.make);
                });
            }
        });
        const suggestedPrefix = getPrefixForMakes(makes);
        prefixSelect.value = suggestedPrefix;
        movePrefixSelect.value = suggestedPrefix;
        document.getElementById('editFidNumber').value = formatFidNumber(getNextFidNumber(suggestedPrefix));
        document.getElementById('editFidCurrentFid').textContent = 'No FID assigned yet';
    }

    // Reset move section
    document.getElementById('moveFidNumber').value = '';
    document.getElementById('moveOptionsPanel').style.display = 'none';

    // Populate merge target dropdown
    const mergeSelect = document.getElementById('mergeTargetFid');
    mergeSelect.innerHTML = '<option value="">Select a FID to merge into...</option>';
    
    // Get all assigned FIDs except the current one
    const assignedFids = [];
    Object.entries(fidAssignments).forEach(([fcc, fid]) => {
        if (fcc !== fccId && fid && !fidMerges[fcc]) {
            // Find what FCC IDs are already merged into this one
            const mergedInto = Object.entries(fidMerges).filter(([src, tgt]) => tgt === fcc).map(([src]) => src);
            assignedFids.push({ fccId: fcc, fid: fid, mergedFccs: mergedInto });
        }
    });
    
    assignedFids.sort((a, b) => {
        const prefixA = a.fid.split('-')[0];
        const prefixB = b.fid.split('-')[0];
        if (prefixA !== prefixB) return prefixA.localeCompare(prefixB);
        const numA = parseInt(a.fid.split('-')[1]) || 0;
        const numB = parseInt(b.fid.split('-')[1]) || 0;
        return numA - numB;
    });
    
    assignedFids.forEach(item => {
        const opt = document.createElement('option');
        opt.value = item.fccId;
        let label = item.fid + ' (' + item.fccId + ')';
        if (item.mergedFccs.length > 0) {
            label += ' [+' + item.mergedFccs.length + ' merged]';
        }
        opt.textContent = label;
        mergeSelect.appendChild(opt);
    });
    
    // Add change handler for merge dropdown
    mergeSelect.onchange = function() {
        const targetFcc = this.value;
        const mergeInfo = document.getElementById('mergeInfo');
        const mergeBtn = document.getElementById('mergeBtn');
        
        if (targetFcc) {
            const targetFid = fidAssignments[targetFcc];
            mergeInfo.innerHTML = 'This will merge <strong>' + fccId + '</strong> into <strong>' + targetFid + '</strong> (' + targetFcc + ').<br>Both FCC IDs will share the same FID number.';
            mergeInfo.style.display = 'block';
            mergeBtn.style.display = 'inline-block';
        } else {
            mergeInfo.style.display = 'none';
            mergeBtn.style.display = 'none';
        }
    };
    
    // Reset merge section
    mergeSelect.value = '';
    document.getElementById('mergeInfo').style.display = 'none';
    document.getElementById('mergeBtn').style.display = 'none';
    
    // Check if this FCC ID is already merged into another
    if (fidMerges[fccId]) {
        const targetFcc = fidMerges[fccId];
        const targetFid = fidAssignments[targetFcc];
        document.getElementById('mergeInfo').innerHTML = ' This FCC ID is currently merged into <strong>' + targetFid + '</strong> (' + targetFcc + ').<br><button onclick="unmergeFid(\'' + fccId + '\')" style="margin-top:8px;padding:6px 12px;background:#ff4444;color:white;border:none;border-radius:4px;cursor:pointer;">Unmerge</button>';
        document.getElementById('mergeInfo').style.display = 'block';
    }
    
    document.getElementById('editFidWarning').style.display = 'none';
    document.getElementById('editFidModal').classList.add('on');
}

function closeEditFidModal() {
    document.getElementById('editFidModal').classList.remove('on');
    editingFccId = null;
}

function saveFidEdit() {
    if (!editingFccId) return;
    
    const prefix = document.getElementById('editFidPrefix').value;
    const num = document.getElementById('editFidNumber').value.trim();
    
    if (!num) {
        document.getElementById('editFidWarning').textContent = 'Please enter a number';
        document.getElementById('editFidWarning').style.display = 'block';
        return;
    }
    
    const newFid = `${prefix}-${formatFidNumber(parseInt(num))}`;
    
    // Check for collision
    const existingFccId = Object.entries(fidAssignments).find(([fcc, fid]) => fid === newFid && fcc !== editingFccId);
    if (existingFccId) {
        document.getElementById('editFidWarning').textContent = `FID ${newFid} is already assigned to ${existingFccId[0]}`;
        document.getElementById('editFidWarning').style.display = 'block';
        return;
    }
    
    fidAssignments[editingFccId] = newFid;
    saveFidAssignments();
    closeEditFidModal();
    renderFidList();
    toast(`FID ${newFid} assigned`);
}

function removeFidAssignment() {
    if (!editingFccId) return;

    delete fidAssignments[editingFccId];
    saveFidAssignments();
    closeRemoveFidConfirm();
    closeEditFidModal();
    renderFidList();
    toast('FID removed (position left empty)');
}

function confirmRemoveFid() {
    if (!editingFccId) return;
    document.getElementById('removeFidFccId').textContent = editingFccId;
    document.getElementById('removeFidConfirmModal').classList.add('on');
}

function closeRemoveFidConfirm() {
    document.getElementById('removeFidConfirmModal').classList.remove('on');
}

function autoAssignNextFid() {
    const prefix = document.getElementById('editFidPrefix').value;
    const nextNum = getNextFidNumber(prefix);
    document.getElementById('editFidNumber').value = formatFidNumber(nextNum);
}

let pendingMoveTarget = null;
let pendingMoveConflictFcc = null;

function showMoveOptions() {
    const prefix = document.getElementById('moveFidPrefix').value;
    const numStr = document.getElementById('moveFidNumber').value.trim();

    if (!numStr) {
        toast('Enter a position number');
        return;
    }

    const num = parseInt(numStr);
    if (isNaN(num) || num < 1) {
        toast('Enter a valid position number');
        return;
    }

    const targetFid = `${prefix}-${formatFidNumber(num)}`;
    pendingMoveTarget = targetFid;

    // Check if this position is occupied
    const conflictEntry = Object.entries(fidAssignments).find(([fcc, fid]) => fid === targetFid && fcc !== editingFccId);

    if (conflictEntry) {
        pendingMoveConflictFcc = conflictEntry[0];
        document.getElementById('moveConflictInfo').innerHTML = `<strong>${targetFid}</strong> is currently assigned to <strong>${conflictEntry[0]}</strong>.<br>Choose how to handle this:`;
        document.getElementById('moveOptionsPanel').style.display = 'block';
    } else {
        // Position is free, just move directly
        fidAssignments[editingFccId] = targetFid;
        saveFidAssignments();
        closeEditFidModal();
        renderFidList();
        toast(`Moved to ${targetFid}`);
    }
}

function hideMoveOptions() {
    document.getElementById('moveOptionsPanel').style.display = 'none';
    pendingMoveTarget = null;
    pendingMoveConflictFcc = null;
}

function executeMoveSwap() {
    if (!editingFccId || !pendingMoveTarget || !pendingMoveConflictFcc) return;

    // Get current FID of the one we're editing
    const currentFid = fidAssignments[editingFccId];

    // Swap: give the conflict FCC our old position
    if (currentFid) {
        fidAssignments[pendingMoveConflictFcc] = currentFid;
    } else {
        // If we didn't have an FID, remove the conflict's assignment
        delete fidAssignments[pendingMoveConflictFcc];
    }

    // Move to the new position
    fidAssignments[editingFccId] = pendingMoveTarget;

    saveFidAssignments();
    closeEditFidModal();
    renderFidList();
    toast(`Swapped positions`);
}

function executeMoveShift() {
    if (!editingFccId || !pendingMoveTarget) return;

    const [targetPrefix, targetNumStr] = pendingMoveTarget.split('-');
    const targetNum = parseInt(targetNumStr);

    // Get all FIDs with this prefix that need to shift
    const toShift = [];
    Object.entries(fidAssignments).forEach(([fcc, fid]) => {
        if (fcc !== editingFccId && fid && fid.startsWith(targetPrefix + '-')) {
            const num = parseInt(fid.split('-')[1]);
            if (num >= targetNum) {
                toShift.push({ fcc, num });
            }
        }
    });

    // Sort by number descending so we shift from the end
    toShift.sort((a, b) => b.num - a.num);

    // Shift each one down by 1
    toShift.forEach(item => {
        fidAssignments[item.fcc] = `${targetPrefix}-${formatFidNumber(item.num + 1)}`;
    });

    // Assign the target position to our FCC
    fidAssignments[editingFccId] = pendingMoveTarget;

    saveFidAssignments();
    closeEditFidModal();
    renderFidList();
    toast(`Moved to ${pendingMoveTarget}, shifted ${toShift.length} others down`);
}

function mergeFids() {
    if (!editingFccId) return;
    
    const targetFccId = document.getElementById('mergeTargetFid').value;
    if (!targetFccId) {
        toast('Please select a target FID to merge into');
        return;
    }
    
    const targetFid = fidAssignments[targetFccId];
    
    // Set the merge relationship
    fidMerges[editingFccId] = targetFccId;
    
    // Remove the FID assignment from the source (it now inherits from target)
    delete fidAssignments[editingFccId];
    
    saveFidMerges();
    saveFidAssignments();
    closeEditFidModal();
    renderFidList();
    toast('Merged into ' + targetFid);
}

function unmergeFid(fccId) {
    if (!fccId || !fidMerges[fccId]) return;
    
    // Remove the merge relationship
    delete fidMerges[fccId];
    
    saveFidMerges();
    closeEditFidModal();
    renderFidList();
    toast('FCC ID unmerged');
}

// ===================== FID MANAGER =====================
let fidManagerSelectedFccs = new Set();

function openFidManager() {
    try {
        fidManagerSelectedFccs.clear();
        renderFidManagerStats();
        renderFidManagerList();
        populateFidManagerPrefixFilter();
        document.getElementById('fidManagerSearch').value = '';
        document.getElementById('fidManagerPrefixFilter').value = '';
        document.getElementById('fidBulkActions').style.display = 'none';
        document.getElementById('fidManagerPanel').classList.add('on');
    } catch (e) {
        console.error('Error opening FID Manager:', e);
        toast('Error opening FID Manager: ' + e.message);
    }
}

function closeFidManager() {
    document.getElementById('fidManagerPanel').classList.remove('on');
}

function renderFidManagerStats() {
    const totalFccs = new Set();
    DB.forEach(key => {
        if (key.fccid) totalFccs.add(key.fccid);
    });

    const assignedCount = Object.keys(fidAssignments).length;
    const unassignedCount = totalFccs.size - assignedCount;

    // Count by prefix
    const prefixCounts = {};
    Object.values(fidAssignments).forEach(fid => {
        if (fid) {
            const prefix = fid.split('-')[0];
            prefixCounts[prefix] = (prefixCounts[prefix] || 0) + 1;
        }
    });

    let statsHtml = `
        <div style="padding:12px;background:var(--accent);color:var(--bg);border-radius:8px;text-align:center;">
            <div style="font-size:24px;font-weight:700;">${assignedCount}</div>
            <div style="font-size:11px;opacity:0.8;">Assigned</div>
        </div>
        <div style="padding:12px;background:var(--accent2);color:var(--bg);border-radius:8px;text-align:center;">
            <div style="font-size:24px;font-weight:700;">${unassignedCount}</div>
            <div style="font-size:11px;opacity:0.8;">Unassigned</div>
        </div>
        <div style="padding:12px;background:var(--card);border:1px solid var(--border);border-radius:8px;text-align:center;">
            <div style="font-size:24px;font-weight:700;">${totalFccs.size}</div>
            <div style="font-size:11px;color:var(--dim);">Total FCCs</div>
        </div>
    `;

    document.getElementById('fidManagerStats').innerHTML = statsHtml;
}

function populateFidManagerPrefixFilter() {
    const select = document.getElementById('fidManagerPrefixFilter');
    select.innerHTML = '<option value="">All Prefixes</option>';
    Object.keys(fidPrefixes).sort().forEach(prefix => {
        select.innerHTML += `<option value="${prefix}">${prefix}-</option>`;
    });
}

function renderFidManagerList() {
    const container = document.getElementById('fidManagerList');
    const search = (document.getElementById('fidManagerSearch').value || '').toLowerCase();
    const prefixFilter = document.getElementById('fidManagerPrefixFilter').value;

    // Get all FCC IDs with their assignments
    const allFccs = [];
    const seenFcc = new Set();

    DB.forEach(key => {
        if (key.fccid && !seenFcc.has(key.fccid)) {
            seenFcc.add(key.fccid);
            const fid = fidAssignments[key.fccid] || null;
            const makes = new Set();
            DB.forEach(k => {
                if (k.fccid === key.fccid) {
                    (k.vehicles || []).forEach(v => {
                        if (v.make) makes.add(v.make);
                    });
                }
            });
            allFccs.push({
                fccid: key.fccid,
                fid: fid,
                makes: Array.from(makes).join(', '),
                keyType: key.keyType || ''
            });
        }
    });

    // Sort: assigned first by FID, then unassigned
    allFccs.sort((a, b) => {
        if (a.fid && !b.fid) return -1;
        if (!a.fid && b.fid) return 1;
        if (a.fid && b.fid) {
            const prefixA = a.fid.split('-')[0];
            const prefixB = b.fid.split('-')[0];
            if (prefixA !== prefixB) return prefixA.localeCompare(prefixB);
            const numA = parseInt(a.fid.split('-')[1]) || 0;
            const numB = parseInt(b.fid.split('-')[1]) || 0;
            return numA - numB;
        }
        return a.fccid.localeCompare(b.fccid);
    });

    // Filter
    const filtered = allFccs.filter(item => {
        if (search && !item.fccid.toLowerCase().includes(search) && !(item.fid || '').toLowerCase().includes(search)) {
            return false;
        }
        if (prefixFilter && (!item.fid || !item.fid.startsWith(prefixFilter + '-'))) {
            return false;
        }
        return true;
    });

    document.getElementById('fidManagerListCount').textContent = `(${filtered.length} of ${allFccs.length})`;

    if (filtered.length === 0) {
        container.innerHTML = '<div style="padding:20px;text-align:center;color:var(--dim);">No FCC IDs found</div>';
        return;
    }

    container.innerHTML = filtered.map(item => {
        const isSelected = fidManagerSelectedFccs.has(item.fccid);
        return `
            <div class="fid-manager-item" data-fccid="${item.fccid}" style="display:flex;align-items:center;gap:12px;padding:10px;background:var(--bg);border-radius:6px;margin-bottom:6px;cursor:pointer;" onclick="toggleFidManagerSelection('${item.fccid}')">
                <input type="checkbox" ${isSelected ? 'checked' : ''} onclick="event.stopPropagation(); toggleFidManagerSelection('${item.fccid}')" style="width:18px;height:18px;cursor:pointer;">
                <div style="flex:1;min-width:0;">
                    <div style="font-family:monospace;font-weight:600;color:var(--accent2);">${item.fccid}</div>
                    <div style="font-size:11px;color:var(--dim);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">${item.makes || 'Unknown'} ${item.keyType ? ' ' + item.keyType : ''}</div>
                </div>
                <div style="text-align:right;">
                    ${item.fid
                        ? `<span style="font-family:monospace;font-weight:600;color:var(--accent);background:rgba(0,212,255,0.1);padding:4px 8px;border-radius:4px;">${item.fid}</span>`
                        : `<span style="font-size:12px;color:var(--dim);font-style:italic;">Unassigned</span>`
                    }
                </div>
            </div>
        `;
    }).join('');
}

function filterFidManagerList() {
    renderFidManagerList();
}

function toggleFidManagerSelection(fccId) {
    if (fidManagerSelectedFccs.has(fccId)) {
        fidManagerSelectedFccs.delete(fccId);
    } else {
        fidManagerSelectedFccs.add(fccId);
    }
    updateFidManagerBulkUI();
    renderFidManagerList();
}

function updateFidManagerBulkUI() {
    const count = fidManagerSelectedFccs.size;
    document.getElementById('fidSelectedCount').textContent = count + ' selected';
    document.getElementById('fidBulkActions').style.display = count > 0 ? 'block' : 'none';
}

function fidManagerSelectAll() {
    const items = document.querySelectorAll('#fidManagerList .fid-manager-item');
    items.forEach(item => {
        const checkbox = item.querySelector('input[type="checkbox"]');
        if (checkbox) {
            const fccId = item.querySelector('div[style*="monospace"]').textContent;
            fidManagerSelectedFccs.add(fccId);
        }
    });
    updateFidManagerBulkUI();
    renderFidManagerList();
}

function fidManagerDeselectAll() {
    fidManagerSelectedFccs.clear();
    updateFidManagerBulkUI();
    renderFidManagerList();
}

function fidManagerAutoAssignAll() {
    autoAssignAllFids();
    renderFidManagerStats();
    renderFidManagerList();
}

function fidManagerReassignAll() {
    document.getElementById('fidReassignAllModal').classList.add('on');
}

function closeFidReassignAllModal() {
    document.getElementById('fidReassignAllModal').classList.remove('on');
}

function executeReassignAllFids() {
    // Clear all existing assignments
    Object.keys(fidAssignments).forEach(key => delete fidAssignments[key]);

    // Now auto-assign all with priority sorting
    const fccToAssign = [];
    const seenFcc = new Set();

    DB.forEach(key => {
        if (key.fccid && !seenFcc.has(key.fccid)) {
            seenFcc.add(key.fccid);
            const makes = new Set();
            let keyType = key.keyType || '';
            DB.forEach(k => {
                if (k.fccid === key.fccid) {
                    (k.vehicles || []).forEach(v => {
                        if (v.make) makes.add(v.make);
                    });
                    if (!keyType && k.keyType) keyType = k.keyType;
                }
            });
            fccToAssign.push({
                fccid: key.fccid,
                makes: Array.from(makes),
                keyType: keyType,
                priority: getKeyTypePriority(keyType)
            });
        }
    });

    // Sort by priority, then alphabetically by fccid with natural number ordering
    fccToAssign.sort((a, b) => a.priority - b.priority || naturalSortCompare(a.fccid, b.fccid));

    // Track counters per prefix
    const prefixCounters = {};

    fccToAssign.forEach(item => {
        const prefix = getPrefixForMakes(item.makes);
        if (prefixCounters[prefix] === undefined) {
            prefixCounters[prefix] = 0;
        }
        prefixCounters[prefix]++;
        fidAssignments[item.fccid] = prefix + '-' + formatFidNumber(prefixCounters[prefix]);
    });

    saveFidAssignments();
    closeFidReassignAllModal();
    renderFidManagerStats();
    renderFidManagerList();
    renderFidList();
    toast('Reassigned ' + fccToAssign.length + ' FIDs');
}

function fidManagerClearAll() {
    document.getElementById('fidClearAllModal').classList.add('on');
}

function closeFidClearAllModal() {
    document.getElementById('fidClearAllModal').classList.remove('on');
}

function executeClearAllFids() {
    const count = Object.keys(fidAssignments).length;
    Object.keys(fidAssignments).forEach(key => delete fidAssignments[key]);
    saveFidAssignments();
    closeFidClearAllModal();
    renderFidManagerStats();
    renderFidManagerList();
    renderFidList();
    toast('Removed ' + count + ' FID assignments');
}

function fidManagerBulkChangePrefix() {
    if (fidManagerSelectedFccs.size === 0) {
        toast('No FIDs selected');
        return;
    }

    // Populate prefix dropdown
    const select = document.getElementById('fidBulkNewPrefix');
    select.innerHTML = '';
    Object.keys(fidPrefixes).sort().forEach(prefix => {
        select.innerHTML += `<option value="${prefix}">${prefix}- (${fidPrefixes[prefix].name})</option>`;
    });

    document.getElementById('fidBulkPrefixModal').classList.add('on');
}

function closeFidBulkPrefixModal() {
    document.getElementById('fidBulkPrefixModal').classList.remove('on');
}

function executeBulkChangePrefix() {
    const newPrefix = document.getElementById('fidBulkNewPrefix').value;
    if (!newPrefix) {
        toast('Select a prefix');
        return;
    }

    // Get next available number for this prefix
    let maxNum = 0;
    Object.values(fidAssignments).forEach(fid => {
        if (fid && fid.startsWith(newPrefix + '-')) {
            const num = parseInt(fid.split('-')[1]) || 0;
            if (num > maxNum) maxNum = num;
        }
    });

    // Assign new FIDs to selected
    let changed = 0;
    fidManagerSelectedFccs.forEach(fccId => {
        maxNum++;
        fidAssignments[fccId] = newPrefix + '-' + formatFidNumber(maxNum);
        changed++;
    });

    saveFidAssignments();
    closeFidBulkPrefixModal();
    fidManagerSelectedFccs.clear();
    updateFidManagerBulkUI();
    renderFidManagerStats();
    renderFidManagerList();
    renderFidList();
    toast('Changed prefix for ' + changed + ' FIDs');
}

function fidManagerBulkShift() {
    if (fidManagerSelectedFccs.size === 0) {
        toast('No FIDs selected');
        return;
    }

    document.getElementById('fidShiftAmount').value = '0';
    document.getElementById('fidBulkShiftModal').classList.add('on');
}

function closeFidBulkShiftModal() {
    document.getElementById('fidBulkShiftModal').classList.remove('on');
}

function executeBulkShift() {
    const shiftAmount = parseInt(document.getElementById('fidShiftAmount').value) || 0;
    if (shiftAmount === 0) {
        toast('Enter a shift amount');
        return;
    }

    let shifted = 0;
    fidManagerSelectedFccs.forEach(fccId => {
        const currentFid = fidAssignments[fccId];
        if (currentFid) {
            const [prefix, numStr] = currentFid.split('-');
            const newNum = Math.max(1, parseInt(numStr) + shiftAmount);
            fidAssignments[fccId] = prefix + '-' + formatFidNumber(newNum);
            shifted++;
        }
    });

    saveFidAssignments();
    closeFidBulkShiftModal();
    fidManagerSelectedFccs.clear();
    updateFidManagerBulkUI();
    renderFidManagerStats();
    renderFidManagerList();
    renderFidList();
    toast('Shifted ' + shifted + ' FIDs by ' + shiftAmount);
}

function fidManagerBulkRemove() {
    if (fidManagerSelectedFccs.size === 0) {
        toast('No FIDs selected');
        return;
    }

    if (!confirm('Remove FID assignments for ' + fidManagerSelectedFccs.size + ' selected items?')) {
        return;
    }

    let removed = 0;
    fidManagerSelectedFccs.forEach(fccId => {
        if (fidAssignments[fccId]) {
            delete fidAssignments[fccId];
            removed++;
        }
    });

    saveFidAssignments();
    fidManagerSelectedFccs.clear();
    updateFidManagerBulkUI();
    renderFidManagerStats();
    renderFidManagerList();
    renderFidList();
    toast('Removed ' + removed + ' FID assignments');
}

// FID Drag and Drop Reorder
let fidDragModeActive = false;
let fidDragOrder = []; // Stores the current order of FCC IDs during drag mode
let fidDraggedItem = null;

function toggleFidDragMode() {
    if (fidDragModeActive) {
        cancelFidDragMode();
    } else {
        enableFidDragMode();
    }
}

function enableFidDragMode() {
    // Only allow drag mode when filtering by a specific prefix
    const prefixFilter = document.getElementById('fidManagerPrefixFilter').value;
    if (!prefixFilter) {
        toast('Select a prefix filter first to reorder within that prefix');
        return;
    }

    fidDragModeActive = true;
    document.getElementById('fidDragModeBtn').style.display = 'none';
    document.getElementById('fidDragModeBar').style.display = 'block';
    document.getElementById('fidBulkActions').style.display = 'none';

    // Build initial order from current list
    fidDragOrder = [];
    const container = document.getElementById('fidManagerList');
    container.querySelectorAll('.fid-manager-item').forEach(item => {
        const fccId = item.getAttribute('data-fccid');
        if (fccId) fidDragOrder.push(fccId);
    });

    renderFidDragList();
}

function cancelFidDragMode() {
    fidDragModeActive = false;
    fidDragOrder = [];
    document.getElementById('fidDragModeBtn').style.display = 'inline-block';
    document.getElementById('fidDragModeBar').style.display = 'none';
    renderFidManagerList();
}

function renderFidDragList() {
    const container = document.getElementById('fidManagerList');
    const prefixFilter = document.getElementById('fidManagerPrefixFilter').value;

    if (fidDragOrder.length === 0) {
        container.innerHTML = '<div style="padding:20px;text-align:center;color:var(--dim);">No items to reorder</div>';
        return;
    }

    container.innerHTML = fidDragOrder.map((fccId, index) => {
        const fid = fidAssignments[fccId];
        const key = DB.find(k => k.fccid === fccId);
        const keyType = key ? key.keyType || '' : '';

        return `
            <div class="fid-manager-item fid-drag-item"
                 data-fccid="${fccId}"
                 data-index="${index}"
                 draggable="true"
                 ondragstart="fidDragStart(event)"
                 ondragover="fidDragOver(event)"
                 ondragenter="fidDragEnter(event)"
                 ondragleave="fidDragLeave(event)"
                 ondrop="fidDrop(event)"
                 ondragend="fidDragEnd(event)"
                 style="display:flex;align-items:center;gap:12px;padding:10px;background:var(--bg);border-radius:6px;margin-bottom:6px;cursor:grab;border:2px solid transparent;transition:border-color 0.2s, background 0.2s;">
                <div style="color:var(--dim);font-size:16px;"></div>
                <div style="width:40px;text-align:center;font-weight:700;color:var(--accent);font-size:14px;">#${index + 1}</div>
                <div style="flex:1;min-width:0;">
                    <div style="font-family:monospace;font-weight:600;color:var(--accent2);">${fccId}</div>
                    <div style="font-size:11px;color:var(--dim);">${keyType || 'Unknown type'}</div>
                </div>
                <div style="text-align:right;">
                    ${fid
                        ? `<span style="font-family:monospace;font-weight:600;color:var(--accent);background:rgba(0,212,255,0.1);padding:4px 8px;border-radius:4px;">${fid}</span>`
                        : `<span style="font-size:12px;color:var(--dim);font-style:italic;">Unassigned</span>`
                    }
                </div>
            </div>
        `;
    }).join('');
}

function fidDragStart(e) {
    fidDraggedItem = e.target.closest('.fid-drag-item');
    fidDraggedItem.style.opacity = '0.5';
    e.dataTransfer.effectAllowed = 'move';
    e.dataTransfer.setData('text/plain', fidDraggedItem.getAttribute('data-index'));
}

function fidDragOver(e) {
    e.preventDefault();
    e.dataTransfer.dropEffect = 'move';
}

function fidDragEnter(e) {
    e.preventDefault();
    const item = e.target.closest('.fid-drag-item');
    if (item && item !== fidDraggedItem) {
        item.style.borderColor = 'var(--accent)';
        item.style.background = 'rgba(0,212,255,0.1)';
    }
}

function fidDragLeave(e) {
    const item = e.target.closest('.fid-drag-item');
    if (item) {
        item.style.borderColor = 'transparent';
        item.style.background = 'var(--bg)';
    }
}

function fidDrop(e) {
    e.preventDefault();
    const targetItem = e.target.closest('.fid-drag-item');
    if (!targetItem || !fidDraggedItem || targetItem === fidDraggedItem) return;

    const fromIndex = parseInt(fidDraggedItem.getAttribute('data-index'));
    const toIndex = parseInt(targetItem.getAttribute('data-index'));

    // Reorder the array
    const [moved] = fidDragOrder.splice(fromIndex, 1);
    fidDragOrder.splice(toIndex, 0, moved);

    // Re-render
    renderFidDragList();
}

function fidDragEnd(e) {
    if (fidDraggedItem) {
        fidDraggedItem.style.opacity = '1';
    }
    fidDraggedItem = null;

    // Reset all item styles
    document.querySelectorAll('.fid-drag-item').forEach(item => {
        item.style.borderColor = 'transparent';
        item.style.background = 'var(--bg)';
    });
}

function saveFidDragOrder() {
    const prefixFilter = document.getElementById('fidManagerPrefixFilter').value;
    if (!prefixFilter) {
        toast('No prefix selected');
        return;
    }

    // Reassign FID numbers based on new order
    fidDragOrder.forEach((fccId, index) => {
        const newNum = index + 1;
        fidAssignments[fccId] = `${prefixFilter}-${formatFidNumber(newNum)}`;
    });

    saveFidAssignments();

    // Exit drag mode
    fidDragModeActive = false;
    fidDragOrder = [];
    document.getElementById('fidDragModeBtn').style.display = 'inline-block';
    document.getElementById('fidDragModeBar').style.display = 'none';

    renderFidManagerStats();
    renderFidManagerList();
    renderFidList();
    toast('FID order saved');
}

// Prefix Management Functions
function openFidPrefixSettings() {
    renderPrefixList();
    document.getElementById('fidPrefixModal').classList.add('on');
}

function closeFidPrefixSettings() {
    document.getElementById('fidPrefixModal').classList.remove('on');
}

function renderPrefixList() {
    const prefixes = Object.entries(fidPrefixes).sort((a, b) => a[0].localeCompare(b[0]));
    
    document.getElementById('fidPrefixList').innerHTML = prefixes.map(([code, data]) => `
        <div class="fid-prefix-item">
            <div class="fid-prefix-header">
                <div>
                    <span class="fid-prefix-code">${code}-</span>
                    <span class="fid-prefix-name">${data.name}</span>
                </div>
                <div class="fid-prefix-actions">
                    <button class="fid-prefix-btn" onclick="editPrefix('${code}')">Edit</button>
                    <button class="fid-prefix-btn danger" onclick="deletePrefix('${code}')">Delete</button>
                </div>
            </div>
            <div class="fid-prefix-makes">Makes: ${data.makes.length > 0 ? data.makes.join(', ') : 'None (catch-all)'}</div>
        </div>
    `).join('');
}

function openAddPrefixModal() {
    editingPrefixCode = null;
    document.getElementById('addPrefixModalTitle').textContent = 'Add Prefix Group';
    document.getElementById('prefixCode').value = '';
    document.getElementById('prefixCode').disabled = false;
    document.getElementById('prefixName').value = '';
    document.getElementById('prefixMakes').value = '';
    document.getElementById('addPrefixModal').classList.add('on');
}

function editPrefix(code) {
    editingPrefixCode = code;
    const data = fidPrefixes[code];
    
    document.getElementById('addPrefixModalTitle').textContent = 'Edit Prefix Group';
    document.getElementById('prefixCode').value = code;
    document.getElementById('prefixCode').disabled = true;
    document.getElementById('prefixName').value = data.name;
    document.getElementById('prefixMakes').value = data.makes.join(', ');
    document.getElementById('addPrefixModal').classList.add('on');
}

function closeAddPrefixModal() {
    document.getElementById('addPrefixModal').classList.remove('on');
    editingPrefixCode = null;
}

function savePrefix() {
    const code = document.getElementById('prefixCode').value.trim().toUpperCase();
    const name = document.getElementById('prefixName').value.trim();
    const makes = document.getElementById('prefixMakes').value.split(',').map(m => m.trim()).filter(m => m);
    
    if (!code) {
        toast('Please enter a prefix code');
        return;
    }
    
    if (!name) {
        toast('Please enter a group name');
        return;
    }
    
    // Check for duplicate if adding new
    if (!editingPrefixCode && fidPrefixes[code]) {
        toast('Prefix already exists');
        return;
    }
    
    fidPrefixes[code] = { name, makes };
    saveFidPrefixes();
    closeAddPrefixModal();
    renderPrefixList();
    toast(editingPrefixCode ? 'Prefix updated' : 'Prefix added');
}

function deletePrefix(code) {
    // Check if any FIDs use this prefix
    const usedCount = Object.values(fidAssignments).filter(fid => fid && fid.startsWith(code + '-')).length;
    
    if (usedCount > 0) {
        toast('Warning: ' + usedCount + ' FIDs use this prefix. They will keep their assignments.');
    }
    
    delete fidPrefixes[code];
    saveFidPrefixes();
    renderPrefixList();
    toast('Prefix deleted');
}

// ===================== SETTINGS =====================
function showTab(tab, event) {
    document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
    if (event && event.target) {
        event.target.closest('.nav-btn').classList.add('active');
    } else {
        // Fallback: activate the correct nav button based on tab name
        const navBtns = document.querySelectorAll('.nav-btn');
        const tabIndex = {'keys': 0, 'vehicle': 1, 'tools': 2, 'fid': 3, 'settings': 4};
        if (navBtns[tabIndex[tab]]) {
            navBtns[tabIndex[tab]].classList.add('active');
        }
    }

    if (tab === 'keys') {
        // Close all panels to return to main key list
        document.getElementById('settingsPanel').classList.remove('on');
        document.getElementById('lishiLookupPanel').classList.remove('on');
        document.getElementById('fidPanel').classList.remove('on');
        document.getElementById('addInventoryPanel').classList.remove('on');
        document.getElementById('vehiclePanel').classList.remove('on');
        document.getElementById('vehicleDetailPanel').classList.remove('on');
        document.getElementById('detailPanel').classList.remove('on');
    } else if (tab === 'vehicle') {
        openVehiclePanel();
    } else if (tab === 'tools') {
        openToolsPanel();
    } else if (tab === 'fid') {
        openFid();
    } else if (tab === 'settings') {
        renderVendorList();
        renderLishiInventory();
        renderCustomKeysList();
        renderCategoryList();
        renderSettingsPlatformList();
        // Update tool stats
        document.getElementById('aboutTools').textContent = Object.keys(toolsDatabase.tools).length;
        document.getElementById('aboutPlatforms').textContent = Object.keys(toolsDatabase.platforms).length;
        document.getElementById('settingsPanel').classList.add('on');
    }
}

function goHome() {
    // Close all panels and modals
    document.getElementById('settingsPanel').classList.remove('on');
    document.getElementById('lishiLookupPanel').classList.remove('on');
    document.getElementById('lishiDetailPanel').classList.remove('on');
    document.getElementById('fidPanel').classList.remove('on');
    document.getElementById('fidManagerPanel').classList.remove('on');
    document.getElementById('addInventoryPanel').classList.remove('on');
    document.getElementById('purchaseHistoryPanel').classList.remove('on');
    document.getElementById('addCustomKeyPanel').classList.remove('on');
    document.getElementById('vehiclePanel').classList.remove('on');
    document.getElementById('vehicleModelsPanel').classList.remove('on');
    document.getElementById('vehicleKeyTypePanel').classList.remove('on');
    document.getElementById('vehicleYearsPanel').classList.remove('on');
    document.getElementById('vehicleDetailPanel').classList.remove('on');
    document.getElementById('detailPanel').classList.remove('on');
    document.getElementById('renameModelModal').classList.remove('on');
    document.getElementById('incompleteVehiclesPanel').classList.remove('on');
    // Close tools panels
    document.getElementById('toolsPanel').classList.remove('on');
    document.getElementById('programmersPanel').classList.remove('on');
    document.getElementById('platformMgmtPanel').classList.remove('on');
    document.getElementById('toolDetailPanel').classList.remove('on');
    document.getElementById('addToolPanel').classList.remove('on');
    document.getElementById('addPlatformModal').classList.remove('on');
    document.getElementById('addCategoryModal').classList.remove('on');
    document.getElementById('wishlistPanel').classList.remove('on');
    document.getElementById('codeSeriesSettingsPanel').classList.remove('on');
    document.getElementById('editCodeSeriesModal').classList.remove('on');
    document.getElementById('codeSeriesUsagesModal').classList.remove('on');
    // Close settings sub-panels
    document.getElementById('lishiSettingsPanel').classList.remove('on');
    document.getElementById('vendorsSettingsPanel').classList.remove('on');
    document.getElementById('customKeysSettingsPanel').classList.remove('on');
    document.getElementById('categoriesSettingsPanel').classList.remove('on');
    document.getElementById('platformsSettingsPanel').classList.remove('on');
    document.getElementById('settingsAddToolPanel').classList.remove('on');
    document.getElementById('dropdownDataPanel').classList.remove('on');
    document.getElementById('fccPanel').classList.remove('on');

    // Reset vehicle state
    selectedVehicleMake = null;
    selectedVehicleModel = null;
    selectedVehicleKeyType = null;
    cameFromVehicle = null;
    currentViewingVehicleKey = null;

    // Reset nav buttons to show Keys as active
    document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
    const navBtns = document.querySelectorAll('.nav-btn');
    if (navBtns[0]) {
        navBtns[0].classList.add('active');
    }
}

// ===================== TOOLS & EQUIPMENT MODULE =====================

// Tools Database Structure
let toolsDatabase = {"categories":["Programmers","Cables","Adapters","EEPROM Clamps","Pin Readers"],"platforms":{"platform-1770141416655":{"manufacturer":"Autel","name":"Autel","tools":[]},"platform-1770141401771":{"manufacturer":"OBDstar","name":"OBDstar","tools":[]},"platform-1770444219058":{"manufacturer":"Xhorse","name":"Xhorse","tools":[]}},"tools":{}};

// Tools State Variables
let currentPlatformFilter = 'all';
let currentCategoryFilter = 'all';
let currentStatusFilter = 'all';
let editingToolId = null;
let editingPlatformId = null;
let currentViewingToolId = null;
let toolVehicleAppCount = 0;

// Save Tools to IndexedDB
function saveToolsDatabase() {
    saveToIndexedDB('toolsDatabase', toolsDatabase);
}

// Load Tools from IndexedDB (called in loadLocalData)
async function loadToolsDatabase() {
    try {
        const saved = await loadFromIndexedDB('toolsDatabase');
        if (saved) {
            toolsDatabase = saved;
            // Ensure structure integrity
            if (!toolsDatabase.platforms) toolsDatabase.platforms = {};
            if (!toolsDatabase.tools) toolsDatabase.tools = {};
            if (!toolsDatabase.categories) {
                toolsDatabase.categories = ["Programmers", "Cables", "Adapters", "EEPROM Clamps", "Pin Readers"];
            }
        }
    } catch (e) {
        console.error('Error loading tools database:', e);
    }
}

// Open Tools Panel
function openToolsPanel() {
    updateIncompleteVehiclesBadge();
    document.getElementById('toolsPanel').classList.add('on');
}

function closeToolsPanel() {
    document.getElementById('toolsPanel').classList.remove('on');
    document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelector('.nav-btn').classList.add('active');
}

// Open Programmers Panel
function openProgrammersPanel() {
    renderPlatformTabs();
    renderCategoryFilters();
    renderToolsList();
    document.getElementById('programmersPanel').classList.add('on');
}

function closeProgrammersPanel() {
    document.getElementById('programmersPanel').classList.remove('on');
}

// Platform Management
function openPlatformMgmt() {
    renderPlatformList();
    document.getElementById('platformMgmtPanel').classList.add('on');
}

function closePlatformMgmt() {
    document.getElementById('platformMgmtPanel').classList.remove('on');
}

function openAddPlatformModal(platformId = null) {
    editingPlatformId = platformId;
    if (platformId && toolsDatabase.platforms[platformId]) {
        const platform = toolsDatabase.platforms[platformId];
        document.getElementById('addPlatformModalTitle').textContent = 'Edit Platform';
        document.getElementById('platformFormName').value = platform.name;
    } else {
        document.getElementById('addPlatformModalTitle').textContent = 'Add Platform';
        document.getElementById('platformFormName').value = '';
    }
    document.getElementById('addPlatformModal').classList.add('on');
}

function closeAddPlatformModal() {
    document.getElementById('addPlatformModal').classList.remove('on');
    editingPlatformId = null;
}

function savePlatformForm() {
    const name = document.getElementById('platformFormName').value.trim();

    if (!name) {
        toast('Please enter a platform name');
        return;
    }

    const platformId = editingPlatformId || 'platform-' + Date.now();

    toolsDatabase.platforms[platformId] = {
        name: name,
        manufacturer: name, // For backwards compatibility
        tools: toolsDatabase.platforms[platformId]?.tools || []
    };

    saveToolsDatabase();
    closeAddPlatformModal();
    renderPlatformList();
    renderSettingsPlatformList();
    renderPlatformTabs();
    toast(editingPlatformId ? 'Platform updated' : 'Platform added');
}

function deletePlatform(platformId) {
    if (!confirm('Delete this platform? Tools will remain but lose this platform association.')) return;

    // Remove platform from tools' compatiblePlatforms
    Object.keys(toolsDatabase.tools).forEach(toolId => {
        const tool = toolsDatabase.tools[toolId];
        const idx = tool.compatiblePlatforms.indexOf(platformId);
        if (idx > -1) {
            tool.compatiblePlatforms.splice(idx, 1);
        }
    });

    delete toolsDatabase.platforms[platformId];
    saveToolsDatabase();
    renderPlatformList();
    renderSettingsPlatformList();
    renderPlatformTabs();
    toast('Platform deleted');
}

function renderPlatformList() {
    const container = document.getElementById('platformList');
    const platformIds = Object.keys(toolsDatabase.platforms);

    if (platformIds.length === 0) {
        container.innerHTML = '<div style="text-align:center;color:var(--dim);padding:40px;">No platforms yet. Add your first platform!</div>';
        return;
    }

    container.innerHTML = platformIds.map(id => {
        const platform = toolsDatabase.platforms[id];
        const toolCount = Object.values(toolsDatabase.tools).filter(t =>
            t.compatiblePlatforms.includes(id)
        ).length;

        return `
            <div class="platform-card">
                <div class="platform-card-info">
                    <div class="platform-card-name">${platform.name}</div>
                    <div class="platform-card-count">${toolCount} tool${toolCount !== 1 ? 's' : ''}</div>
                </div>
                <div class="platform-card-actions">
                    <button class="platform-action-btn" onclick="openAddPlatformModal('${id}')">Edit</button>
                    <button class="platform-action-btn delete" onclick="deletePlatform('${id}')">Delete</button>
                </div>
            </div>
        `;
    }).join('');
}

function renderPlatformTabs() {
    const container = document.getElementById('platformTabs');
    const platformIds = Object.keys(toolsDatabase.platforms);

    let html = `<button class="platform-tab ${currentPlatformFilter === 'all' ? 'active' : ''}" data-platform="all" onclick="selectPlatformFilter('all')">All Platforms</button>`;

    platformIds.forEach(id => {
        const platform = toolsDatabase.platforms[id];
        html += `<button class="platform-tab ${currentPlatformFilter === id ? 'active' : ''}" data-platform="${id}" onclick="selectPlatformFilter('${id}')">${platform.name}</button>`;
    });

    container.innerHTML = html;
}

// Category Management
let editingCategoryIndex = null;

function openAddCategoryModal(categoryIndex = null) {
    editingCategoryIndex = categoryIndex;
    if (categoryIndex !== null && toolsDatabase.categories[categoryIndex]) {
        document.getElementById('addCategoryModalTitle').textContent = 'Edit Category';
        document.getElementById('categoryFormName').value = toolsDatabase.categories[categoryIndex];
    } else {
        document.getElementById('addCategoryModalTitle').textContent = 'Add Category';
        document.getElementById('categoryFormName').value = '';
    }
    document.getElementById('addCategoryModal').classList.add('on');
}

function closeAddCategoryModal() {
    document.getElementById('addCategoryModal').classList.remove('on');
    editingCategoryIndex = null;
}

function saveCategoryForm() {
    const name = document.getElementById('categoryFormName').value.trim();

    if (!name) {
        toast('Please enter a category name');
        return;
    }

    // Check for duplicates
    const existingIndex = toolsDatabase.categories.findIndex(c => c.toLowerCase() === name.toLowerCase());
    if (existingIndex !== -1 && existingIndex !== editingCategoryIndex) {
        toast('Category already exists');
        return;
    }

    if (editingCategoryIndex !== null) {
        // Update existing category name in tools
        const oldCategory = toolsDatabase.categories[editingCategoryIndex];
        Object.values(toolsDatabase.tools).forEach(tool => {
            if (tool.category === oldCategory) {
                tool.category = name;
            }
        });
        toolsDatabase.categories[editingCategoryIndex] = name;
        toast('Category updated');
    } else {
        toolsDatabase.categories.push(name);
        toast('Category added');
    }

    saveToolsDatabase();
    closeAddCategoryModal();
    renderCategoryList();
    renderCategoryFilters();
    populateCategorySelect();
}

function deleteCategory(categoryIndex) {
    const category = toolsDatabase.categories[categoryIndex];
    const toolCount = Object.values(toolsDatabase.tools).filter(t => t.category === category).length;

    if (toolCount > 0) {
        if (!confirm(`Delete "${category}"? ${toolCount} tool(s) use this category and will need to be recategorized.`)) return;
    } else {
        if (!confirm(`Delete "${category}"?`)) return;
    }

    // Remove category from tools (set to empty)
    Object.values(toolsDatabase.tools).forEach(tool => {
        if (tool.category === category) {
            tool.category = '';
        }
    });

    toolsDatabase.categories.splice(categoryIndex, 1);
    saveToolsDatabase();
    renderCategoryList();
    renderCategoryFilters();
    populateCategorySelect();
    toast('Category deleted');
}

function renderCategoryList() {
    const container = document.getElementById('categoryList');
    if (!container) return;

    if (toolsDatabase.categories.length === 0) {
        container.innerHTML = '<div style="text-align:center;color:var(--dim);padding:20px;">No categories yet.</div>';
        return;
    }

    container.innerHTML = toolsDatabase.categories.map((category, idx) => {
        const toolCount = Object.values(toolsDatabase.tools).filter(t => t.category === category).length;
        return `
            <div class="platform-card">
                <div class="platform-card-info">
                    <div class="platform-card-name">${category}</div>
                    <div class="platform-card-count">${toolCount} tool${toolCount !== 1 ? 's' : ''}</div>
                </div>
                <div class="platform-card-actions">
                    <button class="platform-action-btn" onclick="openAddCategoryModal(${idx})">Edit</button>
                    <button class="platform-action-btn delete" onclick="deleteCategory(${idx})">Delete</button>
                </div>
            </div>
        `;
    }).join('');
}

function renderSettingsPlatformList() {
    const container = document.getElementById('settingsPlatformList');
    if (!container) return;

    const platformIds = Object.keys(toolsDatabase.platforms);

    if (platformIds.length === 0) {
        container.innerHTML = '<div style="text-align:center;color:var(--dim);padding:20px;">No platforms yet.</div>';
        return;
    }

    container.innerHTML = platformIds.map(id => {
        const platform = toolsDatabase.platforms[id];
        const toolCount = Object.values(toolsDatabase.tools).filter(t =>
            t.compatiblePlatforms.includes(id)
        ).length;

        return `
            <div class="platform-card">
                <div class="platform-card-info">
                    <div class="platform-card-name">${platform.name}</div>
                    <div class="platform-card-count">${toolCount} tool${toolCount !== 1 ? 's' : ''}</div>
                </div>
                <div class="platform-card-actions">
                    <button class="platform-action-btn" onclick="openAddPlatformModal('${id}')">Edit</button>
                    <button class="platform-action-btn delete" onclick="deletePlatform('${id}')">Delete</button>
                </div>
            </div>
        `;
    }).join('');
}

function renderCategoryFilters() {
    const container = document.getElementById('categoryFilters');
    if (!container) return;

    let html = `<button class="filter-chip ${currentCategoryFilter === 'all' ? 'active' : ''}" data-category="all" onclick="selectCategoryFilter('all')">All</button>`;

    toolsDatabase.categories.forEach(category => {
        html += `<button class="filter-chip ${currentCategoryFilter === category ? 'active' : ''}" data-category="${category}" onclick="selectCategoryFilter('${category}')">${category}</button>`;
    });

    container.innerHTML = html;
}

function populateCategorySelect() {
    const select = document.getElementById('toolFormCategory');
    if (!select) return;

    const currentValue = select.value;
    select.innerHTML = '<option value="">Select category...</option>';

    toolsDatabase.categories.forEach(category => {
        select.innerHTML += `<option value="${category}">${category}</option>`;
    });

    // Restore previous selection if it still exists
    if (currentValue && toolsDatabase.categories.includes(currentValue)) {
        select.value = currentValue;
    }
}

// Filter Functions
function selectPlatformFilter(platformId) {
    currentPlatformFilter = platformId;
    document.querySelectorAll('.platform-tab').forEach(tab => {
        tab.classList.toggle('active', tab.dataset.platform === platformId);
    });
    renderToolsList();
}

function selectCategoryFilter(category) {
    currentCategoryFilter = category;
    document.querySelectorAll('.filter-chip[data-category]').forEach(chip => {
        chip.classList.toggle('active', chip.dataset.category === category);
    });
    renderToolsList();
}

function selectStatusFilter(status) {
    currentStatusFilter = status;
    document.querySelectorAll('.filter-chip[data-status]').forEach(chip => {
        chip.classList.toggle('active', chip.dataset.status === status);
    });
    renderToolsList();
}

// Render Tools List
function renderToolsList() {
    const container = document.getElementById('toolsList');
    const toolIds = Object.keys(toolsDatabase.tools);

    // Filter tools
    const filteredTools = toolIds.filter(id => {
        const tool = toolsDatabase.tools[id];

        // Platform filter
        if (currentPlatformFilter !== 'all') {
            if (!tool.compatiblePlatforms.includes(currentPlatformFilter)) return false;
        }

        // Category filter
        if (currentCategoryFilter !== 'all') {
            if (tool.category !== currentCategoryFilter) return false;
        }

        // Status filter
        if (currentStatusFilter !== 'all') {
            if (tool.status !== currentStatusFilter) return false;
        }

        return true;
    });

    if (filteredTools.length === 0) {
        container.innerHTML = '<div style="text-align:center;color:var(--dim);padding:40px;">No tools match your filters</div>';
        return;
    }

    container.innerHTML = filteredTools.map(id => {
        const tool = toolsDatabase.tools[id];
        const statusClass = tool.status === 'owned' ? 'owned' : (tool.status === 'wishlist' ? 'wishlist' : 'not-owned');
        const statusText = tool.status === 'owned' ? ' Owned' : (tool.status === 'wishlist' ? ' Wishlist' : ' Not Owned');

        const platformBadges = tool.compatiblePlatforms.map(pid => {
            const platform = toolsDatabase.platforms[pid];
            return platform ? `<span class="platform-badge">${platform.name}</span>` : '';
        }).join('');

        const vehicleCount = tool.vehicleApplications ? tool.vehicleApplications.length : 0;

        return `
            <div class="tool-card" onclick="openToolDetail('${id}')">
                <div class="tool-card-header">
                    <div>
                        <div class="tool-card-name">${tool.name}</div>
                        ${tool.partNumber ? `<div class="tool-card-pn">#${tool.partNumber}</div>` : ''}
                    </div>
                    <span class="tool-status-badge ${statusClass}">${statusText}</span>
                </div>
                <div class="tool-card-platforms">${platformBadges || '<span style="color:var(--dim);font-size:11px;">No platform assigned</span>'}</div>
                <div class="tool-card-meta">
                    <span>${tool.category}</span>
                    <span>${vehicleCount} vehicle${vehicleCount !== 1 ? 's' : ''}</span>
                </div>
            </div>
        `;
    }).join('');
}

// Tool Detail Panel
function openToolDetail(toolId) {
    currentViewingToolId = toolId;
    const tool = toolsDatabase.tools[toolId];
    if (!tool) return;

    document.getElementById('toolDetailTitle').textContent = tool.name;

    const statusClass = tool.status === 'owned' ? 'owned' : (tool.status === 'wishlist' ? 'wishlist' : 'not-owned');

    let html = '';

    // Status Section
    html += `
        <div class="tool-detail-section">
            <h3> Status</h3>
            <div class="tool-status-toggle">
                <button class="tool-status-toggle-btn ${tool.status === 'owned' ? 'active' : ''}" onclick="setToolStatus('${toolId}', 'owned')"> Owned</button>
                <button class="tool-status-toggle-btn wishlist ${tool.status === 'wishlist' ? 'active' : ''}" onclick="setToolStatus('${toolId}', 'wishlist')"> Wishlist</button>
                <button class="tool-status-toggle-btn not-owned ${tool.status === 'not-owned' ? 'active' : ''}" onclick="setToolStatus('${toolId}', 'not-owned')"> Not Owned</button>
            </div>
        </div>
    `;

    // Basic Info Section
    html += `
        <div class="tool-detail-section">
            <h3> Basic Information</h3>
            ${tool.partNumber ? `<div style="margin-bottom:8px;"><span style="color:var(--dim);">Part Number:</span> ${tool.partNumber}</div>` : ''}
            <div style="margin-bottom:8px;"><span style="color:var(--dim);">Category:</span> ${tool.category}</div>
            <div><span style="color:var(--dim);">Compatibility:</span> ${tool.platformCompatibility === 'multiple' ? 'Cross-compatible' : 'Single platform'}</div>
        </div>
    `;

    // Platforms Section
    html += `
        <div class="tool-detail-section">
            <h3> Compatible Platforms</h3>
            <div class="tool-platforms-list">
                ${tool.compatiblePlatforms.map(pid => {
                    const platform = toolsDatabase.platforms[pid];
                    return platform ? `<div class="tool-platform-item">${platform.name}<br><span style="font-size:11px;color:var(--dim);">${platform.manufacturer}</span></div>` : '';
                }).join('') || '<span style="color:var(--dim);">No platforms assigned</span>'}
            </div>
        </div>
    `;

    // Job Types Section
    if (tool.jobTypes && tool.jobTypes.length > 0) {
        html += `
            <div class="tool-detail-section">
                <h3> Job Types</h3>
                <div class="tool-job-types">
                    ${tool.jobTypes.map(jt => `<span class="job-type-badge">${jt}</span>`).join('')}
                </div>
            </div>
        `;
    }

    // Vehicle Applications Section
    html += `
        <div class="tool-detail-section">
            <h3> Vehicle Applications</h3>
            <div class="tool-vehicle-list">
                ${tool.vehicleApplications && tool.vehicleApplications.length > 0 ?
                    tool.vehicleApplications.map(v => `
                        <div class="tool-vehicle-item">
                            <span>${v.make} ${v.model}</span>
                            <span style="color:var(--dim);">${v.yearStart}${v.yearEnd && v.yearEnd !== v.yearStart ? '-' + v.yearEnd : ''}</span>
                        </div>
                    `).join('') :
                    '<div style="color:var(--dim);text-align:center;padding:12px;">No vehicle applications added</div>'
                }
            </div>
        </div>
    `;

    // Tool Notes Section
    html += `
        <div class="tool-detail-section">
            <h3> Tool Notes</h3>
            <div class="tool-notes-list">
                ${tool.toolNotes && tool.toolNotes.length > 0 ?
                    tool.toolNotes.map((note, idx) => `
                        <div class="tool-note-item">
                            ${note}
                            <button onclick="deleteToolNote('${toolId}', ${idx})" style="float:right;background:none;border:none;color:#ff5252;cursor:pointer;"></button>
                        </div>
                    `).join('') :
                    '<div style="color:var(--dim);text-align:center;padding:12px;">No notes</div>'
                }
            </div>
            <button class="add-note-btn" onclick="addToolNote('${toolId}')">+ Add Note</button>
        </div>
    `;

    // Cross-Reference Notes Section
    html += `
        <div class="tool-detail-section">
            <h3> Cross-Reference Notes</h3>
            <p style="font-size:12px;color:var(--dim);margin-bottom:8px;">These notes appear on this tool AND on related vehicle pages.</p>
            <div class="tool-notes-list">
                ${tool.crossReferenceNotes && tool.crossReferenceNotes.length > 0 ?
                    tool.crossReferenceNotes.map((note, idx) => `
                        <div class="tool-note-item cross-ref">
                            ${note}
                            <button onclick="deleteCrossRefNote('${toolId}', ${idx})" style="float:right;background:none;border:none;color:#ff5252;cursor:pointer;"></button>
                        </div>
                    `).join('') :
                    '<div style="color:var(--dim);text-align:center;padding:12px;">No cross-reference notes</div>'
                }
            </div>
            <button class="add-note-btn" onclick="addCrossRefNote('${toolId}')">+ Add Cross-Reference Note</button>
        </div>
    `;

    // Delete button
    html += `
        <div style="margin-top:24px;">
            <button onclick="deleteTool('${toolId}')" style="width:100%;padding:14px;background:transparent;border:1px solid #ff5252;border-radius:8px;color:#ff5252;font-size:14px;cursor:pointer;"> Delete Tool</button>
        </div>
    `;

    document.getElementById('toolDetailContent').innerHTML = html;
    document.getElementById('toolDetailPanel').classList.add('on');
}

function closeToolDetail() {
    document.getElementById('toolDetailPanel').classList.remove('on');
    currentViewingToolId = null;
}

function setToolStatus(toolId, status) {
    if (!toolsDatabase.tools[toolId]) return;
    toolsDatabase.tools[toolId].status = status;
    saveToolsDatabase();
    openToolDetail(toolId); // Refresh
    renderToolsList();
    toast('Status updated');
}

function addToolNote(toolId) {
    const note = prompt('Enter note:');
    if (!note || !note.trim()) return;
    if (!toolsDatabase.tools[toolId].toolNotes) {
        toolsDatabase.tools[toolId].toolNotes = [];
    }
    toolsDatabase.tools[toolId].toolNotes.push(note.trim());
    saveToolsDatabase();
    openToolDetail(toolId);
    toast('Note added');
}

function deleteToolNote(toolId, idx) {
    if (!confirm('Delete this note?')) return;
    toolsDatabase.tools[toolId].toolNotes.splice(idx, 1);
    saveToolsDatabase();
    openToolDetail(toolId);
    toast('Note deleted');
}

function addCrossRefNote(toolId) {
    const note = prompt('Enter cross-reference note (will appear on related vehicles):');
    if (!note || !note.trim()) return;
    if (!toolsDatabase.tools[toolId].crossReferenceNotes) {
        toolsDatabase.tools[toolId].crossReferenceNotes = [];
    }
    toolsDatabase.tools[toolId].crossReferenceNotes.push(note.trim());
    saveToolsDatabase();
    openToolDetail(toolId);
    toast('Cross-reference note added');
}

function deleteCrossRefNote(toolId, idx) {
    if (!confirm('Delete this cross-reference note?')) return;
    toolsDatabase.tools[toolId].crossReferenceNotes.splice(idx, 1);
    saveToolsDatabase();
    openToolDetail(toolId);
    toast('Note deleted');
}

function editCurrentTool() {
    if (currentViewingToolId) {
        openAddToolPanel(currentViewingToolId);
    }
}

// Add/Edit Tool Panel
function openAddToolPanel(toolId = null) {
    editingToolId = toolId;
    toolVehicleAppCount = 0;

    // Populate platform and category dropdowns
    populatePlatformSelects();
    populateCategorySelect();

    if (toolId && toolsDatabase.tools[toolId]) {
        const tool = toolsDatabase.tools[toolId];
        document.getElementById('addToolPanelTitle').textContent = ' Edit Tool';
        document.getElementById('toolFormName').value = tool.name;
        document.getElementById('toolFormPartNumber').value = tool.partNumber || '';
        document.getElementById('toolFormCategory').value = tool.category;
        document.getElementById('toolFormCompatType').value = tool.platformCompatibility;
        handleCompatTypeChange();

        // Set platform selections
        if (tool.platformCompatibility === 'single' && tool.compatiblePlatforms.length > 0) {
            document.getElementById('toolFormSinglePlatform').value = tool.compatiblePlatforms[0];
        } else if (tool.platformCompatibility === 'multiple') {
            tool.compatiblePlatforms.forEach(pid => {
                const checkbox = document.querySelector(`#toolFormPlatformCheckboxes input[value="${pid}"]`);
                if (checkbox) checkbox.checked = true;
            });
        }

        // Set job types
        document.getElementById('jobTypeAKL').checked = tool.jobTypes?.includes('AKL');
        document.getElementById('jobTypeAddKey').checked = tool.jobTypes?.includes('Add Key');
        document.getElementById('jobTypeRemote').checked = tool.jobTypes?.includes('Remote Programming');
        document.getElementById('jobTypeParamReset').checked = tool.jobTypes?.includes('Parameter Reset');

        // Set status
        selectToolStatus(tool.status);

        // Set notes
        document.getElementById('toolFormNotes').value = tool.toolNotes?.join('\n') || '';
        document.getElementById('toolFormCrossRefNotes').value = tool.crossReferenceNotes?.join('\n') || '';

        // Set vehicle applications
        const vehicleAppsContainer = document.getElementById('toolFormVehicleApps');
        vehicleAppsContainer.innerHTML = '';
        if (tool.vehicleApplications && tool.vehicleApplications.length > 0) {
            tool.vehicleApplications.forEach(app => {
                addToolVehicleApp(app.make, app.model, app.yearStart, app.yearEnd);
            });
        }
    } else {
        document.getElementById('addToolPanelTitle').textContent = ' Add Tool';
        document.getElementById('toolFormName').value = '';
        document.getElementById('toolFormPartNumber').value = '';
        document.getElementById('toolFormCategory').value = '';
        document.getElementById('toolFormCompatType').value = 'single';
        handleCompatTypeChange();
        document.getElementById('toolFormSinglePlatform').value = '';
        document.getElementById('jobTypeAKL').checked = false;
        document.getElementById('jobTypeAddKey').checked = false;
        document.getElementById('jobTypeRemote').checked = false;
        document.getElementById('jobTypeParamReset').checked = false;
        selectToolStatus('owned');
        document.getElementById('toolFormNotes').value = '';
        document.getElementById('toolFormCrossRefNotes').value = '';
        document.getElementById('toolFormVehicleApps').innerHTML = '';
    }

    document.getElementById('addToolPanel').classList.add('on');
}

function closeAddToolPanel() {
    document.getElementById('addToolPanel').classList.remove('on');
    editingToolId = null;
}

function populatePlatformSelects() {
    const platformIds = Object.keys(toolsDatabase.platforms);

    // Single platform dropdown
    const singleSelect = document.getElementById('toolFormSinglePlatform');
    singleSelect.innerHTML = '<option value="">Select platform...</option>';
    platformIds.forEach(id => {
        const platform = toolsDatabase.platforms[id];
        singleSelect.innerHTML += `<option value="${id}">${platform.name}</option>`;
    });

    // Multiple platform checkboxes
    const checkboxContainer = document.getElementById('toolFormPlatformCheckboxes');
    checkboxContainer.innerHTML = platformIds.map(id => {
        const platform = toolsDatabase.platforms[id];
        return `
            <label class="platform-checkbox-item">
                <input type="checkbox" value="${id}">
                <span>${platform.name}</span>
            </label>
        `;
    }).join('') || '<span style="color:var(--dim);">No platforms available. Add platforms first.</span>';
}

function handleCompatTypeChange() {
    const compatType = document.getElementById('toolFormCompatType').value;
    document.getElementById('singlePlatformSelect').style.display = compatType === 'single' ? '' : 'none';
    document.getElementById('multiplePlatformSelect').style.display = compatType === 'multiple' ? '' : 'none';
}

function selectToolStatus(status) {
    document.querySelectorAll('.status-radio-item').forEach(item => {
        const radio = item.querySelector('input');
        item.classList.toggle('selected', radio.value === status);
        radio.checked = radio.value === status;
    });
}

function addToolVehicleApp(make = '', model = '', yearStart = '', yearEnd = '') {
    const container = document.getElementById('toolFormVehicleApps');
    const idx = toolVehicleAppCount++;

    // Get unique makes from DB
    const makes = [...new Set(DB.flatMap(k => k.vehicles?.map(v => v.make) || []))].sort();

    const div = document.createElement('div');
    div.className = 'vehicle-app-item';
    div.id = `vehicleApp-${idx}`;
    div.innerHTML = `
        <select onchange="updateVehicleAppModels(${idx})" id="vehicleAppMake-${idx}">
            <option value="">Make</option>
            ${makes.map(m => `<option value="${m}" ${m === make ? 'selected' : ''}>${m}</option>`).join('')}
        </select>
        <select id="vehicleAppModel-${idx}">
            <option value="">Model</option>
        </select>
        <input type="number" placeholder="Start" value="${yearStart}" id="vehicleAppYearStart-${idx}">
        <input type="number" placeholder="End" value="${yearEnd}" id="vehicleAppYearEnd-${idx}">
        <button class="remove-vehicle-app-btn" onclick="removeVehicleApp(${idx})"></button>
    `;
    container.appendChild(div);

    // Populate models if make is set
    if (make) {
        updateVehicleAppModels(idx, model);
    }
}

function updateVehicleAppModels(idx, selectedModel = '') {
    const make = document.getElementById(`vehicleAppMake-${idx}`).value;
    const modelSelect = document.getElementById(`vehicleAppModel-${idx}`);

    if (!make) {
        modelSelect.innerHTML = '<option value="">Model</option>';
        return;
    }

    // Get models for this make from DB
    const models = [...new Set(DB.flatMap(k =>
        (k.vehicles || []).filter(v => v.make === make).map(v => v.model)
    ))].sort();

    modelSelect.innerHTML = '<option value="">Model</option>' +
        models.map(m => `<option value="${m}" ${m === selectedModel ? 'selected' : ''}>${m}</option>`).join('');
}

function removeVehicleApp(idx) {
    const elem = document.getElementById(`vehicleApp-${idx}`);
    if (elem) elem.remove();
}

function saveToolForm() {
    const name = document.getElementById('toolFormName').value.trim();
    const partNumber = document.getElementById('toolFormPartNumber').value.trim();
    const category = document.getElementById('toolFormCategory').value;
    const compatType = document.getElementById('toolFormCompatType').value;

    if (!name || !category) {
        toast('Please fill in all required fields');
        return;
    }

    // Get selected platforms
    let compatiblePlatforms = [];
    if (compatType === 'single') {
        const singlePlatform = document.getElementById('toolFormSinglePlatform').value;
        if (singlePlatform) compatiblePlatforms = [singlePlatform];
    } else {
        document.querySelectorAll('#toolFormPlatformCheckboxes input:checked').forEach(cb => {
            compatiblePlatforms.push(cb.value);
        });
    }

    // Get job types
    const jobTypes = [];
    if (document.getElementById('jobTypeAKL').checked) jobTypes.push('AKL');
    if (document.getElementById('jobTypeAddKey').checked) jobTypes.push('Add Key');
    if (document.getElementById('jobTypeRemote').checked) jobTypes.push('Remote Programming');
    if (document.getElementById('jobTypeParamReset').checked) jobTypes.push('Parameter Reset');

    // Get status
    const status = document.querySelector('.status-radio-item.selected input')?.value || 'owned';

    // Get vehicle applications
    const vehicleApplications = [];
    document.querySelectorAll('.vehicle-app-item').forEach(item => {
        const itemId = item.id.replace('vehicleApp-', '');
        const make = document.getElementById(`vehicleAppMake-${itemId}`)?.value;
        const model = document.getElementById(`vehicleAppModel-${itemId}`)?.value;
        const yearStart = parseInt(document.getElementById(`vehicleAppYearStart-${itemId}`)?.value) || null;
        const yearEnd = parseInt(document.getElementById(`vehicleAppYearEnd-${itemId}`)?.value) || null;

        if (make && model) {
            vehicleApplications.push({ make, model, yearStart, yearEnd });
        }
    });

    // Get notes
    const toolNotes = document.getElementById('toolFormNotes').value.trim().split('\n').filter(n => n.trim());
    const crossReferenceNotes = document.getElementById('toolFormCrossRefNotes').value.trim().split('\n').filter(n => n.trim());

    const toolId = editingToolId || 'tool-' + Date.now();

    toolsDatabase.tools[toolId] = {
        name,
        partNumber,
        category,
        platformCompatibility: compatType,
        compatiblePlatforms,
        vehicleApplications,
        jobTypes,
        status,
        toolNotes,
        crossReferenceNotes,
        lastEdited: new Date().toISOString()
    };

    saveToolsDatabase();
    closeAddToolPanel();

    // Close detail panel if editing and re-open with new data
    if (editingToolId) {
        closeToolDetail();
        openToolDetail(toolId);
    }

    renderToolsList();
    toast(editingToolId ? 'Tool updated' : 'Tool added');
}

function deleteTool(toolId) {
    if (!confirm('Delete this tool?')) return;
    delete toolsDatabase.tools[toolId];
    saveToolsDatabase();
    closeToolDetail();
    renderToolsList();
    toast('Tool deleted');
}

// Wishlist Panel
function openWishlistPanel() {
    renderWishlistTools();
    document.getElementById('wishlistPanel').classList.add('on');
}

function closeWishlistPanel() {
    document.getElementById('wishlistPanel').classList.remove('on');
}

function renderWishlistTools() {
    const container = document.getElementById('wishlistToolsList');
    const wishlistTools = Object.keys(toolsDatabase.tools).filter(id =>
        toolsDatabase.tools[id].status === 'wishlist'
    );

    if (wishlistTools.length === 0) {
        container.innerHTML = '<div style="text-align:center;color:var(--dim);padding:40px;">No items in wishlist</div>';
        return;
    }

    container.innerHTML = wishlistTools.map(id => {
        const tool = toolsDatabase.tools[id];
        const platformBadges = tool.compatiblePlatforms.map(pid => {
            const platform = toolsDatabase.platforms[pid];
            return platform ? `<span class="platform-badge">${platform.name}</span>` : '';
        }).join('');
        const vehicleCount = tool.vehicleApplications ? tool.vehicleApplications.length : 0;

        return `
            <div class="tool-card" onclick="openToolDetail('${id}')">
                <div class="tool-card-header">
                    <div>
                        <div class="tool-card-name">${tool.name}</div>
                        ${tool.partNumber ? `<div class="tool-card-pn">#${tool.partNumber}</div>` : ''}
                    </div>
                    <span class="tool-status-badge wishlist"> Wishlist</span>
                </div>
                <div class="tool-card-platforms">${platformBadges || '<span style="color:var(--dim);font-size:11px;">No platform assigned</span>'}</div>
                <div class="tool-card-meta">
                    <span>${tool.category}</span>
                    <span>Covers ${vehicleCount} vehicle${vehicleCount !== 1 ? 's' : ''}</span>
                </div>
            </div>
        `;
    }).join('');
}

// Find tools that match a vehicle's make/model/year
function findToolsForVehicle(make, model, startYear, endYear) {
    const matchingTools = [];

    Object.entries(toolsDatabase.tools).forEach(([toolId, tool]) => {
        if (!tool.vehicleApplications || tool.vehicleApplications.length === 0) return;

        // Find all matching vehicle applications (there could be multiple with different year ranges)
        const matchingApps = tool.vehicleApplications.filter(app => {
            if (app.make !== make) return false;
            if (app.model !== model) return false;

            // Check year overlap
            const appStart = app.yearStart || 1900;
            const appEnd = app.yearEnd || 2100;
            const vehStart = startYear || 1900;
            const vehEnd = endYear || 2100;

            // Years overlap if: appStart <= vehEnd AND appEnd >= vehStart
            return appStart <= vehEnd && appEnd >= vehStart;
        });

        if (matchingApps.length > 0) {
            matchingTools.push({
                id: toolId,
                ...tool,
                // Include the specific matching applications with their year ranges and notes
                matchingApplications: matchingApps.map(app => ({
                    yearStart: app.yearStart,
                    yearEnd: app.yearEnd,
                    variantNote: app.variantNote || ''
                }))
            });
        }
    });

    // Sort: owned first, then wishlist, then not-owned
    matchingTools.sort((a, b) => {
        const statusOrder = { 'owned': 0, 'wishlist': 1, 'not-owned': 2 };
        return (statusOrder[a.status] || 2) - (statusOrder[b.status] || 2);
    });

    return matchingTools;
}

// ===================== END TOOLS & EQUIPMENT MODULE =====================

function closeSettings() {
    document.getElementById('settingsPanel').classList.remove('on');
    document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelector('.nav-btn').classList.add('active');
}

// Force update app - clears service worker cache and reloads
async function forceUpdateApp() {
    const btn = event.target;
    btn.disabled = true;
    btn.textContent = ' Updating...';

    try {
        // Unregister all service workers
        if ('serviceWorker' in navigator) {
            const registrations = await navigator.serviceWorker.getRegistrations();
            for (const registration of registrations) {
                await registration.unregister();
            }
        }

        // Clear all caches
        if ('caches' in window) {
            const cacheNames = await caches.keys();
            for (const cacheName of cacheNames) {
                await caches.delete(cacheName);
            }
        }

        // Show success message and reload
        toast('Cache cleared! Reloading...');

        // Small delay to show the toast, then force reload from server
        setTimeout(() => {
            window.location.reload(true);
        }, 1000);

    } catch (error) {
        console.error('Update failed:', error);
        toast('Update failed. Try clearing browser data manually.');
        btn.disabled = false;
        btn.textContent = ' Update App';
    }
}

// Settings Sub-Panels
function openLishiSettingsPanel() {
    renderLishiInventory();
    document.getElementById('lishiSettingsPanel').classList.add('on');
}
function closeLishiSettingsPanel() {
    document.getElementById('lishiSettingsPanel').classList.remove('on');
}

function openVendorsSettingsPanel() {
    renderVendorList();
    document.getElementById('vendorsSettingsPanel').classList.add('on');
}
function closeVendorsSettingsPanel() {
    document.getElementById('vendorsSettingsPanel').classList.remove('on');
}

function openCustomKeysSettingsPanel() {
    renderCustomKeysList();
    document.getElementById('customKeysSettingsPanel').classList.add('on');
}
function closeCustomKeysSettingsPanel() {
    document.getElementById('customKeysSettingsPanel').classList.remove('on');
}

function openCategoriesSettingsPanel() {
    renderCategoryList();
    document.getElementById('categoriesSettingsPanel').classList.add('on');
}
function closeCategoriesSettingsPanel() {
    document.getElementById('categoriesSettingsPanel').classList.remove('on');
}

// Settings Add Tool Panel
let settingsToolVehicleAppCount = 0;
let editingSettingsToolId = null;

function openSettingsAddToolPanel(toolId = null) {
    editingSettingsToolId = toolId;
    settingsToolVehicleAppCount = 0;

    // Populate dropdowns
    populateSettingsCategorySelect();
    populateSettingsPlatformSelects();

    if (toolId && toolsDatabase.tools[toolId]) {
        const tool = toolsDatabase.tools[toolId];
        document.getElementById('settingsAddToolPanelTitle').textContent = ' Edit Tool';
        document.getElementById('settingsToolFormName').value = tool.name;
        document.getElementById('settingsToolFormCategory').value = tool.category;
        document.getElementById('settingsToolFormCompatType').value = tool.platformCompatibility;
        handleSettingsCompatTypeChange();

        if (tool.platformCompatibility === 'single' && tool.compatiblePlatforms.length > 0) {
            document.getElementById('settingsToolFormSinglePlatform').value = tool.compatiblePlatforms[0];
        } else if (tool.platformCompatibility === 'multiple') {
            tool.compatiblePlatforms.forEach(pid => {
                const checkbox = document.querySelector('#settingsToolFormPlatformCheckboxes input[value="' + pid + '"]');
                if (checkbox) checkbox.checked = true;
            });
        }

        const vehicleAppsContainer = document.getElementById('settingsToolFormVehicleApps');
        vehicleAppsContainer.innerHTML = '';
        if (tool.vehicleApplications && tool.vehicleApplications.length > 0) {
            tool.vehicleApplications.forEach(app => {
                addSettingsToolVehicleApp(app.make, app.model, app.yearStart, app.yearEnd);
            });
        }
    } else {
        document.getElementById('settingsAddToolPanelTitle').textContent = ' Add Tool';
        document.getElementById('settingsToolFormName').value = '';
        document.getElementById('settingsToolFormCategory').value = '';
        document.getElementById('settingsToolFormCompatType').value = 'single';
        handleSettingsCompatTypeChange();
        document.getElementById('settingsToolFormSinglePlatform').value = '';
        document.getElementById('settingsToolFormVehicleApps').innerHTML = '';
    }

    document.getElementById('settingsAddToolPanel').classList.add('on');
}

function closeSettingsAddToolPanel() {
    document.getElementById('settingsAddToolPanel').classList.remove('on');
    editingSettingsToolId = null;
}

function populateSettingsCategorySelect() {
    const select = document.getElementById('settingsToolFormCategory');
    if (!select) return;
    select.innerHTML = '<option value="">Select category...</option>';
    toolsDatabase.categories.forEach(category => {
        select.innerHTML += '<option value="' + category + '">' + category + '</option>';
    });
}

function populateSettingsPlatformSelects() {
    const platformIds = Object.keys(toolsDatabase.platforms);

    const singleSelect = document.getElementById('settingsToolFormSinglePlatform');
    singleSelect.innerHTML = '<option value="">Select platform...</option>';
    platformIds.forEach(id => {
        const platform = toolsDatabase.platforms[id];
        singleSelect.innerHTML += '<option value="' + id + '">' + platform.name + '</option>';
    });

    const checkboxContainer = document.getElementById('settingsToolFormPlatformCheckboxes');
    checkboxContainer.innerHTML = platformIds.map(id => {
        const platform = toolsDatabase.platforms[id];
        return '<label class="platform-checkbox-item"><input type="checkbox" value="' + id + '"><span>' + platform.name + '</span></label>';
    }).join('') || '<span style="color:var(--dim);">No platforms available. Add platforms first.</span>';
}

function handleSettingsCompatTypeChange() {
    const compatType = document.getElementById('settingsToolFormCompatType').value;
    document.getElementById('settingsSinglePlatformSelect').style.display = compatType === 'single' ? '' : 'none';
    document.getElementById('settingsMultiplePlatformSelect').style.display = compatType === 'multiple' ? '' : 'none';
}

function addSettingsToolVehicleApp(make, model, yearStart, yearEnd) {
    make = make || '';
    model = model || '';
    yearStart = yearStart || '';
    yearEnd = yearEnd || '';

    const container = document.getElementById('settingsToolFormVehicleApps');
    const idx = settingsToolVehicleAppCount++;

    const makes = [...new Set(DB.flatMap(k => k.vehicles ? k.vehicles.map(v => v.make) : []))].sort();

    const div = document.createElement('div');
    div.className = 'vehicle-app-item';
    div.id = 'settingsVehicleApp-' + idx;
    div.innerHTML = '<select onchange="updateSettingsVehicleAppModels(' + idx + ')" id="settingsVehicleAppMake-' + idx + '">' +
        '<option value="">Make</option>' +
        makes.map(m => '<option value="' + m + '"' + (m === make ? ' selected' : '') + '>' + m + '</option>').join('') +
        '</select>' +
        '<select id="settingsVehicleAppModel-' + idx + '">' +
        '<option value="">Model</option>' +
        '</select>' +
        '<input type="number" placeholder="Start" value="' + yearStart + '" id="settingsVehicleAppYearStart-' + idx + '">' +
        '<input type="number" placeholder="End" value="' + yearEnd + '" id="settingsVehicleAppYearEnd-' + idx + '">' +
        '<button class="remove-vehicle-app-btn" onclick="removeSettingsVehicleApp(' + idx + ')"></button>';
    container.appendChild(div);

    if (make) {
        updateSettingsVehicleAppModels(idx, model);
    }
}

function updateSettingsVehicleAppModels(idx, selectedModel) {
    selectedModel = selectedModel || '';
    const make = document.getElementById('settingsVehicleAppMake-' + idx).value;
    const modelSelect = document.getElementById('settingsVehicleAppModel-' + idx);

    if (!make) {
        modelSelect.innerHTML = '<option value="">Model</option>';
        return;
    }

    const models = [...new Set(DB.flatMap(k =>
        (k.vehicles || []).filter(v => v.make === make).map(v => v.model)
    ))].sort();

    modelSelect.innerHTML = '<option value="">Model</option>' +
        models.map(m => '<option value="' + m + '"' + (m === selectedModel ? ' selected' : '') + '>' + m + '</option>').join('');
}

function removeSettingsVehicleApp(idx) {
    const elem = document.getElementById('settingsVehicleApp-' + idx);
    if (elem) elem.remove();
}

function saveSettingsToolForm() {
    const name = document.getElementById('settingsToolFormName').value.trim();
    const category = document.getElementById('settingsToolFormCategory').value;
    const compatType = document.getElementById('settingsToolFormCompatType').value;

    if (!name || !category) {
        toast('Please fill in tool name and category');
        return;
    }

    // Get selected platforms
    var compatiblePlatforms = [];
    if (compatType === 'single') {
        const singlePlatform = document.getElementById('settingsToolFormSinglePlatform').value;
        if (singlePlatform) compatiblePlatforms = [singlePlatform];
    } else {
        document.querySelectorAll('#settingsToolFormPlatformCheckboxes input:checked').forEach(cb => {
            compatiblePlatforms.push(cb.value);
        });
    }

    // Get vehicle applications
    const vehicleApplications = [];
    document.querySelectorAll('#settingsToolFormVehicleApps .vehicle-app-item').forEach(item => {
        const itemId = item.id.replace('settingsVehicleApp-', '');
        const appMake = document.getElementById('settingsVehicleAppMake-' + itemId);
        const appModel = document.getElementById('settingsVehicleAppModel-' + itemId);
        const appYearStart = document.getElementById('settingsVehicleAppYearStart-' + itemId);
        const appYearEnd = document.getElementById('settingsVehicleAppYearEnd-' + itemId);

        if (appMake && appModel && appMake.value && appModel.value) {
            vehicleApplications.push({
                make: appMake.value,
                model: appModel.value,
                yearStart: parseInt(appYearStart.value) || null,
                yearEnd: parseInt(appYearEnd.value) || null
            });
        }
    });

    const toolId = editingSettingsToolId || 'tool-' + Date.now();

    // Preserve existing fields if editing, otherwise set defaults
    const existingTool = editingSettingsToolId ? toolsDatabase.tools[toolId] : null;

    toolsDatabase.tools[toolId] = {
        name: name,
        partNumber: existingTool ? existingTool.partNumber : '',
        category: category,
        platformCompatibility: compatType,
        compatiblePlatforms: compatiblePlatforms,
        vehicleApplications: vehicleApplications,
        jobTypes: existingTool ? existingTool.jobTypes : [],
        status: existingTool ? existingTool.status : 'owned',
        toolNotes: existingTool ? existingTool.toolNotes : [],
        crossReferenceNotes: existingTool ? existingTool.crossReferenceNotes : [],
        lastEdited: new Date().toISOString()
    };

    saveToolsDatabase();
    closeSettingsAddToolPanel();
    renderCategoryList();
    renderToolsList();
    toast(editingSettingsToolId ? 'Tool updated' : 'Tool added');
}

function openPlatformsSettingsPanel() {
    renderSettingsPlatformList();
    document.getElementById('platformsSettingsPanel').classList.add('on');
}
function closePlatformsSettingsPanel() {
    document.getElementById('platformsSettingsPanel').classList.remove('on');
}

// ===================== CODE SERIES SETTINGS PANEL =====================
let editingCodeSeriesOldValue = null;

function openCodeSeriesSettingsPanel() {
    buildCodeSeriesCache();
    renderCodeSeriesList();
    document.getElementById('codeSeriesSettingsPanel').classList.add('on');
}

function closeCodeSeriesSettingsPanel() {
    document.getElementById('codeSeriesSettingsPanel').classList.remove('on');
}

function openCodeSeriesUsagesModal(seriesValue) {
    const usages = getCodeSeriesUsageDetails(seriesValue);
    document.getElementById('codeSeriesUsagesTitle').textContent = `Usages for "${seriesValue}"`;
    const container = document.getElementById('codeSeriesUsagesList');

    if (usages.length === 0) {
        container.innerHTML = '<div style="color:var(--dim);text-align:center;padding:16px;">No usages found.</div>';
    } else {
        container.innerHTML = usages.map(u => {
            const icon = u.source === 'vehicle' ? '' : u.source === 'lishi' ? '' : u.source === 'key' ? '' : '';
            const sourceLabel = u.source === 'vehicle' ? 'Vehicle Data' : u.source === 'lishi' ? 'Lishi Tool' : u.source === 'key' ? 'Key Database' : 'Custom Vehicle';
            return `
                <div style="display:flex;align-items:center;gap:10px;padding:10px 12px;background:var(--bg);border:1px solid var(--border);border-radius:8px;margin-bottom:6px;">
                    <span style="font-size:18px;">${icon}</span>
                    <div style="flex:1;min-width:0;">
                        <div style="font-size:13px;color:var(--text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">${u.label}</div>
                        <div style="font-size:11px;color:var(--dim);margin-top:2px;">${sourceLabel}</div>
                    </div>
                </div>
            `;
        }).join('');
    }

    document.getElementById('codeSeriesUsagesModal').classList.add('on');
}

function getCodeSeriesUsageDetails(seriesValue) {
    const usages = [];

    // Check lishiVehicleData
    for (const key in lishiVehicleData) {
        const vd = lishiVehicleData[key];
        if (vd && vd.codeSeries) {
            if (Array.isArray(vd.codeSeries)) {
                const match = vd.codeSeries.find(cs => cs.series === seriesValue);
                if (match) {
                    const parts = key.split('|');
                    usages.push({ source: 'vehicle', label: `${parts[0]} ${parts[1]} (${parts[2]}-${parts[3]})` });
                }
            } else if (typeof vd.codeSeries === 'string' && vd.codeSeries === seriesValue) {
                const parts = key.split('|');
                usages.push({ source: 'vehicle', label: `${parts[0]} ${parts[1]} (${parts[2]}-${parts[3]})` });
            }
        }
    }

    // Check Lishi inventory
    for (const toolName in lishiInventory) {
        const tool = lishiInventory[toolName];
        if (tool.codeSeries && Array.isArray(tool.codeSeries) && tool.codeSeries.includes(seriesValue)) {
            usages.push({ source: 'lishi', label: `Lishi: ${toolName}` });
        }
    }

    // Check DB vehicles
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.codeSeries) {
                if (Array.isArray(v.codeSeries)) {
                    if (v.codeSeries.some(cs => cs.series === seriesValue)) {
                        usages.push({ source: 'key', label: `Key ${key.pn}: ${v.make} ${v.model}` });
                    }
                } else if (typeof v.codeSeries === 'string' && v.codeSeries === seriesValue) {
                    usages.push({ source: 'key', label: `Key ${key.pn}: ${v.make} ${v.model}` });
                }
            }
        });
    });

    // Check custom vehicles
    customVehicles.forEach(cv => {
        if (cv.codeSeries === seriesValue) {
            usages.push({ source: 'custom', label: `Custom: ${cv.make} ${cv.model}` });
        }
    });

    return usages;
}

function renderCodeSeriesList() {
    const container = document.getElementById('codeSeriesList');
    const searchTerm = (document.getElementById('codeSeriesSearch')?.value || '').toLowerCase().trim();

    if (codeSeriesCache.length === 0) {
        container.innerHTML = '<div style="text-align:center;color:var(--dim);padding:20px;">No code series found.</div>';
        return;
    }

    const filtered = searchTerm
        ? codeSeriesCache.filter(cs => cs.toLowerCase().includes(searchTerm))
        : codeSeriesCache;

    if (filtered.length === 0) {
        container.innerHTML = '<div style="text-align:center;color:var(--dim);padding:20px;">No matching code series.</div>';
        return;
    }

    container.innerHTML = filtered.map(cs => {
        const usages = getCodeSeriesUsageDetails(cs);
        const usageCount = usages.length;
        const usageText = usageCount === 1 ? '1 usage' : `${usageCount} usages`;
        const escapedCs = cs.replace(/'/g, "\\'");

        // Build vehicle summary lines
        let vehicleSummary = '';
        if (usages.length > 0) {
            const lines = usages.slice(0, 5).map(u => {
                const icon = u.source === 'vehicle' ? '' : u.source === 'lishi' ? '' : u.source === 'key' ? '' : '';
                return `<div style="font-size:11px;color:var(--dim);margin-top:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">${icon} ${u.label}</div>`;
            }).join('');
            const moreText = usages.length > 5 ? `<div style="font-size:11px;color:var(--dim);margin-top:2px;">...and ${usages.length - 5} more</div>` : '';
            vehicleSummary = `<div style="margin-top:4px;">${lines}${moreText}</div>`;
        }

        return `
            <div class="platform-card" style="margin-bottom:8px;align-items:flex-start;">
                <div class="platform-card-info" style="min-width:0;">
                    <div class="platform-card-name" style="font-family:'JetBrains Mono',monospace;">${cs}</div>
                    <div class="platform-card-count">${usageCount > 0 ? `<a href="#" onclick="event.preventDefault();openCodeSeriesUsagesModal('${escapedCs}')" style="color:var(--accent);text-decoration:underline;cursor:pointer;">${usageText}</a>` : usageText}</div>
                    ${vehicleSummary}
                </div>
                <div class="platform-card-actions" style="flex-shrink:0;">
                    <button class="platform-action-btn" onclick="openEditCodeSeriesModal('${escapedCs}')">Edit</button>
                    <button class="platform-action-btn delete" onclick="deleteCodeSeriesValue('${escapedCs}')">Delete</button>
                </div>
            </div>
        `;
    }).join('');
}

function openEditCodeSeriesModal(oldValue) {
    editingCodeSeriesOldValue = oldValue;
    const usages = getCodeSeriesUsageDetails(oldValue);
    document.getElementById('editCodeSeriesValue').value = oldValue;
    document.getElementById('editCodeSeriesInfo').textContent = `Used in ${usages.length} place${usages.length !== 1 ? 's' : ''}. Renaming will update all references.`;
    document.getElementById('editCodeSeriesModal').classList.add('on');
}

function closeEditCodeSeriesModal() {
    document.getElementById('editCodeSeriesModal').classList.remove('on');
    editingCodeSeriesOldValue = null;
}

function saveEditCodeSeries() {
    const newValue = document.getElementById('editCodeSeriesValue').value.trim();
    if (!newValue) {
        toast('Code series value cannot be empty');
        return;
    }
    if (!editingCodeSeriesOldValue) return;
    if (newValue === editingCodeSeriesOldValue) {
        closeEditCodeSeriesModal();
        return;
    }
    if (codeSeriesCache.includes(newValue) && newValue !== editingCodeSeriesOldValue) {
        if (!confirm(`"${newValue}" already exists. Merge all usages of "${editingCodeSeriesOldValue}" into "${newValue}"?`)) {
            return;
        }
    }

    const oldVal = editingCodeSeriesOldValue;
    let changed = false;

    // Update lishiVehicleData
    for (const key in lishiVehicleData) {
        const vd = lishiVehicleData[key];
        if (vd && vd.codeSeries) {
            if (Array.isArray(vd.codeSeries)) {
                vd.codeSeries.forEach(cs => {
                    if (cs.series === oldVal) { cs.series = newValue; changed = true; }
                });
            } else if (typeof vd.codeSeries === 'string' && vd.codeSeries === oldVal) {
                vd.codeSeries = newValue;
                changed = true;
            }
        }
    }

    // Update lishiInventory
    for (const toolName in lishiInventory) {
        const tool = lishiInventory[toolName];
        if (tool.codeSeries && Array.isArray(tool.codeSeries)) {
            tool.codeSeries = tool.codeSeries.map(cs => cs === oldVal ? newValue : cs);
            if (tool.codeSeries.includes(newValue)) changed = true;
        }
    }

    // Update DB vehicles
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.codeSeries) {
                if (Array.isArray(v.codeSeries)) {
                    v.codeSeries.forEach(cs => {
                        if (cs.series === oldVal) { cs.series = newValue; changed = true; }
                    });
                } else if (typeof v.codeSeries === 'string' && v.codeSeries === oldVal) {
                    v.codeSeries = newValue;
                    changed = true;
                }
            }
        });
    });

    // Update custom vehicles
    customVehicles.forEach(cv => {
        if (cv.codeSeries === oldVal) { cv.codeSeries = newValue; changed = true; }
    });

    // Update cache
    const idx = codeSeriesCache.indexOf(oldVal);
    if (idx !== -1) codeSeriesCache.splice(idx, 1);
    if (!codeSeriesCache.includes(newValue)) {
        codeSeriesCache.push(newValue);
        codeSeriesCache.sort();
    }

    // Persist changes
    if (changed) {
        saveLishiVehicle();
        saveLishiInventory();
        saveToIndexedDB('database', DB);
        saveCustomVehicles();
        triggerAutoSync();
    }

    closeEditCodeSeriesModal();
    renderCodeSeriesList();
    toast(`Renamed "${oldVal}" to "${newValue}"`);
}

function deleteCodeSeriesValue(seriesValue) {
    const usages = getCodeSeriesUsageDetails(seriesValue);
    const msg = usages.length > 0
        ? `Delete "${seriesValue}"? It is used in ${usages.length} place${usages.length !== 1 ? 's' : ''}. This will remove it from all vehicles and tools.`
        : `Delete "${seriesValue}"?`;
    if (!confirm(msg)) return;

    let changed = false;

    // Remove from lishiVehicleData
    for (const key in lishiVehicleData) {
        const vd = lishiVehicleData[key];
        if (vd && vd.codeSeries) {
            if (Array.isArray(vd.codeSeries)) {
                const before = vd.codeSeries.length;
                vd.codeSeries = vd.codeSeries.filter(cs => cs.series !== seriesValue);
                if (vd.codeSeries.length !== before) changed = true;
            } else if (typeof vd.codeSeries === 'string' && vd.codeSeries === seriesValue) {
                vd.codeSeries = [];
                changed = true;
            }
        }
    }

    // Remove from lishiInventory
    for (const toolName in lishiInventory) {
        const tool = lishiInventory[toolName];
        if (tool.codeSeries && Array.isArray(tool.codeSeries)) {
            const before = tool.codeSeries.length;
            tool.codeSeries = tool.codeSeries.filter(cs => cs !== seriesValue);
            if (tool.codeSeries.length !== before) changed = true;
        }
    }

    // Remove from DB vehicles
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.codeSeries) {
                if (Array.isArray(v.codeSeries)) {
                    const before = v.codeSeries.length;
                    v.codeSeries = v.codeSeries.filter(cs => cs.series !== seriesValue);
                    if (v.codeSeries.length !== before) changed = true;
                } else if (typeof v.codeSeries === 'string' && v.codeSeries === seriesValue) {
                    v.codeSeries = '';
                    changed = true;
                }
            }
        });
    });

    // Remove from custom vehicles
    customVehicles.forEach(cv => {
        if (cv.codeSeries === seriesValue) { cv.codeSeries = ''; changed = true; }
    });

    // Update cache
    const idx = codeSeriesCache.indexOf(seriesValue);
    if (idx !== -1) codeSeriesCache.splice(idx, 1);

    // Persist changes
    if (changed) {
        saveLishiVehicle();
        saveLishiInventory();
        saveToIndexedDB('database', DB);
        saveCustomVehicles();
        triggerAutoSync();
    }

    renderCodeSeriesList();
    toast(`Deleted "${seriesValue}"`);
}

function addNewCodeSeriesValue() {
    const newValue = prompt('Enter new code series (e.g., 1001-4096):');
    if (!newValue || !newValue.trim()) return;
    const cs = newValue.trim();
    if (codeSeriesCache.includes(cs)) {
        toast('Code series already exists');
        return;
    }
    codeSeriesCache.push(cs);
    codeSeriesCache.sort();
    renderCodeSeriesList();
    toast(`Added "${cs}"`);
}

function exportData() {
    const data = {
        version: 44,
        exportDate: new Date().toISOString(),
        records: DB,
        stock: stockData,
        lishi: lishiData,
        lishiVehicle: lishiVehicleData,
        lishiInventory: lishiInventory,
        vendorPrices: vendorPrices,
        customVendors: customVendors,
        fidAssignments: fidAssignments,
        fidMerges: fidMerges,
        fidPrefixes: fidPrefixes,
        purchaseHistory: purchaseHistory,
        customKeys: customKeys,
        customVehicles: customVehicles,
        toolsDatabase: toolsDatabase,
        customDropdownValues: customDropdownValues,
        vehicleOverrides: vehicleOverrides,
        keyInfoOverrides: keyInfoOverrides,
        vehicleYearNotes: vehicleYearNotes,
        keyRelationships: keyRelationships,
        fccRelationships: fccRelationships
    };
    
    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `LockAndScroll_Backup_${new Date().toISOString().split('T')[0]}.json`;
    a.click();
    URL.revokeObjectURL(url);
    
    toast('Data exported');
}

function copyOverridesToClipboard() {
    const overrides = {
        vehicleOverrides: vehicleOverrides || {},
        keyInfoOverrides: keyInfoOverrides || {},
        vehicleYearNotes: vehicleYearNotes || {},
        keyRelationships: keyRelationships || {},
        fccRelationships: fccRelationships || {},
        customKeys: customKeys || [],
        customVehicles: customVehicles || [],
        lishiVehicleData: lishiVehicleData || {}
    };
    const text = JSON.stringify(overrides);
    navigator.clipboard.writeText(text).then(() => {
        toast('Overrides copied to clipboard! Paste into chat.');
    }).catch(() => {
        // Fallback for older browsers
        const ta = document.createElement('textarea');
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        document.body.removeChild(ta);
        toast('Overrides copied to clipboard! Paste into chat.');
    });
}

function importData(event) {
    const file = event.target.files[0];
    if (!file) return;
    
    const reader = new FileReader();
    reader.onload = (e) => {
        try {
            const data = JSON.parse(e.target.result);
            
            if (data.stock) {
                stockData = data.stock;
                saveStock();
            }
            
            if (data.lishi) {
                lishiData = data.lishi;
                saveLishi();
            }
            
            if (data.lishiVehicle) {
                lishiVehicleData = data.lishiVehicle;
                saveLishiVehicle();
            }
            
            if (data.lishiInventory) {
                lishiInventory = data.lishiInventory;
                saveLishiInventory();
            }
            
            if (data.vendorPrices) {
                vendorPrices = data.vendorPrices;
                saveVendorPrices();
            }
            
            if (data.customVendors) {
                customVendors = data.customVendors;
                saveCustomVendors();
            }
            
            if (data.fidAssignments) {
                fidAssignments = data.fidAssignments;
                saveFidAssignments();
            }
            
            if (data.fidMerges) {
                fidMerges = data.fidMerges;
                saveFidMerges();
            }
            
            if (data.fidPrefixes) {
                fidPrefixes = { ...fidPrefixes, ...data.fidPrefixes };
                saveFidPrefixes();
            }
            
            if (data.purchaseHistory) {
                purchaseHistory = data.purchaseHistory;
                savePurchaseHistory();
            }
            
            if (data.customKeys) {
                customKeys = data.customKeys;
                saveCustomKeys();
                // Add to DB
                customKeys.forEach(key => {
                    const exists = DB.some(k => String(k.pn).toLowerCase() === String(key.pn).toLowerCase());
                    if (!exists) {
                        DB.push(key);
                    }
                });
            }

            if (data.customVehicles) {
                customVehicles = data.customVehicles;
                saveCustomVehicles();
            }

            if (data.toolsDatabase) {
                toolsDatabase = data.toolsDatabase;
                // Ensure structure integrity
                if (!toolsDatabase.platforms) toolsDatabase.platforms = {};
                if (!toolsDatabase.tools) toolsDatabase.tools = {};
                if (!toolsDatabase.categories) {
                    toolsDatabase.categories = ["Programmers", "Cables", "Adapters", "EEPROM Clamps", "Pin Readers"];
                }
                saveToolsDatabase();
            }

            if (data.customDropdownValues) {
                customDropdownValues = { keyway: [], chip: [], keyType: [], frequency: [], buttons: [], battery: [], brand: [], ...data.customDropdownValues };
                saveCustomDropdownValues();
            }

            if (data.vehicleOverrides) {
                vehicleOverrides = { ...vehicleOverrides, ...data.vehicleOverrides };
                saveVehicleOverrides();
                // Apply to in-memory DB
                Object.keys(data.vehicleOverrides).forEach(pn => {
                    const idx = DB.findIndex(k => String(k.pn) == pn);
                    if (idx >= 0) DB[idx].vehicles = data.vehicleOverrides[pn];
                });
            }

            if (data.keyInfoOverrides) {
                keyInfoOverrides = { ...keyInfoOverrides, ...data.keyInfoOverrides };
                saveKeyInfoOverrides();
                // Apply to in-memory DB
                Object.keys(data.keyInfoOverrides).forEach(pn => {
                    const idx = DB.findIndex(k => String(k.pn) == pn);
                    if (idx >= 0) {
                        Object.assign(DB[idx], data.keyInfoOverrides[pn]);
                    }
                });
            }

            if (data.vehicleYearNotes) {
                vehicleYearNotes = { ...vehicleYearNotes, ...data.vehicleYearNotes };
                saveVehicleYearNotes();
            }

            if (data.keyRelationships) {
                keyRelationships = { ...keyRelationships, ...data.keyRelationships };
                saveKeyRelationships();
            }

            if (data.fccRelationships) {
                fccRelationships = { ...fccRelationships, ...data.fccRelationships };
                saveFccRelationships();
            }

            toast('Data imported successfully');
            applyFilters();
            updateVendorCount();
        } catch (err) {
            alert('Error importing data: ' + err.message);
        }
    };
    reader.readAsText(file);
    event.target.value = '';
}

function exportLishi() {
    const blob = new Blob([JSON.stringify(lishiData, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `LockAndScroll_Lishi_${new Date().toISOString().split('T')[0]}.json`;
    a.click();
    URL.revokeObjectURL(url);
    
    toast('Lishi data exported');
}

function clearLishi() {
    lishiData = {};
    saveLishi();
    toast('Lishi data cleared');
}

function clearStock() {
    stockData = {};
    saveStock();
    applyFilters();
    toast('Stock reset');
}

// ===================== VEHICLE LOOKUP =====================
let vehicleToolsData = {}; // Future: { "IM508": { adapters: [...], cables: [...] }, ... }
let selectedVehicleMake = null;
let selectedVehicleModel = null;
let selectedVehicleKeyType = null;
let cameFromVehicle = null; // Stores the vehicle key if we came from vehicle detail
let currentViewingVehicleKey = null; // Current vehicle being viewed in detail

function openVehiclePanel() {
    populateVehicleDropdowns();
    renderVehicleMakeList();
    document.getElementById('vehiclePanel').classList.add('on');
}

function closeVehiclePanel() {
    document.getElementById('vehiclePanel').classList.remove('on');
    document.getElementById('vehicleModelsPanel').classList.remove('on');
    document.getElementById('vehicleKeyTypePanel').classList.remove('on');
    document.getElementById('vehicleYearsPanel').classList.remove('on');
    document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelector('.nav-btn').classList.add('active');
}

function closeVehicleModelsPanel() {
    document.getElementById('vehicleModelsPanel').classList.remove('on');
    document.getElementById('vehicleKeyTypePanel').classList.remove('on');
    document.getElementById('vehicleYearsPanel').classList.remove('on');
}

function closeVehicleKeyTypePanel() {
    document.getElementById('vehicleKeyTypePanel').classList.remove('on');
    document.getElementById('vehicleYearsPanel').classList.remove('on');
}

function closeVehicleYearsPanel() {
    document.getElementById('vehicleYearsPanel').classList.remove('on');
}

function closeVehicleDetail() {
    document.getElementById('vehicleDetailPanel').classList.remove('on');
    // Re-render the years panel to reflect any changes made while viewing vehicle detail
    if (selectedVehicleMake && selectedVehicleModel && selectedVehicleKeyType) {
        renderVehicleYearsForModel(selectedVehicleMake, selectedVehicleModel, selectedVehicleKeyType);
    }
}

function openKeyFromVehicle(idx, pn) {
    if (idx === undefined || idx === null || idx < 0) {
        // Try to find by PN as fallback (pseudo-key may have been added to DB since render)
        if (pn) {
            const fallbackIdx = DB.findIndex(k => String(k.pn) === String(pn));
            if (fallbackIdx >= 0) {
                idx = fallbackIdx;
            } else {
                toast('Key "' + pn + '" is not in the database yet. Edit vehicle data to add it.');
                return;
            }
        } else {
            return;
        }
    }
    // Track where we came from using the stored vehicle key
    cameFromVehicle = currentViewingVehicleKey;
    // Open the key detail (vehicle panels stay open behind it)
    openKey(idx);
}

// Dropdown functions
function populateVehicleDropdowns() {
    const makes = new Set();
    const years = new Set();

    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make) makes.add(v.make);
            if (v.startYear) {
                for (let y = v.startYear; y <= (v.endYear || v.startYear); y++) {
                    years.add(y);
                }
            }
        });
    });

    document.getElementById('vehicleYearFilter').innerHTML = '<option value="">Year</option>' +
        Array.from(years).sort((a,b) => b - a).map(y => `<option value="${y}">${y}</option>`).join('');

    document.getElementById('vehicleMakeFilter').innerHTML = '<option value="">Make</option>' +
        '<option value="__ADD_NEW__" style="color:var(--accent);font-weight:600;">+ Add New Make</option>' +
        Array.from(makes).sort().map(m => `<option value="${m}">${m}</option>`).join('');

    document.getElementById('vehicleModelFilter').innerHTML = '<option value="">Model</option>';
}

function onYearFilterChange() {
    // Update make list based on year if selected
    renderVehicleMakeList();
}

function onMakeFilterChange() {
    const selectedMake = document.getElementById('vehicleMakeFilter').value;
    const modelSelect = document.getElementById('vehicleModelFilter');

    // Handle "Add New Make" selection
    if (selectedMake === '__ADD_NEW__') {
        document.getElementById('vehicleMakeFilter').value = '';
        openAddNewMakeModal();
        return;
    }

    if (!selectedMake) {
        modelSelect.innerHTML = '<option value="">Model</option>';
        renderVehicleMakeList();
        return;
    }

    // Populate models for selected make
    const models = new Set();
    const yearFilter = document.getElementById('vehicleYearFilter').value;

    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make === selectedMake && v.model) {
                if (!yearFilter || (parseInt(yearFilter) >= v.startYear && parseInt(yearFilter) <= (v.endYear || v.startYear))) {
                    models.add(v.model);
                }
            }
        });
    });

    modelSelect.innerHTML = '<option value="">Model</option>' +
        '<option value="__ADD_NEW__" style="color:var(--accent);font-weight:600;">+ Add New Model</option>' +
        Array.from(models).sort().map(m => `<option value="${m}">${m}</option>`).join('');

    renderVehicleMakeList();
}

function onModelFilterChange() {
    const selectedMake = document.getElementById('vehicleMakeFilter').value;
    const selectedModel = document.getElementById('vehicleModelFilter').value;
    const selectedYear = document.getElementById('vehicleYearFilter').value;

    // Handle "Add New Model" selection
    if (selectedModel === '__ADD_NEW__') {
        document.getElementById('vehicleModelFilter').value = '';
        openAddNewModelModal(selectedMake);
        return;
    }

    if (selectedMake && selectedModel) {
        // If all three are selected, go directly to year groups for that make/model
        selectVehicleMake(selectedMake);
        selectVehicleModel(selectedModel);
    } else {
        renderVehicleMakeList();
    }
}

// Make list rendering
function renderVehicleMakeList() {
    const yearFilter = document.getElementById('vehicleYearFilter').value;
    const makeFilter = document.getElementById('vehicleMakeFilter').value;

    const makes = new Set();

    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make) {
                // Apply year filter if set
                if (yearFilter) {
                    const year = parseInt(yearFilter);
                    if (year >= v.startYear && year <= (v.endYear || v.startYear)) {
                        makes.add(v.make);
                    }
                } else {
                    makes.add(v.make);
                }
            }
        });
    });

    // If make filter is set, only show that make
    const filteredMakes = makeFilter ? [makeFilter].filter(m => makes.has(m)) : Array.from(makes).sort();

    const container = document.getElementById('vehicleMakeList');

    // Add New Make card always appears first
    let html = `
        <div class="vehicle-card" onclick="openAddNewMakeModal()" style="border:1px dashed var(--accent);background:transparent;cursor:pointer;">
            <div class="vehicle-card-header">
                <div class="vehicle-card-title" style="color:var(--accent);">+ Add New Make</div>
            </div>
            <div class="vehicle-card-info">
                <span style="color:var(--dim);">Create a new vehicle make</span>
            </div>
        </div>
    `;

    html += filteredMakes.map(make => {
        // Count how many keys for this make are in stock
        let inStockCount = 0;
        DB.forEach(key => {
            const matchesYear = !yearFilter || (key.vehicles || []).some(v => {
                const year = parseInt(yearFilter);
                return v.make === make && year >= v.startYear && year <= (v.endYear || v.startYear);
            });
            if ((key.vehicles || []).some(v => v.make === make) && matchesYear && (stockData[key.pn] || 0) > 0) {
                inStockCount++;
            }
        });

        return `
            <div class="vehicle-card" onclick="selectVehicleMake('${make.replace(/'/g, "\\'")}')">
                <div class="vehicle-card-header">
                    <div class="vehicle-card-title">${make}</div>
                    <span class="vehicle-stock-badge ${inStockCount > 0 ? 'in-stock' : 'out-of-stock'}">
                        ${inStockCount > 0 ? `${inStockCount} in stock` : 'None in stock'}
                    </span>
                </div>
            </div>
        `;
    }).join('');

    container.innerHTML = html;

    if (filteredMakes.length === 0 && !makeFilter) {
        container.innerHTML = html + '<div style="text-align:center;color:var(--dim);padding:40px;">No makes found in database</div>';
    }
}

// Make selection -> Show models
function selectVehicleMake(make) {
    selectedVehicleMake = make;
    document.getElementById('vehicleModelsPanelTitle').textContent = ` ${make}`;
    renderVehicleModelsForMake(make);
    document.getElementById('vehicleModelsPanel').classList.add('on');
}

function renderVehicleModelsForMake(make) {
    const yearFilter = document.getElementById('vehicleYearFilter').value;

    // Get unique models for this make
    const modelMap = {};

    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make === make && v.model) {
                // Apply year filter if set
                if (yearFilter) {
                    const year = parseInt(yearFilter);
                    if (!(year >= v.startYear && year <= (v.endYear || v.startYear))) {
                        return;
                    }
                }

                if (!modelMap[v.model]) {
                    modelMap[v.model] = { model: v.model, keys: new Set(), inStock: 0 };
                }
                modelMap[v.model].keys.add(key.pn);
                if ((stockData[key.pn] || 0) > 0) {
                    modelMap[v.model].inStock++;
                }
            }
        });
    });

    // Also include models from custom vehicles
    customVehicles.forEach(v => {
        if (v.make === make && v.model) {
            // Apply year filter if set
            if (yearFilter) {
                const year = parseInt(yearFilter);
                if (!(year >= v.startYear && year <= (v.endYear || v.startYear))) {
                    return;
                }
            }

            if (!modelMap[v.model]) {
                modelMap[v.model] = { model: v.model, keys: new Set(), inStock: 0, isCustom: true };
            }
        }
    });

    const models = Object.values(modelMap).sort((a, b) => a.model.localeCompare(b.model));
    const container = document.getElementById('vehicleModelsList');

    const encodedMake = encodeURIComponent(selectedVehicleMake);

    // Add New Model card always appears first
    let html = `
        <div class="vehicle-card" onclick="openAddNewModelModal('${selectedVehicleMake.replace(/'/g, "\\'")}')" style="border:1px dashed var(--accent);background:transparent;cursor:pointer;">
            <div class="vehicle-card-header">
                <div class="vehicle-card-title" style="color:var(--accent);">+ Add New Model</div>
            </div>
            <div class="vehicle-card-info">
                <span style="color:var(--dim);">Create a new model for ${make}</span>
            </div>
        </div>
    `;

    if (models.length === 0) {
        container.innerHTML = html + '<div style="text-align:center;color:var(--dim);padding:40px;">No existing models found</div>';
        return;
    }

    html += models.map(m => {
        return `
        <div class="vehicle-card vehicle-model-card" data-model="${m.model.replace(/"/g, '&quot;')}" style="display:flex;align-items:center;cursor:pointer;">
            <div style="flex:1;">
                <div class="vehicle-card-header">
                    <div class="vehicle-card-title">${m.model}</div>
                    <span class="vehicle-stock-badge ${m.inStock > 0 ? 'in-stock' : 'out-of-stock'}">
                        ${m.inStock > 0 ? `${m.inStock} in stock` : 'None in stock'}
                    </span>
                </div>
                <div class="vehicle-card-info">
                    <span style="color:var(--dim);">${m.keys.size} key${m.keys.size !== 1 ? 's' : ''}</span>
                </div>
            </div>
            <button class="rename-model-btn" data-make="${selectedVehicleMake.replace(/"/g, '&quot;')}" data-model="${m.model.replace(/"/g, '&quot;')}" style="margin-left:12px;padding:8px 12px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:var(--dim);font-size:12px;cursor:pointer;"></button>
        </div>
    `}).join('');

    container.innerHTML = html;
}

// Set up event delegation for vehicle model clicks (runs once on page load)
document.addEventListener('DOMContentLoaded', function() {
    const container = document.getElementById('vehicleModelsList');
    if (container) {
        container.addEventListener('click', function(e) {
            // Check if clicked on rename button
            const renameBtn = e.target.closest('.rename-model-btn');
            if (renameBtn) {
                e.stopPropagation();
                const make = renameBtn.getAttribute('data-make');
                const model = renameBtn.getAttribute('data-model');
                openRenameModelModal(make, model);
                return;
            }

            // Check if clicked on a model card
            const card = e.target.closest('.vehicle-model-card');
            if (card) {
                const model = card.getAttribute('data-model');
                if (model) {
                    selectVehicleModel(model);
                }
            }
        });
    }
});

// Rename Model functions
function openRenameModelModal(make, oldName) {
    document.getElementById('renameModelMake').value = make;
    document.getElementById('renameModelOldName').value = oldName;
    document.getElementById('renameModelCurrentName').textContent = `${make} ${oldName}`;
    document.getElementById('renameModelNewName').value = '';

    // Populate existing models dropdown for merging
    const existingModels = new Set();
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make === make && v.model && v.model !== oldName) {
                existingModels.add(v.model);
            }
        });
    });
    customVehicles.forEach(v => {
        if (v.make === make && v.model && v.model !== oldName) {
            existingModels.add(v.model);
        }
    });

    const select = document.getElementById('renameModelExisting');
    select.innerHTML = '<option value="">-- Or select existing model to merge --</option>' +
        Array.from(existingModels).sort().map(m => `<option value="${m}">${m}</option>`).join('');

    updateRenamePreview();
    document.getElementById('renameModelModal').classList.add('on');

    // Add input listener for preview
    document.getElementById('renameModelNewName').oninput = updateRenamePreview;
}

function closeRenameModelModal() {
    document.getElementById('renameModelModal').classList.remove('on');
}

function updateRenamePreview() {
    const make = document.getElementById('renameModelMake').value;
    const oldName = document.getElementById('renameModelOldName').value;
    const newName = document.getElementById('renameModelNewName').value.trim();

    const preview = document.getElementById('renameModelPreview');

    if (!newName) {
        preview.innerHTML = 'Enter a new name to see preview';
        return;
    }

    // Count vehicle associations that will be affected
    let entriesToRename = 0;
    let entriesAlreadyExist = 0;

    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make === make && v.model === oldName) entriesToRename++;
            if (v.make === make && v.model === newName) entriesAlreadyExist++;
        });
    });

    let customVehicleCount = customVehicles.filter(v => v.make === make && v.model === oldName).length;

    if (newName === oldName) {
        preview.innerHTML = '<span style="color:var(--dim);">No changes - same name</span>';
    } else if (entriesAlreadyExist > 0) {
        preview.innerHTML = `<span style="color:var(--accent);">Will merge ${entriesToRename} vehicle entries into existing "${newName}" (${entriesAlreadyExist} entries)${customVehicleCount ? ` + ${customVehicleCount} custom vehicle(s)` : ''}</span>`;
    } else {
        preview.innerHTML = `<span style="color:var(--success);">Will rename ${entriesToRename} vehicle entries to "${newName}"${customVehicleCount ? ` + ${customVehicleCount} custom vehicle(s)` : ''}</span>`;
    }
}

function renameVehicleModel() {
    const make = document.getElementById('renameModelMake').value;
    const oldName = document.getElementById('renameModelOldName').value;
    const newName = document.getElementById('renameModelNewName').value.trim();

    if (!newName) {
        toast('Please enter a new model name');
        return;
    }

    if (newName === oldName) {
        toast('New name is the same as current name');
        return;
    }

    // Update all DB key vehicle associations
    let updatedCount = 0;
    const affectedPNs = new Set();
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make === make && v.model === oldName) {
                v.model = newName;
                updatedCount++;
                affectedPNs.add(key.pn);
            }
        });
    });

    // Update vehicleOverrides for affected base keys
    for (const pn in vehicleOverrides) {
        const vehicles = vehicleOverrides[pn];
        if (Array.isArray(vehicles)) {
            vehicles.forEach(v => {
                if (v.make === make && v.model === oldName) {
                    v.model = newName;
                }
            });
        }
    }

    // Update customKeys vehicle associations
    customKeys.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make === make && v.model === oldName) {
                v.model = newName;
            }
        });
    });

    // Update customVehicles model names
    customVehicles.forEach(v => {
        if (v.make === make && v.model === oldName) {
            v.model = newName;
        }
    });

    // Save all affected stores
    saveToIndexedDB('database', DB);
    saveVehicleOverrides();
    saveCustomKeys();
    saveCustomVehicles();

    closeRenameModelModal();
    renderVehicleModelsForMake(make);
    toast(`Renamed ${updatedCount} vehicle entries to "${newName}"`);
}

function deleteVehicleModel() {
    const make = document.getElementById('renameModelMake').value;
    const modelName = document.getElementById('renameModelOldName').value;

    // Count what will be affected
    let associationCount = 0;
    let keysAffected = 0;
    let keysLosing = 0; // keys that will lose ALL vehicles
    DB.forEach(key => {
        const vehicles = key.vehicles || [];
        const matchCount = vehicles.filter(v => v.make === make && v.model === modelName).length;
        if (matchCount > 0) {
            associationCount += matchCount;
            keysAffected++;
            if (matchCount === vehicles.length) keysLosing++;
        }
    });

    let customCount = customVehicles.filter(v => v.make === make && v.model === modelName).length;

    let msg = `Delete all "${make} ${modelName}" vehicle associations?\n\n`;
    msg += ` ${associationCount} vehicle association(s) across ${keysAffected} key(s) will be removed\n`;
    if (customCount > 0) msg += ` ${customCount} custom vehicle entry/entries will be deleted\n`;
    if (keysLosing > 0) msg += ` ${keysLosing} key(s) will lose all vehicle associations\n`;
    msg += `\nThis cannot be undone.`;

    if (!confirm(msg)) return;

    // Remove vehicle associations from DB keys
    DB.forEach(key => {
        if (key.vehicles) {
            key.vehicles = key.vehicles.filter(v => !(v.make === make && v.model === modelName));
        }
    });

    // Remove from vehicleOverrides
    for (const pn in vehicleOverrides) {
        const vehicles = vehicleOverrides[pn];
        if (Array.isArray(vehicles)) {
            vehicleOverrides[pn] = vehicles.filter(v => !(v.make === make && v.model === modelName));
        }
    }

    // Remove from customKeys
    customKeys.forEach(key => {
        if (key.vehicles) {
            key.vehicles = key.vehicles.filter(v => !(v.make === make && v.model === modelName));
        }
    });

    // Remove from customVehicles
    customVehicles = customVehicles.filter(v => !(v.make === make && v.model === modelName));

    // Save all affected stores
    saveToIndexedDB('database', DB);
    saveVehicleOverrides();
    saveCustomKeys();
    saveCustomVehicles();

    closeRenameModelModal();
    renderVehicleModelsForMake(make);
    toast(`Deleted all "${modelName}" associations (${associationCount} removed)`);
}

// ==================== FCCID HELPERS ====================

function buildFccidDatalist() {
    const fccids = new Set();
    DB.forEach(k => { if (k.fccid && k.fccid !== 'N/A') fccids.add(k.fccid); });
    const datalist = document.getElementById('fccidDatalist');
    if (!datalist) return;
    datalist.innerHTML = Array.from(fccids).sort().map(f => {
        const count = DB.filter(k => k.fccid === f).length;
        return `<option value="${f}">${f} (${count} key${count !== 1 ? 's' : ''})</option>`;
    }).join('');
}

function updateFccidHint(value, hintId) {
    const hint = document.getElementById(hintId);
    if (!hint) return;
    const fccid = value.trim();
    if (!fccid) { hint.textContent = ''; return; }
    const matchingKeys = DB.filter(k => k.fccid === fccid);
    if (matchingKeys.length > 0) {
        hint.textContent = `\u2014 ${matchingKeys.length} key${matchingKeys.length !== 1 ? 's' : ''} will be linked`;
        hint.style.color = 'var(--success)';
    } else {
        hint.textContent = '';
    }
}

// ==================== ADD NEW MAKE FUNCTIONS ====================

function openAddNewMakeModal() {
    document.getElementById('addNewMakeName').value = '';
    document.getElementById('addNewMakeSimilarWarning').style.display = 'none';
    document.getElementById('addNewMakeModal').classList.add('on');
    document.getElementById('addNewMakeName').focus();
}

function closeAddNewMakeModal() {
    document.getElementById('addNewMakeModal').classList.remove('on');
}

function checkSimilarMakes() {
    const input = document.getElementById('addNewMakeName').value.trim().toLowerCase();
    const warningEl = document.getElementById('addNewMakeSimilarWarning');
    const listEl = document.getElementById('addNewMakeSimilarList');

    if (input.length < 2) {
        warningEl.style.display = 'none';
        return;
    }

    // Get all existing makes
    const makes = new Set();
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make) makes.add(v.make);
        });
    });

    // Also check customVehicles
    customVehicles.forEach(v => {
        if (v.make) makes.add(v.make);
    });

    // Find similar makes using fuzzy matching
    const similarMakes = Array.from(makes).filter(make => {
        const makeLower = make.toLowerCase();
        // Check for substring match
        if (makeLower.includes(input) || input.includes(makeLower)) return true;
        // Check for Levenshtein distance (simple similarity)
        if (levenshteinDistance(makeLower, input) <= 2) return true;
        return false;
    });

    if (similarMakes.length > 0) {
        warningEl.style.display = 'block';
        listEl.innerHTML = similarMakes.map(m =>
            `<div style="padding:4px 0;cursor:pointer;" onclick="selectExistingMake('${m.replace(/'/g, "\\'")}')">${m} <span style="color:var(--accent);font-size:11px;">(click to use)</span></div>`
        ).join('');
    } else {
        warningEl.style.display = 'none';
    }
}

function selectExistingMake(make) {
    closeAddNewMakeModal();
    document.getElementById('vehicleMakeFilter').value = make;
    onMakeFilterChange();
    toast(`Selected existing make: ${make}`);
}

function saveNewMake() {
    const makeName = document.getElementById('addNewMakeName').value.trim();

    if (!makeName) {
        toast('Please enter a make name');
        return;
    }

    // Check if make already exists (exact match)
    const existingMakes = new Set();
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make) existingMakes.add(v.make.toLowerCase());
        });
    });
    customVehicles.forEach(v => {
        if (v.make) existingMakes.add(v.make.toLowerCase());
    });

    if (existingMakes.has(makeName.toLowerCase())) {
        toast('This make already exists');
        return;
    }

    // Create a placeholder custom vehicle for this make
    const newVehicle = {
        id: Date.now().toString(),
        make: makeName,
        model: '',
        startYear: null,
        endYear: null,
        dataStatus: 'incomplete',
        keyType: '',
        chip: '',
        buttons: '',
        fccid: '',
        frequency: '',
        keyway: '',
        notes: 'Placeholder - add models and year ranges',
        createdAt: new Date().toISOString()
    };

    customVehicles.push(newVehicle);
    saveToIndexedDB('customVehicles', customVehicles);

    if (syncEnabled) {
        uploadToCloud();
    }

    closeAddNewMakeModal();
    populateVehicleDropdowns();
    renderVehicleMakeList();

    // Auto-select the new make
    document.getElementById('vehicleMakeFilter').value = makeName;
    onMakeFilterChange();
    selectVehicleMake(makeName);

    toast(`Added new make: ${makeName}`);
}

// ==================== ADD NEW MODEL FUNCTIONS ====================

function openAddNewModelModal(make) {
    document.getElementById('addNewModelMake').value = make;
    document.getElementById('addNewModelTitle').textContent = ` Add New Model for ${make}`;
    document.getElementById('addNewModelName').value = '';
    document.getElementById('addNewModelSimilarWarning').style.display = 'none';
    document.getElementById('addNewModelModal').classList.add('on');
    document.getElementById('addNewModelName').focus();
}

function closeAddNewModelModal() {
    document.getElementById('addNewModelModal').classList.remove('on');
}

function checkSimilarModels() {
    const input = document.getElementById('addNewModelName').value.trim().toLowerCase();
    const make = document.getElementById('addNewModelMake').value;
    const warningEl = document.getElementById('addNewModelSimilarWarning');
    const listEl = document.getElementById('addNewModelSimilarList');

    if (input.length < 2) {
        warningEl.style.display = 'none';
        return;
    }

    // Get all existing models for this make
    const models = new Set();
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make === make && v.model) models.add(v.model);
        });
    });

    // Also check customVehicles
    customVehicles.forEach(v => {
        if (v.make === make && v.model) models.add(v.model);
    });

    // Find similar models using fuzzy matching
    const similarModels = Array.from(models).filter(model => {
        const modelLower = model.toLowerCase();
        // Check for substring match
        if (modelLower.includes(input) || input.includes(modelLower)) return true;
        // Check for Levenshtein distance (simple similarity)
        if (levenshteinDistance(modelLower, input) <= 2) return true;
        return false;
    });

    if (similarModels.length > 0) {
        warningEl.style.display = 'block';
        listEl.innerHTML = similarModels.map(m =>
            `<div style="padding:4px 0;cursor:pointer;" onclick="selectExistingModel('${m.replace(/'/g, "\\'")}')">${m} <span style="color:var(--accent);font-size:11px;">(click to use)</span></div>`
        ).join('');
    } else {
        warningEl.style.display = 'none';
    }
}

function selectExistingModel(model) {
    closeAddNewModelModal();
    selectVehicleModel(model);
    toast(`Selected existing model: ${model}`);
}

function saveNewModel() {
    const make = document.getElementById('addNewModelMake').value;
    const modelName = document.getElementById('addNewModelName').value.trim();

    if (!modelName) {
        toast('Please enter a model name');
        return;
    }

    // Check if model already exists (exact match)
    const existingModels = new Set();
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make === make && v.model) existingModels.add(v.model.toLowerCase());
        });
    });
    customVehicles.forEach(v => {
        if (v.make === make && v.model) existingModels.add(v.model.toLowerCase());
    });

    if (existingModels.has(modelName.toLowerCase())) {
        toast('This model already exists for this make');
        return;
    }

    // Create a placeholder custom vehicle for this model
    const newVehicle = {
        id: Date.now().toString(),
        make: make,
        model: modelName,
        startYear: null,
        endYear: null,
        dataStatus: 'incomplete',
        keyType: '',
        chip: '',
        buttons: '',
        fccid: '',
        frequency: '',
        keyway: '',
        notes: 'Placeholder - add year ranges',
        createdAt: new Date().toISOString()
    };

    customVehicles.push(newVehicle);
    saveToIndexedDB('customVehicles', customVehicles);

    if (syncEnabled) {
        uploadToCloud();
    }

    closeAddNewModelModal();
    renderVehicleModelsForMake(make);
    selectVehicleModel(modelName);

    toast(`Added new model: ${make} ${modelName}`);
}

// ==================== ADD YEAR RANGE FUNCTIONS ====================

// State for tracking auto-populated values and warnings
let yrfAutoPopulated = {
    keyway: null,
    chip: null,
    buttonCount: null,
    frequency: null,
    buttonFunctions: []
};
let yrfSelectedButtonFunctions = [];
let yrfActiveWarnings = [];
let yrfNewValues = {}; // Store new values to be added on save
let yrfYearOverrides = []; // Array of year-specific overrides

// Get all unique values from database for dropdowns
function getYrfDropdownOptions() {
    const options = {
        keyBlanks: new Set(),
        keyways: new Set(),
        chipTypes: new Set(),
        keyTypes: new Set(),
        buttonCounts: new Set(),
        buttonFunctions: new Set(),
        fccIds: new Set(),
        frequencies: new Set(),
        ilcoPartNums: new Set(),
        keystonePartNums: new Set()
    };

    // Collect from base DB
    DB.forEach(key => {
        if (key.pn) options.keyBlanks.add(key.pn);
        if (key.keyway) options.keyways.add(key.keyway);
        if (key.chip) options.chipTypes.add(key.chip);
        if (key.keyType) options.keyTypes.add(key.keyType);
        if (key.buttons) options.buttonCounts.add(key.buttons);
        if (key.fccid) options.fccIds.add(key.fccid);
        if (key.frequency) options.frequencies.add(key.frequency);
        // Parse button functions if stored
        if (key.buttonFunctions) {
            (Array.isArray(key.buttonFunctions) ? key.buttonFunctions : key.buttonFunctions.split(',')).forEach(f => {
                if (f.trim()) options.buttonFunctions.add(f.trim());
            });
        }
        if (key.ilcoPartNum) options.ilcoPartNums.add(key.ilcoPartNum);
        if (key.keystonePartNum) options.keystonePartNums.add(key.keystonePartNum);
    });

    // Collect from custom keys
    customKeys.forEach(key => {
        if (key.pn) options.keyBlanks.add(key.pn);
        if (key.keyway) options.keyways.add(key.keyway);
        if (key.chip) options.chipTypes.add(key.chip);
        if (key.keyType) options.keyTypes.add(key.keyType);
        if (key.buttons) options.buttonCounts.add(key.buttons);
        if (key.fccid) options.fccIds.add(key.fccid);
        if (key.frequency) options.frequencies.add(key.frequency);
        if (key.ilcoPartNum) options.ilcoPartNums.add(key.ilcoPartNum);
        if (key.keystonePartNum) options.keystonePartNums.add(key.keystonePartNum);
    });

    // Collect from custom vehicles
    customVehicles.forEach(v => {
        if (v.keyway) options.keyways.add(v.keyway);
        if (v.chip) options.chipTypes.add(v.chip);
        if (v.keyType) options.keyTypes.add(v.keyType);
        if (v.buttons) options.buttonCounts.add(v.buttons);
        if (v.fccid) options.fccIds.add(v.fccid);
        if (v.frequency) options.frequencies.add(v.frequency);
    });

    // Collect all known keyways from lishiData (keys are keyway identifiers)
    Object.keys(lishiData).forEach(keyway => {
        if (keyway) options.keyways.add(keyway);
    });

    // Collect all known keyways from MASTER_LISHI_TOOLS keyway arrays
    Object.values(MASTER_LISHI_TOOLS).forEach(tool => {
        if (Array.isArray(tool.keyways)) {
            tool.keyways.forEach(kw => { if (kw) options.keyways.add(kw); });
        }
    });

    // Add common button functions if not present
    ['Lock', 'Unlock', 'Trunk', 'Panic', 'Remote Start', 'Hatch'].forEach(f => options.buttonFunctions.add(f));

    // Add common key types if not present
    ['Transponder', 'Proximity', 'Remote Head', 'Flip Key', 'FOBIK', 'Smart Key'].forEach(t => options.keyTypes.add(t));

    // Add common frequencies
    ['315 MHz', '433 MHz', '868 MHz'].forEach(f => options.frequencies.add(f));

    return {
        keyBlanks: [...options.keyBlanks].filter(v => v).sort(),
        keyways: [...options.keyways].filter(v => v).sort(),
        chipTypes: [...options.chipTypes].filter(v => v).sort(),
        keyTypes: [...options.keyTypes].filter(v => v).sort(),
        buttonCounts: [...options.buttonCounts].filter(v => v).sort((a, b) => {
            const numA = parseInt(a) || 0;
            const numB = parseInt(b) || 0;
            return numA - numB;
        }),
        buttonFunctions: [...options.buttonFunctions].filter(v => v).sort(),
        fccIds: [...options.fccIds].filter(v => v).sort(),
        frequencies: [...options.frequencies].filter(v => v).sort(),
        ilcoPartNums: [...options.ilcoPartNums].filter(v => v).sort(),
        keystonePartNums: [...options.keystonePartNums].filter(v => v).sort()
    };
}

// Populate a dropdown with options and "Add New"
function populateYrfDropdown(selectId, options, placeholder) {
    const select = document.getElementById(selectId);
    if (!select) return;

    let html = `<option value="">${placeholder}</option>`;
    html += `<option value="__ADD_NEW__" style="color:var(--accent);font-weight:600;">+ Add New</option>`;
    options.forEach(opt => {
        html += `<option value="${opt}">${opt}</option>`;
    });
    select.innerHTML = html;
}

// Populate all dropdowns
function populateYrfDropdowns() {
    const options = getYrfDropdownOptions();

    populateYrfDropdown('yrfKeyBlank', options.keyBlanks, 'Select Key Blank...');
    populateYrfDropdown('yrfKeyway', options.keyways, 'Select Keyway...');
    populateYrfDropdown('yrfChipType', options.chipTypes, 'Select Chip Type...');
    populateYrfDropdown('yrfKeyType', options.keyTypes, 'Select Key Type...');
    populateYrfDropdown('yrfButtonCount', options.buttonCounts, 'Select Button Count...');
    populateYrfDropdown('yrfFccId', options.fccIds, 'Select FCC ID...');
    populateYrfDropdown('yrfFrequency', options.frequencies, 'Select Frequency...');
    populateYrfDropdown('yrfIlcoPartNum', options.ilcoPartNums, 'Select Ilco PN...');
    populateYrfDropdown('yrfKeystonePartNum', options.keystonePartNums, 'Select Keystone PN...');

    // Populate button functions multi-select
    populateButtonFunctionsDropdown(options.buttonFunctions);

    // Populate single-key code series dropdown
    if (codeSeriesCache.length === 0) buildCodeSeriesCache();
    populateYrfDropdown('yrfCodeSeries', codeSeriesCache, 'Select Code Series...');
}

// Populate button functions multi-select dropdown
function populateButtonFunctionsDropdown(functions) {
    const dropdown = document.getElementById('yrfButtonFunctionsDropdown');
    if (!dropdown) return;

    let html = `<div class="multiselect-option" data-value="__ADD_NEW__" onclick="addNewButtonFunction(event)">
        <div class="multiselect-checkbox" style="background:#4a90d9;border-color:#4a90d9;color:white;font-weight:bold;font-size:12px;">+</div>
        <span style="color:var(--accent);">Add New Function</span>
    </div>`;

    functions.forEach(func => {
        const isSelected = yrfSelectedButtonFunctions.includes(func);
        html += `<div class="multiselect-option ${isSelected ? 'selected' : ''}" data-value="${func}" onclick="toggleButtonFunction(event, '${func}')">
            <div class="multiselect-checkbox"></div>
            <span class="multiselect-option-label">${func}</span>
        </div>`;
    });

    dropdown.innerHTML = html;
}

// Toggle button function selection
function toggleButtonFunction(event, func) {
    event.stopPropagation();

    const idx = yrfSelectedButtonFunctions.indexOf(func);
    if (idx === -1) {
        yrfSelectedButtonFunctions.push(func);
    } else {
        yrfSelectedButtonFunctions.splice(idx, 1);
    }

    updateButtonFunctionsDisplay();

    // Update option styling
    const option = event.currentTarget;
    option.classList.toggle('selected');

    // Check for FCC data mismatch (Rule 5)
    checkFccDataMismatch('buttonFunctions');
}

// Add new button function
function addNewButtonFunction(event) {
    event.stopPropagation();

    const newFunc = prompt('Enter new button function:');
    if (newFunc && newFunc.trim()) {
        const trimmed = newFunc.trim();
        if (!yrfSelectedButtonFunctions.includes(trimmed)) {
            yrfSelectedButtonFunctions.push(trimmed);
            yrfNewValues.buttonFunctions = yrfNewValues.buttonFunctions || [];
            yrfNewValues.buttonFunctions.push(trimmed);

            // Re-populate dropdown with new function
            const options = getYrfDropdownOptions();
            options.buttonFunctions.push(trimmed);
            options.buttonFunctions.sort();
            populateButtonFunctionsDropdown([...new Set(options.buttonFunctions)]);
            updateButtonFunctionsDisplay();

            // Check for FCC data mismatch (Rule 5)
            checkFccDataMismatch('buttonFunctions');
        }
    }
}

// Update button functions display
function updateButtonFunctionsDisplay() {
    const container = document.getElementById('yrfButtonFunctionsSelected');
    if (!container) return;

    if (yrfSelectedButtonFunctions.length === 0) {
        container.innerHTML = '<span class="multiselect-placeholder">Select functions...</span>';
    } else {
        container.innerHTML = yrfSelectedButtonFunctions.map(func =>
            `<span class="multiselect-tag">${func}<span class="multiselect-tag-remove" onclick="removeButtonFunction(event, '${func}')">&times;</span></span>`
        ).join('');
    }
}

// Remove button function
function removeButtonFunction(event, func) {
    event.stopPropagation();
    const idx = yrfSelectedButtonFunctions.indexOf(func);
    if (idx !== -1) {
        yrfSelectedButtonFunctions.splice(idx, 1);
        updateButtonFunctionsDisplay();

        // Update dropdown option
        const dropdown = document.getElementById('yrfButtonFunctionsDropdown');
        const option = dropdown.querySelector(`[data-value="${func}"]`);
        if (option) option.classList.remove('selected');

        // Check for FCC data mismatch (Rule 5)
        checkFccDataMismatch('buttonFunctions');
    }
}

// Toggle button functions dropdown
function toggleButtonFunctionsDropdown(event) {
    // Don't toggle if clicking on a tag remove button
    if (event.target.classList.contains('multiselect-tag-remove')) return;

    const dropdown = document.getElementById('yrfButtonFunctionsDropdown');
    dropdown.classList.toggle('open');
}

// Close dropdown when clicking outside
document.addEventListener('click', function(event) {
    const container = document.getElementById('yrfButtonFunctionsContainer');
    const dropdown = document.getElementById('yrfButtonFunctionsDropdown');
    if (container && dropdown && !container.contains(event.target)) {
        dropdown.classList.remove('open');
    }
});

// ---- Key Type change: handle Add New + chip visibility ----
function onYrfKeyTypeChange() {
    onYrfDropdownChange('yrfKeyType');
    updateYrfChipVisibility();
}

function updateYrfChipVisibility() {
    const keyType = getYrfFieldValue('yrfKeyType', 'yrfKeyTypeNewInput');
    const isNonChip = /non.?chip|non.?transponder|mechanical/i.test(keyType);
    const group = document.getElementById('yrfChipTypeGroup');
    if (!group) return;
    group.style.display = isNonChip ? 'none' : '';
    // Clear chip value when hidden so it doesn't get saved
    if (isNonChip) {
        const sel = document.getElementById('yrfChipType');
        if (sel) sel.value = '';
        const inp = document.getElementById('yrfChipTypeNewInput');
        if (inp) inp.value = '';
        const newCont = document.getElementById('yrfChipTypeNew');
        if (newCont) newCont.classList.remove('visible');
    }
}

// ---- Alternative Ignition Keys ----
let yrfAltKeys = []; // [{keyBlank, keyway, chip}]

function addYrfAltKey() {
    yrfAltKeys.push({ keyBlank: '', keyway: '', chip: '' });
    renderYrfAltKeysList();
}

function removeYrfAltKey(idx) {
    yrfAltKeys.splice(idx, 1);
    renderYrfAltKeysList();
}

function updateYrfAltKey(idx, field, value) {
    if (yrfAltKeys[idx]) yrfAltKeys[idx][field] = value;
}

function renderYrfAltKeysList() {
    const container = document.getElementById('yrfAltKeysList');
    if (!container) return;

    if (yrfAltKeys.length === 0) {
        container.innerHTML = '';
        return;
    }

    const options = getYrfDropdownOptions();
    const keyBlankOpts = ['', ...options.keyBlanks].map(v =>
        `<option value="${v}">${v || 'Select Key Blank...'}</option>`).join('');
    const keywayOpts = ['', ...options.keyways].map(v =>
        `<option value="${v}">${v || 'Select Keyway...'}</option>`).join('');
    const chipOpts = ['', ...options.chipTypes].map(v =>
        `<option value="${v}">${v || 'Select Chip Type...'}</option>`).join('');

    container.innerHTML = yrfAltKeys.map((alt, idx) => `
        <div style="background:var(--bg);border:1px solid var(--border);border-radius:8px;padding:10px;margin-bottom:8px;">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                <span style="font-size:12px;font-weight:600;color:var(--accent);">Alternative Key ${idx + 1}</span>
                <button type="button" onclick="removeYrfAltKey(${idx})"
                    style="padding:2px 8px;background:var(--danger);color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:11px;"> Remove</button>
            </div>
            <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;">
                <div>
                    <label style="font-size:11px;color:var(--dim);display:block;margin-bottom:3px;">Key Blank</label>
                    <select class="modal-input" style="font-size:12px;"
                        onchange="updateYrfAltKey(${idx},'keyBlank',this.value)">
                        ${keyBlankOpts}
                    </select>
                </div>
                <div>
                    <label style="font-size:11px;color:var(--dim);display:block;margin-bottom:3px;">Keyway</label>
                    <select class="modal-input" style="font-size:12px;"
                        onchange="updateYrfAltKey(${idx},'keyway',this.value)">
                        ${keywayOpts}
                    </select>
                </div>
                <div>
                    <label style="font-size:11px;color:var(--dim);display:block;margin-bottom:3px;">Chip Type</label>
                    <select class="modal-input" style="font-size:12px;"
                        onchange="updateYrfAltKey(${idx},'chip',this.value)">
                        ${chipOpts}
                    </select>
                </div>
            </div>
        </div>
    `).join('');

    // Restore selected values (after innerHTML is set, selects are fresh)
    yrfAltKeys.forEach((alt, idx) => {
        const row = container.children[idx];
        if (!row) return;
        const selects = row.querySelectorAll('select');
        if (selects[0]) selects[0].value = alt.keyBlank || '';
        if (selects[1]) selects[1].value = alt.keyway || '';
        if (selects[2]) selects[2].value = alt.chip || '';
    });
}

// Dual-key list state: multiple ignition keys and door keys
let yrfIgnKeys = []; // [{keyBlank, chip, keyway, fccid, buttons, frequency, codeSeries}]
let yrfDoorKeys = []; // [{keyBlank, chip, keyway, fccid, codeSeries}]

function addYrfDualKey(type) {
    if (type === 'ign') {
        yrfIgnKeys.push({ keyBlank: '', chip: '', keyway: '', fccid: '', buttons: '', frequency: '', codeSeries: '' });
        renderYrfDualKeysList('ign');
    } else {
        yrfDoorKeys.push({ keyBlank: '', chip: '', keyway: '', fccid: '', codeSeries: '' });
        renderYrfDualKeysList('door');
    }
}

function removeYrfDualKey(type, idx) {
    if (type === 'ign') {
        yrfIgnKeys.splice(idx, 1);
        renderYrfDualKeysList('ign');
    } else {
        yrfDoorKeys.splice(idx, 1);
        renderYrfDualKeysList('door');
    }
}

function updateYrfDualKey(type, idx, field, value) {
    const arr = type === 'ign' ? yrfIgnKeys : yrfDoorKeys;
    if (arr[idx]) arr[idx][field] = value;
}

function renderYrfDualKeysList(type) {
    const arr = type === 'ign' ? yrfIgnKeys : yrfDoorKeys;
    const containerId = type === 'ign' ? 'yrfIgnKeysList' : 'yrfDoorKeysList';
    const container = document.getElementById(containerId);
    if (!container) return;

    if (arr.length === 0) {
        container.innerHTML = '';
        return;
    }

    if (codeSeriesCache.length === 0) buildCodeSeriesCache();
    const options = getYrfDropdownOptions();

    const kbOpts = ['', ...[...options.keyBlanks].sort()].map(v =>
        `<option value="${v}">${v || 'Select Key Blank...'}</option>`).join('');
    const chipOpts = ['', ...[...options.chipTypes].sort()].map(v =>
        `<option value="${v}">${v || 'Select Chip Type...'}</option>`).join('');
    const kwOpts = ['', ...[...options.keyways].sort()].map(v =>
        `<option value="${v}">${v || 'Select Keyway...'}</option>`).join('');
    const fccOpts = ['', ...[...options.fccIds].sort()].map(v =>
        `<option value="${v}">${v || 'Select FCC ID...'}</option>`).join('');
    const btnOpts = ['', ...[...options.buttonCounts].sort()].map(v =>
        `<option value="${v}">${v || 'Select Buttons...'}</option>`).join('');
    const freqOpts = ['', ...[...options.frequencies].sort()].map(v =>
        `<option value="${v}">${v || 'Select Frequency...'}</option>`).join('');
    const csOpts = ['', ...codeSeriesCache].map(v => {
        const s = String(v);
        return `<option value="${s}">${s || 'Select Code Series...'}</option>`;
    }).join('');

    const bg = type === 'ign' ? 'rgba(0,212,255,0.05)' : 'rgba(255,107,53,0.05)';
    const borderCol = type === 'ign' ? 'var(--accent)' : 'var(--accent2)';
    const roleColor = type === 'ign' ? 'var(--accent)' : 'var(--accent2)';
    const roleLabel = type === 'ign' ? 'Ignition' : 'Door';

    container.innerHTML = arr.map((entry, idx) => `
        <div style="background:${bg};border:1px solid ${borderCol};border-radius:8px;padding:10px;margin-bottom:8px;">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                <span style="font-size:12px;font-weight:600;color:${roleColor};">${roleLabel} Key${arr.length > 1 ? ' ' + (idx + 1) : ''}</span>
                <button type="button" onclick="removeYrfDualKey('${type}', ${idx})"
                    style="padding:2px 8px;background:var(--danger);color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:11px;">&#10005; Remove</button>
            </div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;">
                <div>
                    <label style="font-size:11px;color:var(--dim);display:block;margin-bottom:3px;">Key Blank</label>
                    <select class="modal-input" style="font-size:12px;" onchange="updateYrfDualKey('${type}', ${idx}, 'keyBlank', this.value)">
                        ${kbOpts}
                    </select>
                </div>
                <div>
                    <label style="font-size:11px;color:var(--dim);display:block;margin-bottom:3px;">Chip Type</label>
                    <select class="modal-input" style="font-size:12px;" onchange="updateYrfDualKey('${type}', ${idx}, 'chip', this.value)">
                        ${chipOpts}
                    </select>
                </div>
                <div>
                    <label style="font-size:11px;color:var(--dim);display:block;margin-bottom:3px;">Keyway</label>
                    <select class="modal-input" style="font-size:12px;" onchange="updateYrfDualKey('${type}', ${idx}, 'keyway', this.value)">
                        ${kwOpts}
                    </select>
                </div>
                <div>
                    <label style="font-size:11px;color:var(--dim);display:block;margin-bottom:3px;">Code Series</label>
                    <select class="modal-input" style="font-size:12px;" onchange="updateYrfDualKey('${type}', ${idx}, 'codeSeries', this.value)">
                        ${csOpts}
                    </select>
                </div>
                <div>
                    <label style="font-size:11px;color:var(--dim);display:block;margin-bottom:3px;">FCC ID</label>
                    <select class="modal-input" style="font-size:12px;" onchange="updateYrfDualKey('${type}', ${idx}, 'fccid', this.value)">
                        ${fccOpts}
                    </select>
                </div>
                ${type === 'ign' ? `
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:6px;">
                    <div>
                        <label style="font-size:11px;color:var(--dim);display:block;margin-bottom:3px;">Buttons</label>
                        <select class="modal-input" style="font-size:12px;" onchange="updateYrfDualKey('${type}', ${idx}, 'buttons', this.value)">
                            ${btnOpts}
                        </select>
                    </div>
                    <div>
                        <label style="font-size:11px;color:var(--dim);display:block;margin-bottom:3px;">Frequency</label>
                        <select class="modal-input" style="font-size:12px;" onchange="updateYrfDualKey('${type}', ${idx}, 'frequency', this.value)">
                            ${freqOpts}
                        </select>
                    </div>
                </div>` : ''}
            </div>
        </div>
    `).join('');

    // Restore selected values after innerHTML rebuild
    arr.forEach((entry, idx) => {
        const row = container.children[idx];
        if (!row) return;
        const selects = row.querySelectorAll('select');
        if (selects[0]) selects[0].value = entry.keyBlank || '';
        if (selects[1]) selects[1].value = entry.chip || '';
        if (selects[2]) selects[2].value = entry.keyway || '';
        if (selects[3]) selects[3].value = entry.codeSeries || '';
        if (selects[4]) selects[4].value = entry.fccid || '';
        if (type === 'ign') {
            if (selects[5]) selects[5].value = entry.buttons || '';
            if (selects[6]) selects[6].value = entry.frequency || '';
        }
    });
}

// Handle "Add New" selection in dual-key dropdowns
function onDualKeyDropdownChange(selectId) {
    const select = document.getElementById(selectId);
    const newInputContainer = document.getElementById(selectId + 'New');
    if (!select || !newInputContainer) return;

    if (select.value === '__ADD_NEW__') {
        newInputContainer.classList.add('visible');
        const input = newInputContainer.querySelector('input');
        if (input) input.focus();
        select.value = '';
    } else {
        newInputContainer.classList.remove('visible');
    }
}

// Handle "Add New" selection in dropdowns
function onYrfDropdownChange(selectId) {
    const select = document.getElementById(selectId);
    const newInputContainer = document.getElementById(selectId + 'New');

    if (select.value === '__ADD_NEW__') {
        newInputContainer.classList.add('visible');
        newInputContainer.querySelector('input').focus();
        select.value = '';
    } else {
        newInputContainer.classList.remove('visible');
    }

    // Check for FCC data mismatch (Rule 5) when Button Count or Frequency changes
    checkFccDataMismatch(selectId);
}

// Check for FCC data mismatch when user changes auto-populated FCC fields
function checkFccDataMismatch(changedField) {
    const fccId = document.getElementById('yrfFccId').value;
    if (!fccId) {
        hideWarning('fccMismatchWarning');
        return;
    }

    // Only check if relevant fields were changed
    if (changedField !== 'yrfButtonCount' && changedField !== 'yrfFrequency' && changedField !== 'buttonFunctions') {
        return;
    }

    let hasMismatch = false;
    let mismatchDetails = [];

    // Check Button Count mismatch
    if (yrfAutoPopulated.buttonCount) {
        const currentButtonCount = document.getElementById('yrfButtonCount').value;
        if (currentButtonCount && currentButtonCount !== yrfAutoPopulated.buttonCount) {
            hasMismatch = true;
            mismatchDetails.push(`button count (expected: ${yrfAutoPopulated.buttonCount})`);
        }
    }

    // Check Frequency mismatch
    if (yrfAutoPopulated.frequency) {
        const currentFrequency = document.getElementById('yrfFrequency').value;
        if (currentFrequency && currentFrequency !== yrfAutoPopulated.frequency) {
            hasMismatch = true;
            mismatchDetails.push(`frequency (expected: ${yrfAutoPopulated.frequency})`);
        }
    }

    // Check Button Functions mismatch
    if (yrfAutoPopulated.buttonFunctions && yrfAutoPopulated.buttonFunctions.length > 0) {
        const currentFunctions = [...yrfSelectedButtonFunctions].sort();
        const expectedFunctions = [...yrfAutoPopulated.buttonFunctions].sort();
        if (JSON.stringify(currentFunctions) !== JSON.stringify(expectedFunctions)) {
            hasMismatch = true;
            mismatchDetails.push(`button functions (expected: ${expectedFunctions.join(', ')})`);
        }
    }

    if (hasMismatch) {
        showWarning('fccMismatchWarning', `${fccId} listed elsewhere with different ${mismatchDetails.join(', ')}. Confirm change.`);
    } else {
        hideWarning('fccMismatchWarning');
    }

    updateSaveButtonState();
}

// Key Blank change handler - auto-populate keyway and chip
function onKeyBlankChange() {
    const select = document.getElementById('yrfKeyBlank');
    const newInputContainer = document.getElementById('yrfKeyBlankNew');

    if (select.value === '__ADD_NEW__') {
        newInputContainer.classList.add('visible');
        newInputContainer.querySelector('input').focus();
        select.value = '';
        return;
    }

    newInputContainer.classList.remove('visible');

    if (!select.value) {
        // Clear auto-populated values
        yrfAutoPopulated.keyway = null;
        yrfAutoPopulated.chip = null;
        document.getElementById('yrfKeywayContainer').classList.remove('auto-populated');
        document.getElementById('yrfChipContainer').classList.remove('auto-populated');
        return;
    }

    // Get key blank relationship data (uses relationships store, falls back to database)
    const keyBlank = select.value;
    const relationshipData = getKeyRelationshipData(keyBlank);

    if (relationshipData) {
        // Auto-populate keyway
        if (relationshipData.keyway) {
            yrfAutoPopulated.keyway = relationshipData.keyway;
            document.getElementById('yrfKeyway').value = relationshipData.keyway;
            document.getElementById('yrfKeywayContainer').classList.add('auto-populated');
        }

        // Auto-populate chip
        if (relationshipData.typicalChip) {
            yrfAutoPopulated.chip = relationshipData.typicalChip;
            document.getElementById('yrfChipType').value = relationshipData.typicalChip;
            document.getElementById('yrfChipContainer').classList.add('auto-populated');
        }

        // Clear any mismatch warnings since we just auto-populated
        hideWarning('keywayMismatchWarning');
        hideWarning('chipMismatchWarning');
        hideWarning('noChipWarning');
    }

    updateSaveButtonState();
}

// FCC ID change handler - auto-populate button count, frequency, button functions
function onFccIdChange() {
    const select = document.getElementById('yrfFccId');
    const newInputContainer = document.getElementById('yrfFccIdNew');

    if (select.value === '__ADD_NEW__') {
        newInputContainer.classList.add('visible');
        newInputContainer.querySelector('input').focus();
        select.value = '';
        return;
    }

    newInputContainer.classList.remove('visible');

    if (!select.value) {
        yrfAutoPopulated.buttonCount = null;
        yrfAutoPopulated.frequency = null;
        yrfAutoPopulated.buttonFunctions = [];
        document.getElementById('yrfButtonCountContainer').classList.remove('auto-populated');
        document.getElementById('yrfFrequencyContainer').classList.remove('auto-populated');
        return;
    }

    // Get FCC ID relationship data (uses relationships store, falls back to database)
    const fccId = select.value;
    const relationshipData = getFccRelationshipData(fccId);

    if (relationshipData) {
        // Auto-populate button count
        if (relationshipData.buttonCount) {
            yrfAutoPopulated.buttonCount = relationshipData.buttonCount;
            document.getElementById('yrfButtonCount').value = relationshipData.buttonCount;
            document.getElementById('yrfButtonCountContainer').classList.add('auto-populated');
        }

        // Auto-populate frequency
        if (relationshipData.frequency) {
            yrfAutoPopulated.frequency = relationshipData.frequency;
            document.getElementById('yrfFrequency').value = relationshipData.frequency;
            document.getElementById('yrfFrequencyContainer').classList.add('auto-populated');
        }

        // Auto-populate button functions
        if (relationshipData.buttonFunctions) {
            const functions = Array.isArray(relationshipData.buttonFunctions)
                ? relationshipData.buttonFunctions
                : relationshipData.buttonFunctions.split(',').map(f => f.trim()).filter(f => f);
            yrfAutoPopulated.buttonFunctions = [...functions];
            yrfSelectedButtonFunctions = [...functions];
            updateButtonFunctionsDisplay();

            // Update dropdown selections
            const options = getYrfDropdownOptions();
            populateButtonFunctionsDropdown([...new Set([...options.buttonFunctions, ...functions])]);
        }

        // Clear FCC mismatch warning
        hideWarning('fccMismatchWarning');
    }

    updateSaveButtonState();
}

// Field change handler - check for mismatches
function onYrfFieldChange(fieldType) {
    const selectId = fieldType === 'keyway' ? 'yrfKeyway' : 'yrfChipType';
    const select = document.getElementById(selectId);
    const newInputContainer = document.getElementById(selectId === 'yrfKeyway' ? 'yrfKeywayNew' : 'yrfChipTypeNew');

    if (select.value === '__ADD_NEW__') {
        newInputContainer.classList.add('visible');
        newInputContainer.querySelector('input').focus();
        select.value = '';
        return;
    }

    newInputContainer.classList.remove('visible');

    const keyBlank = document.getElementById('yrfKeyBlank').value;
    if (!keyBlank) return;

    // Check for mismatch with auto-populated value
    if (fieldType === 'keyway' && yrfAutoPopulated.keyway) {
        if (select.value && select.value !== yrfAutoPopulated.keyway) {
            showWarning('keywayMismatchWarning', `${keyBlank} typically uses ${yrfAutoPopulated.keyway}. Confirm change.`);
        } else {
            hideWarning('keywayMismatchWarning');
        }
    }

    if (fieldType === 'chip') {
        // Check chip mismatch
        if (yrfAutoPopulated.chip && select.value && select.value !== yrfAutoPopulated.chip) {
            showWarning('chipMismatchWarning', `${keyBlank} typically uses ${yrfAutoPopulated.chip}. Confirm change.`);
        } else {
            hideWarning('chipMismatchWarning');
        }

        // Check "no chip" warning - Rule 6
        if (yrfAutoPopulated.chip && yrfAutoPopulated.chip.toLowerCase() !== 'none' &&
            select.value && (select.value.toLowerCase() === 'none' || select.value === '')) {
            showWarning('noChipWarning', `${keyBlank} typically has chip. Did you mean ${yrfAutoPopulated.keyway || 'a different keyway'}?`);
        } else {
            hideWarning('noChipWarning');
        }
    }

    updateSaveButtonState();
}

// Show a warning
function showWarning(warningId, message) {
    const warning = document.getElementById(warningId);
    if (!warning) return;

    const textEl = warning.querySelector('.conflict-warning-text');
    if (textEl && message) textEl.textContent = message;

    warning.classList.add('visible');

    // Track active warning
    if (!yrfActiveWarnings.includes(warningId)) {
        yrfActiveWarnings.push(warningId);
    }

    updateWarningsSummary();
}

// Hide a warning
function hideWarning(warningId) {
    const warning = document.getElementById(warningId);
    if (!warning) return;

    warning.classList.remove('visible');

    // Uncheck the verify checkbox
    const checkbox = warning.querySelector('input[type="checkbox"]');
    if (checkbox) checkbox.checked = false;

    // Remove from active warnings
    const idx = yrfActiveWarnings.indexOf(warningId);
    if (idx !== -1) yrfActiveWarnings.splice(idx, 1);

    updateWarningsSummary();
}

// Update warnings summary
function updateWarningsSummary() {
    const summary = document.getElementById('yearRangeWarningsSummary');
    const list = document.getElementById('yearRangeWarningsList');

    const activeWarnWarnings = yrfActiveWarnings.filter(w => {
        const el = document.getElementById(w);
        return el && el.classList.contains('warn') && el.classList.contains('visible');
    });

    if (activeWarnWarnings.length === 0) {
        summary.classList.remove('visible');
        return;
    }

    summary.classList.add('visible');

    const warningMessages = {
        'overlapYearWarning': 'Overlapping year range',
        'keywayMismatchWarning': 'Keyway mismatch',
        'chipMismatchWarning': 'Chip type mismatch',
        'noChipWarning': 'Key blank typically has chip',
        'fccMismatchWarning': 'FCC ID data mismatch'
    };

    list.innerHTML = activeWarnWarnings.map(w =>
        `<div class="warnings-summary-item">${warningMessages[w] || 'Warning'}</div>`
    ).join('');
}

// Check year range conflicts (Rules 1 & 2)
function checkYearRangeConflicts() {
    const make = document.getElementById('addYearRangeMake').value;
    const model = document.getElementById('addYearRangeModel').value;
    const keyType = document.getElementById('addYearRangeKeyType').value;
    const startYear = parseInt(document.getElementById('addYearRangeStart').value);
    const endYear = parseInt(document.getElementById('addYearRangeEnd').value) || startYear;

    if (!startYear) {
        hideWarning('duplicateYearWarning');
        hideWarning('overlapYearWarning');
        updateSaveButtonState();
        return;
    }

    // Get existing ranges for this make/model/keyType
    const existingRanges = [];
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make === make && v.model === model && normalizeKeyType(key.keyType) === keyType) {
                existingRanges.push({ start: v.startYear, end: v.endYear || v.startYear });
            }
        });
    });
    customVehicles.forEach(v => {
        if (v.make === make && v.model === model && normalizeKeyType(v.keyType) === keyType) {
            if (v.startYear) {
                existingRanges.push({ start: v.startYear, end: v.endYear || v.startYear });
            }
        }
    });

    // Rule 1: Check for exact duplicate
    const hasDuplicate = existingRanges.some(range =>
        range.start === startYear && range.end === (endYear || startYear)
    );

    if (hasDuplicate) {
        showWarning('duplicateYearWarning');
        hideWarning('overlapYearWarning');
        updateSaveButtonState();
        return;
    }

    hideWarning('duplicateYearWarning');

    // Rule 2: Check for overlap
    const overlappingRanges = existingRanges.filter(range =>
        !(endYear < range.start || startYear > range.end)
    );

    if (overlappingRanges.length > 0) {
        const overlapText = overlappingRanges.map(r =>
            r.start === r.end ? r.start : `${r.start}-${r.end}`
        ).join(', ');
        showWarning('overlapYearWarning', `Overlaps with [${overlapText}]. Verify intentional.`);
    } else {
        hideWarning('overlapYearWarning');
    }

    updateSaveButtonState();
}

// Update save button state based on validations
function updateSaveButtonState() {
    const btn = document.getElementById('saveYearRangeBtn');
    if (!btn) return;

    // Check for blocking error (duplicate)
    const duplicateWarning = document.getElementById('duplicateYearWarning');
    if (duplicateWarning && duplicateWarning.classList.contains('visible')) {
        btn.disabled = true;
        return;
    }

    // Check all warn warnings have verified checkboxes
    const warnWarnings = ['overlapYearWarning', 'keywayMismatchWarning', 'chipMismatchWarning', 'noChipWarning', 'fccMismatchWarning'];

    for (const warningId of warnWarnings) {
        const warning = document.getElementById(warningId);
        if (warning && warning.classList.contains('visible')) {
            const checkbox = warning.querySelector('input[type="checkbox"]');
            if (checkbox && !checkbox.checked) {
                btn.disabled = true;
                return;
            }
        }
    }

    btn.disabled = false;
}

function openAddYearRangeModal(make, model, keyType) {
    // Reset state
    yrfAutoPopulated = { keyway: null, chip: null, buttonCount: null, frequency: null, buttonFunctions: [] };
    yrfSelectedButtonFunctions = [];
    yrfActiveWarnings = [];
    yrfNewValues = {};
    yrfYearOverrides = [];
    yrfAltKeys = [];
    renderYrfAltKeysList();

    // Clear year overrides list
    document.getElementById('yearOverridesList').innerHTML = '';

    // Set hidden fields
    document.getElementById('addYearRangeMake').value = make;
    document.getElementById('addYearRangeModel').value = model;
    document.getElementById('addYearRangeKeyType').value = keyType;
    document.getElementById('addYearRangeVehicleInfo').textContent = `${make} ${model} - ${keyType}`;

    // Clear year inputs
    document.getElementById('addYearRangeStart').value = '';
    document.getElementById('addYearRangeEnd').value = '';

    // Populate all dropdowns
    populateYrfDropdowns();

    // Reset all dropdowns
    ['yrfKeyBlank', 'yrfKeyway', 'yrfChipType', 'yrfKeyType', 'yrfButtonCount', 'yrfFccId', 'yrfFrequency', 'yrfIlcoPartNum', 'yrfKeystonePartNum'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.value = '';
    });

    // Reset button functions display
    updateButtonFunctionsDisplay();

    // Hide all inline add new inputs
    document.querySelectorAll('.inline-add-new').forEach(el => {
        el.classList.remove('visible');
        const input = el.querySelector('input');
        if (input) input.value = '';
    });

    // Remove auto-populated styling
    document.querySelectorAll('.auto-populated').forEach(el => el.classList.remove('auto-populated'));

    // Hide all warnings
    ['duplicateYearWarning', 'overlapYearWarning', 'keywayMismatchWarning', 'chipMismatchWarning', 'noChipWarning', 'fccMismatchWarning'].forEach(id => {
        hideWarning(id);
    });

    // Reset multiple keys checkbox and fields
    document.getElementById('yrfMultipleKeys').checked = false;
    document.getElementById('yrfSingleKeyFields').style.display = 'block';
    document.getElementById('yrfDualKeyFields').style.display = 'none';
    // Clear dual-key lists
    yrfIgnKeys = [];
    yrfDoorKeys = [];
    const yrfIgnList = document.getElementById('yrfIgnKeysList');
    if (yrfIgnList) yrfIgnList.innerHTML = '';
    const yrfDoorList = document.getElementById('yrfDoorKeysList');
    if (yrfDoorList) yrfDoorList.innerHTML = '';
    // Clear code series dropdown
    const yrfCS = document.getElementById('yrfCodeSeries');
    if (yrfCS) yrfCS.value = '';
    const yrfCSNew = document.getElementById('yrfCodeSeriesNew');
    if (yrfCSNew) { yrfCSNew.classList.remove('visible'); const inp = yrfCSNew.querySelector('input'); if (inp) inp.value = ''; }

    // Reset chip type visibility (show by default)
    const chipGroup = document.getElementById('yrfChipTypeGroup');
    if (chipGroup) chipGroup.style.display = '';

    // Reset save button
    document.getElementById('saveYearRangeBtn').disabled = false;

    // Show modal
    document.getElementById('addYearRangeModal').classList.add('on');
    document.getElementById('addYearRangeStart').focus();
}

function closeAddYearRangeModal() {
    document.getElementById('addYearRangeModal').classList.remove('on');

    // Close button functions dropdown
    const dropdown = document.getElementById('yrfButtonFunctionsDropdown');
    if (dropdown) dropdown.classList.remove('open');
}

// ==================== YEAR-SPECIFIC OVERRIDES ====================

const OVERRIDE_FIELDS = [
    { id: 'keyBlank', label: 'Key Blank' },
    { id: 'keyway', label: 'Keyway' },
    { id: 'chip', label: 'Chip Type' },
    { id: 'keyType', label: 'Key Type' },
    { id: 'buttonCount', label: 'Button Count' },
    { id: 'buttonFunctions', label: 'Button Functions' },
    { id: 'fccId', label: 'FCC ID' },
    { id: 'frequency', label: 'Frequency' },
    { id: 'ilcoPartNum', label: 'Ilco Part Number' },
    { id: 'keystonePartNum', label: 'Keystone Part Number' }
];

function addYearOverride() {
    const mainStartYear = parseInt(document.getElementById('addYearRangeStart').value);
    const mainEndYear = parseInt(document.getElementById('addYearRangeEnd').value) || mainStartYear;

    if (!mainStartYear) {
        toast('Please enter the main year range first');
        document.getElementById('addYearRangeStart').focus();
        return;
    }

    const overrideIndex = yrfYearOverrides.length;
    yrfYearOverrides.push({
        yearStart: mainStartYear,
        yearEnd: mainStartYear,
        selectedFields: [],
        fieldValues: {}
    });

    renderYearOverrides();
}

function removeYearOverride(index) {
    yrfYearOverrides.splice(index, 1);
    renderYearOverrides();
}

function renderYearOverrides() {
    const container = document.getElementById('yearOverridesList');

    if (yrfYearOverrides.length === 0) {
        container.innerHTML = '';
        return;
    }

    container.innerHTML = yrfYearOverrides.map((override, index) => `
        <div class="override-item" id="overrideItem${index}">
            <div class="override-item-header">
                <div class="override-item-title">Override #${index + 1}</div>
                <button type="button" class="remove-override-btn" onclick="removeYearOverride(${index})"></button>
            </div>

            <!-- Override Year Range -->
            <div class="override-year-row">
                <div class="modal-input-group">
                    <label>Start Year</label>
                    <input type="number" class="modal-input"
                        id="overrideStart${index}"
                        value="${override.yearStart}"
                        min="1900" max="2099"
                        onchange="updateOverrideYear(${index}, 'yearStart', this.value)">
                </div>
                <div class="modal-input-group">
                    <label>End Year</label>
                    <input type="number" class="modal-input"
                        id="overrideEnd${index}"
                        value="${override.yearEnd}"
                        min="1900" max="2099"
                        onchange="updateOverrideYear(${index}, 'yearEnd', this.value)">
                </div>
            </div>

            <div class="override-validation-error" id="overrideError${index}"></div>

            <!-- Field Selection -->
            <div class="override-fields-select">
                <label style="font-size:11px;color:var(--dim);display:block;margin-bottom:8px;">Select fields to override:</label>
                ${OVERRIDE_FIELDS.map(field => `
                    <label class="override-field-checkbox">
                        <input type="checkbox"
                            ${override.selectedFields.includes(field.id) ? 'checked' : ''}
                            onchange="toggleOverrideField(${index}, '${field.id}', this.checked)">
                        <span>${field.label}</span>
                    </label>
                `).join('')}
            </div>

            <!-- Field Value Inputs -->
            <div id="overrideFieldValues${index}">
                ${renderOverrideFieldValues(index, override)}
            </div>
        </div>
    `).join('');

    // Validate overrides after rendering
    validateAllOverrides();
}

function renderOverrideFieldValues(index, override) {
    if (override.selectedFields.length === 0) {
        return '<div style="color:var(--dim);font-size:12px;font-style:italic;">Select at least one field to override</div>';
    }

    const options = getYrfDropdownOptions();

    return override.selectedFields.map(fieldId => {
        const field = OVERRIDE_FIELDS.find(f => f.id === fieldId);
        const currentValue = override.fieldValues[fieldId] || '';

        let inputHtml = '';

        switch(fieldId) {
            case 'keyBlank':
                inputHtml = renderOverrideDropdown(index, fieldId, Array.from(options.keyBlanks), currentValue, 'Select Key Blank...');
                break;
            case 'keyway':
                inputHtml = renderOverrideDropdown(index, fieldId, Array.from(options.keyways), currentValue, 'Select Keyway...');
                break;
            case 'chip':
                inputHtml = renderOverrideDropdown(index, fieldId, Array.from(options.chipTypes), currentValue, 'Select Chip Type...');
                break;
            case 'keyType':
                inputHtml = renderOverrideDropdown(index, fieldId, Array.from(options.keyTypes), currentValue, 'Select Key Type...');
                break;
            case 'buttonCount':
                inputHtml = renderOverrideDropdown(index, fieldId, Array.from(options.buttonCounts), currentValue, 'Select Button Count...');
                break;
            case 'fccId':
                inputHtml = renderOverrideDropdown(index, fieldId, Array.from(options.fccIds), currentValue, 'Select FCC ID...');
                break;
            case 'frequency':
                inputHtml = renderOverrideDropdown(index, fieldId, Array.from(options.frequencies), currentValue, 'Select Frequency...');
                break;
            case 'ilcoPartNum':
                inputHtml = renderOverrideDropdown(index, fieldId, Array.from(options.ilcoPartNums), currentValue, 'Select Ilco PN...');
                break;
            case 'keystonePartNum':
                inputHtml = renderOverrideDropdown(index, fieldId, Array.from(options.keystonePartNums), currentValue, 'Select Keystone PN...');
                break;
            case 'buttonFunctions':
                inputHtml = renderOverrideButtonFunctions(index, override.fieldValues.buttonFunctions || []);
                break;
            default:
                inputHtml = `<input type="text" class="modal-input" value="${currentValue}" onchange="updateOverrideFieldValue(${index}, '${fieldId}', this.value)">`;
        }

        return `
            <div class="override-field-value">
                <div class="override-field-value-label">${field.label}</div>
                ${inputHtml}
            </div>
        `;
    }).join('');
}

function renderOverrideDropdown(index, fieldId, options, currentValue, placeholder) {
    return `
        <select class="modal-input" onchange="updateOverrideFieldValue(${index}, '${fieldId}', this.value)">
            <option value="">${placeholder}</option>
            ${options.sort().map(opt => `<option value="${opt}" ${opt === currentValue ? 'selected' : ''}>${opt}</option>`).join('')}
            <option value="__NEW__">+ Add New...</option>
        </select>
        <input type="text" class="modal-input"
            id="overrideNewValue${index}_${fieldId}"
            style="display:none;margin-top:8px;"
            placeholder="Enter new value..."
            onchange="updateOverrideFieldValue(${index}, '${fieldId}', this.value)">
    `;
}

function renderOverrideButtonFunctions(index, selectedFunctions) {
    const options = getYrfDropdownOptions();
    const allFunctions = Array.from(options.buttonFunctions).sort();

    return `
        <div style="display:flex;flex-wrap:wrap;gap:6px;">
            ${allFunctions.map(func => `
                <label style="display:inline-flex;align-items:center;gap:4px;padding:4px 8px;background:${selectedFunctions.includes(func) ? 'var(--accent)' : 'var(--bg)'};border-radius:4px;cursor:pointer;font-size:12px;color:${selectedFunctions.includes(func) ? 'var(--bg)' : 'var(--text)'};">
                    <input type="checkbox"
                        style="display:none;"
                        ${selectedFunctions.includes(func) ? 'checked' : ''}
                        onchange="toggleOverrideButtonFunction(${index}, '${func}', this.checked)">
                    ${func}
                </label>
            `).join('')}
        </div>
    `;
}

function toggleOverrideField(index, fieldId, checked) {
    const override = yrfYearOverrides[index];

    if (checked) {
        if (!override.selectedFields.includes(fieldId)) {
            override.selectedFields.push(fieldId);
        }
    } else {
        override.selectedFields = override.selectedFields.filter(f => f !== fieldId);
        delete override.fieldValues[fieldId];
    }

    // Re-render just the field values section
    const fieldValuesContainer = document.getElementById(`overrideFieldValues${index}`);
    if (fieldValuesContainer) {
        fieldValuesContainer.innerHTML = renderOverrideFieldValues(index, override);
    }
}

function updateOverrideYear(index, field, value) {
    yrfYearOverrides[index][field] = parseInt(value) || 0;
    validateAllOverrides();
}

function updateOverrideFieldValue(index, fieldId, value) {
    // Handle "Add New" selection
    if (value === '__NEW__') {
        const newInput = document.getElementById(`overrideNewValue${index}_${fieldId}`);
        if (newInput) {
            newInput.style.display = 'block';
            newInput.focus();
        }
        return;
    }

    yrfYearOverrides[index].fieldValues[fieldId] = value;
}

function toggleOverrideButtonFunction(index, func, checked) {
    const override = yrfYearOverrides[index];
    if (!override.fieldValues.buttonFunctions) {
        override.fieldValues.buttonFunctions = [];
    }

    if (checked) {
        if (!override.fieldValues.buttonFunctions.includes(func)) {
            override.fieldValues.buttonFunctions.push(func);
        }
    } else {
        override.fieldValues.buttonFunctions = override.fieldValues.buttonFunctions.filter(f => f !== func);
    }

    // Re-render the button functions display
    const fieldValuesContainer = document.getElementById(`overrideFieldValues${index}`);
    if (fieldValuesContainer) {
        fieldValuesContainer.innerHTML = renderOverrideFieldValues(index, override);
    }
}

function validateAllOverrides() {
    const mainStartYear = parseInt(document.getElementById('addYearRangeStart').value) || 0;
    const mainEndYear = parseInt(document.getElementById('addYearRangeEnd').value) || mainStartYear;

    let hasErrors = false;

    yrfYearOverrides.forEach((override, index) => {
        const errors = [];

        // Check if override is within main range
        if (override.yearStart < mainStartYear || override.yearEnd > mainEndYear) {
            errors.push(`Override range must be within ${mainStartYear}-${mainEndYear}`);
        }

        // Check if start <= end
        if (override.yearStart > override.yearEnd) {
            errors.push('Start year cannot be after end year');
        }

        // Check for overlapping overrides with same fields
        yrfYearOverrides.forEach((other, otherIndex) => {
            if (otherIndex !== index) {
                // Check if year ranges overlap
                const yearsOverlap = !(override.yearEnd < other.yearStart || override.yearStart > other.yearEnd);

                if (yearsOverlap) {
                    // Check if they share any fields
                    const sharedFields = override.selectedFields.filter(f => other.selectedFields.includes(f));
                    if (sharedFields.length > 0) {
                        const fieldNames = sharedFields.map(f => OVERRIDE_FIELDS.find(of => of.id === f)?.label).join(', ');
                        errors.push(`Overlaps with Override #${otherIndex + 1} for: ${fieldNames}`);
                    }
                }
            }
        });

        // Display errors
        const errorEl = document.getElementById(`overrideError${index}`);
        if (errorEl) {
            if (errors.length > 0) {
                errorEl.innerHTML = errors.join('<br>');
                errorEl.classList.add('visible');
                hasErrors = true;
            } else {
                errorEl.classList.remove('visible');
            }
        }
    });

    return !hasErrors;
}

function getValidatedYearOverrides() {
    // Only return overrides that have at least one field with a value
    return yrfYearOverrides
        .filter(override => {
            return override.selectedFields.length > 0 &&
                   override.selectedFields.some(fieldId => {
                       const value = override.fieldValues[fieldId];
                       if (fieldId === 'buttonFunctions') {
                           return Array.isArray(value) && value.length > 0;
                       }
                       return value && value.trim && value.trim() !== '';
                   });
        })
        .map(override => ({
            yearStart: override.yearStart,
            yearEnd: override.yearEnd,
            fields: Object.fromEntries(
                override.selectedFields
                    .filter(fieldId => {
                        const value = override.fieldValues[fieldId];
                        if (fieldId === 'buttonFunctions') {
                            return Array.isArray(value) && value.length > 0;
                        }
                        return value && value.trim && value.trim() !== '';
                    })
                    .map(fieldId => [fieldId, override.fieldValues[fieldId]])
            )
        }));
}

// Render year overrides display for vehicle detail page
function renderYearOverridesDisplay(make, model, startYear, endYear) {
    // Find custom vehicles with year overrides for this make/model/year range
    const matchingVehicles = customVehicles.filter(v =>
        v.make === make &&
        v.model === model &&
        v.startYear === startYear &&
        v.endYear === endYear &&
        v.yearOverrides &&
        v.yearOverrides.length > 0
    );

    if (matchingVehicles.length === 0) {
        return '';
    }

    // Collect all year overrides from matching vehicles
    const allOverrides = [];
    matchingVehicles.forEach(v => {
        v.yearOverrides.forEach(override => {
            allOverrides.push(override);
        });
    });

    if (allOverrides.length === 0) {
        return '';
    }

    const fieldLabels = {
        keyBlank: 'Key Blank',
        keyway: 'Keyway',
        chip: 'Chip Type',
        keyType: 'Key Type',
        buttonCount: 'Button Count',
        buttonFunctions: 'Button Functions',
        fccId: 'FCC ID',
        frequency: 'Frequency',
        ilcoPartNum: 'Ilco Part Number',
        keystonePartNum: 'Keystone Part Number'
    };

    return `
        <div class="vehicle-override-section">
            <div class="vehicle-override-header">
                 Year-Specific Overrides
            </div>
            ${allOverrides.map(override => {
                const yearDisplay = override.yearStart === override.yearEnd
                    ? override.yearStart
                    : `${override.yearStart}-${override.yearEnd}`;

                const fields = Object.entries(override.fields || {});
                if (fields.length === 0) return '';

                return `
                    <div class="vehicle-override-item">
                        <div class="vehicle-override-years">${yearDisplay}</div>
                        <div class="vehicle-override-fields">
                            ${fields.map(([fieldId, value]) => {
                                const label = fieldLabels[fieldId] || fieldId;
                                const displayValue = Array.isArray(value) ? value.join(', ') : value;
                                return `
                                    <div class="vehicle-override-field">
                                        <span class="vehicle-override-field-name">${label}</span>
                                        <span class="vehicle-override-field-value">${displayValue}</span>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                `;
            }).join('')}
        </div>
    `;
}

// ==================== END YEAR-SPECIFIC OVERRIDES ====================

// Get value from dropdown or inline input
function getYrfFieldValue(selectId, inputId) {
    const select = document.getElementById(selectId);
    const input = document.getElementById(inputId);

    // If inline add new is visible, use that value
    const newContainer = document.getElementById(selectId + 'New');
    if (newContainer && newContainer.classList.contains('visible') && input && input.value.trim()) {
        return input.value.trim();
    }

    return select ? select.value : '';
}

function saveNewYearRange() {
    const make = document.getElementById('addYearRangeMake').value;
    const model = document.getElementById('addYearRangeModel').value;
    const baseKeyType = document.getElementById('addYearRangeKeyType').value;
    const startYear = parseInt(document.getElementById('addYearRangeStart').value);
    const endYear = parseInt(document.getElementById('addYearRangeEnd').value) || startYear;

    if (!startYear) {
        toast('Please enter a start year');
        return;
    }

    if (startYear < 1900 || startYear > 2099) {
        toast('Please enter a valid year (1900-2099)');
        return;
    }

    if (endYear < startYear) {
        toast('End year cannot be before start year');
        return;
    }

    // Check for blocking duplicate
    const duplicateWarning = document.getElementById('duplicateYearWarning');
    if (duplicateWarning && duplicateWarning.classList.contains('visible')) {
        toast('Cannot save duplicate year range');
        return;
    }

    // Validate year overrides
    if (yrfYearOverrides.length > 0 && !validateAllOverrides()) {
        toast('Please fix override validation errors');
        return;
    }

    // Get validated year overrides
    const yearOverrides = getValidatedYearOverrides();

    const isMultipleKeys = document.getElementById('yrfMultipleKeys').checked;

    // Collect override notes for any verified warnings (only for single-key mode)
    const overrideNotes = [];
    if (!isMultipleKeys) {
        const warnWarnings = ['overlapYearWarning', 'keywayMismatchWarning', 'chipMismatchWarning', 'noChipWarning', 'fccMismatchWarning'];

        const warningLabels = {
            'overlapYearWarning': 'Overlap verified',
            'keywayMismatchWarning': 'Keyway mismatch verified',
            'chipMismatchWarning': 'Chip mismatch verified',
            'noChipWarning': 'No chip verified',
            'fccMismatchWarning': 'FCC mismatch verified'
        };

        for (const warningId of warnWarnings) {
            const warning = document.getElementById(warningId);
            if (warning && warning.classList.contains('visible')) {
                const checkbox = warning.querySelector('input[type="checkbox"]');
                if (checkbox && checkbox.checked) {
                    const textEl = warning.querySelector('.conflict-warning-text');
                    overrideNotes.push(`${warningLabels[warningId]}: ${textEl ? textEl.textContent : ''}`);
                }
            }
        }
    } else {
        // Still check overlap warning in dual-key mode
        const overlapWarning = document.getElementById('overlapYearWarning');
        if (overlapWarning && overlapWarning.classList.contains('visible')) {
            const checkbox = overlapWarning.querySelector('input[type="checkbox"]');
            if (checkbox && checkbox.checked) {
                const textEl = overlapWarning.querySelector('.conflict-warning-text');
                overrideNotes.push(`Overlap verified: ${textEl ? textEl.textContent : ''}`);
            }
        }
    }

    let newVehicle;

    if (isMultipleKeys) {
        // Collect dual-key arrays (filter out completely empty entries)
        const ignKeys = yrfIgnKeys.filter(k => k.keyBlank || k.keyway || k.chip);
        const doorKeys = yrfDoorKeys.filter(k => k.keyBlank || k.keyway || k.chip);

        const hasKeyInfo = ignKeys.length > 0 || doorKeys.length > 0;
        const dataStatus = hasKeyInfo ? 'partial' : 'incomplete';

        // Flat legacy fields from first entries for backward compatibility
        const ignFirst = ignKeys[0] || {};
        const doorFirst = doorKeys[0] || {};

        newVehicle = {
            id: Date.now().toString(),
            make: make,
            model: model,
            startYear: startYear,
            endYear: endYear,
            dataStatus: dataStatus,
            multipleKeys: true,
            // Array fields (new)
            ignition_keys: ignKeys,
            door_keys: doorKeys,
            // Legacy flat fields (first entry) for backward compat
            ignition_keyBlank: ignFirst.keyBlank || '',
            ignition_chip: ignFirst.chip || '',
            ignition_keyway: ignFirst.keyway || '',
            ignition_fccid: ignFirst.fccid || '',
            ignition_buttons: ignFirst.buttons || '',
            ignition_frequency: ignFirst.frequency || '',
            ignition_codeSeries: ignFirst.codeSeries || '',
            door_keyBlank: doorFirst.keyBlank || '',
            door_chip: doorFirst.chip || '',
            door_keyway: doorFirst.keyway || '',
            door_fccid: doorFirst.fccid || '',
            door_codeSeries: doorFirst.codeSeries || '',
            notes: '',
            hasOverrides: overrideNotes.length > 0,
            overrideNotes: overrideNotes,
            yearOverrides: yearOverrides,
            createdAt: new Date().toISOString()
        };
    } else {
        // Collect all single-key field values
        const keyBlank = getYrfFieldValue('yrfKeyBlank', 'yrfKeyBlankNewInput');
        const keyway = getYrfFieldValue('yrfKeyway', 'yrfKeywayNewInput');
        const chipType = getYrfFieldValue('yrfChipType', 'yrfChipTypeNewInput');
        const keyType = getYrfFieldValue('yrfKeyType', 'yrfKeyTypeNewInput') || (baseKeyType === 'Proximity' ? 'Proximity' : 'Transponder');
        const buttonCount = getYrfFieldValue('yrfButtonCount', 'yrfButtonCountNewInput');
        const fccId = getYrfFieldValue('yrfFccId', 'yrfFccIdNewInput');
        const frequency = getYrfFieldValue('yrfFrequency', 'yrfFrequencyNewInput');
        const ilcoPartNum = getYrfFieldValue('yrfIlcoPartNum', 'yrfIlcoPartNumNewInput');
        const keystonePartNum = getYrfFieldValue('yrfKeystonePartNum', 'yrfKeystonePartNumNewInput');
        const codeSeries = getYrfFieldValue('yrfCodeSeries', 'yrfCodeSeriesNewInput');
        const buttonFunctions = [...yrfSelectedButtonFunctions];

        // Collect alt keys (filter out empty ones)
        const altKeys = yrfAltKeys
            .filter(a => a.keyBlank)
            .map(a => ({ keyBlank: a.keyBlank, keyway: a.keyway || '', chip: a.chip || '' }));

        const hasKeyInfo = keyBlank || keyway || chipType || fccId || altKeys.length > 0;
        const dataStatus = hasKeyInfo ? 'partial' : 'incomplete';

        // Format codeSeries as array for consistency with display logic
        const codeSeriesArr = codeSeries ? [{ series: codeSeries, years: `${startYear}${endYear && endYear !== startYear ? '-' + endYear : ''}` }] : undefined;

        newVehicle = {
            id: Date.now().toString(),
            make: make,
            model: model,
            startYear: startYear,
            endYear: endYear,
            dataStatus: dataStatus,
            multipleKeys: false,
            keyType: keyType,
            keyBlank: keyBlank,
            chip: chipType,
            buttons: buttonCount,
            buttonFunctions: buttonFunctions,
            fccid: fccId,
            frequency: frequency,
            keyway: keyway,
            ilcoPartNum: ilcoPartNum,
            keystonePartNum: keystonePartNum,
            codeSeries: codeSeriesArr,
            altKeys: altKeys.length > 0 ? altKeys : undefined,
            notes: '',
            hasOverrides: overrideNotes.length > 0,
            overrideNotes: overrideNotes,
            yearOverrides: yearOverrides,
            createdAt: new Date().toISOString()
        };
    }

    customVehicles.push(newVehicle);
    saveToIndexedDB('customVehicles', customVehicles);

    // Update key and FCC relationships with new data
    if (isMultipleKeys) {
        // Iterate all ignition and door key entries
        [...(newVehicle.ignition_keys || []), ...(newVehicle.door_keys || [])].forEach(k => {
            if (k.keyBlank && (k.keyway || k.chip)) {
                updateKeyRelationship(k.keyBlank, k.keyway, k.chip);
                saveKeyRelationships();
            }
            if (k.fccid && (k.buttons || k.frequency)) {
                updateFccRelationship(k.fccid, k.buttons, k.frequency, []);
                saveKeyRelationships();
            }
        });
    } else {
        const keyBlank = newVehicle.keyBlank;
        const keyway = newVehicle.keyway;
        const chipType = newVehicle.chip;
        const fccId = newVehicle.fccid;
        const buttonCount = newVehicle.buttons;
        const frequency = newVehicle.frequency;
        const buttonFunctions = newVehicle.buttonFunctions || [];
        if (keyBlank && (keyway || chipType)) {
            updateKeyRelationship(keyBlank, keyway, chipType);
            saveKeyRelationships();
        }
        if (fccId && (buttonCount || frequency || buttonFunctions.length > 0)) {
            updateFccRelationship(fccId, buttonCount, frequency, buttonFunctions);
            saveKeyRelationships();
        }
        // Save relationships for alt keys too
        (newVehicle.altKeys || []).forEach(alt => {
            if (alt.keyBlank && (alt.keyway || alt.chip)) {
                updateKeyRelationship(alt.keyBlank, alt.keyway, alt.chip);
                saveKeyRelationships();
            }
        });
    }

    if (syncEnabled) {
        uploadToCloud();
    }

    closeAddYearRangeModal();
    renderVehicleYearsForModel(make, model, baseKeyType);

    const yearDisplay = formatYearRange({startYear, endYear});
    toast(`Added year range: ${yearDisplay}`);
}

// ==================== UTILITY FUNCTIONS ====================

const MONTH_ABBR = ['', 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

function formatYearRange(v) {
    const sm = v.startMonth ? MONTH_ABBR[v.startMonth] + ' ' : '';
    const em = v.endMonth ? MONTH_ABBR[v.endMonth] + ' ' : '';
    if (v.startYear === v.endYear && !v.startMonth && !v.endMonth) return String(v.startYear);
    if (v.startYear === v.endYear && v.startMonth && !v.endMonth) return `${sm}${v.startYear}`;
    return `${sm}${v.startYear} - ${em}${v.endYear}`;
}

function monthSelectOptions(selectedValue) {
    const val = selectedValue || '';
    return '<option value=""' + (val === '' ? ' selected' : '') + '>--</option>' +
        MONTH_ABBR.slice(1).map((m, i) => {
            const v = String(i + 1);
            return '<option value="' + v + '"' + (val == v ? ' selected' : '') + '>' + m + '</option>';
        }).join('');
}

function parseCodeSeriesYears(yearsStr) {
    if (!yearsStr) return { startMonth: 0, startYear: '', endMonth: 0, endYear: '' };
    const parts = yearsStr.split('-').map(s => s.trim());
    function parsePart(p) {
        if (!p) return { month: 0, year: '' };
        var tokens = p.split(/\s+/);
        if (tokens.length === 2) {
            var mi = MONTH_ABBR.indexOf(tokens[0]);
            return { month: mi > 0 ? mi : 0, year: tokens[1] };
        }
        return { month: 0, year: tokens[0] };
    }
    if (parts.length >= 2) {
        var start = parsePart(parts[0]);
        var end = parsePart(parts.slice(1).join('-'));
        return { startMonth: start.month, startYear: start.year, endMonth: end.month, endYear: end.year };
    }
    var single = parsePart(parts[0]);
    return { startMonth: single.month, startYear: single.year, endMonth: 0, endYear: single.year };
}

function buildCodeSeriesYears(startMonth, startYear, endMonth, endYear) {
    var sm = startMonth ? MONTH_ABBR[startMonth] + ' ' : '';
    var em = endMonth ? MONTH_ABBR[endMonth] + ' ' : '';
    var sy = startYear || '';
    var ey = endYear || '';
    if (!sy && !ey) return '';
    if (sy === ey && !startMonth && !endMonth) return String(sy);
    if (!ey) return sm + sy;
    return sm + sy + '-' + em + ey;
}

function codeSeriesYearFieldsHtml(prefix, parsed, compactMonthStyle) {
    var mStyle = compactMonthStyle || 'padding:4px 2px;background:var(--bg);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;';
    var yStyle = 'width:100%;padding:4px;background:var(--bg);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;box-sizing:border-box;';
    return '<div style="display:grid;grid-template-columns:auto 1fr auto auto 1fr;gap:3px;align-items:center;">' +
        '<select id="' + prefix + 'SM" style="' + mStyle + '">' + monthSelectOptions(parsed.startMonth || '') + '</select>' +
        '<input type="number" id="' + prefix + 'SY" value="' + (parsed.startYear || '') + '" placeholder="Year" style="' + yStyle + '">' +
        '<span style="color:var(--dim);font-size:10px;">to</span>' +
        '<select id="' + prefix + 'EM" style="' + mStyle + '">' + monthSelectOptions(parsed.endMonth || '') + '</select>' +
        '<input type="number" id="' + prefix + 'EY" value="' + (parsed.endYear || '') + '" placeholder="Year" style="' + yStyle + '">' +
    '</div>';
}

// Levenshtein distance for fuzzy matching
function levenshteinDistance(str1, str2) {
    const m = str1.length;
    const n = str2.length;
    const dp = Array(m + 1).fill(null).map(() => Array(n + 1).fill(0));

    for (let i = 0; i <= m; i++) dp[i][0] = i;
    for (let j = 0; j <= n; j++) dp[0][j] = j;

    for (let i = 1; i <= m; i++) {
        for (let j = 1; j <= n; j++) {
            if (str1[i - 1] === str2[j - 1]) {
                dp[i][j] = dp[i - 1][j - 1];
            } else {
                dp[i][j] = 1 + Math.min(dp[i - 1][j], dp[i][j - 1], dp[i - 1][j - 1]);
            }
        }
    }

    return dp[m][n];
}

// Model selection -> Show key types
function selectVehicleModel(model) {
    selectedVehicleModel = model;
    document.getElementById('vehicleKeyTypePanelTitle').textContent = ` ${selectedVehicleMake} ${model}`;
    renderKeyTypesForModel(selectedVehicleMake, model);
    document.getElementById('vehicleKeyTypePanel').classList.add('on');
}

// Render key types for a make/model
function renderKeyTypesForModel(make, model) {
    const yearFilter = document.getElementById('vehicleYearFilter').value;

    // Initialize both key types - they should always be shown
    const keyTypeMap = {
        'Keyed Ignition': { keyType: 'Keyed Ignition', keys: new Set(), inStock: 0 },
        'Proximity': { keyType: 'Proximity', keys: new Set(), inStock: 0 }
    };

    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make === make && v.model === model) {
                // Apply year filter if set
                if (yearFilter) {
                    const year = parseInt(yearFilter);
                    if (!(year >= v.startYear && year <= (v.endYear || v.startYear))) {
                        return;
                    }
                }

                const keyType = key.keyType || 'Unknown';
                // Normalize key types
                let normalizedType = 'Keyed Ignition'; // Default fallback
                const lowerType = keyType.toLowerCase();
                if (lowerType.includes('proximity') || lowerType.includes('smart') || lowerType.includes('prox')) {
                    normalizedType = 'Proximity';
                } else if (lowerType.includes('transponder') || lowerType.includes('chip') || lowerType === 'unknown' || lowerType === '') {
                    normalizedType = 'Keyed Ignition';
                } else if (lowerType.includes('remote head') || lowerType.includes('flip') || lowerType.includes('fobik')) {
                    normalizedType = 'Keyed Ignition';
                } else if (lowerType.includes('remote')) {
                    // Remote-only keys go to Proximity
                    normalizedType = 'Proximity';
                }
                // normalizedType is guaranteed to be either 'Keyed Ignition' or 'Proximity'

                keyTypeMap[normalizedType].keys.add(key.pn);
                if ((stockData[key.pn] || 0) > 0) {
                    keyTypeMap[normalizedType].inStock++;
                }
            }
        });
    });

    // Also check custom vehicles for this make/model
    customVehicles.forEach(v => {
        if (v.make === make && v.model === model && v.startYear) {
            const normalizedType = normalizeKeyType(v.keyType);
            // Custom vehicles don't have part numbers, so we just note they exist
        }
    });

    // Always show both key types, with Keyed Ignition first, then Proximity
    const keyTypes = [keyTypeMap['Keyed Ignition'], keyTypeMap['Proximity']];

    const container = document.getElementById('vehicleKeyTypeList');

    container.innerHTML = keyTypes.map(kt => {
        const icon = kt.keyType === 'Proximity' ? '' : '';
        const hasKeys = kt.keys.size > 0;
        return `
            <div class="vehicle-card" onclick="selectVehicleKeyType('${kt.keyType.replace(/'/g, "\\'")}')">
                <div class="vehicle-card-header">
                    <div class="vehicle-card-title">${icon} ${kt.keyType}</div>
                    <span class="vehicle-stock-badge ${kt.inStock > 0 ? 'in-stock' : (hasKeys ? 'out-of-stock' : '')}" style="${!hasKeys ? 'background:var(--bg);color:var(--dim);' : ''}">
                        ${kt.inStock > 0 ? `${kt.inStock} in stock` : (hasKeys ? 'None in stock' : 'No keys yet')}
                    </span>
                </div>
                <div class="vehicle-card-info">
                    <span style="color:var(--dim);">${hasKeys ? `${kt.keys.size} key${kt.keys.size !== 1 ? 's' : ''}` : 'Add year ranges to get started'}</span>
                </div>
            </div>
        `;
    }).join('');

    // Add notes section at the bottom of the key type page
    const noteKey = `${make}|${model}`;
    const existingNote = vehicleYearNotes[noteKey] || '';
    const escapedMakeNote = make.replace(/'/g, "\\'");
    const escapedModelNote = model.replace(/'/g, "\\'");
    container.innerHTML += `
        <div style="margin-top:16px;padding:16px;background:var(--card);border-radius:12px;border:1px solid var(--border);">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                <span style="font-size:13px;font-weight:600;color:var(--text);">Notes</span>
                <button onclick="saveVehicleYearNote('${escapedMakeNote}', '${escapedModelNote}', '')"
                    style="padding:5px 12px;background:var(--accent);border:none;border-radius:6px;color:var(--bg);font-size:12px;cursor:pointer;font-weight:600;">Save</button>
            </div>
            <textarea id="vehicleKeyTypeNoteInput" placeholder="Add notes about this vehicle's keys, reference source differences, etc..."
                style="width:100%;min-height:80px;padding:10px;background:var(--bg);border:1px solid var(--border);border-radius:8px;color:var(--text);font-size:13px;resize:vertical;box-sizing:border-box;font-family:inherit;">${existingNote}</textarea>
        </div>
    `;
}

// Key type selection -> Show year groups
function selectVehicleKeyType(keyType) {
    selectedVehicleKeyType = keyType;
    document.getElementById('vehicleYearsPanelTitle').textContent = ` ${selectedVehicleMake} ${selectedVehicleModel} - ${keyType}`;
    renderVehicleYearsForModel(selectedVehicleMake, selectedVehicleModel, keyType);
    document.getElementById('vehicleYearsPanel').classList.add('on');
}

// Helper to normalize key type for filtering
function normalizeKeyType(keyType) {
    const lowerType = (keyType || '').toLowerCase();
    if (lowerType.includes('proximity') || lowerType.includes('smart') || lowerType.includes('prox')) {
        return 'Proximity';
    } else if (lowerType.includes('transponder') || lowerType.includes('chip') || lowerType === 'unknown' || lowerType === '') {
        return 'Keyed Ignition';
    } else if (lowerType.includes('remote head') || lowerType.includes('flip') || lowerType.includes('fobik')) {
        return 'Keyed Ignition';
    } else if (lowerType.includes('remote')) {
        return 'Proximity';
    }
    return 'Keyed Ignition'; // Default to Keyed Ignition
}

function renderVehicleYearsForModel(make, model, keyType) {
    const yearFilter = document.getElementById('vehicleYearFilter').value;
    const vehicles = getUniqueVehicles().filter(v => v.make === make && v.model === model);

    // Apply year filter if set
    let filteredVehicles = vehicles;
    if (yearFilter) {
        const year = parseInt(yearFilter);
        filteredVehicles = vehicles.filter(v => year >= v.startYear && year <= v.endYear);
    }

    // Filter keys within each vehicle by key type and recalculate
    filteredVehicles = filteredVehicles.map(v => {
        const filteredKeys = keyType
            ? v.keys.filter(k => normalizeKeyType(k.keyType) === keyType)
            : v.keys;
        return { ...v, keys: filteredKeys };
    }).filter(v => {
        // Keep vehicles with matching keys
        if (v.keys.length > 0) return true;
        // For custom vehicles, only show if their key type matches the current page
        if (v.isCustom && v.customKeyType) {
            return v.customKeyType === keyType;
        }
        // Custom vehicles without a key type set - don't show (they need a key type)
        return false;
    });

    // Suppress DB-only year ranges that are fully covered by custom sub-ranges.
    // E.g., if DB has 1991-1996 but the user created custom entries for 1991-1992
    // and 1993-1996, hide the 1991-1996 card since the sub-ranges replace it.
    const customRanges = filteredVehicles
        .filter(v => v.isCustom)
        .map(v => ({ start: v.startYear, end: v.endYear }))
        .sort((a, b) => a.start - b.start);

    if (customRanges.length > 0) {
        filteredVehicles = filteredVehicles.filter(v => {
            if (v.isCustom) return true; // Always show custom entries

            // Check if this DB range is fully covered by custom ranges
            let covered = v.startYear;
            for (const range of customRanges) {
                if (range.start > covered) break; // Gap found
                covered = Math.max(covered, range.end + 1);
            }
            return covered <= v.endYear; // Keep if NOT fully covered
        });
    }

    // Sort by year descending
    filteredVehicles.sort((a, b) => b.startYear - a.startYear);

    const container = document.getElementById('vehicleYearsList');

    // Add Year Range button always appears first
    const escapedMake = make.replace(/'/g, "\\'");
    const escapedModel = model.replace(/'/g, "\\'");
    const escapedKeyType = keyType.replace(/'/g, "\\'");
    let html = `
        <div class="vehicle-card" onclick="openAddYearRangeModal('${escapedMake}', '${escapedModel}', '${escapedKeyType}')" style="border:1px dashed var(--accent);background:transparent;cursor:pointer;">
            <div class="vehicle-card-header">
                <div class="vehicle-card-title" style="color:var(--accent);">+ Add Year Range</div>
            </div>
            <div class="vehicle-card-info">
                <span style="color:var(--dim);">Add a new year range for ${keyType}</span>
            </div>
        </div>
    `;

    if (filteredVehicles.length === 0) {
        container.innerHTML = html + '<div style="text-align:center;color:var(--dim);padding:40px;">No existing year groups found</div>';
        return;
    }

    html += filteredVehicles.map(v => {
        const inStockKeys = v.keys.filter(k => (stockData[k.pn] || 0) > 0);
        const hasStock = inStockKeys.length > 0;
        const totalStock = inStockKeys.reduce((sum, k) => sum + (stockData[k.pn] || 0), 0);

        const yearDisplay = formatYearRange(v);
        const vehicleKey = `${v.make}|${v.model}|${v.startYear}|${v.endYear}`;

        // Build key type breakdown from filtered keys
        const keyTypeCounts = {};
        v.keys.forEach(k => {
            const kt = k.keyType || 'Unknown';
            if (!keyTypeCounts[kt]) keyTypeCounts[kt] = 0;
            keyTypeCounts[kt]++;
        });
        const keyTypeBreakdown = Object.entries(keyTypeCounts)
            .map(([type, count]) => `${type}: ${count}`)
            .join(' | ');

        // For custom vehicles with no matching keys, check if there are keys of other types
        let keyCountDisplay = `${v.keys.length} key${v.keys.length !== 1 ? 's' : ''}`;
        if (v.keys.length === 0 && v.isCustom) {
            // Check if there are keys from DB for this year range (different key type)
            const allVehicles = getUniqueVehicles();
            const fullVehicle = allVehicles.find(fv =>
                fv.make === v.make && fv.model === v.model &&
                fv.startYear === v.startYear && fv.endYear === v.endYear
            );
            if (fullVehicle && fullVehicle.keys.length > 0) {
                const otherTypeCount = fullVehicle.keys.filter(k => normalizeKeyType(k.keyType) !== keyType).length;
                if (otherTypeCount > 0) {
                    keyCountDisplay = `0 ${keyType} keys (${otherTypeCount} other type)`;
                } else {
                    keyCountDisplay = 'Custom year range';
                }
            } else {
                keyCountDisplay = 'Custom year range';
            }
        }

        return `
            <div class="vehicle-card" onclick="openVehicleDetail('${vehicleKey.replace(/'/g, "\\'")}')">
                <div class="vehicle-card-header">
                    <div class="vehicle-card-title">${yearDisplay}</div>
                    <span class="vehicle-stock-badge ${hasStock ? 'in-stock' : 'out-of-stock'}">
                        ${hasStock ? `${totalStock} in stock` : 'Out of stock'}
                    </span>
                </div>
                <div class="vehicle-card-info" style="flex-direction:column;align-items:flex-start;gap:4px;">
                    <span style="color:var(--dim);">${keyCountDisplay}</span>
                    ${keyTypeBreakdown ? `<span style="color:var(--accent2);font-size:11px;">${keyTypeBreakdown}</span>` : ''}
                    ${v.codeSeries && v.codeSeries.length > 0 ? `<span style="color:var(--accent2);font-size:11px;"> ${v.codeSeries.map(cs => cs.series + (cs.years ? ' (' + cs.years + ')' : '')).join(', ')}</span>` : ''}
                </div>
            </div>
        `;
    }).join('');

    // Add notes section at the bottom
    const noteKey = `${make}|${model}|${keyType}`;
    const existingNote = vehicleYearNotes[noteKey] || '';
    const escapedMakeNote = make.replace(/'/g, "\\'");
    const escapedModelNote = model.replace(/'/g, "\\'");
    const escapedKeyTypeNote = keyType.replace(/'/g, "\\'");
    html += `
        <div style="margin-top:16px;padding:16px;background:var(--card);border-radius:12px;border:1px solid var(--border);">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                <span style="font-size:13px;font-weight:600;color:var(--text);">Notes</span>
                <button onclick="saveVehicleYearNote('${escapedMakeNote}', '${escapedModelNote}', '${escapedKeyTypeNote}')"
                    style="padding:5px 12px;background:var(--accent);border:none;border-radius:6px;color:var(--bg);font-size:12px;cursor:pointer;font-weight:600;">Save</button>
            </div>
            <textarea id="vehicleYearNoteInput" placeholder="Add notes about key changes, reference source differences, etc..."
                style="width:100%;min-height:80px;padding:10px;background:var(--bg);border:1px solid var(--border);border-radius:8px;color:var(--text);font-size:13px;resize:vertical;box-sizing:border-box;font-family:inherit;">${existingNote}</textarea>
        </div>
    `;

    container.innerHTML = html;
}

function getUniqueVehicles() {
    // Build a map of unique vehicles with all their compatible keys
    const vehicleMap = {};

    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            // Create a unique key for each vehicle grouping
            const vehicleKey = `${v.make}|${v.model}|${v.startYear}|${v.endYear || v.startYear}`;

            if (!vehicleMap[vehicleKey]) {
                vehicleMap[vehicleKey] = {
                    make: v.make,
                    model: v.model,
                    startYear: parseInt(v.startYear) || 0,
                    endYear: parseInt(v.endYear || v.startYear) || 0,
                    keys: [],
                    keyways: new Set(),
                    fccids: new Set(),
                    chips: new Set(),
                    frequencies: new Set(),
                    codeSeries: []
                };
            }

            // Merge code series entries from this vehicle
            if (v.codeSeries) {
                if (Array.isArray(v.codeSeries)) {
                    v.codeSeries.forEach(cs => {
                        if (cs.series && !vehicleMap[vehicleKey].codeSeries.some(existing => existing.series === cs.series && existing.years === cs.years)) {
                            vehicleMap[vehicleKey].codeSeries.push(cs);
                        }
                    });
                } else if (typeof v.codeSeries === 'string' && v.codeSeries) {
                    if (!vehicleMap[vehicleKey].codeSeries.some(existing => existing.series === v.codeSeries)) {
                        vehicleMap[vehicleKey].codeSeries.push({ series: v.codeSeries, years: '' });
                    }
                }
            }

            vehicleMap[vehicleKey].keys.push(key);
            if (key.keyway) vehicleMap[vehicleKey].keyways.add(key.keyway);
            if (key.fccid) vehicleMap[vehicleKey].fccids.add(key.fccid);
            if (key.chip) vehicleMap[vehicleKey].chips.add(key.chip);
            if (key.frequency) vehicleMap[vehicleKey].frequencies.add(key.frequency);
        });
    });

    // Also include custom vehicles (year ranges added by user)
    customVehicles.forEach(cv => {
        if (!cv.make || !cv.model || !cv.startYear) return;

        const vehicleKey = `${cv.make}|${cv.model}|${cv.startYear}|${cv.endYear || cv.startYear}`;

        if (!vehicleMap[vehicleKey]) {
            vehicleMap[vehicleKey] = {
                make: cv.make,
                model: cv.model,
                startYear: parseInt(cv.startYear) || 0,
                endYear: parseInt(cv.endYear || cv.startYear) || 0,
                keys: [],
                keyways: new Set(),
                fccids: new Set(),
                chips: new Set(),
                frequencies: new Set(),
                codeSeries: [],
                isCustom: true,
                customKeyType: cv.keyType ? normalizeKeyType(cv.keyType) : null
            };
        }

        // Merge code series from custom vehicle
        if (cv.codeSeries) {
            if (!vehicleMap[vehicleKey].codeSeries) vehicleMap[vehicleKey].codeSeries = [];
            if (Array.isArray(cv.codeSeries)) {
                cv.codeSeries.forEach(cs => {
                    if (cs.series && !vehicleMap[vehicleKey].codeSeries.some(existing => existing.series === cs.series && existing.years === cs.years)) {
                        vehicleMap[vehicleKey].codeSeries.push(cs);
                    }
                });
            } else if (typeof cv.codeSeries === 'string' && cv.codeSeries) {
                if (!vehicleMap[vehicleKey].codeSeries.some(existing => existing.series === cv.codeSeries)) {
                    vehicleMap[vehicleKey].codeSeries.push({ series: cv.codeSeries, years: '' });
                }
            }
        }

        // Add custom vehicle data to the entry
        vehicleMap[vehicleKey].isCustom = true;
        // Store the normalized key type for filtering (use the most recent one if multiple)
        if (cv.keyType) {
            vehicleMap[vehicleKey].customKeyType = normalizeKeyType(cv.keyType);
        }

        // Handle dual-key vehicles - add both ignition and door key data to sets
        if (cv.multipleKeys) {
            vehicleMap[vehicleKey].multipleKeys = true;
            // Support both new array format and legacy flat fields
            const ignKeys = Array.isArray(cv.ignition_keys) && cv.ignition_keys.length > 0
                ? cv.ignition_keys
                : (cv.ignition_keyBlank || cv.ignition_keyway ? [{ keyBlank: cv.ignition_keyBlank, keyway: cv.ignition_keyway, chip: cv.ignition_chip, fccid: cv.ignition_fccid, frequency: cv.ignition_frequency, buttons: cv.ignition_buttons, codeSeries: cv.ignition_codeSeries }] : []);
            const doorKeys = Array.isArray(cv.door_keys) && cv.door_keys.length > 0
                ? cv.door_keys
                : (cv.door_keyBlank || cv.door_keyway ? [{ keyBlank: cv.door_keyBlank, keyway: cv.door_keyway, chip: cv.door_chip, fccid: cv.door_fccid, codeSeries: cv.door_codeSeries }] : []);

            ignKeys.forEach(ik => {
                if (ik.keyway) vehicleMap[vehicleKey].keyways.add(ik.keyway);
                if (ik.fccid) vehicleMap[vehicleKey].fccids.add(ik.fccid);
                if (ik.chip) vehicleMap[vehicleKey].chips.add(ik.chip);
                if (ik.frequency) vehicleMap[vehicleKey].frequencies.add(ik.frequency);
            });
            doorKeys.forEach(dk => {
                if (dk.keyway) vehicleMap[vehicleKey].keyways.add(dk.keyway);
                if (dk.fccid) vehicleMap[vehicleKey].fccids.add(dk.fccid);
                if (dk.chip) vehicleMap[vehicleKey].chips.add(dk.chip);
            });

            // Store normalized arrays on the map entry for vehicle detail display
            vehicleMap[vehicleKey].ignitionKeys = ignKeys;
            vehicleMap[vehicleKey].doorKeys = doorKeys;
        } else {
            if (cv.keyway) vehicleMap[vehicleKey].keyways.add(cv.keyway);
            if (cv.fccid) vehicleMap[vehicleKey].fccids.add(cv.fccid);
            if (cv.chip) vehicleMap[vehicleKey].chips.add(cv.chip);
            if (cv.frequency) vehicleMap[vehicleKey].frequencies.add(cv.frequency);
        }

        // Create pseudo-key objects for display in Compatible Keys section
        if (cv.multipleKeys) {
            // Use the normalized arrays already computed above
            const vdOverride = lishiVehicleData[vehicleKey] || {};
            const ignKeys = vehicleMap[vehicleKey].ignitionKeys || [];
            const doorKeys = vehicleMap[vehicleKey].doorKeys || [];

            // Add all ignition keys as pseudo-keys
            ignKeys.forEach((ik, i) => {
                const pn = ik.keyBlank || (i === 0 ? vdOverride.ignition_keyBlank : '') || '';
                if (!pn) return;
                const existing = vehicleMap[vehicleKey].keys.find(k => k.pn === pn);
                if (existing) {
                    existing.dualKeyRole = 'ignition';
                } else {
                    vehicleMap[vehicleKey].keys.push({
                        pn, keyType: cv.keyType || 'Ignition Key',
                        keyway: ik.keyway, chip: ik.chip, fccid: ik.fccid,
                        frequency: ik.frequency, buttons: ik.buttons,
                        isCustom: true, dualKeyRole: 'ignition'
                    });
                }
            });
            // Add all door keys as pseudo-keys
            doorKeys.forEach((dk, i) => {
                const pn = dk.keyBlank || (i === 0 ? vdOverride.door_keyBlank : '') || '';
                if (!pn) return;
                const existing = vehicleMap[vehicleKey].keys.find(k => k.pn === pn);
                if (existing) {
                    existing.dualKeyRole = 'door';
                } else {
                    vehicleMap[vehicleKey].keys.push({
                        pn, keyType: 'Door/Trunk/GB Key',
                        keyway: dk.keyway, chip: dk.chip, fccid: dk.fccid,
                        isCustom: true, dualKeyRole: 'door'
                    });
                }
            });
        } else if (cv.keyBlank || cv.keyType) {
            const pseudoKey = {
                pn: cv.keyBlank || 'Custom',
                keyType: cv.keyType || 'Unknown',
                keyway: cv.keyway,
                chip: cv.chip,
                fccid: cv.fccid,
                frequency: cv.frequency,
                buttons: cv.buttons,
                isCustom: true
            };
            const existing = vehicleMap[vehicleKey].keys.find(k => k.pn === pseudoKey.pn);
            if (existing) {
                // Enrich existing DB key with custom data if fields are missing
                if (!existing.keyType && pseudoKey.keyType) existing.keyType = pseudoKey.keyType;
                if (!existing.keyway && pseudoKey.keyway) existing.keyway = pseudoKey.keyway;
                if (!existing.chip && pseudoKey.chip) existing.chip = pseudoKey.chip;
                if (!existing.fccid && pseudoKey.fccid) existing.fccid = pseudoKey.fccid;
                if (!existing.frequency && pseudoKey.frequency) existing.frequency = pseudoKey.frequency;
                if (!existing.buttons && pseudoKey.buttons) existing.buttons = pseudoKey.buttons;
            } else {
                vehicleMap[vehicleKey].keys.push(pseudoKey);
            }
            // Push alternative ignition keys as additional compatible keys
            if (Array.isArray(cv.altKeys)) {
                cv.altKeys.forEach(alt => {
                    if (!alt.keyBlank) return;
                    const altExists = vehicleMap[vehicleKey].keys.find(k => k.pn === alt.keyBlank);
                    if (!altExists) {
                        vehicleMap[vehicleKey].keys.push({
                            pn: alt.keyBlank,
                            keyType: cv.keyType || 'Unknown',
                            keyway: alt.keyway || '',
                            chip: alt.chip || '',
                            isCustom: true,
                            isAltIgnition: true
                        });
                    }
                });
            }
        }

        // Pull in ALL DB keys that share the same FCCID as this custom vehicle
        // This allows assigning an FCCID like "H92" to automatically include all matching keys
        const fccidsToMatch = new Set();
        if (cv.multipleKeys) {
            if (cv.ignition_fccid && cv.ignition_fccid !== 'N/A' && cv.ignition_fccid !== 'No Remote') fccidsToMatch.add(cv.ignition_fccid);
            if (cv.door_fccid && cv.door_fccid !== 'N/A' && cv.door_fccid !== 'No Remote') fccidsToMatch.add(cv.door_fccid);
        } else {
            if (cv.fccid && cv.fccid !== 'N/A') fccidsToMatch.add(cv.fccid);
        }

        if (fccidsToMatch.size > 0) {
            const entry = vehicleMap[vehicleKey];
            DB.forEach(dbKey => {
                if (!dbKey.fccid || !fccidsToMatch.has(dbKey.fccid)) return;
                // Skip if this key is already in the entry
                if (entry.keys.some(k => k.pn === dbKey.pn)) return;
                entry.keys.push(dbKey);
                if (dbKey.keyway) entry.keyways.add(dbKey.keyway);
                if (dbKey.fccid) entry.fccids.add(dbKey.fccid);
                if (dbKey.chip) entry.chips.add(dbKey.chip);
                if (dbKey.frequency) entry.frequencies.add(dbKey.frequency);
            });
        }
    });

    // Also apply key blank data from lishiVehicleData for DB-only vehicles
    // (vehicles that exist in DB but don't have a customVehicles entry)
    Object.entries(lishiVehicleData).forEach(([vehicleKey, vd]) => {
        const entry = vehicleMap[vehicleKey];
        if (!entry) return;

        // Handle single-key vehicles with a keyBlank set
        if (!vd.multipleKeys && vd.keyBlank) {
            const exists = entry.keys.some(k => k.pn === vd.keyBlank);
            if (!exists) {
                entry.keys.push({
                    pn: vd.keyBlank,
                    keyType: vd.keyType || null,
                    keyway: vd.keyway,
                    chip: vd.chip,
                    fccid: vd.fccid,
                    frequency: vd.frequency,
                    buttons: vd.buttons,
                    isCustom: true
                });
            }
        }

        if (!vd.multipleKeys) return;

        const ignPn = vd.ignition_keyBlank || '';
        const doorPn = vd.door_keyBlank || '';

        // Tag or create ignition key
        if (ignPn) {
            const existingIgn = entry.keys.find(k => k.pn === ignPn && !k.dualKeyRole);
            if (existingIgn) {
                if (!existingIgn.dualKeyRole) existingIgn.dualKeyRole = 'ignition';
            } else if (!entry.keys.some(k => k.pn === ignPn && k.dualKeyRole === 'ignition')) {
                entry.keys.push({
                    pn: ignPn,
                    keyType: vd.keyType || 'Ignition Key',
                    keyway: vd.ignition_keyway,
                    chip: vd.ignition_chip,
                    fccid: vd.ignition_fccid,
                    frequency: vd.ignition_frequency,
                    buttons: vd.ignition_buttons,
                    isCustom: true,
                    dualKeyRole: 'ignition'
                });
            }
        }
        // Tag or create door key
        if (doorPn) {
            const existingDoor = entry.keys.find(k => k.pn === doorPn && !k.dualKeyRole);
            if (existingDoor) {
                if (!existingDoor.dualKeyRole) existingDoor.dualKeyRole = 'door';
            } else if (!entry.keys.some(k => k.pn === doorPn && k.dualKeyRole === 'door')) {
                entry.keys.push({
                    pn: doorPn,
                    keyType: 'Door/Trunk/GB Key',
                    keyway: vd.door_keyway,
                    chip: vd.door_chip,
                    fccid: vd.door_fccid,
                    isCustom: true,
                    dualKeyRole: 'door'
                });
            }
        }
    });

    // Split vehicles by code series year ranges.
    // When a vehicle has multiple code series with different year sub-ranges
    // (e.g., "L" for 1994-1997 and "M" for 1998-2000), create separate entries
    // for each sub-range so they appear as distinct year groups in the search.
    const splitKeys = [];
    const removeKeys = [];
    Object.entries(vehicleMap).forEach(([key, entry]) => {
        if (!entry.codeSeries || entry.codeSeries.length < 2) return;

        // Group code series by their year range
        const yearGroups = {};
        entry.codeSeries.forEach(cs => {
            if (!cs.years) return;
            if (!yearGroups[cs.years]) yearGroups[cs.years] = [];
            yearGroups[cs.years].push(cs);
        });

        // Only split if there are multiple distinct year ranges
        const distinctRanges = Object.keys(yearGroups);
        if (distinctRanges.length < 2) return;

        // Parse and validate all ranges before splitting
        const parsedRanges = [];
        let allValid = true;
        distinctRanges.forEach(range => {
            const parts = range.split('-').map(s => parseInt(s.trim()));
            if (parts.length === 2 && !isNaN(parts[0]) && !isNaN(parts[1])) {
                parsedRanges.push({ range, start: parts[0], end: parts[1], series: yearGroups[range] });
            } else if (parts.length === 1 && !isNaN(parts[0])) {
                parsedRanges.push({ range, start: parts[0], end: parts[0], series: yearGroups[range] });
            } else {
                allValid = false;
            }
        });

        if (!allValid || parsedRanges.length < 2) return;

        // Create a new entry for each year sub-range
        parsedRanges.forEach(pr => {
            const newKey = `${entry.make}|${entry.model}|${pr.start}|${pr.end}`;
            if (vehicleMap[newKey] && newKey !== key) {
                // Entry already exists for this range, just merge code series
                pr.series.forEach(cs => {
                    if (!vehicleMap[newKey].codeSeries.some(existing => existing.series === cs.series && existing.years === cs.years)) {
                        vehicleMap[newKey].codeSeries.push(cs);
                    }
                });
                return;
            }
            splitKeys.push({
                key: newKey,
                entry: {
                    make: entry.make,
                    model: entry.model,
                    startYear: pr.start,
                    endYear: pr.end,
                    keys: [...entry.keys],
                    keyways: new Set(entry.keyways),
                    fccids: new Set(entry.fccids),
                    chips: new Set(entry.chips),
                    frequencies: new Set(entry.frequencies),
                    codeSeries: pr.series,
                    isCustom: entry.isCustom,
                    customKeyType: entry.customKeyType,
                    multipleKeys: entry.multipleKeys,
                    splitFromCodeSeries: true
                }
            });
        });

        // Mark original broad entry for removal
        removeKeys.push(key);
    });

    // Apply splits
    removeKeys.forEach(key => delete vehicleMap[key]);
    splitKeys.forEach(({ key, entry }) => {
        if (!vehicleMap[key]) {
            vehicleMap[key] = entry;
        }
    });

    // Merge DB keys into overlapping custom vehicle sub-ranges.
    // When a DB key covers a broad range (e.g., B45 for 1991-1996) but the user
    // creates custom vehicle entries for narrower sub-ranges (e.g., 1991-1992 and
    // 1993-1996), the DB keys should appear as compatible keys in those sub-ranges.
    const allEntries = Object.values(vehicleMap);
    allEntries.forEach(dbEntry => {
        if (dbEntry.isCustom) return; // Only process DB-sourced entries

        allEntries.forEach(customEntry => {
            if (!customEntry.isCustom) return;
            if (customEntry.make !== dbEntry.make || customEntry.model !== dbEntry.model) return;

            // Check year overlap
            if (customEntry.startYear > dbEntry.endYear || customEntry.endYear < dbEntry.startYear) return;

            // Merge keys from DB entry into this overlapping custom entry
            dbEntry.keys.forEach(key => {
                if (!customEntry.keys.some(k => k.pn === key.pn)) {
                    customEntry.keys.push(key);
                }
                if (key.keyway) customEntry.keyways.add(key.keyway);
                if (key.fccid) customEntry.fccids.add(key.fccid);
                if (key.chip) customEntry.chips.add(key.chip);
                if (key.frequency) customEntry.frequencies.add(key.frequency);
            });
        });
    });

    return Object.values(vehicleMap);
}


function openVehicleDetail(vehicleKey) {
    currentViewingVehicleKey = vehicleKey; // Store for back navigation
    const [make, model, startYear, endYear] = vehicleKey.split('|');
    const vehicles = getUniqueVehicles();
    const vehicle = vehicles.find(v =>
        v.make === make &&
        v.model === model &&
        v.startYear === parseInt(startYear) &&
        v.endYear === parseInt(endYear)
    );

    if (!vehicle) {
        toast('Vehicle not found');
        // Close the detail panel and refresh the years list so user sees current data
        document.getElementById('vehicleDetailPanel').classList.remove('on');
        if (selectedVehicleMake && selectedVehicleModel && selectedVehicleKeyType) {
            renderVehicleYearsForModel(selectedVehicleMake, selectedVehicleModel, selectedVehicleKeyType);
        }
        return;
    }

    // Set header
    const yearDisplay = formatYearRange(vehicle);
    document.getElementById('vehicleDetailTitle').textContent = `${vehicle.make} ${vehicle.model}`;
    document.getElementById('vehicleDetailSubtitle').textContent = yearDisplay;

    // Get Lishi tool info for this vehicle's keyways
    const lishiTools = [];
    const keyways = Array.from(vehicle.keyways);
    keyways.forEach(keyway => {
        // Check MASTER_LISHI_TOOLS for matching keyway
        Object.entries(MASTER_LISHI_TOOLS).forEach(([toolName, toolData]) => {
            if (toolData.keyways && toolData.keyways.some(kw =>
                kw.toLowerCase().includes(keyway.toLowerCase()) ||
                keyway.toLowerCase().includes(kw.toLowerCase())
            )) {
                const inventoryData = lishiInventory[toolName] || toolData;
                lishiTools.push({
                    name: toolName,
                    inStock: inventoryData.inStock || false
                });
            }
        });
    });

    // Get year grouping from lishiVehicleData
    const groupKey = `${make}|${model}|${startYear}|${endYear}`;
    const vehicleData = lishiVehicleData[groupKey] || {};

    // Get code series - check lishiVehicleData, then vehicle's own codeSeries from keys, then fallback to keyway
    let codeSeriesDisplay = '';
    let isCodeSeriesOverride = false;
    if (vehicleData.codeSeries) {
        isCodeSeriesOverride = true;
        if (Array.isArray(vehicleData.codeSeries) && vehicleData.codeSeries.length > 0) {
            codeSeriesDisplay = vehicleData.codeSeries.map(cs =>
                `<div style="margin-bottom:4px;">${cs.series} <span style="color:var(--dim);font-size:11px;">(${cs.years})</span></div>`
            ).join('');
        } else if (typeof vehicleData.codeSeries === 'string' && vehicleData.codeSeries) {
            codeSeriesDisplay = vehicleData.codeSeries;
        } else {
            isCodeSeriesOverride = false;
        }
    }
    // Also check vehicle's own codeSeries from key data
    if (!isCodeSeriesOverride && vehicle.codeSeries && vehicle.codeSeries.length > 0) {
        isCodeSeriesOverride = true;
        codeSeriesDisplay = vehicle.codeSeries.map(cs =>
            `<div style="margin-bottom:4px;">${cs.series}${cs.years ? ` <span style="color:var(--dim);font-size:11px;">(${cs.years})</span>` : ''}</div>`
        ).join('');
    }
    if (!isCodeSeriesOverride) {
        codeSeriesDisplay = keyways.length > 0 ? keyways[0] : 'N/A';
    }

    // Get FIDs for this vehicle's FCC IDs
    const fccids = Array.from(vehicle.fccids);
    const fids = new Set();
    const fidInfo = []; // Array of { fid, fccid, otherKeysInStock }

    fccids.forEach(fccid => {
        const fid = fidAssignments[fccid];
        if (fid) {
            fids.add(fid);

            // Find other keys with the same FID that are in stock
            const otherKeysWithSameFid = DB.filter(key => {
                if (!key.fccid || key.fccid === fccid) return false;
                const keyFid = fidAssignments[key.fccid];
                return keyFid === fid && (stockData[key.pn] || 0) > 0;
            });

            if (otherKeysWithSameFid.length > 0) {
                fidInfo.push({
                    fid: fid,
                    fccid: fccid,
                    otherKeys: otherKeysWithSameFid
                });
            }
        }
    });

    const fidDisplay = fids.size > 0 ? Array.from(fids).join(', ') : 'Not assigned';

    // Calculate total stock for this vehicle
    const totalVehicleStock = vehicle.keys.reduce((sum, key) => sum + (stockData[key.pn] || 0), 0);
    const hasStock = totalVehicleStock > 0;

    // Get secondary key (Door/Trunk/GB) from vehicle data
    const secondaryKeyPN = vehicleData.secondaryKeyPN || null;
    const secondaryKeyStock = secondaryKeyPN ? (stockData[secondaryKeyPN] || 0) : 0;
    const secondaryKeyDisplay = secondaryKeyPN
        ? `${secondaryKeyPN} <span style="color:${secondaryKeyStock > 0 ? 'var(--success)' : 'var(--danger)'};">(${secondaryKeyStock})</span>`
        : null;

    // Check if this is a dual-key vehicle (multipleKeys)
    const cvForDetail = customVehicles.find(c =>
        c.make === make && c.model === model &&
        c.startYear === parseInt(startYear) && c.endYear === parseInt(endYear)
    );
    const isDualKey = (cvForDetail && cvForDetail.multipleKeys === true) || vehicleData.multipleKeys === true;

    // Build content
    let html = `
        <!-- Big Stock Indicator -->
        <div style="text-align:center;padding:24px;background:${hasStock ? 'rgba(0,255,136,0.1)' : 'rgba(255,68,68,0.1)'};border-bottom:1px solid var(--border);">
            <div style="font-size:48px;font-weight:700;color:${hasStock ? 'var(--success)' : '#ff4444'};">${totalVehicleStock}</div>
            <div style="font-size:14px;color:${hasStock ? 'var(--success)' : '#ff4444'};font-weight:600;">${hasStock ? 'IN STOCK' : 'OUT OF STOCK'}</div>
        </div>

        <!-- Vehicle Info Grid -->
        <div style="display:flex;justify-content:flex-end;padding:8px 16px 0;">
            <button class="lishi-action-btn" onclick="openVehicleDataEditModal('${groupKey}', '${make}', '${model}', '${startYear}', '${endYear}')">
                 Edit Data
            </button>
        </div>
    `;

    if (isDualKey) {
        // Dual-key vehicle display  supports multiple ignition and door keys
        const hasDiffCS = vehicleData.differentCodeSeries === true;

        // Build ignition key array from cvForDetail (new arrays or legacy flat fields)
        const ignKeysDisplay = (() => {
            if (cvForDetail) {
                if (Array.isArray(cvForDetail.ignition_keys) && cvForDetail.ignition_keys.length > 0) return cvForDetail.ignition_keys;
                if (cvForDetail.ignition_keyBlank || cvForDetail.ignition_keyway) {
                    return [{ keyBlank: cvForDetail.ignition_keyBlank, chip: cvForDetail.ignition_chip, keyway: cvForDetail.ignition_keyway, fccid: cvForDetail.ignition_fccid, buttons: cvForDetail.ignition_buttons, frequency: cvForDetail.ignition_frequency, codeSeries: cvForDetail.ignition_codeSeries }];
                }
            }
            if (vehicleData.ignition_keyBlank || vehicleData.ignition_keyway) {
                return [{ keyBlank: vehicleData.ignition_keyBlank, chip: vehicleData.ignition_chip, keyway: vehicleData.ignition_keyway, fccid: vehicleData.ignition_fccid, buttons: vehicleData.ignition_buttons, frequency: vehicleData.ignition_frequency, codeSeries: vehicleData.ignition_codeSeries }];
            }
            return [];
        })();

        const doorKeysDisplay = (() => {
            if (cvForDetail) {
                if (Array.isArray(cvForDetail.door_keys) && cvForDetail.door_keys.length > 0) return cvForDetail.door_keys;
                if (cvForDetail.door_keyBlank || cvForDetail.door_keyway) {
                    return [{ keyBlank: cvForDetail.door_keyBlank, chip: cvForDetail.door_chip, keyway: cvForDetail.door_keyway, fccid: cvForDetail.door_fccid, codeSeries: cvForDetail.door_codeSeries }];
                }
            }
            if (vehicleData.door_keyBlank || vehicleData.door_keyway) {
                return [{ keyBlank: vehicleData.door_keyBlank, chip: vehicleData.door_chip, keyway: vehicleData.door_keyway, fccid: vehicleData.door_fccid, codeSeries: vehicleData.door_codeSeries }];
            }
            return [];
        })();

        const renderKeySection = (keyEntry, idx, total, type) => {
            const isIgn = type === 'ign';
            const csData = keyEntry.codeSeries || '';
            const cs = typeof csData === 'string' ? csData : (Array.isArray(csData) ? csData.map(c => c.series + (c.years ? ' (' + c.years + ')' : '')).join(', ') : '');
            const label = isIgn
                ? ('&#128273; Ignition Key' + (total > 1 ? ' ' + (idx + 1) : ''))
                : ('&#128682; Door / Trunk / Glovebox Key' + (total > 1 ? ' ' + (idx + 1) : ''));
            const bg = isIgn ? 'rgba(0,212,255,0.08)' : 'rgba(255,107,53,0.08)';
            const borderCol = isIgn ? 'var(--accent)' : 'var(--accent2)';
            const titleColor = isIgn ? 'var(--accent)' : 'var(--accent2)';
            const margin = idx === 0 ? (isIgn ? '12px 16px 8px' : '0 16px 8px') : '0 16px 8px';
            return `
            <div style="margin:${margin};padding:12px;background:${bg};border:1px solid ${borderCol};border-radius:8px;">
                <div style="font-weight:600;color:${titleColor};margin-bottom:10px;font-size:14px;">${label}</div>
                <div class="vehicle-info-grid" style="margin:0;padding:0;">
                    ${keyEntry.keyBlank ? '<div class="vehicle-info-item"><div class="vehicle-info-label">Key Blank</div><div class="vehicle-info-value highlight">' + keyEntry.keyBlank + '</div></div>' : ''}
                    ${keyEntry.chip ? '<div class="vehicle-info-item"><div class="vehicle-info-label">Chip Type</div><div class="vehicle-info-value">' + keyEntry.chip + '</div></div>' : ''}
                    ${keyEntry.keyway ? '<div class="vehicle-info-item"><div class="vehicle-info-label">Keyway</div><div class="vehicle-info-value highlight">' + keyEntry.keyway + '</div></div>' : ''}
                    ${keyEntry.fccid ? '<div class="vehicle-info-item"><div class="vehicle-info-label">FCC ID</div><div class="vehicle-info-value highlight">' + keyEntry.fccid + '</div></div>' : ''}
                    ${isIgn && keyEntry.buttons ? '<div class="vehicle-info-item"><div class="vehicle-info-label">Buttons</div><div class="vehicle-info-value">' + keyEntry.buttons + '</div></div>' : ''}
                    ${isIgn && keyEntry.frequency ? '<div class="vehicle-info-item"><div class="vehicle-info-label">Frequency</div><div class="vehicle-info-value">' + keyEntry.frequency + '</div></div>' : ''}
                    ${cs ? '<div class="vehicle-info-item"><div class="vehicle-info-label">Code Series</div><div class="vehicle-info-value highlight">' + cs + '</div></div>' : ''}
                </div>
            </div>`;
        };

        html += `
        <div class="vehicle-info-grid">
            <div class="vehicle-info-item">
                <div class="vehicle-info-label">Year Range</div>
                <div class="vehicle-info-value">${yearDisplay}</div>
            </div>
            ${(() => {
                const vdKeyType = vehicleData.keyType || '';
                const aggKeyTypes = vehicle.keys.map(k => k.keyType).filter(Boolean);
                const keyTypeDisplay = vdKeyType || (aggKeyTypes.length > 0 ? [...new Set(aggKeyTypes)].join(', ') : '');
                return keyTypeDisplay ? '<div class="vehicle-info-item"><div class="vehicle-info-label">Key Type</div><div class="vehicle-info-value">' + keyTypeDisplay + '</div></div>' : '';
            })()}
            ${fids.size > 0 ? '<div class="vehicle-info-item"><div class="vehicle-info-label">FID' + (fids.size > 1 ? 's' : '') + '</div><div class="vehicle-info-value highlight">' + fidDisplay + '</div></div>' : ''}
            ${vehicleData.battery ? '<div class="vehicle-info-item"><div class="vehicle-info-label">Battery</div><div class="vehicle-info-value">' + vehicleData.battery + '</div></div>' : ''}
        </div>

        ${ignKeysDisplay.map((ik, i) => renderKeySection(ik, i, ignKeysDisplay.length, 'ign')).join('')}
        ${doorKeysDisplay.map((dk, i) => renderKeySection(dk, i, doorKeysDisplay.length, 'door')).join('')}
        ${vehicleData.notes ? '<div style="margin:0 16px 12px;"><div class="vehicle-info-item" style="grid-column:1/-1;background:rgba(100,149,237,0.1);border:1px solid cornflowerblue;border-radius:6px;"><div class="vehicle-info-label" style="color:cornflowerblue;">Notes</div><div class="vehicle-info-value" style="white-space:pre-wrap;">' + vehicleData.notes + '</div></div></div>' : ''}
        `;
    } else {
        // Single-key vehicle display (original)
        html += `
        <div class="vehicle-info-grid">
            <div class="vehicle-info-item">
                <div class="vehicle-info-label">Year Range</div>
                <div class="vehicle-info-value">${yearDisplay}</div>
            </div>
            ${(() => {
                const vdKeyType = vehicleData.keyType || '';
                const aggKeyTypes = vehicle.keys.map(k => k.keyType).filter(Boolean);
                const keyTypeDisplay = vdKeyType || (aggKeyTypes.length > 0 ? [...new Set(aggKeyTypes)].join(', ') : '');
                return keyTypeDisplay ? '<div class="vehicle-info-item"><div class="vehicle-info-label">Key Type</div><div class="vehicle-info-value">' + keyTypeDisplay + '</div></div>' : '';
            })()}
            <div class="vehicle-info-item">
                <div class="vehicle-info-label">Code Series ${!isCodeSeriesOverride ? '<span style="color:#ff9500;font-size:10px;">(from keyway)</span>' : ''}</div>
                <div class="vehicle-info-value highlight">${codeSeriesDisplay}</div>
            </div>
            ${(() => {
                const vdKeyway = vehicleData.keyway || '';
                const keywayDisplay = vdKeyway || keyways.join(', ');
                return keywayDisplay ? '<div class="vehicle-info-item"><div class="vehicle-info-label">Keyway' + (keyways.length > 1 && !vdKeyway ? 's' : '') + '</div><div class="vehicle-info-value highlight">' + keywayDisplay + '</div></div>' : '';
            })()}
            ${(() => {
                const vdFccid = vehicleData.fccid || '';
                const fccidDisplay = vdFccid || Array.from(vehicle.fccids).join(', ');
                return fccidDisplay ? '<div class="vehicle-info-item"><div class="vehicle-info-label">FCC ID' + (vehicle.fccids.size > 1 && !vdFccid ? 's' : '') + '</div><div class="vehicle-info-value highlight">' + fccidDisplay + '</div></div>' : '';
            })()}
            ${fids.size > 0 ? `
            <div class="vehicle-info-item">
                <div class="vehicle-info-label">FID${fids.size > 1 ? 's' : ''}</div>
                <div class="vehicle-info-value highlight">${fidDisplay}</div>
            </div>` : ''}
            ${(() => {
                const vdChip = vehicleData.chip || '';
                const chipDisplay = vdChip || Array.from(vehicle.chips).join(', ');
                return chipDisplay ? '<div class="vehicle-info-item"><div class="vehicle-info-label">Chip Type' + (vehicle.chips.size > 1 && !vdChip ? 's' : '') + '</div><div class="vehicle-info-value">' + chipDisplay + '</div></div>' : '';
            })()}
            ${secondaryKeyPN ? `
            <div class="vehicle-info-item" style="background:rgba(255,107,53,0.1);border:1px solid var(--accent2);border-radius:6px;">
                <div class="vehicle-info-label" style="color:var(--accent2);">Door/Trunk/GB Key</div>
                <div class="vehicle-info-value highlight">${secondaryKeyDisplay}</div>
            </div>
            ` : ''}
            ${(() => {
                const vdFreq = vehicleData.frequency || '';
                const freqDisplay = vdFreq || Array.from(vehicle.frequencies).join(', ');
                return freqDisplay ? '<div class="vehicle-info-item"><div class="vehicle-info-label">Frequency</div><div class="vehicle-info-value">' + freqDisplay + '</div></div>' : '';
            })()}
            ${(() => {
                const vdButtons = vehicleData.buttons || '';
                const aggButtons = vehicle.keys.map(k => k.buttons).filter(Boolean);
                const buttonsDisplay = vdButtons || (aggButtons.length > 0 ? [...new Set(aggButtons)].join(', ') : '');
                return buttonsDisplay ? '<div class="vehicle-info-item"><div class="vehicle-info-label">Buttons</div><div class="vehicle-info-value">' + buttonsDisplay + '</div></div>' : '';
            })()}
            ${vehicleData.battery ? `
            <div class="vehicle-info-item">
                <div class="vehicle-info-label">Battery</div>
                <div class="vehicle-info-value">${vehicleData.battery}</div>
            </div>` : ''}
            ${vehicleData.notes ? `
            <div class="vehicle-info-item" style="grid-column: 1 / -1; background:rgba(100,149,237,0.1);border:1px solid cornflowerblue;border-radius:6px;">
                <div class="vehicle-info-label" style="color:cornflowerblue;">Notes</div>
                <div class="vehicle-info-value" style="white-space:pre-wrap;">${vehicleData.notes}</div>
            </div>
            ` : ''}
        </div>
        `;
    }

    html += `
        ${renderYearOverridesDisplay(make, model, parseInt(startYear), parseInt(endYear))}

        ${fidInfo.length > 0 ? `
        <div class="vehicle-section">
            <div class="vehicle-section-title">Alternative Keys with Same FID</div>
            <div style="background:var(--card);padding:12px;border-radius:8px;border:1px solid var(--success);">
                <div style="font-size:12px;color:var(--dim);margin-bottom:8px;">These keys share the same FID and are in stock:</div>
                ${fidInfo.map(info => info.otherKeys.map(key => `
                    <div style="display:flex;justify-content:space-between;align-items:center;padding:8px;background:rgba(0,255,136,0.1);border-radius:6px;margin-bottom:6px;">
                        <div>
                            <div style="font-weight:600;color:var(--text);">${key.pn}</div>
                            <div style="font-size:11px;color:var(--dim);">FID: ${info.fid}  ${key.fccid}</div>
                        </div>
                        <div style="color:var(--success);font-weight:600;">${stockData[key.pn]} in stock</div>
                    </div>
                `).join('')).join('')}
            </div>
        </div>
        ` : ''}
    `;

    // Compatible Keys Section - deduplicate by pn (prefer DB key over custom pseudo-key), then sort by stock
    const seenPNs = new Set();
    const dedupedKeys = vehicle.keys.filter(k => {
        const key = `${k.pn}|${k.dualKeyRole || ''}`;
        if (seenPNs.has(key)) return false;
        seenPNs.add(key);
        return true;
    });
    const sortedKeys = dedupedKeys.sort((a, b) => {
        const stockA = stockData[a.pn] || 0;
        const stockB = stockData[b.pn] || 0;
        return stockB - stockA; // In-stock first
    });

    // Group keys by FCCID for collapsible display
    const fccidGroups = {};
    const noFccidKeys = [];
    sortedKeys.forEach(key => {
        // Look up the actual DB key to get the fccid if the pseudo-key doesn't have it
        const dbKey = DB.find(k => k.pn === key.pn);
        const fccid = key.fccid || (dbKey ? dbKey.fccid : '') || '';
        if (fccid && fccid !== 'N/A') {
            if (!fccidGroups[fccid]) fccidGroups[fccid] = [];
            fccidGroups[fccid].push(key);
        } else {
            noFccidKeys.push(key);
        }
    });

    const fccidEntries = Object.entries(fccidGroups).sort((a, b) => a[0].localeCompare(b[0]));
    const hasFccidGroups = fccidEntries.length > 0;

    // Helper to render a single key card
    function renderKeyCard(key) {
        const stock = stockData[key.pn] || 0;
        const inStock = stock > 0;
        const keyIdx = DB.findIndex(k => k.pn === key.pn);
        const roleLabel = key.dualKeyRole === 'ignition' ? '<span style="display:inline-block;background:var(--accent);color:#000;font-size:10px;font-weight:700;padding:1px 6px;border-radius:4px;margin-left:6px;">IGNITION</span>'
            : key.dualKeyRole === 'door' ? '<span style="display:inline-block;background:var(--accent2);color:#000;font-size:10px;font-weight:700;padding:1px 6px;border-radius:4px;margin-left:6px;">DOOR</span>'
            : '';
        return `
            <div class="vehicle-key-card ${inStock ? 'in-stock' : ''}" onclick="openKeyFromVehicle(${keyIdx}, '${String(key.pn).replace(/'/g, "\\'")}')" style="cursor:pointer;">
                <div class="vehicle-key-info">
                    <h4>${key.pn}${key.ilco ? ` / ${key.ilco}` : ''}${roleLabel}</h4>
                    <p>${key.keyType || ''} ${key.buttons ? ` ${key.buttons.split(':')[0]}` : ''}</p>
                </div>
                <div class="vehicle-key-stock">
                    <div class="count" style="color:${inStock ? 'var(--success)' : 'var(--dim)'}">${stock}</div>
                    <div class="label">in stock</div>
                </div>
            </div>
        `;
    }

    html += `<div class="vehicle-section">
        <div class="vehicle-section-title">Compatible Keys (${sortedKeys.length})</div>`;

    if (hasFccidGroups) {
        // Render FCCID-grouped keys
        fccidEntries.forEach(([fccid, keys]) => {
            const totalStock = keys.reduce((sum, k) => sum + (stockData[k.pn] || 0), 0);
            html += `
                <div class="fccid-group">
                    <div class="fccid-group-header" onclick="this.parentElement.classList.toggle('collapsed')">
                        <div class="fccid-group-title">
                            <span class="fccid-group-arrow"></span>
                            <span style="font-weight:700;color:var(--accent);font-family:monospace;">${fccid}</span>
                            <span style="color:var(--dim);font-size:12px;margin-left:8px;">${keys.length} key${keys.length !== 1 ? 's' : ''}</span>
                        </div>
                        <span class="vehicle-stock-badge ${totalStock > 0 ? 'in-stock' : 'out-of-stock'}" style="font-size:11px;">
                            ${totalStock > 0 ? `${totalStock} in stock` : 'None'}
                        </span>
                    </div>
                    <div class="fccid-group-keys">
                        ${keys.map(k => renderKeyCard(k)).join('')}
                    </div>
                </div>
            `;
        });
        // Render ungrouped keys
        if (noFccidKeys.length > 0) {
            html += `
                <div class="fccid-group">
                    <div class="fccid-group-header" onclick="this.parentElement.classList.toggle('collapsed')">
                        <div class="fccid-group-title">
                            <span class="fccid-group-arrow"></span>
                            <span style="font-weight:700;color:var(--dim);">Other Keys</span>
                            <span style="color:var(--dim);font-size:12px;margin-left:8px;">${noFccidKeys.length} key${noFccidKeys.length !== 1 ? 's' : ''}</span>
                        </div>
                    </div>
                    <div class="fccid-group-keys">
                        ${noFccidKeys.map(k => renderKeyCard(k)).join('')}
                    </div>
                </div>
            `;
        }
    } else {
        // No FCCID grouping - flat list
        html += sortedKeys.map(key => renderKeyCard(key)).join('');
    }

    html += `</div>`;


    // Lishi Tools & Pick Direction Section (combined)
    const uniqueTools = lishiTools.length > 0
        ? [...new Map(lishiTools.map(t => [t.name, t])).values()]
        : [];

    html += `
        <div class="vehicle-section">
            <div class="vehicle-section-title">Lishi Tools & Pick Direction</div>
            <div style="background:var(--card);padding:12px;border-radius:8px;border:1px solid var(--border);">
                <!-- Pick Direction -->
                <div style="margin-bottom:${uniqueTools.length > 0 ? '16px' : '0'};">
                    <div style="font-size:12px;color:var(--dim);margin-bottom:8px;">Pick Direction to Unlock</div>
                    <div style="display:flex;gap:8px;align-items:center;">
                        <button class="lishi-dir-btn cw ${vehicleData.direction === 'CW' ? 'active' : ''}"
                                onclick="setVehicleDirectionFromVehiclePage('${groupKey}', 'CW')"> CW</button>
                        <button class="lishi-dir-btn ccw ${vehicleData.direction === 'CCW' ? 'active' : ''}"
                                onclick="setVehicleDirectionFromVehiclePage('${groupKey}', 'CCW')"> CCW</button>
                        <button class="lishi-confirm-btn" style="margin-left:auto;"
                                onclick="confirmVehicleDirectionFromVehiclePage('${groupKey}')"
                                ${!vehicleData.direction ? 'disabled title="Set a direction first"' : ''}>
                             Confirm
                        </button>
                    </div>
                    ${vehicleData.direction ? `
                        <div style="font-size:14px;color:${vehicleData.direction === 'CW' ? 'var(--success)' : '#ff9500'};font-weight:600;margin-top:8px;">
                            ${vehicleData.direction === 'CW' ? ' Clockwise (CW)' : ' Counter-Clockwise (CCW)'}
                            ${vehicleData.confirmCount ? `<span style="font-size:12px;color:var(--dim);font-weight:400;margin-left:8px;">Confirmed ${vehicleData.confirmCount}x</span>` : ''}
                        </div>
                    ` : `<div style="font-size:13px;color:var(--dim);margin-top:8px;">No direction set yet</div>`}
                </div>

                ${uniqueTools.length > 0 ? `
                    <!-- Compatible Lishi Tools -->
                    <div style="border-top:1px solid var(--border);padding-top:12px;">
                        <div style="font-size:12px;color:var(--dim);margin-bottom:8px;">Compatible Tools</div>
                        <div class="vehicle-tools-section" style="margin:0;">
                            ${uniqueTools.map(tool => `
                                <div class="vehicle-tool-item">
                                    <div class="vehicle-tool-name">${tool.name}</div>
                                    <div class="vehicle-tool-status ${tool.inStock ? 'owned' : 'needed'}">
                                        ${tool.inStock ? 'Owned' : 'Needed'}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                ` : `
                    <div style="border-top:1px solid var(--border);padding-top:12px;">
                        <div style="font-size:12px;color:var(--dim);">No Lishi tools mapped for this vehicle</div>
                    </div>
                `}
            </div>
        </div>
    `;

    // Programming Tools & Adapters Section - find matching tools from toolsDatabase
    const matchingTools = findToolsForVehicle(make, model, vehicle.startYear, vehicle.endYear);
    const hasToolWarning = matchingTools.some(t => t.status !== 'owned');

    if (matchingTools.length > 0) {
        html += `
            <div class="vehicle-section">
                <div class="vehicle-section-title">
                    Programming Tools & Adapters
                    ${hasToolWarning ? '<span style="color:#ff9500;margin-left:8px;"> Missing tools</span>' : ''}
                </div>
                <div class="vehicle-tools-section">
                    ${matchingTools.map(tool => {
                        const statusColor = tool.status === 'owned' ? 'var(--success)' :
                            (tool.status === 'wishlist' ? '#ffc107' : '#9e9e9e');
                        const statusText = tool.status === 'owned' ? ' Owned' :
                            (tool.status === 'wishlist' ? ' Wishlist' : ' Not Owned');
                        const platformNames = tool.compatiblePlatforms.map(pid => {
                            const platform = toolsDatabase.platforms[pid];
                            return platform ? platform.name : '';
                        }).filter(n => n).join(', ');

                        // Get the tool's specific year ranges for this vehicle
                        const toolYearRanges = tool.matchingApplications ? tool.matchingApplications.map(app => {
                            const yearText = app.yearStart === app.yearEnd
                                ? app.yearStart
                                : `${app.yearStart}-${app.yearEnd}`;
                            return { yearText, variantNote: app.variantNote };
                        }) : [];

                        return `
                            <div class="vehicle-tool-item" style="flex-direction:column;align-items:stretch;gap:8px;" onclick="openToolDetail('${tool.id}')">
                                <div style="display:flex;justify-content:space-between;align-items:center;">
                                    <div>
                                        <div class="vehicle-tool-name">${tool.name}</div>
                                        ${tool.partNumber ? `<div style="font-size:11px;color:var(--dim);">#${tool.partNumber}</div>` : ''}
                                    </div>
                                    <div style="padding:4px 8px;border-radius:4px;font-size:11px;background:rgba(${tool.status === 'owned' ? '76,175,80' : (tool.status === 'wishlist' ? '255,193,7' : '158,158,158')},0.2);color:${statusColor};">
                                        ${statusText}
                                    </div>
                                </div>
                                ${toolYearRanges.length > 0 ? `
                                    <div style="font-size:11px;color:var(--accent);font-weight:500;">
                                        Applies to: ${toolYearRanges.map(r => r.yearText).join(', ')}
                                    </div>
                                    ${toolYearRanges.filter(r => r.variantNote).map(r => `
                                        <div style="font-size:11px;color:#ff9500;padding-left:8px;border-left:2px solid #ff9500;">
                                             ${r.variantNote}
                                        </div>
                                    `).join('')}
                                ` : ''}
                                ${platformNames ? `<div style="font-size:11px;color:var(--dim);">Platform: ${platformNames}</div>` : ''}
                                ${tool.jobTypes && tool.jobTypes.length > 0 ? `
                                    <div style="display:flex;flex-wrap:wrap;gap:4px;">
                                        ${tool.jobTypes.map(jt => `<span style="padding:2px 6px;background:rgba(156,39,176,0.2);border-radius:8px;color:#ce93d8;font-size:10px;">${jt}</span>`).join('')}
                                    </div>
                                ` : ''}
                                ${tool.crossReferenceNotes && tool.crossReferenceNotes.length > 0 ? `
                                    <div style="margin-top:4px;padding:8px;background:var(--bg);border-left:3px solid var(--accent);border-radius:4px;font-size:12px;color:var(--dim);">
                                        ${tool.crossReferenceNotes.map(note => `<div style="margin-bottom:4px;"> ${note}</div>`).join('')}
                                    </div>
                                ` : ''}
                            </div>
                        `;
                    }).join('')}
                </div>
            </div>
        `;
    } else {
        html += `
            <div class="vehicle-section">
                <div class="vehicle-section-title">Programming Tools & Adapters</div>
                <div class="vehicle-tools-section">
                    <div style="color:var(--dim);font-size:13px;text-align:center;padding:20px;">
                        No tools assigned for this vehicle yet
                    </div>
                </div>
            </div>
        `;
    }

    document.getElementById('vehicleDetailContent').innerHTML = html;
    document.getElementById('vehicleDetailPanel').classList.add('on');
}

// ===================== LISHI LOOKUP =====================
let currentLishiNotesKey = null;
let editingLishiTool = null;

// ===================== LISHI INVENTORY =====================
function renderLishiInventory() {
    // Merge master tools with user inventory (user inventory takes precedence)
    const allTools = { ...MASTER_LISHI_TOOLS };
    Object.entries(lishiInventory).forEach(([name, data]) => {
        allTools[name] = { ...allTools[name], ...data };
    });
    
    // Also sync lishi tools from lishiData
    Object.entries(lishiData).forEach(([keyway, data]) => {
        if (data.tool && !allTools[data.tool]) {
            allTools[data.tool] = {
                keyways: [keyway],
                keyway_family: keyway,
                door: true,
                ignition: true,
                trunk: true,
                cutStart: 1,
                cutEnd: null,
                cutTotal: null,
                inStock: true,
                notes: ''
            };
        }
    });

    // Filter out deleted tools
    deletedLishiTools.forEach(toolName => {
        delete allTools[toolName];
    });

    const tools = Object.entries(allTools).sort((a, b) => a[0].localeCompare(b[0]));

    document.getElementById('aboutLishi').textContent = tools.length;
    
    if (tools.length === 0) {
        document.getElementById('lishiInventoryList').innerHTML = '<div style="text-align:center;color:var(--dim);padding:20px;">No Lishi tools found.</div>';
        return;
    }
    
    document.getElementById('lishiInventoryList').innerHTML = tools.map(([toolName, data]) => {
        const inStock = lishiInventory[toolName]?.inStock || data.inStock || false;
        const stockClass = inStock ? 'in-stock' : 'not-in-stock';
        const stockText = inStock ? ' Owned' : 'Not Owned';
        
        // Works on display
        const door = data.door !== false;
        const ignition = data.ignition !== false;
        const trunk = data.trunk !== false;
        const worksOnParts = [];
        if (!ignition) worksOnParts.push(' No Ignition');
        if (!door) worksOnParts.push(' No Door');
        if (!trunk) worksOnParts.push(' No Trunk');
        
        // Cut range display
        let cutText = '';
        if (data.cutEnd && data.cutTotal) {
            const isPartial = data.cutStart > 1 || data.cutEnd < data.cutTotal;
            cutText = isPartial ? ` Cuts ${data.cutStart}-${data.cutEnd}/${data.cutTotal}` : `Cuts 1-${data.cutTotal}`;
        }
        
        const escapedName = toolName.replace(/'/g, "\\'");
        
        return `
            <div class="lishi-inventory-item ${stockClass}" onclick="openLishiDetail('${escapedName}')" style="cursor:pointer;">
                <div class="lishi-inv-header">
                    <span class="lishi-inv-name">${toolName}</span>
                    <span class="lishi-inv-stock-badge ${stockClass}">${stockText}</span>
                </div>
                <div class="lishi-inv-details">
                    ${worksOnParts.map(w => `<span class="lishi-inv-detail warning">${w}</span>`).join('')}
                    ${cutText ? `<span class="lishi-inv-detail ${data.cutStart > 1 ? 'warning' : ''}">${cutText}</span>` : ''}
                </div>
                ${(data.keyways && data.keyways.length > 0) ? `
                    <div class="lishi-inv-keyways">
                        ${data.keyways.map(k => `<span class="lishi-keyway-badge">${k}</span>`).join('')}
                    </div>
                ` : (data.keyway_family ? `
                    <div class="lishi-inv-keyways">
                        <span class="lishi-keyway-badge">${data.keyway_family}</span>
                    </div>
                ` : '')}
            </div>
        `;
    }).join('');
}

function filterLishiInventory() {
    const search = document.getElementById('lishiInventorySearch').value.toLowerCase();
    const items = document.querySelectorAll('#lishiInventoryList .lishi-inventory-item');

    items.forEach(item => {
        const text = item.textContent.toLowerCase();
        item.style.display = text.includes(search) ? '' : 'none';
    });
}

// ===================== KEYWAY SELECTION =====================
let selectedKeyways = [];

function getAllKeyways() {
    // Get all unique keyways from the database and custom keyways
    const keyways = new Set();
    DB.forEach(key => {
        if (key.keyway) {
            keyways.add(key.keyway);
        }
    });
    // Include custom keyways added by user
    customKeyways.forEach(kw => keyways.add(kw));
    return Array.from(keyways).sort();
}

function getKeywayKeyCount(keyway) {
    return DB.filter(key => key.keyway === keyway).length;
}

function initKeywayDropdown(preselected = []) {
    selectedKeyways = [...preselected];
    const allKeyways = getAllKeyways();

    // Combine all keyways with any preselected keyways that aren't in the list
    const allKeywaysSet = new Set(allKeyways);
    preselected.forEach(k => allKeywaysSet.add(k));
    const sortedKeyways = Array.from(allKeywaysSet).sort();

    const dropdown = document.getElementById('keywayDropdown');
    dropdown.innerHTML = sortedKeyways.map(keyway => {
        const count = getKeywayKeyCount(keyway);
        const isSelected = selectedKeyways.includes(keyway);
        // A keyway is "custom" if it has no keys in DB (either from customKeyways or preselected)
        const isCustom = count === 0;
        return `
            <div class="keyway-option ${isSelected ? 'selected' : ''}" data-keyway="${keyway}" onclick="toggleKeywaySelection('${keyway.replace(/'/g, "\\'")}')">
                <div class="keyway-option-checkbox"></div>
                <span class="keyway-option-label">${keyway}${isCustom ? ' (custom)' : ''}</span>
                <span class="keyway-option-count">${count > 0 ? count + ' keys' : 'manual'}</span>
            </div>
        `;
    }).join('');

    updateKeywayTags();
    updateKeywayHiddenInput();
    // Show dropdown by default when initialized
    showKeywayDropdown();
}

function showKeywayDropdown() {
    document.getElementById('keywayDropdown').classList.add('show');
    document.getElementById('keywaySelectContainer').classList.add('open');
}

function hideKeywayDropdown() {
    document.getElementById('keywayDropdown').classList.remove('show');
    document.getElementById('keywaySelectContainer').classList.remove('open');
}

function toggleKeywaySelection(keyway) {
    const index = selectedKeyways.indexOf(keyway);
    if (index > -1) {
        selectedKeyways.splice(index, 1);
    } else {
        selectedKeyways.push(keyway);
    }

    // Update the option's selected state
    const option = document.querySelector(`.keyway-option[data-keyway="${keyway}"]`);
    if (option) {
        option.classList.toggle('selected', selectedKeyways.includes(keyway));
    }

    updateKeywayTags();
    updateKeywayHiddenInput();
}

function removeKeyway(keyway) {
    const index = selectedKeyways.indexOf(keyway);
    if (index > -1) {
        selectedKeyways.splice(index, 1);
    }

    // Update the option's selected state
    const option = document.querySelector(`.keyway-option[data-keyway="${keyway}"]`);
    if (option) {
        option.classList.remove('selected');
    }

    updateKeywayTags();
    updateKeywayHiddenInput();
}

function updateKeywayTags() {
    const tagsContainer = document.getElementById('keywaySelectedTags');
    tagsContainer.innerHTML = selectedKeyways.map(keyway => {
        const escapedKeyway = keyway.replace(/'/g, "\\'");
        return `
        <span class="keyway-tag">
            ${keyway}
            <span class="keyway-tag-remove" onclick="event.stopPropagation(); removeKeyway('${escapedKeyway}')"></span>
        </span>
    `}).join('');
}

function updateKeywayHiddenInput() {
    document.getElementById('lishiToolKeyways').value = selectedKeyways.join(', ');
}

function filterKeywayOptions() {
    const searchInput = document.getElementById('keywaySearchInput');
    const search = searchInput.value.toLowerCase().trim();
    const searchUpper = searchInput.value.trim().toUpperCase();
    const dropdown = document.getElementById('keywayDropdown');
    const options = dropdown.querySelectorAll('.keyway-option:not(.add-new-keyway)');

    // Remove any existing "add new" option
    const existingAddNew = dropdown.querySelector('.add-new-keyway');
    if (existingAddNew) existingAddNew.remove();

    let hasExactMatch = false;
    let visibleCount = 0;

    options.forEach(option => {
        const keyway = option.dataset.keyway.toLowerCase();
        const isVisible = keyway.includes(search);
        option.style.display = isVisible ? '' : 'none';
        if (isVisible) visibleCount++;
        if (keyway === search) hasExactMatch = true;
    });

    // If search has text and no exact match, show "Add new keyway" option
    if (search && !hasExactMatch) {
        const addNewOption = document.createElement('div');
        addNewOption.className = 'keyway-option add-new-keyway';
        addNewOption.innerHTML = `
            <div class="keyway-option-checkbox" style="background: #4a90d9; border-color: #4a90d9;">+</div>
            <span class="keyway-option-label">Add "${searchUpper}" as new keyway</span>
            <span class="keyway-option-count">custom</span>
        `;
        addNewOption.onclick = () => addNewKeyway(searchUpper);
        dropdown.insertBefore(addNewOption, dropdown.firstChild);
    }

    showKeywayDropdown();
}

function addNewKeyway(keyway) {
    if (!keyway) return;

    // Add to custom keyways if not already there
    if (!customKeyways.includes(keyway)) {
        customKeyways.push(keyway);
        saveCustomKeyways();
    }

    // Add to selection
    if (!selectedKeyways.includes(keyway)) {
        selectedKeyways.push(keyway);
    }

    // Clear search and reinitialize dropdown
    document.getElementById('keywaySearchInput').value = '';
    initKeywayDropdown(selectedKeyways);
    toast('Keyway "' + keyway + '" added');
}

// Close dropdown when clicking outside
document.addEventListener('click', function(e) {
    const container = document.getElementById('keywaySelectContainer');
    if (container && !container.contains(e.target)) {
        hideKeywayDropdown();
    }
});

function openAddLishiToolModal() {
    editingLishiTool = null;
    document.getElementById('lishiToolModalTitle').textContent = 'Add Lishi Tool';
    document.getElementById('lishiToolNameGroup').style.display = '';
    document.getElementById('lishiToolName').value = '';
    document.getElementById('keywaySearchInput').value = '';
    initKeywayDropdown([]);
    document.getElementById('lishiToolCodeSeries').value = '';
    document.getElementById('lishiToolWorksOn').value = 'all';
    document.getElementById('lishiToolCutStart').value = '1';
    document.getElementById('lishiToolCutEnd').value = '';
    document.getElementById('lishiToolCutTotal').value = '';
    document.getElementById('lishiToolInStock').value = 'yes';
    document.getElementById('lishiToolNotes').value = '';
    document.getElementById('lishiToolModal').classList.add('on');
}

function openAddLishiToolModalWithKeyway(keyway) {
    editingLishiTool = null;
    document.getElementById('lishiToolModalTitle').textContent = 'Add Lishi Tool';
    document.getElementById('lishiToolNameGroup').style.display = '';
    document.getElementById('lishiToolName').value = '';
    document.getElementById('keywaySearchInput').value = '';
    initKeywayDropdown(keyway ? [keyway] : []);
    document.getElementById('lishiToolCodeSeries').value = '';
    document.getElementById('lishiToolWorksOn').value = 'all';
    document.getElementById('lishiToolCutStart').value = '1';
    document.getElementById('lishiToolCutEnd').value = '';
    document.getElementById('lishiToolCutTotal').value = '';
    document.getElementById('lishiToolInStock').value = 'yes';
    document.getElementById('lishiToolNotes').value = '';
    document.getElementById('lishiToolModal').classList.add('on');
}

function editLishiTool(toolName) {
    editingLishiTool = toolName;
    const data = lishiInventory[toolName] || MASTER_LISHI_TOOLS[toolName] || {};

    document.getElementById('lishiToolModalTitle').textContent = 'Edit Lishi Tool';
    document.getElementById('lishiToolNameGroup').style.display = '';
    document.getElementById('lishiToolName').value = toolName;
    document.getElementById('keywaySearchInput').value = '';
    initKeywayDropdown(data.keyways || []);
    document.getElementById('lishiToolCodeSeries').value = (data.codeSeries || []).join(', ');

    // Convert door/ignition/trunk booleans to worksOn select
    let worksOn = 'all';
    if (!data.ignition && data.door && data.trunk) worksOn = 'door-trunk';
    else if (data.door && !data.ignition && !data.trunk) worksOn = 'door-only';
    else if (!data.door && data.ignition && !data.trunk) worksOn = 'ignition-only';
    document.getElementById('lishiToolWorksOn').value = worksOn;

    document.getElementById('lishiToolCutStart').value = data.cutStart || '1';
    document.getElementById('lishiToolCutEnd').value = data.cutEnd || '';
    document.getElementById('lishiToolCutTotal').value = data.cutTotal || '';
    document.getElementById('lishiToolInStock').value = data.inStock ? 'yes' : 'no';
    document.getElementById('lishiToolNotes').value = data.notes || '';
    document.getElementById('lishiToolModal').classList.add('on');
}

function closeLishiToolModal() {
    document.getElementById('lishiToolModal').classList.remove('on');
    editingLishiTool = null;
}

function saveLishiTool() {
    const toolName = document.getElementById('lishiToolName').value.trim().toUpperCase();
    if (!toolName) {
        toast('Please enter a tool name');
        return;
    }

    const isRenaming = editingLishiTool && editingLishiTool !== toolName;

    // Check if tool exists when adding new or renaming
    if (!editingLishiTool && (lishiInventory[toolName] || MASTER_LISHI_TOOLS[toolName])) {
        toast('Tool already exists');
        return;
    }
    if (isRenaming && (lishiInventory[toolName] || MASTER_LISHI_TOOLS[toolName])) {
        toast('A tool with that name already exists');
        return;
    }

    const keyways = document.getElementById('lishiToolKeyways').value
        .split(',')
        .map(k => k.trim())
        .filter(k => k);

    const codeSeries = document.getElementById('lishiToolCodeSeries').value
        .split(',')
        .map(c => c.trim())
        .filter(c => c);

    const worksOn = document.getElementById('lishiToolWorksOn').value;

    // Convert worksOn select to individual booleans
    let door = true, ignition = true, trunk = true;
    if (worksOn === 'door-trunk') { ignition = false; }
    else if (worksOn === 'door-only') { ignition = false; trunk = false; }
    else if (worksOn === 'ignition-only') { door = false; trunk = false; }

    // Get existing data from the old name or master
    const existingData = editingLishiTool
        ? (lishiInventory[editingLishiTool] || MASTER_LISHI_TOOLS[editingLishiTool] || {})
        : (MASTER_LISHI_TOOLS[toolName] || {});

    lishiInventory[toolName] = {
        ...existingData,
        keyways: keyways,
        keyway_family: keyways[0] || existingData.keyway_family || '',
        codeSeries: codeSeries,
        door: door,
        ignition: ignition,
        trunk: trunk,
        cutStart: parseInt(document.getElementById('lishiToolCutStart').value) || 1,
        cutEnd: parseInt(document.getElementById('lishiToolCutEnd').value) || null,
        cutTotal: parseInt(document.getElementById('lishiToolCutTotal').value) || null,
        inStock: document.getElementById('lishiToolInStock').value === 'yes',
        notes: document.getElementById('lishiToolNotes').value.trim(),
        lastEdited: new Date().toISOString(),
        lastEditedBy: currentUser?.displayName || currentUser?.email || 'Unknown'
    };

    // Handle renaming
    if (isRenaming) {
        // Delete old name from inventory
        delete lishiInventory[editingLishiTool];

        // Update lishiData entries that reference the old tool name
        Object.keys(lishiData).forEach(kw => {
            if (lishiData[kw].tool === editingLishiTool) {
                lishiData[kw].tool = toolName;
            }
        });

        // If old name was a master tool, add it to deleted list so it doesn't reappear
        if (MASTER_LISHI_TOOLS[editingLishiTool] && !deletedLishiTools.includes(editingLishiTool)) {
            deletedLishiTools.push(editingLishiTool);
            saveDeletedLishiTools();
        }
    }

    // Also update lishiData for each keyway
    keyways.forEach(kw => {
        if (!lishiData[kw]) {
            lishiData[kw] = { tool: toolName, direction: 'CW' };
        } else {
            lishiData[kw].tool = toolName;
        }
    });
    
    saveLishiInventory();
    saveLishi();
    closeLishiToolModal();
    renderLishiInventory();
    toast(editingLishiTool ? 'Tool updated' : 'Tool added');
}

function toggleLishiStock(toolName) {
    if (lishiInventory[toolName]) {
        lishiInventory[toolName].inStock = !lishiInventory[toolName].inStock;
        saveLishiInventory();
        renderLishiInventory();
        toast(lishiInventory[toolName].inStock ? 'Marked as in stock' : 'Marked as not owned');
    }
}

function deleteLishiTool(toolName) {
    // Remove from inventory
    delete lishiInventory[toolName];
    
    // Remove tool from lishiData entries that use it
    Object.entries(lishiData).forEach(([keyway, data]) => {
        if (data.tool === toolName) {
            delete lishiData[keyway].tool;
        }
    });
    
    saveLishiInventory();
    saveLishi();
    renderLishiInventory();
    toast('Tool deleted');
}

function getLishiToolInfo(toolName) {
    const masterData = MASTER_LISHI_TOOLS[toolName] || {};
    const inventoryData = lishiInventory[toolName] || {};
    if (Object.keys(masterData).length === 0 && Object.keys(inventoryData).length === 0) {
        return null;
    }
    return { ...masterData, ...inventoryData };
}

// ===================== LISHI TOOL DETAIL PAGE =====================
let currentDetailTool = null;

function openLishiDetail(toolName) {
    currentDetailTool = toolName;
    const tool = lishiInventory[toolName] || MASTER_LISHI_TOOLS[toolName];
    
    if (!tool) {
        toast('Tool not found');
        return;
    }
    
    document.getElementById('lishiDetailTitle').textContent = toolName;
    
    // Build the detail content
    let html = '';
    
    // Stock Status Section
    const inStock = tool.inStock;
    html += `
        <div class="lishi-detail-section">
            <h3> Stock Status</h3>
            <div class="lishi-stock-toggle">
                <button class="lishi-stock-toggle-btn ${inStock ? 'active' : ''}" onclick="setLishiDetailStock('${toolName}', true)">
                     I Own This
                </button>
                <button class="lishi-stock-toggle-btn no ${!inStock ? 'active' : ''}" onclick="setLishiDetailStock('${toolName}', false)">
                     Don't Have
                </button>
            </div>
        </div>
    `;
    
    // Specifications Section
    const keywaysDisplay = (tool.keyways && tool.keyways.length > 0)
        ? tool.keyways.map(k => `<span class="lishi-keyway-badge">${k}</span>`).join(' ')
        : (tool.keyway_family ? `<span class="lishi-keyway-badge">${tool.keyway_family}</span>` : '<span style="color:var(--dim)">Not specified</span>');

    html += `
        <div class="lishi-detail-section">
            <h3> Specifications</h3>
            <div class="lishi-spec-row">
                <span class="lishi-spec-label">Tool Name</span>
                <span class="lishi-spec-value mono">${toolName}</span>
            </div>
            <div class="lishi-spec-row">
                <span class="lishi-spec-label">Associated Keyways</span>
                <span class="lishi-spec-value">${keywaysDisplay}</span>
            </div>
            <div class="lishi-spec-row">
                <span class="lishi-spec-label">Code Series</span>
                <span class="lishi-spec-value">${(tool.codeSeries && tool.codeSeries.length > 0) ? tool.codeSeries.join(', ') : '<span style="color:var(--dim)">Not specified</span>'}</span>
            </div>
    `;

    // Cut Range
    if (tool.cutEnd && tool.cutTotal) {
        const isPartial = tool.cutStart > 1 || tool.cutEnd < tool.cutTotal;
        html += `
            <div class="lishi-spec-row">
                <span class="lishi-spec-label">Cut Range</span>
                <span class="lishi-spec-value ${isPartial ? 'warning' : 'success'}">
                    ${isPartial ? ' ' : ''}Reads cuts ${tool.cutStart}-${tool.cutEnd} of ${tool.cutTotal}
                </span>
            </div>
        `;
    } else {
        html += `
            <div class="lishi-spec-row">
                <span class="lishi-spec-label">Cut Range</span>
                <span class="lishi-spec-value" style="color:var(--dim)">Not configured</span>
            </div>
        `;
    }
    
    html += `</div>`;
    
    // Works On Section
    html += `
        <div class="lishi-detail-section">
            <h3> Works On</h3>
            <div class="lishi-works-on-grid">
                <div class="lishi-works-on-item ${tool.door ? 'yes' : 'no'}">
                    <div class="lishi-works-on-icon"></div>
                    <div class="lishi-works-on-label">Door</div>
                    <div class="lishi-works-on-status">${tool.door ? ' Yes' : ' No'}</div>
                </div>
                <div class="lishi-works-on-item ${tool.ignition ? 'yes' : 'no'}">
                    <div class="lishi-works-on-icon"></div>
                    <div class="lishi-works-on-label">Ignition</div>
                    <div class="lishi-works-on-status">${tool.ignition ? ' Yes' : ' No'}</div>
                </div>
                <div class="lishi-works-on-item ${tool.trunk ? 'yes' : 'no'}">
                    <div class="lishi-works-on-icon"></div>
                    <div class="lishi-works-on-label">Trunk</div>
                    <div class="lishi-works-on-status">${tool.trunk ? ' Yes' : ' No'}</div>
                </div>
            </div>
        </div>
    `;
    
    // Keyways Section
    const keyways = tool.keyways || [];
    html += `
        <div class="lishi-detail-section">
            <h3> Compatible Keyways</h3>
            ${keyways.length > 0 ? `
                <div class="lishi-keyway-list">
                    ${keyways.map(kw => `<span class="lishi-keyway-chip">${kw}</span>`).join('')}
                </div>
            ` : '<div style="color:var(--dim);font-size:13px;">No keyways configured</div>'}
        </div>
    `;
    
    // Compatible Vehicles Section
    const compatibleVehicles = findVehiclesForTool(toolName);
    html += `
        <div class="lishi-detail-section">
            <h3> Compatible Vehicles (${compatibleVehicles.length})</h3>
            ${compatibleVehicles.length > 0 ? `
                <div class="lishi-vehicle-list">
                    ${compatibleVehicles.map(v => {
                        const groupKey = getVehicleGroupKey(v);
                        const vData = lishiVehicleData[groupKey] || {};
                        let dirClass = 'unset';
                        let dirText = 'Not Set';
                        if (vData.direction === 'CW') { dirClass = 'cw'; dirText = ' CW'; }
                        if (vData.direction === 'CCW') { dirClass = 'ccw'; dirText = ' CCW'; }
                        
                        return `
                            <div class="lishi-vehicle-item">
                                <div class="lishi-vehicle-info">
                                    <div class="lishi-vehicle-name-small">${v.make} ${v.model}</div>
                                    <div class="lishi-vehicle-years-small">${formatYearRange(v)}</div>
                                </div>
                                <span class="lishi-vehicle-direction ${dirClass}">${dirText}</span>
                            </div>
                        `;
                    }).join('')}
                </div>
            ` : '<div style="color:var(--dim);font-size:13px;">No compatible vehicles found in database</div>'}
        </div>
    `;
    
    // Notes Section
    html += `
        <div class="lishi-detail-section">
            <h3> Notes</h3>
            <div style="padding:12px;background:var(--bg);border-radius:8px;min-height:60px;">
                ${tool.notes ? `<p style="color:var(--text);font-size:13px;line-height:1.5;">${tool.notes}</p>` : '<p style="color:var(--dim);font-size:13px;">No notes</p>'}
            </div>
        </div>
    `;
    
    // Last Edited Info
    if (tool.lastEditedBy) {
        const editDate = tool.lastEdited ? new Date(tool.lastEdited).toLocaleDateString() : '';
        html += `
            <div style="margin-top:12px;padding:8px 12px;background:var(--bg);border-radius:6px;font-size:11px;color:var(--dim);">
                Last edited by ${tool.lastEditedBy}${editDate ? ' on ' + editDate : ''}
            </div>
        `;
    }

    document.getElementById('lishiDetailContent').innerHTML = html;
    document.getElementById('lishiDetailPanel').classList.add('on');
}

function closeLishiDetail() {
    document.getElementById('lishiDetailPanel').classList.remove('on');
    currentDetailTool = null;
}

function openEditLishiToolFromDetail() {
    if (currentDetailTool) {
        const toolName = currentDetailTool;  // Save before closing clears it
        closeLishiDetail();
        editLishiTool(toolName);
    }
}

function deleteLishiToolFromDetail() {
    if (!currentDetailTool) return;

    const toolName = currentDetailTool;

    if (!confirm(`Delete "${toolName}"? You can add it back later if needed.`)) {
        return;
    }

    // Remove from inventory
    delete lishiInventory[toolName];

    // Add to deleted tools list (so master tools don't reappear)
    if (!deletedLishiTools.includes(toolName)) {
        deletedLishiTools.push(toolName);
    }

    // Remove tool from lishiData entries that use it
    Object.entries(lishiData).forEach(([keyway, data]) => {
        if (data.tool === toolName) {
            delete lishiData[keyway];
        }
    });

    saveLishiInventory();
    saveDeletedLishiTools();
    saveLishi();
    closeLishiDetail();
    renderLishiInventory();
    toast('Tool deleted');
}

function setLishiDetailStock(toolName, inStock) {
    if (!lishiInventory[toolName]) {
        // Copy from master if not in inventory
        lishiInventory[toolName] = JSON.parse(JSON.stringify(MASTER_LISHI_TOOLS[toolName] || {}));
    }
    lishiInventory[toolName].inStock = inStock;
    saveLishiInventory();
    openLishiDetail(toolName); // Refresh
    toast(inStock ? 'Marked as owned' : 'Marked as not owned');
}

function findVehiclesForTool(toolName) {
    const tool = lishiInventory[toolName] || MASTER_LISHI_TOOLS[toolName];
    if (!tool || !tool.keyways || tool.keyways.length === 0) return [];
    
    const vehicles = [];
    const seen = new Set();
    
    DB.forEach(key => {
        if (!key.keyway) return;
        
        // Check if this key's keyway matches any of the tool's keyways
        const keyKeyway = key.keyway.toLowerCase();
        const matches = tool.keyways.some(kw => {
            const toolKeyway = kw.toLowerCase();
            return keyKeyway.includes(toolKeyway) || toolKeyway.includes(keyKeyway);
        });
        
        if (matches) {
            (key.vehicles || []).forEach(v => {
                const id = `${v.make}|${v.model}|${v.startYear}|${v.endYear}`;
                if (!seen.has(id)) {
                    seen.add(id);
                    vehicles.push(v);
                }
            });
        }
    });
    
    // Sort by make, then model, then year desc
    vehicles.sort((a, b) => {
        if (a.make !== b.make) return a.make.localeCompare(b.make);
        if (a.model !== b.model) return a.model.localeCompare(b.model);
        return b.startYear - a.startYear;
    });
    
    return vehicles;
}

function openLishiLookup() {
    // Reset to vehicle lookup view
    showingMyTools = false;
    const btn = document.querySelector('.my-lishi-btn');
    if (btn) {
        btn.classList.remove('active');
        btn.textContent = ' My Tools';
    }
    document.getElementById('lishiLookupFilters').style.display = '';

    buildLishiFilters();
    document.getElementById('lishiLookupResults').innerHTML = '<div style="text-align:center;color:var(--dim);padding:40px;">Select a vehicle to see Lishi information</div>';
    document.getElementById('lishiLookupPanel').classList.add('on');
}

function closeLishiLookup() {
    document.getElementById('lishiLookupPanel').classList.remove('on');
    document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelector('.nav-btn').classList.add('active');
}

let showingMyTools = false;

function showMyLishiTools() {
    showingMyTools = !showingMyTools;
    const btn = document.querySelector('.my-lishi-btn');
    const filters = document.getElementById('lishiLookupFilters');

    if (showingMyTools) {
        btn.classList.add('active');
        btn.textContent = ' Vehicle Lookup';
        filters.style.display = 'none';
        renderMyLishiTools();
    } else {
        btn.classList.remove('active');
        btn.textContent = ' My Tools';
        filters.style.display = '';
        document.getElementById('lishiLookupResults').innerHTML = '<div style="text-align:center;color:var(--dim);padding:40px;">Select a vehicle to see Lishi information</div>';
    }
}

function renderMyLishiTools() {
    // Get all tools (merged master + inventory)
    const allTools = { ...MASTER_LISHI_TOOLS };
    Object.entries(lishiInventory).forEach(([name, data]) => {
        allTools[name] = { ...allTools[name], ...data };
    });

    // Filter out deleted tools
    deletedLishiTools.forEach(toolName => {
        delete allTools[toolName];
    });

    // Separate into owned and not owned
    const owned = [];
    const notOwned = [];

    Object.entries(allTools).forEach(([toolName, data]) => {
        const isOwned = lishiInventory[toolName]?.inStock || data.inStock || false;
        if (isOwned) {
            owned.push({ name: toolName, ...data });
        } else {
            notOwned.push({ name: toolName, ...data });
        }
    });

    // Sort alphabetically
    owned.sort((a, b) => a.name.localeCompare(b.name));
    notOwned.sort((a, b) => a.name.localeCompare(b.name));

    let html = '';

    // Owned section
    html += `
        <div class="my-lishi-section">
            <h3 class="my-lishi-section-title owned"> Tools I Own (${owned.length})</h3>
            ${owned.length === 0 ? '<div class="my-lishi-empty">No tools marked as owned yet</div>' : ''}
            <div class="my-lishi-grid">
                ${owned.map(tool => renderMyLishiCard(tool, true)).join('')}
            </div>
        </div>
    `;

    // Not owned section
    html += `
        <div class="my-lishi-section">
            <h3 class="my-lishi-section-title not-owned"> Tools I Don't Own (${notOwned.length})</h3>
            <div class="my-lishi-grid">
                ${notOwned.map(tool => renderMyLishiCard(tool, false)).join('')}
            </div>
        </div>
    `;

    document.getElementById('lishiLookupResults').innerHTML = html;
}

function renderMyLishiCard(tool, isOwned) {
    const escapedName = tool.name.replace(/'/g, "\\'");
    const keyways = tool.keyways && tool.keyways.length > 0
        ? tool.keyways.slice(0, 3).join(', ')
        : (tool.keyway_family || 'No keyways');
    const codeSeries = tool.codeSeries && tool.codeSeries.length > 0
        ? tool.codeSeries.slice(0, 2).join(', ')
        : '';

    return `
        <div class="my-lishi-card ${isOwned ? 'owned' : ''}" onclick="openLishiDetail('${escapedName}')">
            <div class="my-lishi-card-name">${tool.name}</div>
            <div class="my-lishi-card-keyways">${keyways}</div>
            ${codeSeries ? `<div class="my-lishi-card-codeseries">${codeSeries}</div>` : ''}
        </div>
    `;
}

function buildLishiFilters() {
    const makes = new Set();
    let minYear = 9999, maxYear = 0;
    
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make) makes.add(v.make);
            if (v.startYear && v.startYear > 1900) minYear = Math.min(minYear, v.startYear);
            if (v.endYear) maxYear = Math.max(maxYear, v.endYear);
        });
    });
    
    const currentYear = Math.max(new Date().getFullYear(), 2025);
    if (minYear === 9999) minYear = currentYear;
    
    // Year dropdown
    const yearSelect = document.getElementById('lishiYear');
    yearSelect.innerHTML = '<option value="">All Years</option>';
    for (let y = currentYear; y >= minYear; y--) {
        const opt = document.createElement('option');
        opt.value = y;
        opt.textContent = y;
        yearSelect.appendChild(opt);
    }
    
    // Make dropdown
    const makeSelect = document.getElementById('lishiMake');
    makeSelect.innerHTML = '<option value="">All Makes</option>';
    Array.from(makes).sort().forEach(m => {
        const opt = document.createElement('option');
        opt.value = m;
        opt.textContent = m;
        makeSelect.appendChild(opt);
    });
    
    // Reset model
    document.getElementById('lishiModel').innerHTML = '<option value="">All Models</option>';
}

function updateLishiModels() {
    const make = document.getElementById('lishiMake').value;
    const modelSelect = document.getElementById('lishiModel');
    modelSelect.innerHTML = '<option value="">All Models</option>';
    
    if (!make) return;
    
    const models = new Set();
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make === make && v.model) models.add(v.model);
        });
    });
    
    Array.from(models).sort().forEach(m => {
        const opt = document.createElement('option');
        opt.value = m;
        opt.textContent = m;
        modelSelect.appendChild(opt);
    });
}

function getVehicleGroupKey(v) {
    return `${v.make}|${v.model}|${v.startYear}|${v.endYear}`;
}

function filterLishiLookup() {
    const year = document.getElementById('lishiYear').value;
    const make = document.getElementById('lishiMake').value;
    const model = document.getElementById('lishiModel').value;
    
    if (!make) {
        document.getElementById('lishiLookupResults').innerHTML = '<div style="text-align:center;color:var(--dim);padding:40px;">Select at least a Make to see Lishi information</div>';
        return;
    }
    
    // Build unique vehicle groups with their keyways
    const vehicleGroups = new Map(); // key: "Make|Model|StartYear|EndYear", value: { vehicle, keyways: Set }
    
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            // Filter by make
            if (v.make !== make) return;
            
            // Filter by model if selected
            if (model && v.model !== model) return;
            
            // Filter by year if selected
            if (year) {
                const y = parseInt(year);
                if (y < v.startYear || y > v.endYear) return;
            }
            
            const groupKey = getVehicleGroupKey(v);
            
            if (!vehicleGroups.has(groupKey)) {
                vehicleGroups.set(groupKey, { vehicle: v, keyways: new Set() });
            }
            
            if (key.keyway) {
                vehicleGroups.get(groupKey).keyways.add(key.keyway);
            }
        });
    });
    
    if (vehicleGroups.size === 0) {
        document.getElementById('lishiLookupResults').innerHTML = '<div style="text-align:center;color:var(--dim);padding:40px;">No vehicles found matching your criteria</div>';
        return;
    }
    
    // Sort by model then by start year
    const sortedGroups = Array.from(vehicleGroups.entries()).sort((a, b) => {
        const vA = a[1].vehicle;
        const vB = b[1].vehicle;
        if (vA.model !== vB.model) return vA.model.localeCompare(vB.model);
        return vB.startYear - vA.startYear; // Newest first
    });
    
    // Render results
    document.getElementById('lishiLookupResults').innerHTML = sortedGroups.map(([groupKey, data]) => {
        const v = data.vehicle;
        const keyways = Array.from(data.keyways);
        const vehicleData = lishiVehicleData[groupKey] || {};
        
        // Get confirmation status
        const isConfirmed = vehicleData.confirmCount > 0;
        const confirmClass = isConfirmed ? 'confirmed' : 'unconfirmed';
        const confirmText = isConfirmed 
            ? ` Confirmed ${vehicleData.confirmCount}x` 
            : ' Unconfirmed';
        const confirmedByText = vehicleData.lastConfirmedBy ? ` by ${vehicleData.lastConfirmedBy}` : '';
        const lastConfirmedText = vehicleData.lastConfirmed 
            ? `Last: ${new Date(vehicleData.lastConfirmed).toLocaleDateString()}${confirmedByText}`
            : '';
        const editedByText = vehicleData.lastEditedBy 
            ? `Edited by ${vehicleData.lastEditedBy}` 
            : '';
        
        return `
            <div class="lishi-vehicle-group">
                <div class="lishi-vehicle-header">
                    <div>
                        <div class="lishi-vehicle-name">${v.make} ${v.model}</div>
                        <div class="lishi-vehicle-years">${formatYearRange(v)}</div>
                    </div>
                    <div style="display:flex;flex-direction:column;gap:4px;align-items:flex-end;">
                        ${keyways.map(kw => `<span class="lishi-keyway-badge">${kw}</span>`).join('')}
                    </div>
                </div>
                
                ${keyways.map(kw => {
                    const lishi = lishiData[kw] || {};
                    const toolInfo = lishi.tool ? getLishiToolInfo(lishi.tool) : null;
                    
                    // Works on display
                    let worksOnHtml = '';
                    if (toolInfo && toolInfo.worksOn && toolInfo.worksOn !== 'all') {
                        const worksOnMap = {
                            'door-trunk': ' Door & Trunk Only',
                            'door-only': ' Door Only',
                            'ignition-only': 'Ignition Only'
                        };
                        worksOnHtml = `<span class="lishi-inv-detail warning" style="margin-left:8px;">${worksOnMap[toolInfo.worksOn]}</span>`;
                    }
                    
                    // Cut range display
                    let cutHtml = '';
                    if (toolInfo && toolInfo.cutEnd && toolInfo.cutTotal) {
                        const isPartial = toolInfo.cutStart > 1 || toolInfo.cutEnd < toolInfo.cutTotal;
                        cutHtml = `<span class="lishi-inv-detail ${isPartial ? 'warning' : ''}" style="margin-left:8px;">${isPartial ? ' ' : ''}Cuts ${toolInfo.cutStart}-${toolInfo.cutEnd} of ${toolInfo.cutTotal}</span>`;
                    }
                    
                    // In stock indicator
                    let stockHtml = '';
                    if (toolInfo) {
                        stockHtml = toolInfo.inStock
                            ? '<span class="lishi-inv-detail" style="margin-left:8px;background:rgba(76,175,80,0.2);color:#4CAF50;"> Owned</span>'
                            : '<span class="lishi-inv-detail" style="margin-left:8px;background:rgba(255,68,68,0.2);color:#ff4444;"> Not Owned</span>';
                    }

                    // Code series display
                    let codeSeriesHtml = '';
                    if (toolInfo && toolInfo.codeSeries && toolInfo.codeSeries.length > 0) {
                        codeSeriesHtml = `<span class="lishi-inv-detail" style="margin-left:8px;background:rgba(255,107,53,0.2);color:var(--accent2);"> ${toolInfo.codeSeries.join(', ')}</span>`;
                    }

                    return `
                        <div class="lishi-tool-row" style="flex-wrap:wrap;">
                            ${lishi.tool
                                ? `<span class="lishi-tool-name-large" style="cursor:pointer;" onclick="event.stopPropagation(); openLishiDetail('${lishi.tool.replace(/'/g, "\\'")}')">${lishi.tool}</span>${stockHtml}`
                                : `<span class="lishi-tool-missing">No Lishi set for ${kw}</span>`
                            }
                            ${lishi.tool ? `
                                <div class="lishi-direction-btns" style="margin-left:auto;">
                                    <button class="lishi-dir-btn cw ${vehicleData.direction === 'CW' ? 'active' : ''}"
                                            onclick="setVehicleDirection('${groupKey}', 'CW')"> CW</button>
                                    <button class="lishi-dir-btn ccw ${vehicleData.direction === 'CCW' ? 'active' : ''}"
                                            onclick="setVehicleDirection('${groupKey}', 'CCW')"> CCW</button>
                                </div>
                            ` : `
                                <button class="lishi-action-btn" onclick="addLishiFromLookup('${kw}')">+ Add Lishi Tool</button>
                            `}
                            ${(worksOnHtml || cutHtml || codeSeriesHtml) ? `
                                <div style="width:100%;margin-top:8px;display:flex;flex-wrap:wrap;gap:4px;">
                                    ${worksOnHtml}${cutHtml}${codeSeriesHtml}
                                </div>
                            ` : ''}
                        </div>
                    `;
                }).join('')}
                
                <div class="lishi-confirm-row">
                    <div class="lishi-confirm-status ${confirmClass}">
                        <span class="lishi-confirm-badge ${confirmClass}">${confirmText}</span>
                        ${lastConfirmedText ? `<span style="font-size:11px;color:var(--dim);">${lastConfirmedText}</span>` : ''}
                        ${editedByText && !lastConfirmedText ? `<span style="font-size:11px;color:var(--dim);">${editedByText}</span>` : ''}
                    </div>
                    <button class="lishi-confirm-btn" onclick="confirmVehicleDirection('${groupKey}')" 
                            ${!vehicleData.direction ? 'disabled title="Set a direction first"' : ''}>
                         Confirm
                    </button>
                </div>
                
                ${vehicleData.notes ? `
                    <div class="lishi-notes-row">
                        <div class="lishi-notes-label">Notes</div>
                        <div class="lishi-notes-text">${vehicleData.notes}</div>
                    </div>
                ` : ''}
                
                <div class="lishi-actions-row">
                    <button class="lishi-action-btn" onclick="openLishiNotesModal('${groupKey}', '${v.make} ${v.model}', '${formatYearRange(v)}')">
                         ${vehicleData.notes ? 'Edit' : 'Add'} Notes
                    </button>
                </div>
            </div>
        `;
    }).join('');
}

function setVehicleDirection(groupKey, direction) {
    if (!lishiVehicleData[groupKey]) {
        lishiVehicleData[groupKey] = { direction: null, confirmCount: 0, lastConfirmed: null, lastConfirmedBy: null, notes: '', lastEditedBy: null };
    }

    lishiVehicleData[groupKey].direction = direction;
    lishiVehicleData[groupKey].lastEdited = new Date().toISOString();
    lishiVehicleData[groupKey].lastEditedBy = currentUser?.displayName || currentUser?.email || 'Unknown';
    saveLishiVehicle();
    filterLishiLookup();
    toast(`Direction set to ${direction}`);
}

function setVehicleDirectionFromVehiclePage(groupKey, direction) {
    setVehicleDirection(groupKey, direction);
    // Refresh the vehicle detail page to show updated direction
    if (currentViewingVehicleKey) {
        openVehicleDetail(currentViewingVehicleKey);
    }
}

function confirmVehicleDirectionFromVehiclePage(groupKey) {
    if (!lishiVehicleData[groupKey] || !lishiVehicleData[groupKey].direction) {
        toast('Set a direction first');
        return;
    }

    lishiVehicleData[groupKey].confirmCount = (lishiVehicleData[groupKey].confirmCount || 0) + 1;
    lishiVehicleData[groupKey].lastConfirmed = new Date().toISOString();
    lishiVehicleData[groupKey].lastConfirmedBy = currentUser?.displayName || currentUser?.email || 'Unknown';
    saveLishiVehicle();
    toast('Direction confirmed!');

    // Refresh the vehicle detail page to show updated confirm count
    if (currentViewingVehicleKey) {
        openVehicleDetail(currentViewingVehicleKey);
    }
}

function confirmVehicleDirection(groupKey) {
    if (!lishiVehicleData[groupKey]) {
        lishiVehicleData[groupKey] = { direction: null, confirmCount: 0, lastConfirmed: null, lastConfirmedBy: null, notes: '' };
    }
    
    if (!lishiVehicleData[groupKey].direction) {
        toast('Set a direction first');
        return;
    }
    
    lishiVehicleData[groupKey].confirmCount = (lishiVehicleData[groupKey].confirmCount || 0) + 1;
    lishiVehicleData[groupKey].lastConfirmed = new Date().toISOString();
    lishiVehicleData[groupKey].lastConfirmedBy = currentUser?.displayName || currentUser?.email || 'Unknown';
    saveLishiVehicle();
    filterLishiLookup();
    toast('Direction confirmed!');
}

function addLishiFromLookup(keyway) {
    openAddLishiToolModalWithKeyway(keyway);
}

function openLishiNotesModal(groupKey, vehicleName, years) {
    currentLishiNotesKey = groupKey;
    document.getElementById('lishiNotesVehicleInfo').textContent = `${vehicleName} (${years})`;
    document.getElementById('lishiNotesText').value = lishiVehicleData[groupKey]?.notes || '';
    document.getElementById('lishiNotesModal').classList.add('on');
}

function closeLishiNotesModal() {
    document.getElementById('lishiNotesModal').classList.remove('on');
    currentLishiNotesKey = null;
}

function saveLishiNotes() {
    if (!currentLishiNotesKey) return;
    
    if (!lishiVehicleData[currentLishiNotesKey]) {
        lishiVehicleData[currentLishiNotesKey] = { direction: null, confirmCount: 0, lastConfirmed: null, lastConfirmedBy: null, notes: '', lastEditedBy: null };
    }
    
    lishiVehicleData[currentLishiNotesKey].notes = document.getElementById('lishiNotesText').value.trim();
    lishiVehicleData[currentLishiNotesKey].lastEdited = new Date().toISOString();
    lishiVehicleData[currentLishiNotesKey].lastEditedBy = currentUser?.displayName || currentUser?.email || 'Unknown';
    saveLishiVehicle();
    closeLishiNotesModal();
    filterLishiLookup();
    toast('Notes saved');
}

// Vehicle Data Edit Modal
let currentVehicleDataEditKey = null;
let currentVehicleDataStartYear = null;
let currentVehicleDataEndYear = null;
let vehicleDataCodeSeriesEntries = []; // Array of { years, series }
let vehicleDataPerKeyCodeSeriesEntries = { ignition: [], door: [] };

// Populate a vehicle data select with known values + "Add New" option
function populateVehicleDataSelect(selectId, category, currentValue) {
    const sel = document.getElementById(selectId);
    const values = getDropdownValuesForCategory(category);
    // Also collect FCC IDs separately since they're not in dropdown categories
    let allValues = values;
    if (category === 'fccid') {
        const fccids = new Set();
        DB.forEach(k => { if (k.fccid) fccids.add(k.fccid); });
        customVehicles.forEach(c => { if (c.fccid) fccids.add(c.fccid); });
        allValues = Array.from(fccids).sort();
    } else if (category === 'pn') {
        const pns = new Set();
        DB.forEach(k => { if (k.pn) pns.add(String(k.pn)); });
        // Also include key blanks from lishiVehicleData and customVehicles
        Object.values(lishiVehicleData).forEach(vd => {
            if (vd.keyBlank) pns.add(String(vd.keyBlank));
            if (vd.ignition_keyBlank) pns.add(String(vd.ignition_keyBlank));
            if (vd.door_keyBlank) pns.add(String(vd.door_keyBlank));
        });
        customVehicles.forEach(cv => {
            if (cv.keyBlank) pns.add(String(cv.keyBlank));
            if (cv.ignition_keyBlank) pns.add(String(cv.ignition_keyBlank));
            if (cv.door_keyBlank) pns.add(String(cv.door_keyBlank));
        });
        allValues = Array.from(pns).sort((a, b) => a.localeCompare(b, undefined, { numeric: true }));
    }
    sel.innerHTML = '<option value="">None</option>';
    allValues.forEach(v => {
        sel.innerHTML += '<option value="' + v.replace(/"/g, '&quot;') + '">' + v + '</option>';
    });
    sel.innerHTML += '<option value="__add_new__">+ Add New...</option>';
    // If current value exists but isn't in the list, add it
    if (currentValue && !allValues.includes(currentValue)) {
        const opt = document.createElement('option');
        opt.value = currentValue;
        opt.textContent = currentValue;
        sel.insertBefore(opt, sel.lastElementChild);
    }
    sel.value = currentValue || '';
}

function onVehicleDataDropdownChange(selectId, category) {
    const sel = document.getElementById(selectId);
    if (sel.value === '__add_new__') {
        const label = getDropdownCategoryLabel(category) || category;
        const newVal = prompt('Enter new ' + label + ':');
        if (newVal && newVal.trim()) {
            const val = newVal.trim();
            // Add to custom dropdown values so it persists
            if (category !== 'fccid' && customDropdownValues[category]) {
                if (!customDropdownValues[category].includes(val)) {
                    customDropdownValues[category].push(val);
                    saveCustomDropdownValues();
                }
            }
            // Insert option and select it
            const opt = document.createElement('option');
            opt.value = val;
            opt.textContent = val;
            sel.insertBefore(opt, sel.lastElementChild);
            sel.value = val;
        } else {
            sel.value = '';
        }
    }
}

function openVehicleDataEditModal(groupKey, make, model, startYear, endYear) {
    currentVehicleDataEditKey = groupKey;
    currentVehicleDataStartYear = startYear;
    currentVehicleDataEndYear = endYear;
    const vehicleData = lishiVehicleData[groupKey] || {};

    document.getElementById('vehicleDataEditInfo').textContent = `${make} ${model} (${formatYearRange({startYear: parseInt(startYear), endYear: parseInt(endYear)})})`;

    // Get aggregated data from keys for pre-filling
    const vehicles = getUniqueVehicles();
    const vehicle = vehicles.find(v =>
        v.make === make && v.model === model &&
        v.startYear === parseInt(startYear) && v.endYear === parseInt(endYear)
    );

    // Also check if there's a custom vehicle for these fields
    const cv = customVehicles.find(c =>
        c.make === make && c.model === model &&
        c.startYear === parseInt(startYear) && c.endYear === parseInt(endYear)
    );

    // Determine current values: prefer override > custom vehicle > first aggregated value
    const curKeyType = vehicleData.keyType || (cv && cv.keyType ? cv.keyType : '');
    const curChip = vehicleData.chip || (cv && cv.chip ? cv.chip : (vehicle && vehicle.chips.size === 1 ? Array.from(vehicle.chips)[0] : ''));
    const curKeyway = vehicleData.keyway || (cv && cv.keyway ? cv.keyway : (vehicle && vehicle.keyways.size === 1 ? Array.from(vehicle.keyways)[0] : ''));
    const curFccid = vehicleData.fccid || (cv && cv.fccid ? cv.fccid : (vehicle && vehicle.fccids.size === 1 ? Array.from(vehicle.fccids)[0] : ''));
    const curFreq = vehicleData.frequency || (cv && cv.frequency ? cv.frequency : (vehicle && vehicle.frequencies.size === 1 ? Array.from(vehicle.frequencies)[0] : ''));
    const curButtons = vehicleData.buttons || (cv && cv.buttons ? cv.buttons : '');
    const curBattery = vehicleData.battery || '';

    // Detect dual-key mode from custom vehicle or vehicle data override
    const isDualKey = (cv && cv.multipleKeys === true) || vehicleData.multipleKeys === true;
    document.getElementById('vehicleDataMultipleKeys').checked = isDualKey;
    document.getElementById('vehicleDataSingleKeyFields').style.display = isDualKey ? 'none' : 'block';
    document.getElementById('vehicleDataDualKeyFields').style.display = isDualKey ? 'block' : 'none';
    document.getElementById('vehicleDataSecondaryKeyGroup').style.display = isDualKey ? 'none' : 'block';

    // Populate single-key dropdowns with existing DB values
    const curKeyBlank = vehicleData.keyBlank || (cv && cv.keyBlank) || (vehicle && vehicle.keys.length === 1 ? String(vehicle.keys[0].pn) : '');
    populateVehicleDataSelect('vehicleDataKeyBlank', 'pn', curKeyBlank);
    populateVehicleDataSelect('vehicleDataKeyType', 'keyType', curKeyType);
    populateVehicleDataSelect('vehicleDataChip', 'chip', curChip);
    populateVehicleDataSelect('vehicleDataKeyway', 'keyway', curKeyway);
    populateVehicleDataSelect('vehicleDataFccid', 'fccid', curFccid);
    populateVehicleDataSelect('vehicleDataFrequency', 'frequency', curFreq);
    populateVehicleDataSelect('vehicleDataButtons', 'buttons', curButtons);
    populateVehicleDataSelect('vehicleDataBattery', 'battery', curBattery);

    // Populate dual-key dropdowns
    const curIgnKeyBlank = vehicleData.ignition_keyBlank || (cv && cv.ignition_keyBlank) || '';
    const curIgnChip = vehicleData.ignition_chip || (cv && cv.ignition_chip) || '';
    const curIgnKeyway = vehicleData.ignition_keyway || (cv && cv.ignition_keyway) || '';
    const curIgnFccid = vehicleData.ignition_fccid || (cv && cv.ignition_fccid) || '';
    const curIgnButtons = vehicleData.ignition_buttons || (cv && cv.ignition_buttons) || '';
    const curIgnFreq = vehicleData.ignition_frequency || (cv && cv.ignition_frequency) || '';
    const curDoorKeyBlank = vehicleData.door_keyBlank || (cv && cv.door_keyBlank) || '';
    const curDoorChip = vehicleData.door_chip || (cv && cv.door_chip) || '';
    const curDoorKeyway = vehicleData.door_keyway || (cv && cv.door_keyway) || '';
    const curDoorFccid = vehicleData.door_fccid || (cv && cv.door_fccid) || '';

    populateVehicleDataSelect('vehicleDataKeyType2', 'keyType', curKeyType);
    populateVehicleDataSelect('vehicleDataBattery2', 'battery', curBattery);
    populateVehicleDataSelect('vehicleDataIgnKeyBlank', 'pn', curIgnKeyBlank);
    populateVehicleDataSelect('vehicleDataIgnChip', 'chip', curIgnChip);
    populateVehicleDataSelect('vehicleDataIgnKeyway', 'keyway', curIgnKeyway);
    populateVehicleDataSelect('vehicleDataIgnFccid', 'fccid', curIgnFccid);
    populateVehicleDataSelect('vehicleDataIgnButtons', 'buttons', curIgnButtons);
    populateVehicleDataSelect('vehicleDataIgnFrequency', 'frequency', curIgnFreq);
    populateVehicleDataSelect('vehicleDataDoorKeyBlank', 'pn', curDoorKeyBlank);
    populateVehicleDataSelect('vehicleDataDoorChip', 'chip', curDoorChip);
    populateVehicleDataSelect('vehicleDataDoorKeyway', 'keyway', curDoorKeyway);
    populateVehicleDataSelect('vehicleDataDoorFccid', 'fccid', curDoorFccid);

    // Build code series cache if empty
    if (codeSeriesCache.length === 0) {
        buildCodeSeriesCache();
    }

    // Initialize code series entries from existing data
    if (vehicleData.codeSeries) {
        if (Array.isArray(vehicleData.codeSeries)) {
            vehicleDataCodeSeriesEntries = JSON.parse(JSON.stringify(vehicleData.codeSeries));
        } else if (typeof vehicleData.codeSeries === 'string' && vehicleData.codeSeries) {
            // Convert old string format to array format
            vehicleDataCodeSeriesEntries = [{ years: `${startYear}-${endYear}`, series: vehicleData.codeSeries }];
        } else {
            vehicleDataCodeSeriesEntries = [];
        }
    } else {
        vehicleDataCodeSeriesEntries = [];
    }

    // Render the code series list
    renderVehicleDataCodeSeriesList();

    // Load secondary key (Door/Trunk/GB) dropdown with non-chip keys
    const secondaryKeySelect = document.getElementById('vehicleDataSecondaryKey');
    const nonChipKeys = DB.filter(k => k.keyType === 'Non-Chip Key').sort((a, b) => (a.pn || '').localeCompare(b.pn || ''));
    const uniqueNonChipPNs = [...new Set(nonChipKeys.map(k => k.pn))].filter(pn => pn);
    secondaryKeySelect.innerHTML = '<option value="">None</option>' +
        uniqueNonChipPNs.map(pn => `<option value="${pn}">${pn}</option>`).join('');
    secondaryKeySelect.value = vehicleData.secondaryKeyPN || '';

    // Set up differentCodeSeries checkbox and per-key code series lists
    const hasDiffCS = vehicleData.differentCodeSeries === true;
    document.getElementById('vehicleDataDiffCodeSeries').checked = hasDiffCS;

    // Initialize per-key code series entries (handle string legacy or array format)
    function initPerKeyCS(data) {
        if (!data) return [];
        if (Array.isArray(data)) return JSON.parse(JSON.stringify(data));
        if (typeof data === 'string' && data) {
            return [{ years: `${startYear}-${endYear}`, series: data }];
        }
        return [];
    }
    vehicleDataPerKeyCodeSeriesEntries.ignition = initPerKeyCS(vehicleData.ignition_codeSeries || (cv && cv.ignition_codeSeries) || '');
    vehicleDataPerKeyCodeSeriesEntries.door = initPerKeyCS(vehicleData.door_codeSeries || (cv && cv.door_codeSeries) || '');
    renderPerKeyCodeSeriesList('ignition');
    renderPerKeyCodeSeriesList('door');

    // Toggle visibility
    document.getElementById('vehicleDataSharedCodeSeriesGroup').style.display = hasDiffCS ? 'none' : 'block';
    document.querySelectorAll('.vehicleDataPerKeyCodeSeries').forEach(el => {
        el.style.display = hasDiffCS ? 'block' : 'none';
    });

    document.getElementById('vehicleDataNotes').value = vehicleData.notes || '';
    document.getElementById('vehicleDataEditModal').classList.add('on');
}

function renderVehicleDataCodeSeriesList() {
    const container = document.getElementById('vehicleDataCodeSeriesList');
    const codeSeriesOptions = codeSeriesCache.map(cs => `<option value="${cs}">${cs}</option>`).join('');

    if (vehicleDataCodeSeriesEntries.length === 0) {
        container.innerHTML = '<div style="color:var(--dim);font-size:11px;text-align:center;padding:12px;">No code series added. Click "+ Add Code Series" to add one.</div>';
        return;
    }

    container.innerHTML = vehicleDataCodeSeriesEntries.map((cs, j) => {
        const parsed = parseCodeSeriesYears(cs.years);
        const prefix = `vdCS${j}`;
        const onYC = `onchange="updateVDCSYearFields(${j})"`;
        return `
        <div style="background:var(--bg);border:1px solid var(--border);border-radius:6px;padding:8px;margin-bottom:6px;">
            <div style="display:grid;grid-template-columns:auto 1fr auto auto 1fr;gap:3px;align-items:center;margin-bottom:6px;">
                <select id="${prefix}SM" ${onYC} style="padding:4px 2px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;">${monthSelectOptions(parsed.startMonth || '')}</select>
                <input type="number" id="${prefix}SY" value="${parsed.startYear || ''}" placeholder="Year" ${onYC} style="width:100%;padding:4px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;box-sizing:border-box;">
                <span style="color:var(--dim);font-size:10px;padding:0 2px;">to</span>
                <select id="${prefix}EM" ${onYC} style="padding:4px 2px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;">${monthSelectOptions(parsed.endMonth || '')}</select>
                <input type="number" id="${prefix}EY" value="${parsed.endYear || ''}" placeholder="Year" ${onYC} style="width:100%;padding:4px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;box-sizing:border-box;">
            </div>
            <div style="display:grid;grid-template-columns:1fr auto;gap:6px;align-items:center;">
                <select onchange="onVehicleDataCodeSeriesEntryChange(${j}, this.value)"
                    style="padding:8px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:12px;"
                    id="vehicleDataCodeSeriesEntry${j}">
                    <option value="">Select Series...</option>
                    ${codeSeriesOptions}
                    <option value="__add_new__">+ Add New...</option>
                </select>
                <button onclick="removeVehicleDataCodeSeriesEntry(${j})"
                    style="padding:6px 10px;background:var(--danger);color:white;border:none;border-radius:4px;cursor:pointer;font-size:12px;"></button>
            </div>
        </div>
    `}).join('');

    // Set selected values
    vehicleDataCodeSeriesEntries.forEach((cs, j) => {
        const csSelect = document.getElementById(`vehicleDataCodeSeriesEntry${j}`);
        if (csSelect && cs.series) {
            if (!codeSeriesCache.includes(cs.series)) {
                const opt = document.createElement('option');
                opt.value = cs.series;
                opt.text = cs.series;
                csSelect.insertBefore(opt, csSelect.lastElementChild);
            }
            csSelect.value = cs.series;
        }
    });
}

function addVehicleDataCodeSeriesEntry() {
    const defaultYears = `${currentVehicleDataStartYear || new Date().getFullYear()}-${currentVehicleDataEndYear || new Date().getFullYear()}`;
    vehicleDataCodeSeriesEntries.push({ years: defaultYears, series: '' });
    renderVehicleDataCodeSeriesList();
}

function removeVehicleDataCodeSeriesEntry(idx) {
    vehicleDataCodeSeriesEntries.splice(idx, 1);
    renderVehicleDataCodeSeriesList();
}

function updateVehicleDataCodeSeriesYears(idx, value) {
    if (vehicleDataCodeSeriesEntries[idx]) {
        vehicleDataCodeSeriesEntries[idx].years = value;
    }
}

function updateVDCSYearFields(idx) {
    var prefix = 'vdCS' + idx;
    var sm = parseInt(document.getElementById(prefix + 'SM')?.value) || 0;
    var sy = document.getElementById(prefix + 'SY')?.value || '';
    var em = parseInt(document.getElementById(prefix + 'EM')?.value) || 0;
    var ey = document.getElementById(prefix + 'EY')?.value || '';
    if (vehicleDataCodeSeriesEntries[idx]) {
        vehicleDataCodeSeriesEntries[idx].years = buildCodeSeriesYears(sm, sy, em, ey);
    }
}

function onVehicleDataCodeSeriesEntryChange(idx, value) {
    if (value === '__add_new__') {
        const newCodeSeries = prompt('Enter new code series (e.g., 1001-4096):');
        if (newCodeSeries && newCodeSeries.trim()) {
            const cs = newCodeSeries.trim();
            if (!codeSeriesCache.includes(cs)) {
                codeSeriesCache.push(cs);
                codeSeriesCache.sort();
            }
            vehicleDataCodeSeriesEntries[idx].series = cs;
            renderVehicleDataCodeSeriesList();
        } else {
            renderVehicleDataCodeSeriesList();
        }
    } else {
        vehicleDataCodeSeriesEntries[idx].series = value || '';
    }
}

function closeVehicleDataEditModal() {
    document.getElementById('vehicleDataEditModal').classList.remove('on');
    currentVehicleDataEditKey = null;
    currentVehicleDataStartYear = null;
    currentVehicleDataEndYear = null;
    vehicleDataCodeSeriesEntries = [];
    vehicleDataPerKeyCodeSeriesEntries = { ignition: [], door: [] };
}

function saveVehicleDataEdit() {
    if (!currentVehicleDataEditKey) return;

    if (!lishiVehicleData[currentVehicleDataEditKey]) {
        lishiVehicleData[currentVehicleDataEditKey] = {
            direction: null,
            confirmCount: 0,
            lastConfirmed: null,
            lastConfirmedBy: null,
            notes: '',
            lastEditedBy: null,
            codeSeries: [],
            secondaryKeyPN: ''
        };
    }

    // Filter out empty code series entries
    const validCodeSeries = vehicleDataCodeSeriesEntries.filter(cs => cs.series && cs.series.trim());
    const isMultipleKeys = document.getElementById('vehicleDataMultipleKeys').checked;
    const notes = document.getElementById('vehicleDataNotes').value.trim();

    const vd = lishiVehicleData[currentVehicleDataEditKey];
    vd.multipleKeys = isMultipleKeys;
    vd.codeSeries = validCodeSeries.length > 0 ? validCodeSeries : [];
    vd.notes = notes;
    vd.lastEdited = new Date().toISOString();
    vd.lastEditedBy = currentUser?.displayName || currentUser?.email || 'Unknown';

    if (isMultipleKeys) {
        const keyType = document.getElementById('vehicleDataKeyType2').value.trim();
        const battery = document.getElementById('vehicleDataBattery2').value.trim();
        const ignition_keyBlank = document.getElementById('vehicleDataIgnKeyBlank').value.trim();
        const ignition_chip = document.getElementById('vehicleDataIgnChip').value.trim();
        const ignition_keyway = document.getElementById('vehicleDataIgnKeyway').value.trim();
        const ignition_fccid = document.getElementById('vehicleDataIgnFccid').value.trim();
        const ignition_buttons = document.getElementById('vehicleDataIgnButtons').value.trim();
        const ignition_frequency = document.getElementById('vehicleDataIgnFrequency').value.trim();
        const door_keyBlank = document.getElementById('vehicleDataDoorKeyBlank').value.trim();
        const door_chip = document.getElementById('vehicleDataDoorChip').value.trim();
        const door_keyway = document.getElementById('vehicleDataDoorKeyway').value.trim();
        const door_fccid = document.getElementById('vehicleDataDoorFccid').value.trim();
        const diffCS = document.getElementById('vehicleDataDiffCodeSeries').checked;
        const ignition_codeSeries = diffCS ? vehicleDataPerKeyCodeSeriesEntries.ignition.filter(cs => cs.series && cs.series.trim()) : [];
        const door_codeSeries = diffCS ? vehicleDataPerKeyCodeSeriesEntries.door.filter(cs => cs.series && cs.series.trim()) : [];

        vd.keyType = keyType;
        vd.battery = battery;
        vd.chip = '';
        vd.keyway = '';
        vd.fccid = '';
        vd.frequency = '';
        vd.buttons = '';
        vd.differentCodeSeries = diffCS;
        vd.ignition_keyBlank = ignition_keyBlank;
        vd.ignition_chip = ignition_chip;
        vd.ignition_keyway = ignition_keyway;
        vd.ignition_fccid = ignition_fccid;
        vd.ignition_buttons = ignition_buttons;
        vd.ignition_frequency = ignition_frequency;
        vd.ignition_codeSeries = ignition_codeSeries;
        vd.door_keyBlank = door_keyBlank;
        vd.door_chip = door_chip;
        vd.door_keyway = door_keyway;
        vd.door_fccid = door_fccid;
        vd.door_codeSeries = door_codeSeries;
        vd.secondaryKeyPN = null;

        // Sync back to custom vehicle
        const [make, model, sy, ey] = currentVehicleDataEditKey.split('|');
        const cvIdx = customVehicles.findIndex(c =>
            c.make === make && c.model === model &&
            c.startYear === parseInt(sy) && c.endYear === parseInt(ey)
        );
        if (cvIdx >= 0) {
            customVehicles[cvIdx].multipleKeys = true;
            customVehicles[cvIdx].keyType = keyType;
            customVehicles[cvIdx].chip = '';
            customVehicles[cvIdx].keyway = '';
            customVehicles[cvIdx].fccid = '';
            customVehicles[cvIdx].frequency = '';
            customVehicles[cvIdx].buttons = '';
            customVehicles[cvIdx].ignition_keyBlank = ignition_keyBlank;
            customVehicles[cvIdx].ignition_chip = ignition_chip;
            customVehicles[cvIdx].ignition_keyway = ignition_keyway;
            customVehicles[cvIdx].ignition_fccid = ignition_fccid;
            customVehicles[cvIdx].ignition_buttons = ignition_buttons;
            customVehicles[cvIdx].ignition_frequency = ignition_frequency;
            customVehicles[cvIdx].door_keyBlank = door_keyBlank;
            customVehicles[cvIdx].door_chip = door_chip;
            customVehicles[cvIdx].door_keyway = door_keyway;
            customVehicles[cvIdx].door_fccid = door_fccid;
            customVehicles[cvIdx].ignition_codeSeries = ignition_codeSeries;
            customVehicles[cvIdx].door_codeSeries = door_codeSeries;
            if (notes) customVehicles[cvIdx].notes = notes;
            customVehicles[cvIdx].dataStatus = (ignition_keyBlank || ignition_chip || ignition_keyway || door_keyBlank || door_chip || door_keyway) ? 'complete' : 'partial';
            customVehicles[cvIdx].lastEdited = new Date().toISOString();
            saveCustomVehicles();
        }
    } else {
        const keyBlank = document.getElementById('vehicleDataKeyBlank').value.trim();
        const keyType = document.getElementById('vehicleDataKeyType').value.trim();
        const chip = document.getElementById('vehicleDataChip').value.trim();
        const keyway = document.getElementById('vehicleDataKeyway').value.trim();
        const fccid = document.getElementById('vehicleDataFccid').value.trim();
        const frequency = document.getElementById('vehicleDataFrequency').value.trim();
        const buttons = document.getElementById('vehicleDataButtons').value.trim();
        const battery = document.getElementById('vehicleDataBattery').value.trim();
        const secondaryKeyPN = document.getElementById('vehicleDataSecondaryKey').value.trim();

        vd.keyBlank = keyBlank || '';
        vd.keyType = keyType;
        vd.chip = chip;
        vd.keyway = keyway;
        vd.fccid = fccid;
        vd.frequency = frequency;
        vd.buttons = buttons;
        vd.battery = battery;
        vd.secondaryKeyPN = secondaryKeyPN || null;
        // Clear dual-key fields
        vd.ignition_chip = '';
        vd.ignition_keyway = '';
        vd.ignition_fccid = '';
        vd.ignition_buttons = '';
        vd.ignition_frequency = '';
        vd.door_chip = '';
        vd.door_keyway = '';
        vd.door_fccid = '';

        // Sync back to custom vehicle
        const [make, model, sy, ey] = currentVehicleDataEditKey.split('|');
        const cvIdx = customVehicles.findIndex(c =>
            c.make === make && c.model === model &&
            c.startYear === parseInt(sy) && c.endYear === parseInt(ey)
        );
        if (cvIdx >= 0) {
            customVehicles[cvIdx].multipleKeys = false;
            if (keyType) customVehicles[cvIdx].keyType = keyType;
            if (chip) customVehicles[cvIdx].chip = chip;
            if (keyway) customVehicles[cvIdx].keyway = keyway;
            if (fccid) customVehicles[cvIdx].fccid = fccid;
            if (frequency) customVehicles[cvIdx].frequency = frequency;
            if (buttons) customVehicles[cvIdx].buttons = buttons;
            if (notes) customVehicles[cvIdx].notes = notes;
            customVehicles[cvIdx].ignition_chip = '';
            customVehicles[cvIdx].ignition_keyway = '';
            customVehicles[cvIdx].ignition_fccid = '';
            customVehicles[cvIdx].ignition_buttons = '';
            customVehicles[cvIdx].ignition_frequency = '';
            customVehicles[cvIdx].door_chip = '';
            customVehicles[cvIdx].door_keyway = '';
            customVehicles[cvIdx].door_fccid = '';
            customVehicles[cvIdx].dataStatus = (keyType || chip || buttons || fccid || frequency || keyway) ? 'complete' : 'partial';
            customVehicles[cvIdx].lastEdited = new Date().toISOString();
            saveCustomVehicles();
        }
    }

    saveLishiVehicle();

    // Auto-add vehicle to key's vehicles array when a key blank PN is specified
    const [vdMake, vdModel, vdSY, vdEY] = currentVehicleDataEditKey.split('|');
    const vdStartYear = parseInt(vdSY);
    const vdEndYear = parseInt(vdEY);
    const diffCS = isMultipleKeys && document.getElementById('vehicleDataDiffCodeSeries').checked;
    const keyBlankEntries = [];
    if (isMultipleKeys) {
        const ignPN = document.getElementById('vehicleDataIgnKeyBlank').value.trim();
        const doorPN = document.getElementById('vehicleDataDoorKeyBlank').value.trim();
        const ignCS = diffCS ? (vd.ignition_codeSeries || []) : validCodeSeries;
        const doorCS = diffCS ? (vd.door_codeSeries || []) : validCodeSeries;
        if (ignPN && ignPN !== '__add_new__') keyBlankEntries.push({ pn: ignPN, codeSeries: ignCS });
        if (doorPN && doorPN !== '__add_new__') keyBlankEntries.push({ pn: doorPN, codeSeries: doorCS });
    } else {
        const singlePN = document.getElementById('vehicleDataKeyBlank').value.trim();
        if (singlePN && singlePN !== '__add_new__') keyBlankEntries.push({ pn: singlePN, codeSeries: validCodeSeries });
    }

    keyBlankEntries.forEach(entry => {
        const pn = entry.pn;
        const cs = entry.codeSeries && entry.codeSeries.length > 0 ? entry.codeSeries : [];
        let dbIdx = DB.findIndex(k => String(k.pn) == pn);
        if (dbIdx < 0) {
            // Key doesn't exist in DB - create it so it appears on the key homepage
            const vd = lishiVehicleData[currentVehicleDataEditKey] || {};
            const newKey = {
                pn: pn,
                keyType: vd.keyType || null,
                keyway: vd.keyway || vd.ignition_keyway || vd.door_keyway || null,
                chip: vd.chip || vd.ignition_chip || vd.door_chip || null,
                fccid: vd.fccid || vd.ignition_fccid || vd.door_fccid || null,
                frequency: vd.frequency || vd.ignition_frequency || null,
                buttons: vd.buttons || vd.ignition_buttons || null,
                vehicles: [{ make: vdMake, model: vdModel, startYear: vdStartYear, endYear: vdEndYear, codeSeries: cs }],
                isCustom: true,
                addedDate: new Date().toISOString()
            };
            DB.push(newKey);
            customKeys.push(newKey);
            saveCustomKeys();
            buildFilters();
            applyFilters();
            return;
        }
        const key = DB[dbIdx];
        const existingVehicleIdx = (key.vehicles || []).findIndex(v =>
            v.make === vdMake && v.model === vdModel &&
            parseInt(v.startYear) === vdStartYear && parseInt(v.endYear) === vdEndYear
        );
        if (existingVehicleIdx < 0) {
            const newVehicle = { make: vdMake, model: vdModel, startYear: vdStartYear, endYear: vdEndYear, codeSeries: cs };
            if (!key.vehicles) key.vehicles = [];
            key.vehicles.push(newVehicle);
            if (key.isCustom) {
                const customIdx = customKeys.findIndex(ck => String(ck.pn) == pn);
                if (customIdx >= 0) {
                    if (!customKeys[customIdx].vehicles) customKeys[customIdx].vehicles = [];
                    customKeys[customIdx].vehicles.push(newVehicle);
                    saveCustomKeys();
                }
            } else {
                vehicleOverrides[String(key.pn)] = key.vehicles;
                saveVehicleOverrides();
            }
        } else {
            // Vehicle already exists on this key - update its code series
            key.vehicles[existingVehicleIdx].codeSeries = cs;
            if (key.isCustom) {
                const customIdx = customKeys.findIndex(ck => String(ck.pn) == pn);
                if (customIdx >= 0 && customKeys[customIdx].vehicles && customKeys[customIdx].vehicles[existingVehicleIdx]) {
                    customKeys[customIdx].vehicles[existingVehicleIdx].codeSeries = cs;
                    saveCustomKeys();
                }
            } else {
                vehicleOverrides[String(key.pn)] = key.vehicles;
                saveVehicleOverrides();
            }
        }
    });

    closeVehicleDataEditModal();

    // Refresh the vehicle detail page to show updated data
    if (currentViewingVehicleKey) {
        openVehicleDetail(currentViewingVehicleKey);
    }

    toast('Vehicle data saved');
}

// ===================== ADD INVENTORY (BULK) =====================
let selectedInventoryKey = null;
let selectedInventoryKeyIndex = null;
let logoFilter = 'any';
let bulkSelectedItems = []; // Array of { dbIndex, key, fccId, isGroup }
let bulkItemDetails = []; // Array of detail objects for step 2
let customKeyVehicleCount = 0;
let customKeys = [{"keyway":"HO01","vehicles":[{"endYear":2021,"startYear":2019,"make":"Acura","model":"RDX"}],"fccid":"KR5T21","chip":"Hitag 3","keyType":"Proximity","addedDate":"2026-02-07T03:47:22.209Z","isCustom":true,"pn":"5268","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","frequency":"433.66-434.18 MHz"},{"pn":"B62","dualKeyRole":"ignition","buttons":null,"keyType":"VATS Single-Sided","chip":"VATS","vehicles":[{"endYear":1992,"model":"Reatta","make":"Buick","startYear":1990},{"model":"Regal","make":"Buick","endYear":1996,"startYear":1994},{"make":"Buick","endYear":1994,"model":"Riviera","startYear":1992},{"make":"Buick","endYear":1996,"startYear":1994,"model":"Roadmaster"},{"make":"Cadillac","endYear":1993,"startYear":1989,"model":"Allante"},{"model":"Allante","make":"Cadillac","startYear":1987,"endYear":1988},{"endYear":1996,"model":"Brougham","startYear":1993,"make":"Cadillac"},{"codeSeries":[],"model":"Concours","startYear":1990,"make":"Cadillac","endYear":1990},{"codeSeries":[],"endYear":1999,"model":"Concours","make":"Cadillac","startYear":1991},{"endYear":1999,"startYear":1991,"make":"Cadillac","model":"DeVille"},{"model":"El Dorado","startYear":1991,"make":"Cadillac","endYear":2003},{"make":"Cadillac","model":"El Dorado","endYear":1990,"startYear":1989},{"endYear":1990,"make":"Cadillac","startYear":1989,"model":"Seville","codeSeries":[]},{"startYear":1991,"codeSeries":[],"model":"Seville","make":"Cadillac","endYear":1996}],"keyway":"B62","fccid":"B62","isCustom":true,"addedDate":"2026-02-07T04:32:57.351Z","frequency":null},{"fccid":"B51","emergencyPN":null,"buttons":null,"keyType":"Non-Chip Key","keyway":"B67","notes":null,"isCustom":true,"isVATS":false,"chip":null,"dualKeyRole":"door","pn":"B51","battery":null,"secondaryKeyPartNumber":null,"addedDate":"2026-02-07T04:38:55.840Z","vehicles":[{"startYear":1990,"endYear":1992,"make":"Buick","model":"Reatta"},{"startYear":1987,"endYear":1990,"model":"Brougham","make":"Cadillac"},{"codeSeries":[],"endYear":1990,"make":"Cadillac","model":"Fleetwood","startYear":1987},{"endYear":1987,"model":"Cimarron","codeSeries":[],"startYear":1987,"make":"Cadillac"},{"startYear":1987,"make":"Cadillac","codeSeries":[],"endYear":1989,"model":"Concours"},{"model":"Concours","endYear":1990,"make":"Cadillac","codeSeries":[],"startYear":1990},{"endYear":1990,"model":"El Dorado","startYear":1989,"make":"Cadillac"},{"codeSeries":[],"endYear":1988,"make":"Cadillac","startYear":1987,"model":"Seville"},{"endYear":1990,"startYear":1989,"make":"Cadillac","model":"Seville","codeSeries":[]}],"frequency":null},{"dualKeyRole":"door","fccid":"B62","frequency":null,"isCustom":true,"vehicles":[{"startYear":1994,"make":"Buick","endYear":1996,"model":"Regal"}],"keyway":"B62","addedDate":"2026-02-07T04:43:32.720Z","chip":"VATS","keyType":null,"pn":"B79","buttons":null},{"buttons":null,"dualKeyRole":"ignition","keyType":null,"chip":"VATS","addedDate":"2026-02-07T04:46:53.917Z","frequency":null,"isCustom":true,"vehicles":[{"make":"Buick","startYear":1997,"endYear":2004,"model":"Regal"},{"make":"Buick","endYear":1999,"model":"Riviera","startYear":1995},{"startYear":1995,"make":"Buick","model":"Riviera","endYear":1999}],"keyway":"B82","pn":"B82","fccid":"B82"},{"chip":null,"addedDate":"2026-02-07T05:04:09.986Z","buttons":null,"vehicles":[{"make":"Buick","startYear":2005,"model":"Signia","endYear":2007,"codeSeries":[{"series":"G0000-G3631","years":"2005-2007"}]},{"codeSeries":[{"years":"2005-2005","series":"G0000-G3631"}],"make":"Chevrolet","startYear":2005,"endYear":2005,"model":"Cobalt"}],"keyType":"Non-Chip Key","fccid":"B106","isCustom":true,"frequency":null,"keyway":"B106","pn":"B106"},{"keyType":"Non-Chip Key","addedDate":"2026-02-07T05:09:03.208Z","keyway":"B68","dualKeyRole":"ignition","pn":"B68","chip":null,"vehicles":[{"model":"Skylark","endYear":1992,"startYear":1992,"make":"Buick"}],"buttons":null,"isCustom":true,"fccid":"B68","frequency":null},{"keyType":"Non-Chip Key","isCustom":true,"frequency":null,"fccid":"B86","buttons":null,"addedDate":"2026-02-07T05:12:56.919Z","dualKeyRole":"ignition","chip":null,"keyway":"B86","pn":"B86","vehicles":[{"endYear":1994,"startYear":1994,"make":"Buick","model":"Skylark"}]},{"chip":null,"keyType":"Non-Chip Key","keyway":"B86","vehicles":[{"model":"Skylark","make":"Buick","startYear":1995,"endYear":1998}],"frequency":null,"addedDate":"2026-02-07T05:14:45.873Z","buttons":null,"pn":"B89","isCustom":true,"fccid":"B89"},{"addedDate":"2026-02-08T02:52:23.580Z","vehicles":[{"model":"Allante","make":"Cadillac","endYear":1993,"startYear":1989},{"startYear":1987,"make":"Cadillac","model":"Allante","endYear":1988},{"model":"Allante","startYear":1987,"make":"Cadillac","endYear":1988}],"keyType":"VATS Single-Sided","frequency":null,"chip":"VATS","keyway":"B62","buttons":null,"pn":"B59","isCustom":true,"dualKeyRole":"door","fccid":"B62"},{"addedDate":"2026-02-09T16:06:47.055Z","notes":null,"frequency":"314.95 MHz","vehicles":[{"make":"Cadillac","endYear":2014,"model":"SRX","startYear":2010,"codeSeries":"Z0001-Z6000"}],"isVATS":false,"isCustom":true,"chip":"PH 46","buttons":"3 Button: L, U, P (Lock, Unlock, Panic)","fccid":"NBG009768T","keyType":"Proximity","pn":"8185","keyway":"HU100"},{"chip":"PH 46","keyway":"HU100","fccid":"NBG009768T","isVATS":false,"pn":"8426","frequency":"314.95 MHz","keyType":"Proximity","notes":null,"isCustom":true,"addedDate":"2026-02-09T16:17:02.928Z","buttons":"4 Button: L, U, P, T (Lock, Unlock, Panic, Trunk)","vehicles":[{"model":"ATS","startYear":2013,"endYear":2014,"codeSeries":"Z0001-Z6000","make":"Cadillac"}]},{"isVATS":false,"keyway":"HU100","pn":"8026","vehicles":[{"endYear":2014,"codeSeries":"Z0001-Z6000","make":"Cadillac","startYear":2010,"model":"SRX"},{"model":"ELR","codeSeries":"Z0001-Z6000","endYear":2016,"startYear":2015,"make":"Cadillac"}],"isCustom":true,"addedDate":"2026-02-09T16:25:31.334Z","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","fccid":"NBG009768T, NBGG093UCC","keyType":"Proximity","chip":"PH 46","notes":"Cadillac ELR year ranges vary from resource. ILCO says 2014-2017 while KR and others say 2015-2016.","frequency":"314.95 MHz"},{"buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","addedDate":"2026-02-09T16:39:28.654Z","notes":"ILCO mentions the same OEM# for ELR 2014-2017 but KR has 2014 and 2015-2016 separated.","keyType":"Proximity","fccid":"NBG009768T, NBGG093UCC","frequency":"314.95 MHz","isVATS":false,"keyway":"HU100","chip":"PH 46","pn":"8290","vehicles":[{"startYear":2013,"make":"Cadillac","codeSeries":"Z0001-Z6000","endYear":2014,"model":"ATS"},{"startYear":2014,"endYear":2017,"codeSeries":"Z0001-Z6000","make":"Cadillac","model":"ELR"},{"codeSeries":"Z0001-Z6000","startYear":2013,"make":"Cadillac","model":"XTS","endYear":2017}],"isCustom":true},{"addedDate":"2026-02-09T17:43:38.592Z","keyway":"B63","pn":"B50","isCustom":true,"keyType":"Non-Chip Key","chip":null,"dualKeyRole":"ignition","frequency":null,"buttons":null,"vehicles":[{"model":"Brougham","startYear":1987,"make":"Cadillac","endYear":1990},{"model":"Fleetwood","endYear":1990,"make":"Cadillac","codeSeries":[],"startYear":1987},{"startYear":1987,"make":"Cadillac","codeSeries":[],"model":"Cimarron","endYear":1987},{"codeSeries":[],"endYear":1989,"startYear":1987,"make":"Cadillac","model":"Concours"},{"startYear":1987,"make":"Cadillac","model":"Seville","endYear":1988,"codeSeries":[]}],"fccid":"B50"},{"addedDate":"2026-02-09T18:04:18.984Z","frequency":null,"isCustom":true,"pn":"48239","buttons":null,"fccid":"HU46T2","keyType":"Chip Key","vehicles":[{"make":"Cadillac","model":"Catera","startYear":1997,"endYear":2001}],"chip":"PH 40 GM","keyway":"B61"},{"addedDate":"2026-02-09T18:49:08.175Z","isVATS":false,"fccid":"M3N5WY7777A","frequency":"315 MHz","keyType":"Proximity","chip":"PH 46","vehicles":[{"endYear":2014,"codeSeries":null,"make":"Cadillac","startYear":2008,"model":"CTS"},{"model":"STS","endYear":2011,"codeSeries":null,"startYear":2008,"make":"Cadillac"}],"keyway":"B106","notes":null,"buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","pn":"9841","isCustom":true},{"isVATS":false,"buttons":"5 Button: L, U, P, T, RS (Lock, Unlock, Panic, Trunk, Remote Start)","chip":"PH 46","fccid":"HYQ2EB","keyType":"Proximity","notes":null,"isCustom":true,"vehicles":[{"make":"Cadillac","model":"ATS","startYear":2019,"endYear":2019,"codeSeries":"V0001-V5718"},{"endYear":2019,"startYear":2018,"codeSeries":"V0001-V5718","model":"CTS","make":"Cadillac"},{"model":"CT6","endYear":2020,"codeSeries":"V0001-V5718","make":"Cadillac","startYear":2016}],"pn":"5022","frequency":"433.92 MHz","addedDate":"2026-02-09T18:54:55.422Z","keyway":"HU100"},{"isCustom":true,"keyType":"Non-Chip Key","pn":"B102","addedDate":"2026-02-09T19:48:57.978Z","buttons":null,"frequency":"315 MHz","chip":null,"fccid":"B102","vehicles":[{"startYear":2000,"make":"Cadillac","model":"Escalade","endYear":2006}],"keyway":"B96/B102"},{"isCustom":true,"chip":null,"keyway":"B91","buttons":null,"keyType":"Non-Chip Key","fccid":"B91","vehicles":[{"startYear":1991,"model":"Escalade","endYear":1991,"make":"Cadillac"}],"frequency":null,"addedDate":"2026-02-09T19:50:32.041Z","pn":"B91"},{"addedDate":"2026-02-09T20:29:07.703Z","chip":"PH 46","buttons":"5 Button: L, U, P, H, RS (Lock, Unlock, Panic, Hatch, Remote Start)","frequency":"433.92 MHz","pn":"5172","isVATS":false,"fccid":"HYQ2ES","keyType":"Proximity","keyway":"HU100","isCustom":true,"vehicles":[{"endYear":2021,"startYear":2020,"make":"Cadillac","codeSeries":"V0001-V5718","model":"XT4"},{"endYear":2021,"codeSeries":"V0001-V5718","model":"XT5","startYear":2020,"make":"Cadillac"},{"endYear":2021,"startYear":2020,"model":"XT6","make":"Cadillac","codeSeries":"V0001-V5718"}],"notes":null},{"addedDate":"2026-02-09T20:47:39.772Z","chip":null,"isVATS":false,"frequency":null,"pn":"HY13","buttons":null,"fccid":"HY13","isCustom":true,"keyType":"Non-Chip Key","keyway":"HY13","notes":null,"vehicles":[{"endYear":2005,"startYear":1995,"make":"Hyundai","codeSeries":"R0001-R1000","model":"Accent"}]},{"addedDate":"2026-02-09T20:51:34.470Z","notes":null,"vehicles":[{"model":"Elantra","codeSeries":[{"years":"1996-2010","series":"T1-T1000"}],"startYear":1996,"endYear":2010,"make":"Hyundai"},{"endYear":2009,"make":"Kia","codeSeries":null,"startYear":2006,"model":"Rondo"},{"make":"Hyundai","codeSeries":"T1-T1000","model":"Accent","endYear":2005,"startYear":2000},{"make":"Hyundai","endYear":2009,"startYear":1996,"model":"Tiburon","codeSeries":[{"series":"T1-T1000","years":"1996-2009"}]},{"make":"Hyundai","codeSeries":[{"series":"V1-V1200","years":"2005-2010"}],"model":"Tucson","startYear":2005,"endYear":2010},{"endYear":2009,"model":"Spectra","codeSeries":[{"series":"V1-V1200","years":"2005-2009"}],"make":"Kia","startYear":2005},{"endYear":2008,"codeSeries":[{"years":"2005-2008","series":"V1-V1200"}],"model":"Sportage","startYear":2005,"make":"Kia"}],"frequency":null,"keyType":"Non-Chip Key","pn":"HY14","chip":null,"isVATS":false,"buttons":null,"fccid":"HY14","keyway":"HY14","isCustom":true},{"chip":null,"addedDate":"2026-02-09T20:58:26.517Z","buttons":null,"frequency":null,"keyway":"HY16","notes":null,"pn":"HY16","isCustom":true,"keyType":"Non-Chip Key","isVATS":false,"fccid":"HY16","vehicles":[{"model":"Accent","codeSeries":"V1-V1200","endYear":2011,"make":"Hyundai","startYear":2006},{"startYear":2006,"codeSeries":"V1-V1200","model":"Rio","make":"Kia","endYear":2010}]},{"isVATS":false,"notes":null,"buttons":null,"pn":"HY18","isCustom":true,"keyway":"HY18-R","keyType":"Non-Chip Key","frequency":null,"fccid":"HY18","chip":null,"addedDate":"2026-02-09T21:03:06.290Z","vehicles":[{"endYear":2017,"startYear":2012,"codeSeries":"T1001-T3500","model":"Accent","make":"Hyundai"},{"codeSeries":"C1001-C3500","endYear":2020,"make":"Kia","model":"Sorento","startYear":2015},{"make":"Hyundai","codeSeries":[{"series":"C1001-C3500","years":"2013-2018"}],"model":"Santa Fe","endYear":2018,"startYear":2013}]},{"frequency":null,"notes":null,"vehicles":[{"model":"Accent","codeSeries":"H1-H2500","startYear":2018,"endYear":2021,"make":"Hyundai"},{"startYear":2017,"endYear":2019,"model":"Elantra","make":"Hyundai","codeSeries":"B0001-B3000"},{"endYear":2022,"model":"Kona","codeSeries":"B0001-B3000","make":"Hyundai","startYear":2018},{"make":"Hyundai","startYear":2020,"endYear":2021,"codeSeries":"S1-S2500","model":"Santa Fe"},{"codeSeries":"B0001-B3000","model":"Veloster","make":"Hyundai","endYear":2020,"startYear":2018},{"codeSeries":"D1-D3000","model":"Forte","startYear":2019,"make":"Kia","endYear":2021},{"startYear":2017,"codeSeries":"D1-D3000","endYear":2020,"make":"Kia","model":"Optima"},{"endYear":2020,"codeSeries":"D1-D3000","model":"Rio","startYear":2018,"make":"Kia"},{"startYear":2021,"endYear":2021,"codeSeries":"D1-D3000","model":"Sportage","make":"Kia"}],"keyway":"KK12","fccid":"KK12","isVATS":false,"buttons":null,"chip":null,"isCustom":true,"addedDate":"2026-02-09T21:11:53.631Z","pn":"KK12","keyType":"Non-Chip Key"},{"pn":"H75","fccid":"H75","frequency":null,"isCustom":true,"keyType":"Non-Chip Key","notes":null,"buttons":null,"addedDate":"2026-02-10T15:13:26.508Z","chip":null,"keyway":"H75","vehicles":[{"make":"Ford","model":"6000","endYear":1999,"codeSeries":null,"startYear":1996},{"codeSeries":null,"make":"Ford","startYear":1996,"endYear":1999,"model":"9000"},{"model":"Aerostar","startYear":1997,"endYear":1997,"make":"Ford","codeSeries":"1-1706X"},{"endYear":1997,"model":"Bronco","make":"Ford","startYear":1997,"codeSeries":"1-1706X"},{"endYear":1999,"make":"Ford","model":"CF7000","codeSeries":null,"startYear":1996},{"startYear":1997,"model":"Cobra","codeSeries":"1-1706X","make":"Ford","endYear":1997},{"startYear":1997,"codeSeries":"1-1706X","make":"Ford","model":"Crown Victoria","endYear":1997},{"codeSeries":"1-1706X","model":"E-Series/Econoline/Club Wagon Van","endYear":2006,"make":"Ford","startYear":1996},{"endYear":1998,"make":"Ford","codeSeries":"1-1706X","model":"Explorer","startYear":1996},{"make":"Ford","codeSeries":"1-1706X","startYear":1996,"endYear":1998,"model":"Explorer Sport"},{"codeSeries":"1-1706X","endYear":1998,"model":"F-Series/F150/F250 Light Duty Pickup","startYear":1996,"make":"Ford"},{"startYear":1996,"model":"Ranger","codeSeries":"1-1706X","make":"Ford","endYear":1998},{"model":"Taurus","codeSeries":"1-1706X","make":"Ford","startYear":1996,"endYear":1997},{"codeSeries":"1-1706X","make":"Ford","endYear":1997,"model":"Windstar","startYear":1996},{"startYear":1997,"endYear":1997,"model":"Continental","make":"Lincoln","codeSeries":"1-1706X"},{"codeSeries":"1-1706X","endYear":1997,"make":"Lincoln","startYear":1997,"model":"Town Car"},{"model":"B-Series","endYear":1997,"codeSeries":"1-1706X","make":"Mazda","startYear":1996},{"make":"Mercury","startYear":1997,"model":"Cougar","codeSeries":"1-1706X","endYear":1998},{"make":"Mercury","startYear":1997,"endYear":1997,"codeSeries":"1-1706X","model":"Grand Marquis"},{"startYear":1997,"codeSeries":"1-1706X","model":"Mountaineer","make":"Mercury","endYear":1997},{"make":"Mercury","startYear":1996,"codeSeries":"1-1706X","model":"Villager","endYear":2002},{"startYear":2005,"model":"Ranger","codeSeries":"1-1706X","endYear":2005,"make":"Ford"}],"isVATS":false},{"pn":"HU101","addedDate":"2026-02-10T15:43:48.819Z","fccid":"HU101","keyType":"Non-Chip Key","buttons":null,"isCustom":true,"notes":null,"frequency":null,"chip":null,"keyway":"HU101","isVATS":false,"vehicles":[]},{"addedDate":"2026-02-10T15:45:22.446Z","fccid":"DA34","vehicles":[],"isVATS":false,"pn":"DA34","chip":null,"buttons":null,"keyway":"DA34","keyType":"Non-Chip Key","notes":null,"isCustom":true,"frequency":null},{"isVATS":false,"chip":null,"keyway":"HU100","keyType":"Non-Chip Key","vehicles":[],"notes":null,"buttons":null,"frequency":null,"addedDate":"2026-02-10T15:48:47.591Z","isCustom":true,"fccid":"HU100","pn":"HU100"},{"chip":null,"isCustom":true,"buttons":null,"addedDate":"2026-02-10T15:50:18.221Z","isVATS":false,"pn":"Y157","vehicles":[],"keyway":"Y159","notes":null,"keyType":"Non-Chip Key","fccid":"Y157","frequency":null},{"keyType":"Non-Chip Key","keyway":"HY15","isCustom":true,"addedDate":"2026-02-10T15:56:09.869Z","buttons":null,"pn":"HY15","chip":null,"isVATS":false,"notes":null,"frequency":null,"fccid":"HY15","vehicles":[]},{"addedDate":"2026-02-10T15:56:55.363Z","fccid":"HY12","pn":"HY12","chip":null,"isCustom":true,"buttons":null,"vehicles":[],"keyway":"HY12","isVATS":false,"notes":null,"keyType":"Non-Chip Key","frequency":null},{"buttons":null,"keyType":"Non-Chip Key","pn":"HY17","chip":null,"vehicles":[],"isCustom":true,"addedDate":"2026-02-10T15:58:49.371Z","keyway":"HY17","frequency":null,"fccid":"HY17","notes":null,"isVATS":false},{"pn":"KK1","frequency":null,"keyway":"KK1","buttons":null,"notes":null,"chip":null,"vehicles":[],"keyType":"Non-Chip Key","fccid":"KK1","addedDate":"2026-02-10T16:00:00.657Z","isCustom":true,"isVATS":false},{"keyway":"KK2","vehicles":[],"frequency":null,"isVATS":false,"pn":"KK2","notes":null,"isCustom":true,"chip":null,"addedDate":"2026-02-10T16:00:28.637Z","keyType":"Non-Chip Key","fccid":"KK2","buttons":null},{"pn":"KK3","addedDate":"2026-02-10T16:02:10.113Z","chip":null,"keyType":"Non-Chip Key","fccid":"KK3","frequency":null,"isVATS":false,"notes":null,"isCustom":true,"buttons":null,"vehicles":[{"startYear":2001,"endYear":2005,"codeSeries":null,"make":"Kia","model":"Rio"},{"startYear":1998,"endYear":2004,"codeSeries":null,"model":"Sephia","make":"Kia"},{"endYear":2004,"codeSeries":null,"model":"Spectra","startYear":1998,"make":"Kia"}],"keyway":"KK3"},{"isVATS":false,"fccid":"KK4","pn":"KK4","keyType":"Non-Chip Key","frequency":null,"keyway":"KK4","notes":null,"vehicles":[],"addedDate":"2026-02-10T16:02:45.109Z","isCustom":true,"chip":null,"buttons":null},{"buttons":null,"addedDate":"2026-02-10T16:03:22.749Z","vehicles":[],"isCustom":true,"isVATS":false,"chip":null,"fccid":"KK5","pn":"KK5","notes":null,"keyType":"Non-Chip Key","frequency":null,"keyway":"KK5"},{"addedDate":"2026-02-10T16:04:04.251Z","vehicles":[],"frequency":null,"isVATS":false,"keyway":"KK8","notes":null,"pn":"KK8","keyType":"Non-Chip Key","chip":null,"isCustom":true,"fccid":"KK8","buttons":null},{"chip":null,"vehicles":[],"notes":null,"pn":"KK10","buttons":null,"frequency":null,"keyway":"KK10","isCustom":true,"fccid":"KK10","isVATS":false,"keyType":"Non-Chip Key","addedDate":"2026-02-10T16:06:42.146Z"}];

function openAddInventory() {
    populateVendorDropdown();
    goToStep1();
    document.getElementById('addInvDate').value = new Date().toISOString().split('T')[0];
    document.getElementById('addInventoryPanel').classList.add('on');
}

function closeAddInventory() {
    document.getElementById('addInventoryPanel').classList.remove('on');
    document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelector('.nav-btn').classList.add('active');
}

function populateVendorDropdown() {
    const vendorSelect = document.getElementById('addInvVendor');
    vendorSelect.innerHTML = '<option value="">Select vendor...</option>';

    const allVendors = [...DEFAULT_VENDORS.map(v => v.name), ...customVendors.map(v => v.name)];
    allVendors.sort().forEach(v => {
        const opt = document.createElement('option');
        opt.value = v;
        opt.textContent = v;
        vendorSelect.appendChild(opt);
    });

    const otherOpt = document.createElement('option');
    otherOpt.value = '__other__';
    otherOpt.textContent = '+ Other (enter manually)';
    vendorSelect.appendChild(otherOpt);
}

// Brand options for inventory
const BRAND_OPTIONS = ['Aftermarket', 'OEM', 'OEM Refurbished', 'Strattec', 'Atek', 'Keyless2Go', 'Ilco'];

function getBrandOptions() {
    const brands = new Set(BRAND_OPTIONS);
    if (customDropdownValues.brand) {
        customDropdownValues.brand.forEach(b => brands.add(b));
    }
    return Array.from(brands).sort();
}

// ---- FID Grouping Helpers ----

// Get all FCC IDs that map to a given FID
function getFccIdsForFid(fid) {
    const fccIds = [];
    for (const [fccId, assignedFid] of Object.entries(fidAssignments || {})) {
        if (assignedFid === fid) {
            // FCC ID keys can be comma-separated
            fccId.split(',').map(s => s.trim()).forEach(id => {
                if (id) fccIds.push(id);
            });
        }
    }
    return fccIds;
}

// Build FID groups from DB: { fid -> { fid, fccIds, keys, vehicles } }
function buildFIDGroups() {
    const groups = {};

    // Build reverse map: individual fccid -> FID
    const fccToFid = {};
    for (const [fccKey, fid] of Object.entries(fidAssignments || {})) {
        fccKey.split(',').map(s => s.trim()).forEach(id => {
            if (id) fccToFid[id] = fid;
        });
    }

    DB.forEach((key, idx) => {
        // Determine the FCC ID(s) for this key
        let fccIds = [];
        if (key.fccid) {
            fccIds = key.fccid.split(',').map(s => s.trim()).filter(Boolean);
        }

        // Find FID for this key
        let fid = null;
        for (const fcc of fccIds) {
            if (fccToFid[fcc]) { fid = fccToFid[fcc]; break; }
        }

        if (!fid) return; // Skip keys without FID

        if (!groups[fid]) {
            groups[fid] = { fid: fid, fccIds: new Set(), keys: [], keyIndices: [], vehicles: new Set() };
        }
        fccIds.forEach(id => groups[fid].fccIds.add(id));
        groups[fid].keys.push(key);
        groups[fid].keyIndices.push(idx);
        (key.vehicles || []).forEach(v => {
            groups[fid].vehicles.add(v.make + ' ' + v.model);
        });
    });

    // Convert sets to arrays
    for (const fid in groups) {
        groups[fid].fccIds = Array.from(groups[fid].fccIds);
        groups[fid].vehicles = Array.from(groups[fid].vehicles);
    }
    return groups;
}

// ---- Step 1: FID-based search & selection ----

function bulkSearchKeys() {
    const search = document.getElementById('addInvSearch').value.toLowerCase().trim();
    if (!search) {
        document.getElementById('addInvResults').innerHTML = '<div class="add-inv-placeholder">Enter search criteria above to find keys</div>';
        return;
    }

    const fidGroups = buildFIDGroups();
    const alreadySelectedFIDs = new Set(bulkSelectedItems.map(i => i.fid));

    // Search through FID groups
    let matchingFids = [];

    for (const fid in fidGroups) {
        if (alreadySelectedFIDs.has(fid)) continue;

        const group = fidGroups[fid];
        let match = false;

        // Match by FID code
        if (fid.toLowerCase().includes(search)) match = true;

        // Match by FCC ID
        if (!match) {
            for (const fcc of group.fccIds) {
                if (fcc.toLowerCase().includes(search)) { match = true; break; }
            }
        }

        // Match by keyway
        if (!match) {
            for (const key of group.keys) {
                if (key.keyway && String(key.keyway).toLowerCase().includes(search)) { match = true; break; }
            }
        }

        // Match by part number
        if (!match) {
            for (const key of group.keys) {
                if (String(key.pn || '').toLowerCase().includes(search)) { match = true; break; }
            }
        }

        if (match) matchingFids.push(group);
    }

    matchingFids = matchingFids.slice(0, 30);

    if (matchingFids.length === 0) {
        document.getElementById('addInvResults').innerHTML = '<div class="add-inv-placeholder">No FIDs found matching your criteria</div>';
        return;
    }

    document.getElementById('addInvResults').innerHTML = matchingFids.map(group => {
        const fccDisplay = group.fccIds.slice(0, 2).join(', ') + (group.fccIds.length > 2 ? '...' : '');
        const vehicleDisplay = group.vehicles.slice(0, 3).join(', ') + (group.vehicles.length > 3 ? ' +' + (group.vehicles.length - 3) + ' more' : '');
        const keyways = [...new Set(group.keys.map(k => k.keyway).filter(Boolean))];
        const keywayDisplay = keyways.slice(0, 2).join(', ');
        const pnCount = group.keys.length;
        const totalStock = group.keys.reduce((sum, k) => sum + (stockData[k.pn] || 0), 0);
        const escapedFid = group.fid.replace(/'/g, "\\'");

        return '<div class="add-inv-result-item" onclick="bulkSelectFID(\'' + escapedFid + '\')">' +
            '<div class="add-inv-result-pn" style="font-size:18px;color:var(--accent);">' + group.fid + '</div>' +
            '<div class="add-inv-result-details">' +
                'FCC: ' + fccDisplay +
                (keywayDisplay ? ' | ' + keywayDisplay : '') +
            '</div>' +
            '<div class="add-inv-result-vehicles">' + (vehicleDisplay || 'Unknown vehicles') + '</div>' +
            '<div class="add-inv-result-tags">' +
                '<span class="add-inv-tag">' + pnCount + ' PN' + (pnCount !== 1 ? 's' : '') + '</span>' +
                '<span class="add-inv-tag">Total Stock: ' + totalStock + '</span>' +
            '</div>' +
        '</div>';
    }).join('');
}

function bulkSelectFID(fid) {
    if (bulkSelectedItems.some(i => i.fid === fid)) {
        toast('Already selected');
        return;
    }

    const fidGroups = buildFIDGroups();
    const group = fidGroups[fid];
    if (!group) { toast('FID not found'); return; }

    bulkSelectedItems.push({
        fid: fid,
        fccIds: group.fccIds,
        keys: group.keys,
        vehicles: group.vehicles
    });

    // Hide search, show selected FIDs
    document.getElementById('bulkSearchArea').style.display = 'none';
    document.getElementById('addInvSearch').value = '';
    document.getElementById('addInvResults').innerHTML = '<div class="add-inv-placeholder">Enter search criteria above to find keys</div>';
    renderBulkSelectedItems();
}

function renderBulkSelectedItems() {
    const container = document.getElementById('bulkSelectedItems');
    container.innerHTML = bulkSelectedItems.map((item, idx) => {
        const fccDisplay = item.fccIds.slice(0, 2).join(', ');
        const vehicleDisplay = item.vehicles.slice(0, 2).join(', ');

        return '<div class="bulk-selected-item">' +
            '<div class="bulk-selected-item-info">' +
                '<div class="bulk-selected-item-pn" style="color:var(--accent);">' + item.fid + '</div>' +
                '<div class="bulk-selected-item-detail">' + fccDisplay + (vehicleDisplay ? ' | ' + vehicleDisplay : '') + '</div>' +
            '</div>' +
            '<button class="bulk-remove-btn" onclick="bulkRemoveItem(' + idx + ')">X</button>' +
        '</div>';
    }).join('');

    document.getElementById('bulkAddMoreBtn').style.display = bulkSelectedItems.length > 0 ? 'block' : 'none';
    document.getElementById('bulkNextBtn').style.display = bulkSelectedItems.length > 0 ? 'block' : 'none';
}

function bulkRemoveItem(idx) {
    bulkSelectedItems.splice(idx, 1);
    renderBulkSelectedItems();
    if (bulkSelectedItems.length === 0) {
        document.getElementById('bulkSearchArea').style.display = 'block';
    }
}

function showBulkSearch() {
    document.getElementById('bulkSearchArea').style.display = 'block';
    document.getElementById('addInvSearch').value = '';
    document.getElementById('addInvResults').innerHTML = '<div class="add-inv-placeholder">Enter search criteria above to find keys</div>';
    document.getElementById('addInvSearch').focus();
}

// ---- Step 2: FID Funnel ----

function goToStep1() {
    bulkSelectedItems = [];
    bulkItemDetails = [];
    document.getElementById('addInvStep1').style.display = 'block';
    document.getElementById('addInvStep2').style.display = 'none';
    document.getElementById('addInvStep3').style.display = 'none';

    document.getElementById('addInvSearch').value = '';
    document.getElementById('bulkSearchArea').style.display = 'block';
    document.getElementById('addInvResults').innerHTML = '<div class="add-inv-placeholder">Enter search criteria above to find keys</div>';
    document.getElementById('bulkSelectedItems').innerHTML = '';
    document.getElementById('bulkAddMoreBtn').style.display = 'none';
    document.getElementById('bulkNextBtn').style.display = 'none';
}

function goToBulkStep2() {
    if (bulkSelectedItems.length === 0) {
        toast('Select at least one item');
        return;
    }

    // Build funnel model for each selected FID
    bulkItemDetails = bulkSelectedItems.map(item => ({
        fid: item.fid,
        fccIds: item.fccIds,
        allKeys: item.keys,
        vehicles: item.vehicles,
        // Funnel selections
        brand: '',
        buttons: '',
        logo: '',
        // Resolved PN
        resolvedPN: null,
        resolvedKey: null,
        // Quantity and price
        qty: 1,
        price: ''
    }));

    document.getElementById('addInvStep1').style.display = 'none';
    document.getElementById('addInvStep2').style.display = 'block';
    document.getElementById('addInvStep3').style.display = 'none';

    renderBulkDetailCards();
}

function getFunnelMatchingKeys(detail) {
    let keys = detail.allKeys.slice();

    // Filter by brand: OEM keys typically have a logo, aftermarket don't
    if (detail.brand) {
        const isOEM = detail.brand === 'OEM' || detail.brand === 'OEM Refurbished';
        if (isOEM) {
            // OEM: keys that have a logo
            keys = keys.filter(k => k.logo && k.logo.trim());
        } else {
            // Aftermarket/specific brands: keys without a logo, or with brand-matching data
            keys = keys.filter(k => !k.logo || !k.logo.trim());
        }
    }

    // Filter by buttons
    if (detail.buttons) {
        keys = keys.filter(k => {
            const kButtons = k.buttons ? k.buttons.split(':')[0].trim() : '';
            return kButtons === detail.buttons;
        });
    }

    // Filter by logo (only relevant for OEM)
    if (detail.logo) {
        keys = keys.filter(k => (k.logo || '') === detail.logo);
    }

    return keys;
}

function getUniqueButtonOptions(keys) {
    const buttons = new Set();
    keys.forEach(k => {
        if (k.buttons) {
            const short = k.buttons.split(':')[0].trim();
            if (short) buttons.add(short);
        }
    });
    return Array.from(buttons).sort((a, b) => {
        const na = parseInt(a) || 0;
        const nb = parseInt(b) || 0;
        return na - nb;
    });
}

function getUniqueLogoOptions(keys) {
    const logos = new Set();
    keys.forEach(k => {
        if (k.logo && k.logo.trim()) logos.add(k.logo.trim());
    });
    return Array.from(logos).sort();
}

function renderBulkDetailCards() {
    const container = document.getElementById('bulkDetailCards');

    container.innerHTML = bulkItemDetails.map((detail, dIdx) => {
        const matchingKeys = getFunnelMatchingKeys(detail);

        // Auto-resolve if exactly one match
        if (matchingKeys.length === 1 && !detail.resolvedPN) {
            detail.resolvedPN = matchingKeys[0].pn;
            detail.resolvedKey = matchingKeys[0];
        }
        // Clear resolution if filters changed and multiple/zero matches
        if (matchingKeys.length !== 1) {
            detail.resolvedPN = null;
            detail.resolvedKey = null;
        }

        // Determine available options based on current filters
        // For buttons, filter keys by brand first
        let keysForButtons = detail.allKeys.slice();
        if (detail.brand) {
            const isOEM = detail.brand === 'OEM' || detail.brand === 'OEM Refurbished';
            keysForButtons = keysForButtons.filter(k => isOEM ? (k.logo && k.logo.trim()) : (!k.logo || !k.logo.trim()));
        }
        const buttonOptions = getUniqueButtonOptions(keysForButtons);

        // For logo, filter by brand AND buttons
        let keysForLogo = keysForButtons;
        if (detail.buttons) {
            keysForLogo = keysForLogo.filter(k => {
                const kButtons = k.buttons ? k.buttons.split(':')[0].trim() : '';
                return kButtons === detail.buttons;
            });
        }
        const logoOptions = getUniqueLogoOptions(keysForLogo);

        const isOEMBrand = detail.brand === 'OEM' || detail.brand === 'OEM Refurbished';
        const fccDisplay = detail.fccIds.slice(0, 2).join(', ');

        let html = '<div class="bulk-detail-card">';
        html += '<div class="bulk-detail-card-header">';
        html += '<div>';
        html += '<div class="bulk-detail-card-pn" style="color:var(--accent);">' + detail.fid + '</div>';
        html += '<div class="bulk-detail-card-fcc">' + fccDisplay + '</div>';
        html += '</div>';
        html += '</div>';

        // Progressive funnel dropdowns
        html += '<div style="padding:0 16px 12px;">';

        // Brand dropdown
        html += '<div style="margin-bottom:10px;">';
        html += '<label style="display:block;font-size:11px;color:var(--dim);text-transform:uppercase;margin-bottom:4px;">Brand</label>';
        html += '<select class="add-inv-select" onchange="setFunnelBrand(' + dIdx + ',this.value)">';
        html += '<option value="">Select brand...</option>';
        getBrandOptions().forEach(b => {
            html += '<option value="' + b + '"' + (detail.brand === b ? ' selected' : '') + '>' + b + '</option>';
        });
        html += '</select>';
        html += '</div>';

        // Buttons dropdown (only show if brand selected and there are options)
        if (detail.brand && buttonOptions.length > 0) {
            html += '<div style="margin-bottom:10px;">';
            html += '<label style="display:block;font-size:11px;color:var(--dim);text-transform:uppercase;margin-bottom:4px;">Button Configuration</label>';
            html += '<select class="add-inv-select" onchange="setFunnelButtons(' + dIdx + ',this.value)">';
            html += '<option value="">All configurations...</option>';
            buttonOptions.forEach(b => {
                // Show full button info for context
                const fullButton = keysForButtons.find(k => k.buttons && k.buttons.split(':')[0].trim() === b);
                const fullText = fullButton ? fullButton.buttons : b;
                html += '<option value="' + b + '"' + (detail.buttons === b ? ' selected' : '') + '>' + fullText + '</option>';
            });
            html += '</select>';
            html += '</div>';
        }

        // Logo dropdown (only show if OEM brand AND there are logo options)
        if (isOEMBrand && detail.buttons && logoOptions.length > 1) {
            html += '<div style="margin-bottom:10px;">';
            html += '<label style="display:block;font-size:11px;color:var(--dim);text-transform:uppercase;margin-bottom:4px;">Logo</label>';
            html += '<select class="add-inv-select" onchange="setFunnelLogo(' + dIdx + ',this.value)">';
            html += '<option value="">All logos...</option>';
            logoOptions.forEach(l => {
                html += '<option value="' + l.replace(/"/g, '&quot;') + '"' + (detail.logo === l ? ' selected' : '') + '>' + l + '</option>';
            });
            html += '</select>';
            html += '</div>';
        }

        html += '</div>';

        // Matching PNs list
        html += '<div style="padding:0 16px 12px;">';
        html += '<div style="font-size:11px;color:var(--dim);text-transform:uppercase;margin-bottom:6px;">Matching Part Numbers (' + matchingKeys.length + ')</div>';

        if (matchingKeys.length === 0 && detail.brand) {
            html += '<div style="padding:12px;background:rgba(255,193,7,0.1);border:1px solid var(--warning);border-radius:8px;margin-bottom:8px;">';
            html += '<div style="font-size:13px;color:var(--warning);font-weight:600;margin-bottom:4px;">No matching part number found</div>';
            html += '<div style="font-size:12px;color:var(--dim);margin-bottom:8px;">A new part number will be auto-generated for this combination.</div>';
            html += '<button class="add-inv-btn secondary" style="font-size:12px;padding:8px 12px;" onclick="previewAutoGeneratePN(' + dIdx + ')">Preview &amp; Confirm New PN</button>';
            html += '</div>';
        } else {
            html += matchingKeys.map(k => {
                const buttonsShort = k.buttons ? k.buttons.split(':')[0] : '';
                const stock = stockData[k.pn] || 0;
                const isResolved = detail.resolvedPN === k.pn;
                const style = isResolved ? 'border:2px solid var(--accent);background:rgba(99,102,241,0.08);' : '';

                return '<div style="display:flex;justify-content:space-between;align-items:center;padding:8px 10px;background:var(--card);border:1px solid var(--border);border-radius:6px;margin-bottom:4px;font-size:13px;' + style + '">' +
                    '<div>' +
                        '<span style="font-weight:600;font-family:monospace;">' + k.pn + '</span>' +
                        '<span style="color:var(--dim);margin-left:8px;">' +
                            (buttonsShort ? buttonsShort : '') +
                            (k.logo ? ' | ' + k.logo : '') +
                        '</span>' +
                    '</div>' +
                    '<span style="font-size:11px;color:var(--dim);">Stock: ' + stock + '</span>' +
                '</div>';
            }).join('');
        }
        html += '</div>';

        // Quantity and Price row (show when resolved or when there's exactly 1 match or user has made selections)
        if (detail.resolvedPN || matchingKeys.length === 1) {
            const resolvedPn = detail.resolvedPN || matchingKeys[0].pn;
            detail.resolvedPN = resolvedPn;
            detail.resolvedKey = matchingKeys.find(k => k.pn === resolvedPn) || matchingKeys[0];

            html += '<div style="padding:0 16px 16px;">';
            html += '<div class="bulk-field-row">';
            html += '<div style="flex:0 0 100px;">';
            html += '<label>Qty</label>';
            html += '<div style="display:flex;align-items:center;gap:4px;">';
            html += '<button class="add-inv-qty-btn" style="width:32px;height:36px;font-size:16px;" onclick="adjustFunnelQty(' + dIdx + ',-1)">-</button>';
            html += '<input type="number" class="add-inv-input" style="width:50px;text-align:center;padding:8px 4px;" value="' + detail.qty + '" min="0" onchange="setFunnelQty(' + dIdx + ',this.value)">';
            html += '<button class="add-inv-qty-btn" style="width:32px;height:36px;font-size:16px;" onclick="adjustFunnelQty(' + dIdx + ',1)">+</button>';
            html += '</div>';
            html += '</div>';

            html += '<div style="flex:0 0 120px;">';
            html += '<label>Price (ea)</label>';
            html += '<div style="display:flex;align-items:center;">';
            html += '<span style="padding:8px;background:var(--bg);border:1px solid var(--border);border-right:none;border-radius:8px 0 0 8px;color:var(--dim);font-size:13px;">$</span>';
            html += '<input type="number" class="add-inv-input" style="border-radius:0 8px 8px 0;padding:8px;" placeholder="0.00" step="0.01" min="0" value="' + (detail.price || '') + '" onchange="setFunnelPrice(' + dIdx + ',this.value)">';
            html += '</div>';
            html += '</div>';
            html += '</div>';
            html += '</div>';
        }

        html += '</div>';
        return html;
    }).join('');
}

function setFunnelBrand(dIdx, val) {
    const detail = bulkItemDetails[dIdx];
    detail.brand = val;
    // Reset downstream selections
    detail.buttons = '';
    detail.logo = '';
    detail.resolvedPN = null;
    detail.resolvedKey = null;
    renderBulkDetailCards();
}

function setFunnelButtons(dIdx, val) {
    const detail = bulkItemDetails[dIdx];
    detail.buttons = val;
    // Reset logo if changing buttons
    detail.logo = '';
    detail.resolvedPN = null;
    detail.resolvedKey = null;
    renderBulkDetailCards();
}

function setFunnelLogo(dIdx, val) {
    const detail = bulkItemDetails[dIdx];
    detail.logo = val;
    detail.resolvedPN = null;
    detail.resolvedKey = null;
    renderBulkDetailCards();
}

function adjustFunnelQty(dIdx, delta) {
    const detail = bulkItemDetails[dIdx];
    let val = parseInt(detail.qty) || 0;
    val += delta;
    if (val < 0) val = 0;
    detail.qty = val;
    renderBulkDetailCards();
}

function setFunnelQty(dIdx, val) {
    bulkItemDetails[dIdx].qty = parseInt(val) || 0;
}

function setFunnelPrice(dIdx, val) {
    bulkItemDetails[dIdx].price = parseFloat(val) || 0;
}

// ---- Auto-generate PN ----

function previewAutoGeneratePN(dIdx) {
    const detail = bulkItemDetails[dIdx];
    const siblingPNs = detail.allKeys.map(k => k.pn);

    // Try to find a numeric PN in the same range as siblings
    const numericPNs = siblingPNs.map(pn => parseInt(pn)).filter(n => !isNaN(n)).sort((a, b) => a - b);

    let suggestedPN;
    if (numericPNs.length > 0) {
        // Find the next available PN near the sibling range
        const maxPN = numericPNs[numericPNs.length - 1];
        const minPN = numericPNs[0];
        // Try nearby values first
        suggestedPN = maxPN + 1;
        // Check it doesn't already exist in DB
        while (DB.some(k => String(k.pn) === String(suggestedPN))) {
            suggestedPN++;
        }
    } else {
        // Non-numeric PNs - generate based on FID
        const base = detail.fid.replace('-', '') + '_';
        let counter = 1;
        suggestedPN = base + counter;
        while (DB.some(k => String(k.pn) === String(suggestedPN))) {
            counter++;
            suggestedPN = base + counter;
        }
    }

    // Show confirmation dialog with sibling PNs for context
    let msg = 'Auto-generate new Part Number for ' + detail.fid + '\n\n';
    msg += 'Combination:\n';
    msg += '  Brand: ' + (detail.brand || 'Not selected') + '\n';
    msg += '  Buttons: ' + (detail.buttons || 'Not selected') + '\n';
    if (detail.logo) msg += '  Logo: ' + detail.logo + '\n';
    msg += '\nExisting PNs under this FID:\n';
    siblingPNs.forEach(pn => {
        const key = detail.allKeys.find(k => k.pn === pn);
        const btn = key && key.buttons ? key.buttons.split(':')[0] : '';
        msg += '  ' + pn + (btn ? ' - ' + btn : '') + (key && key.logo ? ' - ' + key.logo : '') + '\n';
    });
    msg += '\nSuggested new PN: ' + suggestedPN;
    msg += '\n\nEnter a different PN or click OK to use the suggested one:';

    const userPN = prompt(msg, suggestedPN);
    if (!userPN) return;

    const newPN = userPN.trim();
    if (DB.some(k => String(k.pn) === newPN)) {
        toast('Part number ' + newPN + ' already exists in the database');
        return;
    }

    // Create the new key entry
    const templateKey = detail.allKeys[0]; // Use first sibling as template
    const newKey = {
        pn: newPN,
        fccid: detail.fccIds[0] || '',
        keyway: templateKey.keyway || '',
        chip: templateKey.chip || '',
        keyType: templateKey.keyType || '',
        buttons: detail.buttons ? (detail.allKeys.find(k => k.buttons && k.buttons.split(':')[0].trim() === detail.buttons) || {}).buttons || detail.buttons : templateKey.buttons || '',
        frequency: templateKey.frequency || '',
        battery: templateKey.battery || '',
        logo: detail.logo || '',
        vehicles: templateKey.vehicles || [],
        notes: 'Auto-generated from FID ' + detail.fid,
        isCustom: true,
        addedDate: new Date().toISOString(),
        brand: detail.brand || ''
    };

    // Add to DB and custom keys
    DB.push(newKey);
    customKeys.push(newKey);
    saveCustomKeys();

    // Resolve to the new PN
    detail.resolvedPN = newPN;
    detail.resolvedKey = newKey;
    detail.allKeys.push(newKey);

    toast('Created part number ' + newPN);
    renderBulkDetailCards();
}

// ---- Submit bulk inventory ----

function submitBulkInventory() {
    let vendor = document.getElementById('addInvVendor').value;
    const date = document.getElementById('addInvDate').value || new Date().toISOString().split('T')[0];
    const invoice = document.getElementById('addInvInvoice').value.trim();
    const notes = document.getElementById('addInvNotes').value.trim();

    if (vendor === '__other__') {
        vendor = prompt('Enter vendor name:');
        if (!vendor) {
            toast('Please enter a vendor name');
            return;
        }
    }

    // Validate all items have resolved PNs
    const unresolved = bulkItemDetails.filter(d => !d.resolvedPN);
    if (unresolved.length > 0) {
        toast('Please complete all funnel selections. ' + unresolved.length + ' item(s) need a part number.');
        return;
    }

    let totalItems = 0;
    let summaryLines = [];

    bulkItemDetails.forEach(detail => {
        const pn = detail.resolvedPN;
        const qty = parseInt(detail.qty) || 0;
        const price = parseFloat(detail.price) || 0;
        const brand = detail.brand || '';

        if (qty <= 0) return;

        // Update stock
        stockData[pn] = (stockData[pn] || 0) + qty;
        totalItems += qty;

        // Find the key for this PN
        const keyForPn = detail.resolvedKey || DB.find(k => k.pn === pn);

        // Add to purchase history
        const purchase = {
            id: Date.now().toString() + '_' + pn + '_' + Math.random().toString(36).substr(2, 4),
            date: date,
            vendor: vendor || 'Unknown',
            partNumber: pn,
            quantity: qty,
            priceEach: price,
            total: qty * price,
            invoice: invoice,
            notes: (brand ? '[' + brand + '] ' : '') + notes,
            brand: brand,
            fccid: keyForPn ? keyForPn.fccid || '' : '',
            keyway: keyForPn ? keyForPn.keyway || '' : '',
            fid: detail.fid
        };

        purchaseHistory.unshift(purchase);

        // Update vendor pricing
        if (vendor && price > 0) {
            if (!vendorPrices[pn]) vendorPrices[pn] = {};
            if (!vendorPrices[pn][vendor]) {
                vendorPrices[pn][vendor] = { priceA: '', priceB: '', emergency: '', shell: '', oem: '' };
            }
            if (!vendorPrices[pn][vendor].priceA) {
                vendorPrices[pn][vendor].priceA = price.toFixed(2);
            }
        }

        summaryLines.push('<strong>' + qty + 'x ' + pn + '</strong>' +
            ' <span style="color:var(--dim);">(' + detail.fid + ')</span>' +
            (brand ? ' [' + brand + ']' : '') +
            (price > 0 ? ' @ $' + price.toFixed(2) + '/ea' : ''));
    });

    if (totalItems === 0) {
        toast('No items with quantity > 0');
        return;
    }

    saveStock();
    savePurchaseHistory();
    if (vendor) saveVendorPrices();

    // Show success
    document.getElementById('addInvStep1').style.display = 'none';
    document.getElementById('addInvStep2').style.display = 'none';
    document.getElementById('addInvStep3').style.display = 'block';

    document.getElementById('addInvSuccessDetails').innerHTML =
        summaryLines.join('<br>') + '<br><br>' +
        (vendor ? 'Vendor: ' + vendor + '<br>' : '') +
        (invoice ? 'Invoice: ' + invoice + '<br>' : '') +
        'Total items added: ' + totalItems;
}

// Purchase History
function openPurchaseHistory() {
    renderPurchaseHistory();
    populateHistoryVendorFilter();
    document.getElementById('purchaseHistoryPanel').classList.add('on');
}

function closePurchaseHistory() {
    document.getElementById('purchaseHistoryPanel').classList.remove('on');
}

function populateHistoryVendorFilter() {
    const vendors = new Set();
    purchaseHistory.forEach(p => {
        if (p.vendor) vendors.add(p.vendor);
    });
    
    const select = document.getElementById('historyVendor');
    select.innerHTML = '<option value="">All Vendors</option>';
    Array.from(vendors).sort().forEach(v => {
        const opt = document.createElement('option');
        opt.value = v;
        opt.textContent = v;
        select.appendChild(opt);
    });
}

function renderPurchaseHistory() {
    if (purchaseHistory.length === 0) {
        document.getElementById('purchaseHistoryList').innerHTML = '<div class="add-inv-placeholder">No purchase history yet</div>';
        return;
    }
    
    document.getElementById('purchaseHistoryList').innerHTML = purchaseHistory.map(p => {
        const dateStr = new Date(p.date).toLocaleDateString();
        return '<div class="purchase-item">' +
            '<div class="purchase-item-header">' +
                '<div>' +
                    '<div class="purchase-item-pn">' + p.partNumber + '</div>' +
                    '<div style="font-size:12px;color:var(--dim);">' + (p.fccid ? 'FCC: ' + p.fccid : '') + '</div>' +
                '</div>' +
                '<div class="purchase-item-date">' + dateStr + '</div>' +
            '</div>' +
            '<div class="purchase-item-details">' +
                '<span>Qty: <strong>' + p.quantity + '</strong></span>' +
                '<span class="purchase-item-vendor">' + p.vendor + '</span>' +
                (p.priceEach > 0 ? '<span class="purchase-item-total">$' + p.total.toFixed(2) + '</span>' : '') +
            '</div>' +
            (p.invoice ? '<div style="font-size:11px;color:var(--dim);margin-top:6px;">Invoice: ' + p.invoice + '</div>' : '') +
            (p.notes ? '<div style="font-size:11px;color:var(--dim);margin-top:4px;">Notes: ' + p.notes + '</div>' : '') +
        '</div>';
    }).join('');
}

function filterPurchaseHistory() {
    const search = document.getElementById('historySearch').value.toLowerCase();
    const vendor = document.getElementById('historyVendor').value;
    
    const items = document.querySelectorAll('#purchaseHistoryList .purchase-item');
    items.forEach(item => {
        const text = item.textContent.toLowerCase();
        let show = true;
        
        if (search && !text.includes(search)) show = false;
        if (vendor && !text.includes(vendor.toLowerCase())) show = false;
        
        item.style.display = show ? '' : 'none';
    });
}

// ===================== ADD CUSTOM KEY =====================
function openAddCustomKey() {
    try {
        // Reset form
        document.getElementById('customKeyPN').value = '';
        document.getElementById('customKeyFCC').value = '';
        document.getElementById('customKeyNotes').value = '';
        document.getElementById('customKeyVehicles').innerHTML = '';
        document.getElementById('newKeyFidDisplay').style.display = 'none';
        document.getElementById('newKeyFidDisplay').textContent = '';
        customKeyVehicleCount = 0;
        customKeyVehicleCodeSeries = {};

        // Populate keyway dropdown
        populateCustomKeyDropdown('customKeyKeyway', 'keyway', 'Select keyway...');
        document.getElementById('customKeyKeywayOther').style.display = 'none';
        document.getElementById('customKeyKeywayOther').value = '';

        // Populate chip dropdown
        populateCustomKeyDropdown('customKeyChip', 'chip', 'Select chip type...');
        document.getElementById('customKeyChipOther').style.display = 'none';
        document.getElementById('customKeyChipOther').value = '';
        document.getElementById('customKeyChipSection').style.display = 'block';

        // Reset other dropdowns
        document.getElementById('customKeyType').value = '';
        document.getElementById('customKeyTypeOther').style.display = 'none';
        document.getElementById('customKeyTypeOther').value = '';

        document.getElementById('customKeyButtons').value = '';
        document.getElementById('customKeyButtonsOther').style.display = 'none';
        document.getElementById('customKeyButtonsOther').value = '';

        document.getElementById('customKeyFreq').value = '';
        document.getElementById('customKeyFreqOther').style.display = 'none';
        document.getElementById('customKeyFreqOther').value = '';
        populateCustomKeyFrequencyDropdown();

        // Add one vehicle row by default
        addCustomKeyVehicle();

        document.getElementById('addCustomKeyPanel').classList.add('on');
    } catch (e) {
        console.error('openAddCustomKey error:', e);
        toast('Error opening form: ' + e.message);
        // Still try to open the panel even if setup failed
        document.getElementById('addCustomKeyPanel').classList.add('on');
    }
}

function toggleCustomKeyChipType() {
    const keyType = document.getElementById('customKeyType').value;
    const chipSection = document.getElementById('customKeyChipSection');
    // Hide chip type for Non-Chip Key and Remote Only
    if (keyType === 'Non-Chip Key' || keyType === 'Remote Only') {
        chipSection.style.display = 'none';
        document.getElementById('customKeyChip').value = '';
    } else {
        chipSection.style.display = 'block';
    }
}

function populateCustomKeyDropdown(selectId, field, placeholder) {
    const select = document.getElementById(selectId);
    const values = new Set();

    // Gather values from DB
    DB.forEach(key => {
        if (key[field]) {
            values.add(key[field]);
        }
    });

    // For keyway field, also include custom keyways
    if (field === 'keyway') {
        customKeyways.forEach(kw => values.add(kw));
    }

    // Include user-added custom dropdown values
    if (Array.isArray(customDropdownValues[field])) {
        customDropdownValues[field].forEach(v => values.add(String(v)));
    }

    // Sort alphabetically
    const sortedValues = Array.from(values).sort((a, b) => String(a).localeCompare(String(b)));

    // Build options
    select.innerHTML = '<option value="">' + placeholder + '</option>';
    sortedValues.forEach(val => {
        const opt = document.createElement('option');
        opt.value = val;
        opt.textContent = val;
        select.appendChild(opt);
    });

    // Add "Other" option at the end
    const otherOpt = document.createElement('option');
    otherOpt.value = '__other__';
    otherOpt.textContent = '+ Other (custom)';
    select.appendChild(otherOpt);
}

function populateCustomKeyFrequencyDropdown() {
    const select = document.getElementById('customKeyFreq');

    // Remove any previously added "From Database" optgroup to avoid duplicates on re-open
    const existingDbGroup = select.querySelector('optgroup[data-dynamic="true"]');
    if (existingDbGroup) existingDbGroup.remove();

    // Collect the hardcoded frequency values so we can avoid duplicating them
    const hardcodedFreqs = new Set([
        '315 MHz', '314.35 MHz', '314.975 MHz', '313.85 MHz', '313.8 MHz',
        '315-316 MHz', '314.5-315.5 MHz', '312.1-314.35 MHz',
        '433.92 MHz', '433.4-434.4 MHz', '433.66-434.18 MHz',
        '902.375-903.425 MHz', '923.625-924.6 MHz', 'None (Transponder Only)'
    ]);

    // Gather additional frequencies from DB and custom values
    const extraFreqs = new Set();
    DB.forEach(key => {
        if (key.frequency && !hardcodedFreqs.has(key.frequency)) {
            extraFreqs.add(key.frequency);
        }
    });
    if (Array.isArray(customDropdownValues.frequency)) {
        customDropdownValues.frequency.forEach(v => {
            if (!hardcodedFreqs.has(v)) extraFreqs.add(v);
        });
    }

    // If there are extra frequencies, add them as a new optgroup before the hardcoded ones
    if (extraFreqs.size > 0) {
        const sortedExtras = Array.from(extraFreqs).sort((a, b) => String(a).localeCompare(String(b)));
        const optgroup = document.createElement('optgroup');
        optgroup.label = 'From Database';
        optgroup.setAttribute('data-dynamic', 'true');
        sortedExtras.forEach(val => {
            const opt = document.createElement('option');
            opt.value = val;
            opt.textContent = val;
            optgroup.appendChild(opt);
        });
        // Insert after the first "Select..." option
        const firstOptgroup = select.querySelector('optgroup');
        if (firstOptgroup) {
            select.insertBefore(optgroup, firstOptgroup);
        } else {
            select.appendChild(optgroup);
        }
    }
}

function handleCustomDropdown(select, otherInputId) {
    const otherInput = document.getElementById(otherInputId);
    if (select.value === '__other__') {
        otherInput.style.display = 'block';
        otherInput.focus();
    } else {
        otherInput.style.display = 'none';
        otherInput.value = '';
    }
}

function closeAddCustomKey() {
    document.getElementById('addCustomKeyPanel').classList.remove('on');
}

// Track code series data for each vehicle row in the Add Custom Key form
let customKeyVehicleCodeSeries = {};

function addCustomKeyVehicle() {
    customKeyVehicleCount++;
    const container = document.getElementById('customKeyVehicles');

    // Build code series cache if empty
    if (codeSeriesCache.length === 0) {
        buildCodeSeriesCache();
    }

    // Initialize code series array for this vehicle row
    customKeyVehicleCodeSeries[customKeyVehicleCount] = [];

    // Get all makes from DB for dropdown
    const makes = new Set();
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make) makes.add(v.make);
        });
    });
    const makesOptions = Array.from(makes).sort().map(m => '<option value="' + m + '">' + m + '</option>').join('');

    const currentYear = new Date().getFullYear();

    const html = '<div class="custom-vehicle-row" id="customVehicle' + customKeyVehicleCount + '">' +
        '<div class="custom-vehicle-row-header">' +
            '<span class="custom-vehicle-row-title">Vehicle #' + customKeyVehicleCount + '</span>' +
            '<button class="custom-vehicle-remove" onclick="removeCustomKeyVehicle(' + customKeyVehicleCount + ')"></button>' +
        '</div>' +
        '<div class="custom-vehicle-fields">' +
            '<select id="customVehicleMake' + customKeyVehicleCount + '" onchange="updateCustomVehicleModels(' + customKeyVehicleCount + ')">' +
                '<option value="">Make</option>' +
                makesOptions +
                '<option value="__other__">+ Other</option>' +
            '</select>' +
            '<select id="customVehicleModel' + customKeyVehicleCount + '" onchange="handleCustomModelChange(' + customKeyVehicleCount + ')">' +
                '<option value="">Model (select make first)</option>' +
            '</select>' +
            '<input type="text" id="customVehicleModelOther' + customKeyVehicleCount + '" placeholder="Enter model name" style="display:none;">' +
            '<div class="custom-vehicle-years">' +
                '<input type="number" id="customVehicleStart' + customKeyVehicleCount + '" placeholder="Start Year" value="' + currentYear + '">' +
                '<input type="number" id="customVehicleEnd' + customKeyVehicleCount + '" placeholder="End Year" value="' + currentYear + '">' +
            '</div>' +
            '<div style="margin-top:8px;border-top:1px solid var(--border);padding-top:8px;">' +
                '<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">' +
                    '<span style="font-size:11px;color:var(--dim);">Code Series (optional)</span>' +
                    '<button onclick="addCustomKeyCodeSeriesEntry(' + customKeyVehicleCount + ')" style="padding:4px 10px;background:var(--accent2);color:white;border:none;border-radius:4px;cursor:pointer;font-size:11px;">+ Add Code Series</button>' +
                '</div>' +
                '<div id="customVehicleCodeSeriesList' + customKeyVehicleCount + '"></div>' +
            '</div>' +
        '</div>' +
    '</div>';

    container.insertAdjacentHTML('beforeend', html);
    renderCustomKeyCodeSeriesList(customKeyVehicleCount);
}

function renderCustomKeyCodeSeriesList(vehicleNum) {
    const container = document.getElementById('customVehicleCodeSeriesList' + vehicleNum);
    if (!container) return;

    const entries = customKeyVehicleCodeSeries[vehicleNum] || [];
    const codeSeriesOptions = codeSeriesCache.map(cs => '<option value="' + cs + '">' + cs + '</option>').join('');

    if (entries.length === 0) {
        container.innerHTML = '<div style="color:var(--dim);font-size:11px;text-align:center;padding:8px;">No code series added</div>';
        return;
    }

    container.innerHTML = entries.map(function(cs, j) {
        var parsed = parseCodeSeriesYears(cs.years);
        var prefix = 'customVehCS' + vehicleNum + '_' + j;
        var onYearChange = 'onchange="updateCustomKeyCSYearFields(' + vehicleNum + ', ' + j + ')"';
        return '<div style="background:var(--bg);border:1px solid var(--border);border-radius:6px;padding:8px;margin-bottom:6px;">' +
            '<div style="display:grid;grid-template-columns:auto 1fr auto auto 1fr;gap:3px;align-items:center;margin-bottom:6px;">' +
                '<select id="' + prefix + 'SM" ' + onYearChange + ' style="padding:4px 2px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;">' + monthSelectOptions(parsed.startMonth || '') + '</select>' +
                '<input type="number" id="' + prefix + 'SY" value="' + (parsed.startYear || '') + '" placeholder="Year" ' + onYearChange + ' style="width:100%;padding:4px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;box-sizing:border-box;">' +
                '<span style="color:var(--dim);font-size:10px;padding:0 2px;">to</span>' +
                '<select id="' + prefix + 'EM" ' + onYearChange + ' style="padding:4px 2px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;">' + monthSelectOptions(parsed.endMonth || '') + '</select>' +
                '<input type="number" id="' + prefix + 'EY" value="' + (parsed.endYear || '') + '" placeholder="Year" ' + onYearChange + ' style="width:100%;padding:4px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;box-sizing:border-box;">' +
            '</div>' +
            '<div style="display:grid;grid-template-columns:1fr auto;gap:6px;align-items:center;">' +
                '<select onchange="onCustomKeyCodeSeriesEntryChange(' + vehicleNum + ', ' + j + ', this.value)"' +
                    ' style="padding:6px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:12px;"' +
                    ' id="customVehCodeSeriesEntry' + vehicleNum + '_' + j + '">' +
                    '<option value="">Select Series...</option>' +
                    codeSeriesOptions +
                    '<option value="__add_new__">+ Add New...</option>' +
                '</select>' +
                '<button onclick="removeCustomKeyCodeSeriesEntry(' + vehicleNum + ', ' + j + ')"' +
                    ' style="padding:4px 8px;background:var(--danger);color:white;border:none;border-radius:4px;cursor:pointer;font-size:11px;"></button>' +
            '</div>' +
        '</div>';
    }).join('');

    // Set selected values after rendering
    entries.forEach(function(cs, j) {
        var csSelect = document.getElementById('customVehCodeSeriesEntry' + vehicleNum + '_' + j);
        if (csSelect && cs.series) {
            if (!codeSeriesCache.includes(cs.series)) {
                var opt = document.createElement('option');
                opt.value = cs.series;
                opt.text = cs.series;
                csSelect.insertBefore(opt, csSelect.lastElementChild);
            }
            csSelect.value = cs.series;
        }
    });
}

function updateCustomKeyCSYearFields(vehicleNum, csIdx) {
    var prefix = 'customVehCS' + vehicleNum + '_' + csIdx;
    var sm = parseInt(document.getElementById(prefix + 'SM')?.value) || 0;
    var sy = document.getElementById(prefix + 'SY')?.value || '';
    var em = parseInt(document.getElementById(prefix + 'EM')?.value) || 0;
    var ey = document.getElementById(prefix + 'EY')?.value || '';
    if (customKeyVehicleCodeSeries[vehicleNum] && customKeyVehicleCodeSeries[vehicleNum][csIdx]) {
        customKeyVehicleCodeSeries[vehicleNum][csIdx].years = buildCodeSeriesYears(sm, sy, em, ey);
    }
}

function addCustomKeyCodeSeriesEntry(vehicleNum) {
    if (!customKeyVehicleCodeSeries[vehicleNum]) {
        customKeyVehicleCodeSeries[vehicleNum] = [];
    }
    var startYear = document.getElementById('customVehicleStart' + vehicleNum)?.value || new Date().getFullYear();
    var endYear = document.getElementById('customVehicleEnd' + vehicleNum)?.value || new Date().getFullYear();
    customKeyVehicleCodeSeries[vehicleNum].push({ years: startYear + '-' + endYear, series: '' });
    renderCustomKeyCodeSeriesList(vehicleNum);
}

function removeCustomKeyCodeSeriesEntry(vehicleNum, csIdx) {
    if (customKeyVehicleCodeSeries[vehicleNum]) {
        customKeyVehicleCodeSeries[vehicleNum].splice(csIdx, 1);
    }
    renderCustomKeyCodeSeriesList(vehicleNum);
}

function onCustomKeyCodeSeriesEntryChange(vehicleNum, csIdx, value) {
    if (!customKeyVehicleCodeSeries[vehicleNum]) return;
    if (value === '__add_new__') {
        var newCodeSeries = prompt('Enter new code series (e.g., 1001-4096):');
        if (newCodeSeries && newCodeSeries.trim()) {
            var cs = newCodeSeries.trim();
            if (!codeSeriesCache.includes(cs)) {
                codeSeriesCache.push(cs);
                codeSeriesCache.sort();
            }
            customKeyVehicleCodeSeries[vehicleNum][csIdx].series = cs;
            renderCustomKeyCodeSeriesList(vehicleNum);
        } else {
            renderCustomKeyCodeSeriesList(vehicleNum);
        }
    } else {
        customKeyVehicleCodeSeries[vehicleNum][csIdx].series = value || '';
    }
}

function removeCustomKeyVehicle(num) {
    const el = document.getElementById('customVehicle' + num);
    if (el) el.remove();
    delete customKeyVehicleCodeSeries[num];
}

function updateCustomVehicleModels(num) {
    const makeSelect = document.getElementById('customVehicleMake' + num);
    const modelSelect = document.getElementById('customVehicleModel' + num);
    const modelOther = document.getElementById('customVehicleModelOther' + num);
    const make = makeSelect.value;

    // Hide the other input by default
    modelOther.style.display = 'none';
    modelOther.value = '';

    if (make === '__other__') {
        const newMake = prompt('Enter make name:');
        if (newMake) {
            // Add new option and select it
            const opt = document.createElement('option');
            opt.value = newMake;
            opt.textContent = newMake;
            makeSelect.insertBefore(opt, makeSelect.lastElementChild);
            makeSelect.value = newMake;
            // Populate models for this new make (will be empty, so just show Other option)
            populateModelDropdown(modelSelect, newMake);
        } else {
            makeSelect.value = '';
            modelSelect.innerHTML = '<option value="">Model (select make first)</option>';
        }
    } else if (make) {
        // Populate models dropdown for the selected make
        populateModelDropdown(modelSelect, make);
    } else {
        modelSelect.innerHTML = '<option value="">Model (select make first)</option>';
    }
}

function populateModelDropdown(modelSelect, make) {
    // Get all models for this make from DB
    const models = new Set();
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make === make && v.model) {
                models.add(v.model);
            }
        });
    });

    const sortedModels = Array.from(models).sort();

    // Build options
    let html = '<option value="">Select model...</option>';
    sortedModels.forEach(model => {
        html += '<option value="' + model.replace(/"/g, '&quot;') + '">' + model + '</option>';
    });
    html += '<option value="__other__">+ Other (new model)</option>';

    modelSelect.innerHTML = html;
}

function handleCustomModelChange(num) {
    const modelSelect = document.getElementById('customVehicleModel' + num);
    const modelOther = document.getElementById('customVehicleModelOther' + num);

    if (modelSelect.value === '__other__') {
        // Show the text input for custom model
        modelOther.style.display = '';
        modelOther.focus();
    } else {
        // Hide the text input
        modelOther.style.display = 'none';
        modelOther.value = '';
    }
}

function saveCustomKey() {
    const pn = document.getElementById('customKeyPN').value.trim();
    
    if (!pn) {
        toast('Please enter a Part Number');
        return;
    }
    
    // Check if PN already exists
    const exists = DB.some(k => String(k.pn).toLowerCase() === pn.toLowerCase());
    if (exists) {
        toast('Part number already exists in database');
        return;
    }
    
    // Get values, handling "Other" options
    const keyway = getDropdownValue('customKeyKeyway', 'customKeyKeywayOther');
    const chip = getDropdownValue('customKeyChip', 'customKeyChipOther');
    const keyType = getDropdownValue('customKeyType', 'customKeyTypeOther');
    const buttons = getDropdownValue('customKeyButtons', 'customKeyButtonsOther');
    const frequency = getDropdownValue('customKeyFreq', 'customKeyFreqOther');
    
    // Gather vehicle data
    const vehicles = [];
    document.querySelectorAll('.custom-vehicle-row').forEach(row => {
        const num = row.id.replace('customVehicle', '');
        if (!num || isNaN(num)) return;

        const make = document.getElementById('customVehicleMake' + num)?.value;
        const modelSelect = document.getElementById('customVehicleModel' + num)?.value;
        const modelOther = document.getElementById('customVehicleModelOther' + num)?.value?.trim();
        // Use the "Other" text input if selected, otherwise use dropdown value
        const model = (modelSelect === '__other__' ? modelOther : modelSelect)?.trim();
        const startYear = parseInt(document.getElementById('customVehicleStart' + num)?.value) || new Date().getFullYear();
        const endYear = parseInt(document.getElementById('customVehicleEnd' + num)?.value) || startYear;

        // Gather multiple code series entries for this vehicle
        const csEntries = (customKeyVehicleCodeSeries[num] || []).filter(cs => cs.series && cs.series.trim());
        const codeSeries = csEntries.length > 0 ? csEntries : [];

        if (make && make !== '__other__') {
            vehicles.push({
                make: make,
                model: model || 'Unknown',
                startYear: startYear,
                endYear: endYear,
                codeSeries: codeSeries.length > 0 ? codeSeries : null
            });
        }
    });

    // Check for duplicate vehicle applications across existing keys
    const duplicateVehicles = [];
    vehicles.forEach(newVeh => {
        DB.forEach(existingKey => {
            (existingKey.vehicles || []).forEach(existingVeh => {
                if (existingVeh.make === newVeh.make && existingVeh.model === newVeh.model) {
                    // Check if year ranges overlap
                    const newStart = newVeh.startYear;
                    const newEnd = newVeh.endYear;
                    const exStart = parseInt(existingVeh.startYear) || 0;
                    const exEnd = parseInt(existingVeh.endYear) || exStart;
                    if (newStart <= exEnd && newEnd >= exStart) {
                        duplicateVehicles.push({
                            vehicle: `${newVeh.make} ${newVeh.model} ${formatYearRange(newVeh)}`,
                            existingPN: existingKey.pn
                        });
                    }
                }
            });
        });
    });

    if (duplicateVehicles.length > 0) {
        const dupeList = [...new Set(duplicateVehicles.map(d => `${d.vehicle} (already on PN ${d.existingPN})`))].join('\n ');
        if (!confirm(`Warning: The following vehicle applications already exist on other keys:\n\n ${dupeList}\n\nAre you sure you want to add this key?`)) {
            return;
        }
    }

    // Determine if this is a VATS key based on keyType
    const isVATS = keyType && (keyType === 'VATS' || keyType.startsWith('VATS '));

    // Create the new key object
    const newKey = {
        pn: pn,
        fccid: document.getElementById('customKeyFCC').value.trim() || null,
        keyway: keyway || null,
        chip: chip || null,
        keyType: keyType || null,
        buttons: buttons || null,
        frequency: frequency || null,
        notes: document.getElementById('customKeyNotes').value.trim() || null,
        vehicles: vehicles,
        isCustom: true,
        addedDate: new Date().toISOString(),
        isVATS: isVATS
    };

    // Add to DB array
    DB.push(newKey);

    // Save to custom keys storage
    customKeys.push(newKey);
    saveCustomKeys();

    // Also save vehicle entries to lishiVehicleData for Vehicle search page
    vehicles.forEach(v => {
        const groupKey = `${v.make}|${v.model}|${v.startYear}|${v.endYear}`;
        if (!lishiVehicleData[groupKey]) {
            lishiVehicleData[groupKey] = { direction: null, confirmCount: 0, lastConfirmed: null, lastConfirmedBy: null, notes: '' };
        }
        // If code series was provided, add all entries
        if (v.codeSeries && Array.isArray(v.codeSeries) && v.codeSeries.length > 0) {
            if (!lishiVehicleData[groupKey].codeSeries) {
                lishiVehicleData[groupKey].codeSeries = [];
            }
            v.codeSeries.forEach(csEntry => {
                if (csEntry.series) {
                    const exists = lishiVehicleData[groupKey].codeSeries.some(cs => cs.series === csEntry.series && cs.years === csEntry.years);
                    if (!exists) {
                        lishiVehicleData[groupKey].codeSeries.push({ years: csEntry.years || `${v.startYear}-${v.endYear}`, series: csEntry.series });
                    }
                }
            });
        }
    });
    saveLishiVehicle();

    // Refresh filters to include new data
    buildFilters();
    applyFilters();
    
    // Close panel and show success
    closeAddCustomKey();
    toast('Key added to database');
    
    // Open the add inventory and pre-select this key's FID if it has one
    setTimeout(() => {
        const newKey = DB[DB.length - 1];
        if (newKey && newKey.fccid) {
            // Find the FID for this key's FCC ID
            const fccIds = newKey.fccid.split(',').map(s => s.trim());
            let fid = null;
            for (const fcc of fccIds) {
                for (const [fccKey, assignedFid] of Object.entries(fidAssignments || {})) {
                    const parts = fccKey.split(',').map(s => s.trim());
                    if (parts.includes(fcc)) { fid = assignedFid; break; }
                }
                if (fid) break;
            }
            if (fid) {
                bulkSelectFID(fid);
            } else {
                toast('Key added. Assign an FID to search for it in inventory.');
            }
        }
    }, 100);
}

function getDropdownValue(selectId, otherInputId) {
    const select = document.getElementById(selectId);
    if (select.value === '__other__') {
        return document.getElementById(otherInputId).value.trim();
    }
    return select.value;
}

function saveCustomKeys() {
    saveToIndexedDB('customKeys', customKeys);
    triggerAutoSync();
}

// Render custom keys list in settings
function renderCustomKeysList() {
    const container = document.getElementById('customKeysList');
    
    if (customKeys.length === 0) {
        container.innerHTML = '<div style="color:var(--dim);font-size:13px;padding:12px;text-align:center;">No custom keys added yet</div>';
        return;
    }
    
    container.innerHTML = customKeys.map((key, idx) => {
        const pnStr = String(key.pn || 'Unknown');
        const vehicles = (key.vehicles || []).slice(0, 2).map(v => v.make + ' ' + v.model).join(', ');
        return '<div class="custom-key-item" onclick="openEditCustomKeyModal(' + idx + ')">' +
            '<div class="custom-key-item-pn">' + pnStr + '</div>' +
            '<div class="custom-key-item-details">' +
                (key.keyway ? key.keyway + '  ' : '') +
                (key.chip ? key.chip : 'No chip') +
            '</div>' +
            '<div class="custom-key-item-vehicles">' + (vehicles || 'No vehicles') + '</div>' +
        '</div>';
    }).join('');
}

let editingCustomKeyIndex = null;

function openEditCustomKeyModal(idx) {
    editingCustomKeyIndex = idx;
    const key = customKeys[idx];

    // Reset PN field to locked state
    const pnInput = document.getElementById('editCustomKeyPN');
    pnInput.value = key.pn || '';
    pnInput.disabled = true;
    pnInput.style.opacity = '0.7';
    document.getElementById('editCustomKeyPNWarning').style.display = 'none';
    document.getElementById('editCustomKeyPNUnlockBtn').textContent = '\uD83D\uDD12 Edit PN';
    document.getElementById('editCustomKeyPNUnlockBtn').style.color = 'var(--accent)';

    document.getElementById('editCustomKeyFCC').value = key.fccid || '';
    document.getElementById('editCustomKeyKeyway').value = key.keyway || '';
    document.getElementById('editCustomKeyChip').value = key.chip || '';
    document.getElementById('editCustomKeyType').value = key.keyType || '';
    document.getElementById('editCustomKeyButtons').value = key.buttons || '';
    document.getElementById('editCustomKeyFrequency').value = key.frequency || '';
    document.getElementById('editCustomKeyNotes').value = key.notes || '';

    // VATS fields
    document.getElementById('editCustomKeyIsVATS').checked = key.isVATS || false;
    document.getElementById('editCustomKeySecondaryPN').value = key.secondaryKeyPartNumber || '';
    toggleVATSFields();

    document.getElementById('editCustomKeyModal').classList.add('on');
}

function unlockEditCustomKeyPN() {
    const pnInput = document.getElementById('editCustomKeyPN');
    if (!pnInput.disabled) {
        // Already unlocked  re-lock it
        pnInput.disabled = true;
        pnInput.style.opacity = '0.7';
        document.getElementById('editCustomKeyPNWarning').style.display = 'none';
        document.getElementById('editCustomKeyPNUnlockBtn').textContent = '\uD83D\uDD12 Edit PN';
        document.getElementById('editCustomKeyPNUnlockBtn').style.color = 'var(--accent)';
        return;
    }
    const currentPN = pnInput.value.trim();
    const confirmed = confirm(
        ` Edit Part Number  Read Before Continuing\n\n` +
        `You are about to change the part number "${currentPN}".\n\n` +
        `This will:\n` +
        ` Rename the key in the database\n` +
        ` Migrate existing stock to the new part number\n` +
        ` Update the in-memory DB entry\n\n` +
        `This CANNOT be automatically undone. Are you sure you want to continue?`
    );
    if (!confirmed) return;
    pnInput.disabled = false;
    pnInput.style.opacity = '1';
    pnInput.focus();
    pnInput.select();
    document.getElementById('editCustomKeyPNWarning').style.display = 'block';
    document.getElementById('editCustomKeyPNUnlockBtn').textContent = '\uD83D\uDD13 Lock PN';
    document.getElementById('editCustomKeyPNUnlockBtn').style.color = 'orange';
}

function unlockEditKeyInfoPN() {
    const pnInput = document.getElementById('editKeyInfoPN');
    const btn = document.getElementById('editKeyInfoPNUnlockBtn');
    if (!pnInput.disabled) {
        // Re-lock
        pnInput.disabled = true;
        pnInput.style.opacity = '0.7';
        document.getElementById('editKeyInfoPNWarning').style.display = 'none';
        btn.textContent = '\uD83D\uDD12 Edit PN';
        btn.style.color = 'var(--accent)';
        return;
    }
    const currentPN = pnInput.value.trim();
    const confirmed = confirm(
        `\u26A0\uFE0F Edit Part Number \u2014 Read Before Continuing\n\n` +
        `You are about to change the part number "${currentPN}".\n\n` +
        `This will:\n` +
        `\u2022 Rename the key in the database\n` +
        `\u2022 Migrate existing stock to the new part number\n` +
        `\u2022 Update the in-memory DB entry\n\n` +
        `This CANNOT be automatically undone. Are you sure you want to continue?`
    );
    if (!confirmed) return;
    pnInput.disabled = false;
    pnInput.style.opacity = '1';
    pnInput.focus();
    pnInput.select();
    document.getElementById('editKeyInfoPNWarning').style.display = 'block';
    btn.textContent = '\uD83D\uDD13 Lock PN';
    btn.style.color = 'orange';
}

function toggleVATSFields() {
    const isVATS = document.getElementById('editCustomKeyIsVATS').checked;
    const vatsSection = document.getElementById('editCustomKeyVATSSection');
    vatsSection.style.display = isVATS ? 'block' : 'none';
}

function closeEditCustomKeyModal() {
    document.getElementById('editCustomKeyModal').classList.remove('on');
    editingCustomKeyIndex = null;
}

function saveEditCustomKey() {
    if (editingCustomKeyIndex === null) return;

    const key = customKeys[editingCustomKeyIndex];
    const oldPn = String(key.pn);
    const pnInput = document.getElementById('editCustomKeyPN');
    const newPn = pnInput.value.trim();

    // Validate new PN if it was changed
    const pnChanged = !pnInput.disabled && newPn && newPn !== oldPn;
    if (pnChanged) {
        if (!newPn) {
            toast('Part number cannot be empty');
            return;
        }
        // Check for collision with an existing different key
        const collision = DB.find(k => String(k.pn).toLowerCase() === newPn.toLowerCase() && String(k.pn) !== oldPn);
        if (collision) {
            toast(`Part number "${newPn}" already exists in the database`);
            return;
        }
        // Second confirmation at save time
        const saveConfirmed = confirm(
            ` Confirm Part Number Change\n\n` +
            `Old: ${oldPn}\n` +
            `New: ${newPn}\n\n` +
            `Save this change?`
        );
        if (!saveConfirmed) return;
    }

    // Apply PN change if needed
    if (pnChanged) {
        key.pn = newPn;
        // Migrate stock from old PN to new PN
        if (stockData[oldPn] !== undefined) {
            stockData[newPn] = stockData[oldPn];
            delete stockData[oldPn];
            saveStock();
        }
        // Migrate keyInfoOverrides if any
        if (keyInfoOverrides[oldPn] !== undefined) {
            keyInfoOverrides[newPn] = keyInfoOverrides[oldPn];
            delete keyInfoOverrides[oldPn];
            saveKeyInfoOverrides();
        }
    }

    // Update all other fields
    key.fccid = document.getElementById('editCustomKeyFCC').value.trim() || null;
    key.keyway = document.getElementById('editCustomKeyKeyway').value.trim() || null;
    key.chip = document.getElementById('editCustomKeyChip').value.trim() || null;
    key.keyType = document.getElementById('editCustomKeyType').value.trim() || null;
    key.buttons = document.getElementById('editCustomKeyButtons').value.trim() || null;
    key.frequency = document.getElementById('editCustomKeyFrequency').value.trim() || null;
    key.notes = document.getElementById('editCustomKeyNotes').value.trim() || null;

    // VATS fields
    key.isVATS = document.getElementById('editCustomKeyIsVATS').checked;
    key.secondaryKeyPartNumber = key.isVATS ? (document.getElementById('editCustomKeySecondaryPN').value.trim() || null) : null;

    // Update in DB array (search by old PN since key.pn was already updated above)
    const searchPn = pnChanged ? oldPn : newPn || oldPn;
    const dbIndex = DB.findIndex(k => String(k.pn) === searchPn && k.isCustom);
    if (dbIndex >= 0) {
        DB[dbIndex] = { ...key };
    }

    saveCustomKeys();
    renderCustomKeysList();
    buildFilters();
    applyFilters();
    closeEditCustomKeyModal();

    if (pnChanged) {
        toast(`Part number changed: ${oldPn} \u2192 ${newPn}`);
    } else {
        toast('Custom key updated');
    }
}

function deleteCustomKey() {
    if (editingCustomKeyIndex === null) return;
    
    const key = customKeys[editingCustomKeyIndex];
    const pn = key.pn;
    
    // Remove from customKeys
    customKeys.splice(editingCustomKeyIndex, 1);
    
    // Remove from DB
    const dbIndex = DB.findIndex(k => String(k.pn) === String(pn) && k.isCustom);
    if (dbIndex >= 0) {
        DB.splice(dbIndex, 1);
    }
    
    // Remove stock data for this key
    delete stockData[pn];
    saveStock();
    
    saveCustomKeys();
    renderCustomKeysList();
    buildFilters();
    applyFilters();
    closeEditCustomKeyModal();
    toast('Custom key deleted');
}

async function loadCustomKeys() {
    try {
        const saved = await loadFromIndexedDB('customKeys');
        if (saved && Array.isArray(saved)) {
            customKeys = saved;
            // Add custom keys to DB
            customKeys.forEach(key => {
                // Check if not already in DB
                const exists = DB.some(k => String(k.pn).toLowerCase() === String(key.pn).toLowerCase());
                if (!exists) {
                    DB.push(key);
                }
            });
        }
    } catch (e) {
        console.error('Error loading custom keys:', e);
    }
}

// ===================== CUSTOM VEHICLES =====================
async function loadCustomVehicles() {
    try {
        const saved = await loadFromIndexedDB('customVehicles');
        if (saved && Array.isArray(saved)) {
            customVehicles = saved;
        }
    } catch (e) {
        console.error('Error loading custom vehicles:', e);
    }
}

function saveCustomVehicles() {
    saveToIndexedDB('customVehicles', customVehicles);
    triggerAutoSync();
}

// ===================== KEY RELATIONSHIPS =====================
// Load key and FCC relationships from IndexedDB
async function loadKeyRelationships() {
    try {
        const savedKeyRel = await loadFromIndexedDB('keyRelationships');
        if (savedKeyRel && typeof savedKeyRel === 'object') {
            keyRelationships = savedKeyRel;
        }
        const savedFccRel = await loadFromIndexedDB('fccRelationships');
        if (savedFccRel && typeof savedFccRel === 'object') {
            fccRelationships = savedFccRel;
        }
    } catch (e) {
        console.error('Error loading key relationships:', e);
    }
}

// Save key relationships to IndexedDB
function saveKeyRelationships() {
    saveToIndexedDB('keyRelationships', keyRelationships);
    saveToIndexedDB('fccRelationships', fccRelationships);
    triggerAutoSync();
}

// Build relationships from existing data in DB, customKeys, and customVehicles
function buildRelationshipsFromExistingData() {
    // Build from main DB (key inventory)
    DB.forEach(key => {
        // Key blank relationships
        if (key.pn && (key.keyway || key.chip)) {
            updateKeyRelationship(key.pn, key.keyway, key.chip);
        }
        // FCC ID relationships
        if (key.fccid && (key.buttons || key.frequency)) {
            updateFccRelationship(key.fccid, key.buttons, key.frequency, key.buttonFunctions);
        }
    });

    // Build from custom keys
    customKeys.forEach(key => {
        if (key.pn && (key.keyway || key.chip)) {
            updateKeyRelationship(key.pn, key.keyway, key.chip);
        }
        if (key.fccid && (key.buttons || key.frequency)) {
            updateFccRelationship(key.fccid, key.buttons, key.frequency, key.buttonFunctions);
        }
    });

    // Build from custom vehicles
    customVehicles.forEach(vehicle => {
        if (vehicle.keyBlank && (vehicle.keyway || vehicle.chip)) {
            updateKeyRelationship(vehicle.keyBlank, vehicle.keyway, vehicle.chip);
        }
        if (vehicle.fccid && (vehicle.buttons || vehicle.frequency)) {
            updateFccRelationship(vehicle.fccid, vehicle.buttons, vehicle.frequency, vehicle.buttonFunctions);
        }
    });

    // Save the built relationships
    saveKeyRelationships();
}

// Update or create a key blank relationship
function updateKeyRelationship(keyBlank, keyway, chip) {
    if (!keyBlank) return;

    if (!keyRelationships[keyBlank]) {
        keyRelationships[keyBlank] = {};
    }

    // Only update if we have new data (don't overwrite with empty)
    if (keyway && !keyRelationships[keyBlank].keyway) {
        keyRelationships[keyBlank].keyway = keyway;
    }
    if (chip && !keyRelationships[keyBlank].typicalChip) {
        keyRelationships[keyBlank].typicalChip = chip;
    }
}

// Update or create an FCC ID relationship
function updateFccRelationship(fccId, buttonCount, frequency, buttonFunctions) {
    if (!fccId) return;

    if (!fccRelationships[fccId]) {
        fccRelationships[fccId] = {};
    }

    // Only update if we have new data (don't overwrite with empty)
    if (buttonCount && !fccRelationships[fccId].buttonCount) {
        fccRelationships[fccId].buttonCount = buttonCount;
    }
    if (frequency && !fccRelationships[fccId].frequency) {
        fccRelationships[fccId].frequency = frequency;
    }
    if (buttonFunctions && buttonFunctions.length > 0 && (!fccRelationships[fccId].buttonFunctions || fccRelationships[fccId].buttonFunctions.length === 0)) {
        fccRelationships[fccId].buttonFunctions = Array.isArray(buttonFunctions) ? buttonFunctions : [buttonFunctions];
    }
}

// Get key relationship data for auto-population
function getKeyRelationshipData(keyBlank) {
    // First check our stored relationships
    if (keyRelationships[keyBlank]) {
        return keyRelationships[keyBlank];
    }

    // Fallback to searching the database
    const foundKey = DB.find(k => k.pn === keyBlank) || customKeys.find(k => k.pn === keyBlank);
    if (foundKey) {
        return {
            keyway: foundKey.keyway,
            typicalChip: foundKey.chip
        };
    }

    return null;
}

// Get FCC relationship data for auto-population
function getFccRelationshipData(fccId) {
    // First check our stored relationships
    if (fccRelationships[fccId]) {
        return fccRelationships[fccId];
    }

    // Fallback to searching the database
    const foundKey = DB.find(k => k.fccid === fccId) || customKeys.find(k => k.fccid === fccId);
    if (foundKey) {
        return {
            buttonCount: foundKey.buttons,
            frequency: foundKey.frequency,
            buttonFunctions: foundKey.buttonFunctions
        };
    }

    return null;
}

function getIncompleteVehicleCount() {
    return customVehicles.filter(v => v.dataStatus === 'partial').length;
}

function updateIncompleteVehiclesBadge() {
    const count = getIncompleteVehicleCount();
    const badge = document.getElementById('incompleteVehiclesBadge');
    if (badge) {
        badge.textContent = count;
        badge.style.display = count > 0 ? 'inline' : 'none';
    }
}

function findSimilarVehicles(make, model, year) {
    // Find vehicles with same make/model but different years
    const similar = [];

    // Check in DB (key-based vehicles)
    const vehicleMap = {};
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make === make && v.model === model) {
                const vKey = `${v.startYear}-${v.endYear}`;
                if (!vehicleMap[vKey]) {
                    vehicleMap[vKey] = {
                        make: v.make,
                        model: v.model,
                        startYear: v.startYear,
                        endYear: v.endYear || v.startYear,
                        source: 'db',
                        keyData: key // Reference to a key with this vehicle's data
                    };
                }
            }
        });
    });

    // Check in custom vehicles
    customVehicles.forEach(v => {
        if (v.make === make && v.model === model && v.dataStatus === 'complete') {
            const vKey = `${v.startYear}-${v.endYear}`;
            if (!vehicleMap[vKey]) {
                vehicleMap[vKey] = {
                    ...v,
                    source: 'custom'
                };
            }
        }
    });

    // Filter to find different years
    Object.values(vehicleMap).forEach(v => {
        if (v.startYear !== year && v.endYear !== year) {
            similar.push(v);
        }
    });

    // Sort by year proximity
    similar.sort((a, b) => {
        const distA = Math.min(Math.abs(a.startYear - year), Math.abs(a.endYear - year));
        const distB = Math.min(Math.abs(b.startYear - year), Math.abs(b.endYear - year));
        return distA - distB;
    });

    return similar;
}

function checkVehicleExists(make, model, startYear, endYear) {
    // Check in DB
    let exists = false;
    DB.forEach(key => {
        (key.vehicles || []).forEach(v => {
            if (v.make === make && v.model === model &&
                v.startYear === startYear && (v.endYear || v.startYear) === endYear) {
                exists = true;
            }
        });
    });

    // Check in custom vehicles
    if (!exists) {
        exists = customVehicles.some(v =>
            v.make === make && v.model === model &&
            v.startYear === startYear && v.endYear === endYear
        );
    }

    return exists;
}

function createQuickVehicle(make, model, startYear, endYear, copyFrom = null) {
    const vehicle = {
        id: 'vehicle-' + Date.now(),
        make: make,
        model: model,
        startYear: parseInt(startYear),
        endYear: parseInt(endYear) || parseInt(startYear),
        dataStatus: 'partial',
        keyType: '',
        chip: '',
        buttons: '',
        fccid: '',
        frequency: '',
        keyway: '',
        notes: '',
        createdAt: new Date().toISOString()
    };

    if (copyFrom) {
        // Copy data from similar vehicle
        if (copyFrom.source === 'db' && copyFrom.keyData) {
            vehicle.keyType = copyFrom.keyData.keyType || '';
            vehicle.chip = copyFrom.keyData.chip || '';
            vehicle.buttons = copyFrom.keyData.buttons || '';
            vehicle.fccid = copyFrom.keyData.fccid || '';
            vehicle.frequency = copyFrom.keyData.frequency || '';
            vehicle.keyway = copyFrom.keyData.keyway || '';
            vehicle.dataStatus = 'complete';
        } else if (copyFrom.source === 'custom') {
            vehicle.keyType = copyFrom.keyType || '';
            vehicle.chip = copyFrom.chip || '';
            vehicle.buttons = copyFrom.buttons || '';
            vehicle.fccid = copyFrom.fccid || '';
            vehicle.frequency = copyFrom.frequency || '';
            vehicle.keyway = copyFrom.keyway || '';
            vehicle.dataStatus = 'complete';
        }
    }

    customVehicles.push(vehicle);
    saveCustomVehicles();
    return vehicle;
}

function openQuickAddVehicleModal(prefillMake = '', prefillModel = '', prefillYear = '') {
    // Populate make dropdown
    const makes = [...new Set(DB.flatMap(k => k.vehicles?.map(v => v.make) || []))].sort();
    const makeSelect = document.getElementById('quickVehicleMake');
    makeSelect.innerHTML = '<option value="">Select Make...</option>' +
        makes.map(m => `<option value="${m}" ${m === prefillMake ? 'selected' : ''}>${m}</option>`).join('') +
        '<option value="__other__">+ Add New Make</option>';

    document.getElementById('quickVehicleNewMake').style.display = prefillMake && !makes.includes(prefillMake) ? 'block' : 'none';
    document.getElementById('quickVehicleNewMake').value = prefillMake && !makes.includes(prefillMake) ? prefillMake : '';

    // Populate model dropdown based on make
    updateQuickVehicleModels(prefillMake, prefillModel);

    // Set year
    document.getElementById('quickVehicleYear').value = prefillYear || new Date().getFullYear();
    document.getElementById('quickVehicleYearEnd').value = prefillYear || new Date().getFullYear();
    document.getElementById('quickVehicleMonthStart').innerHTML = monthSelectOptions('');
    document.getElementById('quickVehicleMonthEnd').innerHTML = monthSelectOptions('');

    // Clear optional fields
    document.getElementById('quickVehicleKeyType').value = '';
    document.getElementById('quickVehicleChip').value = '';
    document.getElementById('quickVehicleButtons').value = '';
    document.getElementById('quickVehicleFccid').value = '';
    document.getElementById('quickVehicleFrequency').value = '';
    document.getElementById('quickVehicleKeyway').value = '';
    document.getElementById('quickVehicleNotes').value = '';

    // Collapse optional fields by default
    document.getElementById('quickVehicleOptionalFields').style.display = 'none';
    document.getElementById('quickVehicleOptionalToggle').textContent = '+ Show Optional Fields';

    // Clear similar vehicle suggestion
    document.getElementById('quickVehicleSimilarSuggestion').innerHTML = '';
    document.getElementById('quickVehicleSimilarSuggestion').style.display = 'none';

    document.getElementById('quickAddVehicleModal').classList.add('on');
}

function closeQuickAddVehicleModal() {
    document.getElementById('quickAddVehicleModal').classList.remove('on');
}

function updateQuickVehicleModels(make, selectedModel = '') {
    const modelSelect = document.getElementById('quickVehicleModel');

    if (!make || make === '__other__') {
        modelSelect.innerHTML = '<option value="">Select Model...</option><option value="__other__">+ Add New Model</option>';
        return;
    }

    const models = [...new Set(DB.flatMap(k =>
        (k.vehicles || []).filter(v => v.make === make).map(v => v.model)
    ))].sort();

    modelSelect.innerHTML = '<option value="">Select Model...</option>' +
        models.map(m => `<option value="${m}" ${m === selectedModel ? 'selected' : ''}>${m}</option>`).join('') +
        '<option value="__other__">+ Add New Model</option>';

    document.getElementById('quickVehicleNewModel').style.display = selectedModel && !models.includes(selectedModel) ? 'block' : 'none';
}

function onQuickVehicleMakeChange() {
    const make = document.getElementById('quickVehicleMake').value;
    document.getElementById('quickVehicleNewMake').style.display = make === '__other__' ? 'block' : 'none';
    updateQuickVehicleModels(make === '__other__' ? '' : make);
    checkForSimilarVehicles();
}

function onQuickVehicleModelChange() {
    const model = document.getElementById('quickVehicleModel').value;
    document.getElementById('quickVehicleNewModel').style.display = model === '__other__' ? 'block' : 'none';
    checkForSimilarVehicles();
}

function checkForSimilarVehicles() {
    let make = document.getElementById('quickVehicleMake').value;
    if (make === '__other__') make = document.getElementById('quickVehicleNewMake').value.trim();

    let model = document.getElementById('quickVehicleModel').value;
    if (model === '__other__') model = document.getElementById('quickVehicleNewModel').value.trim();

    const year = parseInt(document.getElementById('quickVehicleYear').value);

    const suggestionDiv = document.getElementById('quickVehicleSimilarSuggestion');

    if (!make || !model || !year) {
        suggestionDiv.style.display = 'none';
        return;
    }

    // Check if exact vehicle exists
    const yearEnd = parseInt(document.getElementById('quickVehicleYearEnd').value) || year;
    if (checkVehicleExists(make, model, year, yearEnd)) {
        suggestionDiv.innerHTML = `<div style="color:#ff9500;padding:8px;background:rgba(255,149,0,0.1);border-radius:6px;"> This exact vehicle already exists</div>`;
        suggestionDiv.style.display = 'block';
        return;
    }

    // Find similar vehicles
    const similar = findSimilarVehicles(make, model, year);

    if (similar.length > 0) {
        const closest = similar[0];
        const yearRange = formatYearRange(closest);
        suggestionDiv.innerHTML = `
            <div style="padding:12px;background:rgba(0,255,136,0.1);border-radius:8px;border:1px solid var(--success);">
                <div style="font-size:13px;color:var(--text);margin-bottom:8px;">
                     Similar vehicle found: <strong>${yearRange} ${make} ${model}</strong>
                </div>
                <button class="modal-btn primary" style="width:100%;" onclick="copyFromSimilarVehicle()">
                    Copy Key Data
                </button>
            </div>
        `;
        suggestionDiv.style.display = 'block';
        suggestionDiv.dataset.similarData = JSON.stringify(closest);
    } else {
        suggestionDiv.style.display = 'none';
    }
}

function copyFromSimilarVehicle() {
    const suggestionDiv = document.getElementById('quickVehicleSimilarSuggestion');
    const similarData = JSON.parse(suggestionDiv.dataset.similarData || '{}');

    if (similarData.source === 'db' && similarData.keyData) {
        document.getElementById('quickVehicleKeyType').value = similarData.keyData.keyType || '';
        document.getElementById('quickVehicleChip').value = similarData.keyData.chip || '';
        document.getElementById('quickVehicleButtons').value = similarData.keyData.buttons || '';
        document.getElementById('quickVehicleFccid').value = similarData.keyData.fccid || '';
        document.getElementById('quickVehicleFrequency').value = similarData.keyData.frequency || '';
        document.getElementById('quickVehicleKeyway').value = similarData.keyData.keyway || '';
    } else if (similarData.source === 'custom') {
        document.getElementById('quickVehicleKeyType').value = similarData.keyType || '';
        document.getElementById('quickVehicleChip').value = similarData.chip || '';
        document.getElementById('quickVehicleButtons').value = similarData.buttons || '';
        document.getElementById('quickVehicleFccid').value = similarData.fccid || '';
        document.getElementById('quickVehicleFrequency').value = similarData.frequency || '';
        document.getElementById('quickVehicleKeyway').value = similarData.keyway || '';
    }

    // Show optional fields since we just populated them
    document.getElementById('quickVehicleOptionalFields').style.display = 'block';
    document.getElementById('quickVehicleOptionalToggle').textContent = '- Hide Optional Fields';

    toast('Key data copied from similar vehicle');
    suggestionDiv.innerHTML = '<div style="color:var(--success);padding:8px;"> Data copied - vehicle will be saved as complete</div>';
}

function toggleQuickVehicleOptionalFields() {
    const fields = document.getElementById('quickVehicleOptionalFields');
    const toggle = document.getElementById('quickVehicleOptionalToggle');
    if (fields.style.display === 'none') {
        fields.style.display = 'block';
        toggle.textContent = '- Hide Optional Fields';
    } else {
        fields.style.display = 'none';
        toggle.textContent = '+ Show Optional Fields';
    }
}

function toggleYrfMultipleKeys() {
    const checked = document.getElementById('yrfMultipleKeys').checked;
    document.getElementById('yrfSingleKeyFields').style.display = checked ? 'none' : 'block';
    document.getElementById('yrfDualKeyFields').style.display = checked ? 'block' : 'none';
    if (checked) {
        // Auto-add one entry for each role if empty
        if (yrfIgnKeys.length === 0) addYrfDualKey('ign');
        if (yrfDoorKeys.length === 0) addYrfDualKey('door');
    }
}

function toggleQuickVehicleMultipleKeys() {
    const checked = document.getElementById('quickVehicleMultipleKeys').checked;
    document.getElementById('quickVehicleSingleKeyFields').style.display = checked ? 'none' : 'block';
    document.getElementById('quickVehicleDualKeyFields').style.display = checked ? 'block' : 'none';
    document.getElementById('quickVehicleOptionalToggle').style.display = checked ? 'none' : 'block';
}

function toggleEditVehicleMultipleKeys() {
    const checked = document.getElementById('editCustomVehicleMultipleKeys').checked;
    document.getElementById('editCustomVehicleSingleKeyFields').style.display = checked ? 'none' : 'block';
    document.getElementById('editCustomVehicleDualKeyFields').style.display = checked ? 'block' : 'none';
}

function toggleVehicleDataMultipleKeys() {
    const checked = document.getElementById('vehicleDataMultipleKeys').checked;
    document.getElementById('vehicleDataSingleKeyFields').style.display = checked ? 'none' : 'block';
    document.getElementById('vehicleDataDualKeyFields').style.display = checked ? 'block' : 'none';
    // Hide secondary key picker when using dual-key mode (it's replaced by the dual-key sections)
    document.getElementById('vehicleDataSecondaryKeyGroup').style.display = checked ? 'none' : 'block';
    // Reset diff code series when toggling off dual-key
    if (!checked) {
        document.getElementById('vehicleDataDiffCodeSeries').checked = false;
        toggleVehicleDataDiffCodeSeries();
    }
}

function toggleVehicleDataDiffCodeSeries() {
    const checked = document.getElementById('vehicleDataDiffCodeSeries').checked;
    // Hide shared code series, show per-key inputs (or vice versa)
    document.getElementById('vehicleDataSharedCodeSeriesGroup').style.display = checked ? 'none' : 'block';
    document.querySelectorAll('.vehicleDataPerKeyCodeSeries').forEach(el => {
        el.style.display = checked ? 'block' : 'none';
    });
}

function renderPerKeyCodeSeriesList(role) {
    if (codeSeriesCache.length === 0) buildCodeSeriesCache();
    const containerId = role === 'ignition' ? 'vehicleDataIgnCodeSeriesList' : 'vehicleDataDoorCodeSeriesList';
    const container = document.getElementById(containerId);
    const entries = vehicleDataPerKeyCodeSeriesEntries[role];
    const codeSeriesOptions = codeSeriesCache.map(cs => {
        const s = String(cs);
        return '<option value="' + s.replace(/"/g, '&quot;') + '">' + s + '</option>';
    }).join('');

    if (entries.length === 0) {
        container.innerHTML = '<div style="color:var(--dim);font-size:11px;text-align:center;padding:8px;">No code series. Click "+ Add Code Series" to add.</div>';
        return;
    }

    container.innerHTML = entries.map((cs, j) => {
        const parsed = parseCodeSeriesYears(cs.years);
        const prefix = `pkCS_${role}_${j}`;
        const onYC = `onchange="updatePerKeyCSYearFields('${role}', ${j})"`;
        return `
        <div style="background:var(--bg);border:1px solid var(--border);border-radius:6px;padding:8px;margin-bottom:6px;">
            <div style="display:grid;grid-template-columns:auto 1fr auto auto 1fr;gap:3px;align-items:center;margin-bottom:6px;">
                <select id="${prefix}SM" ${onYC} style="padding:4px 2px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;">${monthSelectOptions(parsed.startMonth || '')}</select>
                <input type="number" id="${prefix}SY" value="${parsed.startYear || ''}" placeholder="Year" ${onYC} style="width:100%;padding:4px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;box-sizing:border-box;">
                <span style="color:var(--dim);font-size:10px;padding:0 2px;">to</span>
                <select id="${prefix}EM" ${onYC} style="padding:4px 2px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;">${monthSelectOptions(parsed.endMonth || '')}</select>
                <input type="number" id="${prefix}EY" value="${parsed.endYear || ''}" placeholder="Year" ${onYC} style="width:100%;padding:4px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:11px;box-sizing:border-box;">
            </div>
            <div style="display:grid;grid-template-columns:1fr auto;gap:6px;align-items:center;">
                <select onchange="onPerKeyCodeSeriesEntryChange('${role}', ${j}, this.value)"
                    style="padding:8px;background:var(--card);border:1px solid var(--border);border-radius:4px;color:var(--text);font-size:12px;"
                    id="perKeyCS_${role}_${j}">
                    <option value="">Select Series...</option>
                    ${codeSeriesOptions}
                    <option value="__add_new__">+ Add New...</option>
                </select>
                <button onclick="removePerKeyCodeSeriesEntry('${role}', ${j})"
                    style="padding:6px 10px;background:var(--danger);color:white;border:none;border-radius:4px;cursor:pointer;font-size:12px;">&#10005;</button>
            </div>
        </div>
    `}).join('');

    // Set selected values
    entries.forEach((cs, j) => {
        const csSelect = document.getElementById(`perKeyCS_${role}_${j}`);
        if (csSelect && cs.series) {
            if (!codeSeriesCache.includes(cs.series)) {
                const opt = document.createElement('option');
                opt.value = cs.series;
                opt.text = cs.series;
                csSelect.insertBefore(opt, csSelect.lastElementChild);
            }
            csSelect.value = cs.series;
        }
    });
}

function addPerKeyCodeSeriesEntry(role) {
    const defaultYears = `${currentVehicleDataStartYear || new Date().getFullYear()}-${currentVehicleDataEndYear || new Date().getFullYear()}`;
    vehicleDataPerKeyCodeSeriesEntries[role].push({ years: defaultYears, series: '' });
    renderPerKeyCodeSeriesList(role);
}

function removePerKeyCodeSeriesEntry(role, idx) {
    vehicleDataPerKeyCodeSeriesEntries[role].splice(idx, 1);
    renderPerKeyCodeSeriesList(role);
}

function updatePerKeyCodeSeriesYears(role, idx, value) {
    if (vehicleDataPerKeyCodeSeriesEntries[role][idx]) {
        vehicleDataPerKeyCodeSeriesEntries[role][idx].years = value;
    }
}

function updatePerKeyCSYearFields(role, idx) {
    var prefix = 'pkCS_' + role + '_' + idx;
    var sm = parseInt(document.getElementById(prefix + 'SM')?.value) || 0;
    var sy = document.getElementById(prefix + 'SY')?.value || '';
    var em = parseInt(document.getElementById(prefix + 'EM')?.value) || 0;
    var ey = document.getElementById(prefix + 'EY')?.value || '';
    if (vehicleDataPerKeyCodeSeriesEntries[role][idx]) {
        vehicleDataPerKeyCodeSeriesEntries[role][idx].years = buildCodeSeriesYears(sm, sy, em, ey);
    }
}

function onPerKeyCodeSeriesEntryChange(role, idx, value) {
    if (value === '__add_new__') {
        const newCS = prompt('Enter new code series (e.g., 1001-4096):');
        if (newCS && newCS.trim()) {
            const cs = newCS.trim();
            if (!codeSeriesCache.includes(cs)) {
                codeSeriesCache.push(cs);
                codeSeriesCache.sort();
            }
            vehicleDataPerKeyCodeSeriesEntries[role][idx].series = cs;
            renderPerKeyCodeSeriesList(role);
        } else {
            renderPerKeyCodeSeriesList(role);
        }
    } else {
        vehicleDataPerKeyCodeSeriesEntries[role][idx].series = value || '';
    }
}

function saveQuickAddVehicle() {
    let make = document.getElementById('quickVehicleMake').value;
    if (make === '__other__') make = document.getElementById('quickVehicleNewMake').value.trim();

    let model = document.getElementById('quickVehicleModel').value;
    if (model === '__other__') model = document.getElementById('quickVehicleNewModel').value.trim();

    const startYear = parseInt(document.getElementById('quickVehicleYear').value);
    const endYear = parseInt(document.getElementById('quickVehicleYearEnd').value) || startYear;
    const startMonth = parseInt(document.getElementById('quickVehicleMonthStart').value) || 0;
    const endMonth = parseInt(document.getElementById('quickVehicleMonthEnd').value) || 0;

    if (!make || !model || !startYear) {
        toast('Please fill in Make, Model, and Year');
        return;
    }

    if (checkVehicleExists(make, model, startYear, endYear)) {
        toast('This vehicle already exists');
        return;
    }

    const isMultipleKeys = document.getElementById('quickVehicleMultipleKeys').checked;

    let vehicle;

    if (isMultipleKeys) {
        const ignKeyBlank = document.getElementById('quickVehicleIgnKeyBlank').value.trim();
        const ignChip = document.getElementById('quickVehicleIgnChip').value.trim();
        const ignKeyway = document.getElementById('quickVehicleIgnKeyway').value.trim();
        const ignFccid = document.getElementById('quickVehicleIgnFccid').value.trim();
        const ignButtons = document.getElementById('quickVehicleIgnButtons').value.trim();
        const ignFrequency = document.getElementById('quickVehicleIgnFrequency').value.trim();
        const ignCodeSeries = document.getElementById('quickVehicleIgnCodeSeries').value.trim();
        const doorKeyBlank = document.getElementById('quickVehicleDoorKeyBlank').value.trim();
        const doorChip = document.getElementById('quickVehicleDoorChip').value.trim();
        const doorKeyway = document.getElementById('quickVehicleDoorKeyway').value.trim();
        const doorFccid = document.getElementById('quickVehicleDoorFccid').value.trim();
        const doorCodeSeries = document.getElementById('quickVehicleDoorCodeSeries').value.trim();
        const notes = document.getElementById('quickVehicleDualNotes').value.trim();

        const hasData = ignChip || ignKeyway || ignKeyBlank || doorKeyway || doorKeyBlank;

        vehicle = {
            id: 'vehicle-' + Date.now(),
            make: make, model: model,
            startYear: startYear, endYear: endYear,
            startMonth: startMonth || undefined, endMonth: endMonth || undefined,
            multipleKeys: true,
            dataStatus: hasData ? 'complete' : 'partial',
            // Ignition key
            ignition_keyBlank: ignKeyBlank,
            ignition_chip: ignChip, ignition_keyway: ignKeyway, ignition_fccid: ignFccid,
            ignition_buttons: ignButtons, ignition_frequency: ignFrequency, ignition_codeSeries: ignCodeSeries,
            // Door key
            door_keyBlank: doorKeyBlank,
            door_chip: doorChip, door_keyway: doorKeyway, door_fccid: doorFccid, door_codeSeries: doorCodeSeries,
            notes: notes,
            createdAt: new Date().toISOString()
        };
    } else {
        const keyType = document.getElementById('quickVehicleKeyType').value.trim();
        const chip = document.getElementById('quickVehicleChip').value.trim();
        const buttons = document.getElementById('quickVehicleButtons').value.trim();
        const fccid = document.getElementById('quickVehicleFccid').value.trim();
        const frequency = document.getElementById('quickVehicleFrequency').value.trim();
        const keyway = document.getElementById('quickVehicleKeyway').value.trim();
        const notes = document.getElementById('quickVehicleNotes').value.trim();
        const hasOptionalData = keyType || chip || buttons || fccid || frequency || keyway;

        vehicle = {
            id: 'vehicle-' + Date.now(),
            make: make, model: model,
            startYear: startYear, endYear: endYear,
            startMonth: startMonth || undefined, endMonth: endMonth || undefined,
            multipleKeys: false,
            dataStatus: hasOptionalData ? 'complete' : 'partial',
            keyType: keyType, chip: chip, buttons: buttons,
            fccid: fccid, frequency: frequency, keyway: keyway,
            notes: notes,
            createdAt: new Date().toISOString()
        };
    }

    customVehicles.push(vehicle);
    saveCustomVehicles();

    // Add key entries to DB/customKeys for any specified key blanks
    const vehicleEntry = { make: make, model: model, startYear: startYear, endYear: endYear, startMonth: startMonth || undefined, endMonth: endMonth || undefined };
    const keyBlanksToAdd = [];

    if (isMultipleKeys) {
        if (vehicle.ignition_keyBlank) {
            keyBlanksToAdd.push({
                pn: vehicle.ignition_keyBlank,
                keyType: vehicle.keyType || null,
                keyway: vehicle.ignition_keyway || null,
                chip: vehicle.ignition_chip || null,
                fccid: vehicle.ignition_fccid || null,
                buttons: vehicle.ignition_buttons || null,
                frequency: vehicle.ignition_frequency || null
            });
        }
        if (vehicle.door_keyBlank) {
            keyBlanksToAdd.push({
                pn: vehicle.door_keyBlank,
                keyway: vehicle.door_keyway || null,
                chip: vehicle.door_chip || null,
                fccid: vehicle.door_fccid || null,
                keyType: 'Door/Trunk/GB Key'
            });
        }
    } else {
        const keyBlank = document.getElementById('quickVehicleKeyBlank')?.value?.trim();
        if (keyBlank) {
            keyBlanksToAdd.push({
                pn: keyBlank,
                keyType: vehicle.keyType || null,
                keyway: vehicle.keyway || null,
                chip: vehicle.chip || null,
                fccid: vehicle.fccid || null,
                buttons: vehicle.buttons || null,
                frequency: vehicle.frequency || null
            });
        }
    }

    keyBlanksToAdd.forEach(kb => {
        const existsInDB = DB.some(k => String(k.pn).toLowerCase() === String(kb.pn).toLowerCase());
        if (!existsInDB) {
            const newKey = {
                pn: kb.pn,
                keyType: kb.keyType || null,
                keyway: kb.keyway || null,
                chip: kb.chip || null,
                fccid: kb.fccid || null,
                buttons: kb.buttons || null,
                frequency: kb.frequency || null,
                vehicles: [vehicleEntry],
                isCustom: true,
                addedDate: new Date().toISOString()
            };
            DB.push(newKey);
            customKeys.push(newKey);
        } else {
            // Key exists - add this vehicle to its vehicles array if not already there
            const existingKey = DB.find(k => String(k.pn).toLowerCase() === String(kb.pn).toLowerCase());
            if (existingKey) {
                if (!existingKey.vehicles) existingKey.vehicles = [];
                const alreadyLinked = existingKey.vehicles.some(v =>
                    v.make === make && v.model === model && v.startYear === startYear && v.endYear === endYear
                );
                if (!alreadyLinked) {
                    existingKey.vehicles.push(vehicleEntry);
                }
            }
        }
    });

    if (keyBlanksToAdd.length > 0) {
        saveCustomKeys();
        buildFilters();
        applyFilters();
    }

    closeQuickAddVehicleModal();
    toast(`Vehicle added${vehicle.dataStatus === 'partial' ? ' (incomplete)' : ''}`);

    // Refresh any open views
    if (document.getElementById('vehicleBrowsePanel').classList.contains('on')) {
        renderVehicleMakeList();
    }
}

function openIncompleteVehiclesView() {
    const incomplete = customVehicles.filter(v => v.dataStatus === 'partial');

    let html = `
        <div style="padding:16px;">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
                <h3 style="margin:0;color:var(--text);">Incomplete Vehicles (${incomplete.length})</h3>
                <button class="modal-btn primary" onclick="openQuickAddVehicleModal()">+ Add Vehicle</button>
            </div>
    `;

    if (incomplete.length === 0) {
        html += `<div style="text-align:center;color:var(--dim);padding:40px;">No incomplete vehicles</div>`;
    } else {
        html += incomplete.map(v => {
            const yearRange = formatYearRange(v);
            return `
                <div class="vehicle-key-card" style="cursor:pointer;" onclick="openEditCustomVehicle('${v.id}')">
                    <div class="vehicle-key-info">
                        <h4>${v.make} ${v.model}</h4>
                        <p>${yearRange}</p>
                    </div>
                    <div style="display:flex;align-items:center;gap:8px;">
                        <span style="background:#ff9500;color:#fff;padding:2px 8px;border-radius:10px;font-size:11px;">Incomplete</span>
                    </div>
                </div>
            `;
        }).join('');
    }

    html += '</div>';

    document.getElementById('incompleteVehiclesContent').innerHTML = html;
    document.getElementById('incompleteVehiclesPanel').classList.add('on');
}

function closeIncompleteVehiclesPanel() {
    document.getElementById('incompleteVehiclesPanel').classList.remove('on');
}

function openEditCustomVehicle(vehicleId) {
    const vehicle = customVehicles.find(v => v.id === vehicleId);
    if (!vehicle) {
        toast('Vehicle not found');
        return;
    }

    // Populate form
    document.getElementById('editCustomVehicleId').value = vehicleId;
    document.getElementById('editCustomVehicleMake').value = vehicle.make;
    document.getElementById('editCustomVehicleModel').value = vehicle.model;
    document.getElementById('editCustomVehicleYearStart').value = vehicle.startYear;
    document.getElementById('editCustomVehicleYearEnd').value = vehicle.endYear;
    document.getElementById('editCustomVehicleMonthStart').innerHTML = monthSelectOptions(vehicle.startMonth || '');
    document.getElementById('editCustomVehicleMonthEnd').innerHTML = monthSelectOptions(vehicle.endMonth || '');
    document.getElementById('editCustomVehicleKeyType').value = vehicle.keyType || '';
    document.getElementById('editCustomVehicleChip').value = vehicle.chip || '';
    document.getElementById('editCustomVehicleButtons').value = vehicle.buttons || '';
    document.getElementById('editCustomVehicleFccid').value = vehicle.fccid || '';
    document.getElementById('editCustomVehicleFrequency').value = vehicle.frequency || '';
    document.getElementById('editCustomVehicleKeyway').value = vehicle.keyway || '';
    document.getElementById('editCustomVehicleNotes').value = vehicle.notes || '';

    // Handle multiple keys checkbox and dual-key fields
    const isMultipleKeys = vehicle.multipleKeys === true;
    document.getElementById('editCustomVehicleMultipleKeys').checked = isMultipleKeys;
    document.getElementById('editCustomVehicleSingleKeyFields').style.display = isMultipleKeys ? 'none' : 'block';
    document.getElementById('editCustomVehicleDualKeyFields').style.display = isMultipleKeys ? 'block' : 'none';

    if (isMultipleKeys) {
        document.getElementById('editCustomVehicleIgnKeyBlank').value = vehicle.ignition_keyBlank || '';
        document.getElementById('editCustomVehicleIgnChip').value = vehicle.ignition_chip || '';
        document.getElementById('editCustomVehicleIgnKeyway').value = vehicle.ignition_keyway || '';
        document.getElementById('editCustomVehicleIgnFccid').value = vehicle.ignition_fccid || '';
        document.getElementById('editCustomVehicleIgnButtons').value = vehicle.ignition_buttons || '';
        document.getElementById('editCustomVehicleIgnFrequency').value = vehicle.ignition_frequency || '';
        document.getElementById('editCustomVehicleIgnCodeSeries').value = vehicle.ignition_codeSeries || '';
        document.getElementById('editCustomVehicleDoorKeyBlank').value = vehicle.door_keyBlank || '';
        document.getElementById('editCustomVehicleDoorChip').value = vehicle.door_chip || '';
        document.getElementById('editCustomVehicleDoorKeyway').value = vehicle.door_keyway || '';
        document.getElementById('editCustomVehicleDoorFccid').value = vehicle.door_fccid || '';
        document.getElementById('editCustomVehicleDoorCodeSeries').value = vehicle.door_codeSeries || '';
    }

    // Check for similar vehicles to copy from
    const similar = findSimilarVehicles(vehicle.make, vehicle.model, vehicle.startYear);
    const suggestionDiv = document.getElementById('editCustomVehicleSimilarSuggestion');

    if (similar.length > 0 && vehicle.dataStatus === 'partial') {
        const closest = similar[0];
        const yearRange = formatYearRange(closest);
        suggestionDiv.innerHTML = `
            <div style="padding:12px;background:rgba(0,255,136,0.1);border-radius:8px;border:1px solid var(--success);margin-bottom:12px;">
                <div style="font-size:13px;color:var(--text);margin-bottom:8px;">
                     Copy data from: <strong>${yearRange} ${closest.make} ${closest.model}</strong>
                </div>
                <button class="modal-btn primary" style="width:100%;" onclick="copyFromSimilarToEdit()">
                    Copy Key Data
                </button>
            </div>
        `;
        suggestionDiv.style.display = 'block';
        suggestionDiv.dataset.similarData = JSON.stringify(closest);
    } else {
        suggestionDiv.style.display = 'none';
    }

    document.getElementById('editCustomVehicleModal').classList.add('on');
}

function closeEditCustomVehicleModal() {
    document.getElementById('editCustomVehicleModal').classList.remove('on');
}

function copyFromSimilarToEdit() {
    const suggestionDiv = document.getElementById('editCustomVehicleSimilarSuggestion');
    const similarData = JSON.parse(suggestionDiv.dataset.similarData || '{}');

    if (similarData.source === 'db' && similarData.keyData) {
        document.getElementById('editCustomVehicleKeyType').value = similarData.keyData.keyType || '';
        document.getElementById('editCustomVehicleChip').value = similarData.keyData.chip || '';
        document.getElementById('editCustomVehicleButtons').value = similarData.keyData.buttons || '';
        document.getElementById('editCustomVehicleFccid').value = similarData.keyData.fccid || '';
        document.getElementById('editCustomVehicleFrequency').value = similarData.keyData.frequency || '';
        document.getElementById('editCustomVehicleKeyway').value = similarData.keyData.keyway || '';
    } else if (similarData.source === 'custom') {
        document.getElementById('editCustomVehicleKeyType').value = similarData.keyType || '';
        document.getElementById('editCustomVehicleChip').value = similarData.chip || '';
        document.getElementById('editCustomVehicleButtons').value = similarData.buttons || '';
        document.getElementById('editCustomVehicleFccid').value = similarData.fccid || '';
        document.getElementById('editCustomVehicleFrequency').value = similarData.frequency || '';
        document.getElementById('editCustomVehicleKeyway').value = similarData.keyway || '';
    }

    toast('Key data copied');
    suggestionDiv.innerHTML = '<div style="color:var(--success);padding:8px;"> Data copied</div>';
}

function saveEditCustomVehicle() {
    const vehicleId = document.getElementById('editCustomVehicleId').value;
    const idx = customVehicles.findIndex(v => v.id === vehicleId);
    if (idx === -1) {
        toast('Vehicle not found');
        return;
    }

    const isMultipleKeys = document.getElementById('editCustomVehicleMultipleKeys').checked;
    const notes = document.getElementById('editCustomVehicleNotes').value.trim();
    const make = document.getElementById('editCustomVehicleMake').value.trim();
    const model = document.getElementById('editCustomVehicleModel').value.trim();
    const startYear = parseInt(document.getElementById('editCustomVehicleYearStart').value);
    const endYear = parseInt(document.getElementById('editCustomVehicleYearEnd').value);
    const startMonth = parseInt(document.getElementById('editCustomVehicleMonthStart').value) || 0;
    const endMonth = parseInt(document.getElementById('editCustomVehicleMonthEnd').value) || 0;

    if (isMultipleKeys) {
        const ignition_keyBlank = document.getElementById('editCustomVehicleIgnKeyBlank').value.trim();
        const ignition_chip = document.getElementById('editCustomVehicleIgnChip').value.trim();
        const ignition_keyway = document.getElementById('editCustomVehicleIgnKeyway').value.trim();
        const ignition_fccid = document.getElementById('editCustomVehicleIgnFccid').value.trim();
        const ignition_buttons = document.getElementById('editCustomVehicleIgnButtons').value.trim();
        const ignition_frequency = document.getElementById('editCustomVehicleIgnFrequency').value.trim();
        const ignition_codeSeries = document.getElementById('editCustomVehicleIgnCodeSeries').value.trim();
        const door_keyBlank = document.getElementById('editCustomVehicleDoorKeyBlank').value.trim();
        const door_chip = document.getElementById('editCustomVehicleDoorChip').value.trim();
        const door_keyway = document.getElementById('editCustomVehicleDoorKeyway').value.trim();
        const door_fccid = document.getElementById('editCustomVehicleDoorFccid').value.trim();
        const door_codeSeries = document.getElementById('editCustomVehicleDoorCodeSeries').value.trim();

        const hasData = ignition_keyBlank || ignition_chip || ignition_keyway || door_keyBlank || door_chip || door_keyway;

        customVehicles[idx] = {
            ...customVehicles[idx],
            make, model, startYear, endYear, notes,
            startMonth: startMonth || undefined, endMonth: endMonth || undefined,
            multipleKeys: true,
            keyType: '', chip: '', buttons: '', fccid: '', frequency: '', keyway: '',
            ignition_keyBlank, ignition_chip, ignition_keyway, ignition_fccid,
            ignition_buttons, ignition_frequency, ignition_codeSeries,
            door_keyBlank, door_chip, door_keyway, door_fccid, door_codeSeries,
            dataStatus: hasData ? 'complete' : 'partial',
            lastEdited: new Date().toISOString()
        };
    } else {
        const keyType = document.getElementById('editCustomVehicleKeyType').value.trim();
        const chip = document.getElementById('editCustomVehicleChip').value.trim();
        const buttons = document.getElementById('editCustomVehicleButtons').value.trim();
        const fccid = document.getElementById('editCustomVehicleFccid').value.trim();
        const frequency = document.getElementById('editCustomVehicleFrequency').value.trim();
        const keyway = document.getElementById('editCustomVehicleKeyway').value.trim();

        const hasData = keyType || chip || buttons || fccid || frequency || keyway;

        customVehicles[idx] = {
            ...customVehicles[idx],
            make, model, startYear, endYear, notes,
            startMonth: startMonth || undefined, endMonth: endMonth || undefined,
            multipleKeys: false,
            keyType, chip, buttons, fccid, frequency, keyway,
            ignition_chip: '', ignition_keyway: '', ignition_fccid: '',
            ignition_buttons: '', ignition_frequency: '', ignition_codeSeries: '',
            door_chip: '', door_keyway: '', door_fccid: '', door_codeSeries: '',
            dataStatus: hasData ? 'complete' : 'partial',
            lastEdited: new Date().toISOString()
        };
    }

    saveCustomVehicles();
    closeEditCustomVehicleModal();
    toast('Vehicle updated');

    // Refresh incomplete view if open
    if (document.getElementById('incompleteVehiclesPanel').classList.contains('on')) {
        openIncompleteVehiclesView();
    }
}

function deleteCustomVehicle() {
    const vehicleId = document.getElementById('editCustomVehicleId').value;
    if (!confirm('Delete this vehicle?')) return;

    customVehicles = customVehicles.filter(v => v.id !== vehicleId);
    saveCustomVehicles();
    closeEditCustomVehicleModal();
    toast('Vehicle deleted');

    // Refresh incomplete view if open
    if (document.getElementById('incompleteVehiclesPanel').classList.contains('on')) {
        openIncompleteVehiclesView();
    }
}

// ===================== PWA INSTALL =====================
let deferredPrompt = null;

window.addEventListener('beforeinstallprompt', (e) => {
    // Prevent the mini-infobar from appearing on mobile
    e.preventDefault();
    // Save the event so it can be triggered later
    deferredPrompt = e;
    // Show the install banner
    showInstallBanner();
});

function showInstallBanner() {
    // Don't show if already installed or dismissed recently
    const dismissed = localStorage.getItem('pwa_install_dismissed');
    if (dismissed) {
        const dismissedTime = parseInt(dismissed);
        // Don't show again for 7 days
        if (Date.now() - dismissedTime < 7 * 24 * 60 * 60 * 1000) {
            return;
        }
    }
    
    // Don't show if already installed (standalone mode)
    if (window.matchMedia('(display-mode: standalone)').matches) {
        return;
    }
    
    document.getElementById('pwaInstallBanner').classList.add('show');
}

function dismissInstallBanner() {
    document.getElementById('pwaInstallBanner').classList.remove('show');
    localStorage.setItem('pwa_install_dismissed', Date.now().toString());
}

async function installPWA() {
    if (!deferredPrompt) {
        // For iOS, show instructions
        toast('On iOS: Tap Share  Add to Home Screen');
        return;
    }
    
    // Show the install prompt
    deferredPrompt.prompt();
    
    // Wait for the user to respond to the prompt
    const { outcome } = await deferredPrompt.userChoice;
    
    if (outcome === 'accepted') {
        toast('App installed!');
    }
    
    // Clear the deferredPrompt
    deferredPrompt = null;
    dismissInstallBanner();
}

// Detect if app is installed
window.addEventListener('appinstalled', () => {
    console.log('PWA was installed');
    dismissInstallBanner();
    deferredPrompt = null;
});

// ===================== DROPDOWN DATA MANAGEMENT =====================
let editingDropdownOldValue = null;
let editingDropdownCategory = null;

function openDropdownDataPanel() {
    renderDropdownDataList();
    document.getElementById('dropdownDataPanel').classList.add('on');
}

function closeDropdownDataPanel() {
    document.getElementById('dropdownDataPanel').classList.remove('on');
}

function getDropdownCategoryLabel(cat) {
    const labels = { keyway: 'Keyway / Blade', chip: 'Chip Type', keyType: 'Key Type', frequency: 'Frequency', buttons: 'Buttons', battery: 'Battery', brand: 'Brand' };
    return labels[cat] || cat;
}

function getDropdownValuesForCategory(category) {
    const values = new Set();
    DB.forEach(key => {
        if (category === 'keyway' && key.keyway) values.add(String(key.keyway));
        else if (category === 'chip' && key.chip) values.add(String(key.chip));
        else if (category === 'keyType' && key.keyType) values.add(String(key.keyType));
        else if (category === 'frequency' && key.frequency) values.add(String(key.frequency));
        else if (category === 'buttons' && key.buttons) values.add(String(key.buttons));
        else if (category === 'battery' && key.battery) values.add(String(key.battery));
        else if (category === 'brand' && key.brand) values.add(String(key.brand));
    });
    // Include default brand options
    if (category === 'brand') {
        BRAND_OPTIONS.forEach(b => values.add(b));
    }
    // Include custom keyways (user-added keyways that persist even without keys)
    if (category === 'keyway') {
        customKeyways.forEach(kw => values.add(kw));
    }
    // Add user-custom values
    if (customDropdownValues[category]) {
        customDropdownValues[category].forEach(v => values.add(v));
    }
    return Array.from(values).sort();
}

function getAffectedKeysForValue(category, value) {
    return DB.filter(key => {
        if (category === 'keyway') return String(key.keyway || '') === value;
        if (category === 'chip') return String(key.chip || '') === value;
        if (category === 'keyType') return String(key.keyType || '') === value;
        if (category === 'frequency') return String(key.frequency || '') === value;
        if (category === 'buttons') return String(key.buttons || '') === value;
        if (category === 'battery') return String(key.battery || '') === value;
        if (category === 'brand') return String(key.brand || '') === value;
        return false;
    });
}

function getAffectedVehiclesForValue(category, value) {
    const affectedKeys = getAffectedKeysForValue(category, value);
    const vehicles = [];
    const seen = new Set();
    affectedKeys.forEach(key => {
        (key.vehicles || []).forEach(v => {
            const id = v.make + '|' + v.model + '|' + v.startYear + '-' + v.endYear;
            if (!seen.has(id)) {
                seen.add(id);
                vehicles.push({ make: v.make, model: v.model, startYear: v.startYear, endYear: v.endYear, pn: key.pn });
            }
        });
    });
    return vehicles;
}

function renderDropdownDataList() {
    const category = document.getElementById('dropdownDataCategory').value;
    const search = (document.getElementById('dropdownDataSearch').value || '').toLowerCase();
    const container = document.getElementById('dropdownDataList');
    let values = getDropdownValuesForCategory(category);

    if (search) {
        values = values.filter(v => v.toLowerCase().includes(search));
    }

    if (values.length === 0) {
        container.innerHTML = '<div style="color:var(--dim);font-size:13px;padding:12px;text-align:center;">No values found</div>';
        return;
    }

    container.innerHTML = values.map(val => {
        const affectedKeys = getAffectedKeysForValue(category, val);
        const keyCount = affectedKeys.length;
        const vehicleCount = getAffectedVehiclesForValue(category, val).length;
        const isCustomOnly = keyCount === 0 && customDropdownValues[category] && customDropdownValues[category].includes(val);
        const escapedVal = val.replace(/\\/g, '\\\\').replace(/'/g, "\\'").replace(/"/g, '&quot;');
        return '<div onclick="openEditDropdownValueModal(\'' + category + '\', \'' + escapedVal + '\')" style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:var(--card);border-radius:8px;margin-bottom:6px;cursor:pointer;border:1px solid var(--border);">' +
            '<div>' +
                '<div style="font-size:14px;color:var(--text);">' + val + '</div>' +
                '<div style="font-size:11px;color:var(--dim);margin-top:2px;">' + keyCount + ' key' + (keyCount !== 1 ? 's' : '') + (vehicleCount > 0 ? ' &middot; ' + vehicleCount + ' vehicle' + (vehicleCount !== 1 ? 's' : '') : '') + (isCustomOnly ? ' &middot; Custom' : '') + '</div>' +
            '</div>' +
            '<span style="color:var(--dim);font-size:16px;">&#8250;</span>' +
        '</div>';
    }).join('');
}

function openEditDropdownValueModal(category, value) {
    editingDropdownCategory = category;
    editingDropdownOldValue = value;
    document.getElementById('editDropdownValueTitle').textContent = 'Edit ' + getDropdownCategoryLabel(category);
    document.getElementById('editDropdownValueInput').value = value;
    previewDropdownValueChange();
    document.getElementById('editDropdownValueModal').classList.add('on');
}

function closeEditDropdownValueModal() {
    document.getElementById('editDropdownValueModal').classList.remove('on');
    editingDropdownOldValue = null;
    editingDropdownCategory = null;
}

function previewDropdownValueChange() {
    const newValue = document.getElementById('editDropdownValueInput').value.trim();
    const warningDiv = document.getElementById('editDropdownAffectedWarning');
    const listDiv = document.getElementById('editDropdownAffectedList');

    if (!editingDropdownOldValue || newValue === editingDropdownOldValue) {
        warningDiv.style.display = 'none';
        return;
    }

    const affectedVehicles = getAffectedVehiclesForValue(editingDropdownCategory, editingDropdownOldValue);
    const affectedKeys = getAffectedKeysForValue(editingDropdownCategory, editingDropdownOldValue);

    if (affectedKeys.length === 0) {
        warningDiv.style.display = 'none';
        return;
    }

    warningDiv.style.display = 'block';
    let html = '<div style="margin-bottom:6px;color:var(--dim);font-size:11px;">' + affectedKeys.length + ' key' + (affectedKeys.length !== 1 ? 's' : '') + ' will be updated:</div>';
    html += affectedKeys.slice(0, 10).map(k => '<div style="padding:3px 0;">Part #' + k.pn + '</div>').join('');
    if (affectedKeys.length > 10) html += '<div style="color:var(--dim);padding:3px 0;">...and ' + (affectedKeys.length - 10) + ' more</div>';

    if (affectedVehicles.length > 0) {
        html += '<div style="margin-top:8px;margin-bottom:4px;color:var(--warning);font-weight:600;font-size:11px;">Affected vehicles:</div>';
        html += affectedVehicles.slice(0, 15).map(v => '<div style="padding:2px 0;">' + v.make + ' ' + v.model + ' (' + formatYearRange(v) + ')</div>').join('');
        if (affectedVehicles.length > 15) html += '<div style="color:var(--dim);padding:2px 0;">...and ' + (affectedVehicles.length - 15) + ' more</div>';
    }
    listDiv.innerHTML = html;
}

function saveDropdownValueEdit() {
    const newValue = document.getElementById('editDropdownValueInput').value.trim();
    if (!newValue) { toast('Value cannot be empty'); return; }
    if (!editingDropdownCategory || !editingDropdownOldValue) return;

    if (newValue === editingDropdownOldValue) {
        closeEditDropdownValueModal();
        return;
    }

    const category = editingDropdownCategory;
    const oldValue = editingDropdownOldValue;

    // Update all keys in DB
    DB.forEach(key => {
        if (category === 'keyway' && String(key.keyway || '') === oldValue) key.keyway = newValue;
        else if (category === 'chip' && String(key.chip || '') === oldValue) key.chip = newValue;
        else if (category === 'keyType' && String(key.keyType || '') === oldValue) key.keyType = newValue;
        else if (category === 'frequency' && String(key.frequency || '') === oldValue) key.frequency = newValue;
        else if (category === 'buttons' && String(key.buttons || '') === oldValue) key.buttons = newValue;
        else if (category === 'battery' && String(key.battery || '') === oldValue) key.battery = newValue;
        else if (category === 'brand' && String(key.brand || '') === oldValue) key.brand = newValue;
    });

    // Update custom keys
    customKeys.forEach(key => {
        if (category === 'keyway' && String(key.keyway || '') === oldValue) key.keyway = newValue;
        else if (category === 'chip' && String(key.chip || '') === oldValue) key.chip = newValue;
        else if (category === 'keyType' && String(key.keyType || '') === oldValue) key.keyType = newValue;
        else if (category === 'frequency' && String(key.frequency || '') === oldValue) key.frequency = newValue;
        else if (category === 'buttons' && String(key.buttons || '') === oldValue) key.buttons = newValue;
        else if (category === 'battery' && String(key.battery || '') === oldValue) key.battery = newValue;
        else if (category === 'brand' && String(key.brand || '') === oldValue) key.brand = newValue;
    });

    // Update custom dropdown values
    if (customDropdownValues[category]) {
        const idx = customDropdownValues[category].indexOf(oldValue);
        if (idx >= 0) customDropdownValues[category][idx] = newValue;
    }

    // Update customKeyways if editing keyways
    if (category === 'keyway') {
        const kwIdx = customKeyways.indexOf(oldValue);
        if (kwIdx >= 0) customKeyways[kwIdx] = newValue;
        saveCustomKeyways();
    }

    // Persist
    saveCustomKeys();
    saveCustomDropdownValues();
    populateAdvancedFilters();
    applyFilters();

    toast('Updated "' + oldValue + '" to "' + newValue + '"');
    closeEditDropdownValueModal();
    renderDropdownDataList();
}

function deleteDropdownValue() {
    if (!editingDropdownCategory || !editingDropdownOldValue) return;
    const category = editingDropdownCategory;
    const value = editingDropdownOldValue;
    const affectedKeys = getAffectedKeysForValue(category, value);

    if (affectedKeys.length > 0) {
        const affectedVehicles = getAffectedVehiclesForValue(category, value);
        let msg = 'This will clear "' + value + '" from ' + affectedKeys.length + ' key(s).';
        if (affectedVehicles.length > 0) {
            msg += '\n\nAffected vehicles:\n' + affectedVehicles.slice(0, 10).map(v => '- ' + v.make + ' ' + v.model + ' (' + formatYearRange(v) + ')').join('\n');
            if (affectedVehicles.length > 10) msg += '\n...and ' + (affectedVehicles.length - 10) + ' more';
        }
        if (!confirm(msg + '\n\nContinue?')) return;
    }

    // Clear from all keys
    DB.forEach(key => {
        if (category === 'keyway' && String(key.keyway || '') === value) key.keyway = '';
        else if (category === 'chip' && String(key.chip || '') === value) key.chip = '';
        else if (category === 'keyType' && String(key.keyType || '') === value) key.keyType = '';
        else if (category === 'frequency' && String(key.frequency || '') === value) key.frequency = '';
        else if (category === 'buttons' && String(key.buttons || '') === value) key.buttons = '';
        else if (category === 'brand' && String(key.brand || '') === value) key.brand = '';
        else if (category === 'battery' && String(key.battery || '') === value) key.battery = '';
    });
    customKeys.forEach(key => {
        if (category === 'keyway' && String(key.keyway || '') === value) key.keyway = '';
        else if (category === 'chip' && String(key.chip || '') === value) key.chip = '';
        else if (category === 'keyType' && String(key.keyType || '') === value) key.keyType = '';
        else if (category === 'frequency' && String(key.frequency || '') === value) key.frequency = '';
        else if (category === 'buttons' && String(key.buttons || '') === value) key.buttons = '';
        else if (category === 'battery' && String(key.battery || '') === value) key.battery = '';
        else if (category === 'brand' && String(key.brand || '') === value) key.brand = '';
    });

    // Remove from custom values
    if (customDropdownValues[category]) {
        customDropdownValues[category] = customDropdownValues[category].filter(v => v !== value);
    }
    if (category === 'keyway') {
        customKeyways = customKeyways.filter(kw => kw !== value);
        saveCustomKeyways();
    }

    saveCustomKeys();
    saveCustomDropdownValues();
    populateAdvancedFilters();
    applyFilters();

    toast('Deleted "' + value + '"');
    closeEditDropdownValueModal();
    renderDropdownDataList();
}

function openMergeDropdownModal() {
    if (!editingDropdownCategory || !editingDropdownOldValue) return;
    const category = editingDropdownCategory;
    const sourceValue = editingDropdownOldValue;

    // Get all other values in this category
    const allValues = getDropdownValuesForCategory(category).filter(v => v !== sourceValue);
    if (allValues.length === 0) {
        toast('No other values to merge into');
        return;
    }

    document.getElementById('mergeDropdownSource').textContent = sourceValue;

    // Populate target dropdown
    const select = document.getElementById('mergeDropdownTarget');
    select.innerHTML = '<option value="">Select target value...</option>';
    allValues.forEach(val => {
        const opt = document.createElement('option');
        opt.value = val;
        opt.textContent = val;
        select.appendChild(opt);
    });

    document.getElementById('mergeDropdownPreview').style.display = 'none';
    document.getElementById('mergeDropdownValueModal').classList.add('on');
}

function closeMergeDropdownModal() {
    document.getElementById('mergeDropdownValueModal').classList.remove('on');
}

function previewMergeDropdown() {
    const target = document.getElementById('mergeDropdownTarget').value;
    const previewDiv = document.getElementById('mergeDropdownPreview');
    const listDiv = document.getElementById('mergeDropdownPreviewList');

    if (!target || !editingDropdownCategory || !editingDropdownOldValue) {
        previewDiv.style.display = 'none';
        return;
    }

    const sourceKeys = getAffectedKeysForValue(editingDropdownCategory, editingDropdownOldValue);
    const sourceVehicles = getAffectedVehiclesForValue(editingDropdownCategory, editingDropdownOldValue);
    const targetKeys = getAffectedKeysForValue(editingDropdownCategory, target);

    let html = '<div style="margin-bottom:6px;">' + sourceKeys.length + ' key' + (sourceKeys.length !== 1 ? 's' : '') + ' will be changed from "' + editingDropdownOldValue + '" to "' + target + '"</div>';
    if (sourceKeys.length > 0) {
        html += sourceKeys.slice(0, 8).map(k => '<div style="padding:2px 0;">Part #' + k.pn + '</div>').join('');
        if (sourceKeys.length > 8) html += '<div style="color:var(--dim);padding:2px 0;">...and ' + (sourceKeys.length - 8) + ' more</div>';
    }
    if (sourceVehicles.length > 0) {
        html += '<div style="margin-top:6px;color:var(--dim);">' + sourceVehicles.length + ' vehicle' + (sourceVehicles.length !== 1 ? 's' : '') + ' affected</div>';
    }
    html += '<div style="margin-top:8px;color:var(--accent);font-size:11px;">Target "' + target + '" currently has ' + targetKeys.length + ' key' + (targetKeys.length !== 1 ? 's' : '') + '</div>';

    listDiv.innerHTML = html;
    previewDiv.style.display = 'block';
}

function executeMergeDropdown() {
    const target = document.getElementById('mergeDropdownTarget').value;
    if (!target) { toast('Please select a target value'); return; }
    if (!editingDropdownCategory || !editingDropdownOldValue) return;

    const category = editingDropdownCategory;
    const source = editingDropdownOldValue;

    const sourceKeys = getAffectedKeysForValue(category, source);
    if (!confirm('Merge "' + source + '" into "' + target + '"?\n\n' + sourceKeys.length + ' key(s) will be updated.')) return;

    // Update all DB keys from source to target
    DB.forEach(key => {
        if (category === 'keyway' && String(key.keyway || '') === source) key.keyway = target;
        else if (category === 'chip' && String(key.chip || '') === source) key.chip = target;
        else if (category === 'keyType' && String(key.keyType || '') === source) key.keyType = target;
        else if (category === 'frequency' && String(key.frequency || '') === source) key.frequency = target;
        else if (category === 'buttons' && String(key.buttons || '') === source) key.buttons = target;
        else if (category === 'battery' && String(key.battery || '') === source) key.battery = target;
        else if (category === 'brand' && String(key.brand || '') === source) key.brand = target;
    });

    // Update custom keys
    customKeys.forEach(key => {
        if (category === 'keyway' && String(key.keyway || '') === source) key.keyway = target;
        else if (category === 'chip' && String(key.chip || '') === source) key.chip = target;
        else if (category === 'keyType' && String(key.keyType || '') === source) key.keyType = target;
        else if (category === 'frequency' && String(key.frequency || '') === source) key.frequency = target;
        else if (category === 'buttons' && String(key.buttons || '') === source) key.buttons = target;
        else if (category === 'battery' && String(key.battery || '') === source) key.battery = target;
        else if (category === 'brand' && String(key.brand || '') === source) key.brand = target;
    });

    // Remove source from custom dropdown values
    if (customDropdownValues[category]) {
        customDropdownValues[category] = customDropdownValues[category].filter(v => v !== source);
    }
    if (category === 'keyway') {
        customKeyways = customKeyways.filter(kw => kw !== source);
        saveCustomKeyways();
    }

    // Persist
    saveCustomKeys();
    saveCustomDropdownValues();
    populateAdvancedFilters();
    applyFilters();

    toast('Merged "' + source + '" into "' + target + '"');
    closeMergeDropdownModal();
    closeEditDropdownValueModal();
    renderDropdownDataList();
}

function openAddDropdownValueModal() {
    const category = document.getElementById('dropdownDataCategory').value;
    document.getElementById('addDropdownValueTitle').textContent = 'Add ' + getDropdownCategoryLabel(category);
    document.getElementById('addDropdownValueInput').value = '';
    document.getElementById('addDropdownValueModal').classList.add('on');
}

function closeAddDropdownValueModal() {
    document.getElementById('addDropdownValueModal').classList.remove('on');
}

function saveNewDropdownValue() {
    const category = document.getElementById('dropdownDataCategory').value;
    const value = document.getElementById('addDropdownValueInput').value.trim();
    if (!value) { toast('Please enter a value'); return; }

    // Check for duplicates
    const existing = getDropdownValuesForCategory(category);
    if (existing.includes(value)) {
        toast('This value already exists');
        return;
    }

    if (!customDropdownValues[category]) customDropdownValues[category] = [];
    customDropdownValues[category].push(value);

    // Also add to customKeyways if it's a keyway
    if (category === 'keyway' && !customKeyways.includes(value)) {
        customKeyways.push(value);
        saveCustomKeyways();
    }

    saveCustomDropdownValues();
    populateAdvancedFilters();

    toast('Added "' + value + '"');
    closeAddDropdownValueModal();
    renderDropdownDataList();
}

// ===================== TOAST =====================
function toast(msg) {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.classList.add('on');
    setTimeout(() => t.classList.remove('on'), 2500);
}

// ===================== INIT =====================
init();
</script>
</body>
</html>
